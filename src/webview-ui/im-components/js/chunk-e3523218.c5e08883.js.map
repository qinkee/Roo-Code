{"version":3,"sources":["webpack:///./src/view/Friend.vue","webpack:///src/view/Friend.vue","webpack:///./src/view/Friend.vue?0b5e","webpack:///./src/view/Friend.vue?6615","webpack:///./src/view/Friend.vue?901b"],"names":["render","_vm","this","_c","_self","staticClass","attrs","model","value","searchText","callback","$$v","expression","slot","on","$event","onShowAddFriend","showAddFriend","onCloseAddFriend","_l","friendValues","friends","i","key","_v","_s","friendKeys","friend","id","activeFriend","onSendMessage","onDelFriend","nativeOn","onActiveItem","length","_e","directives","name","rawName","userInfo","nickName","headImage","showFullImage","userName","sex","signature","isFriend","onAddFriend","staticRenderFns","components","FriendItem","AddFriend","HeadImage","data","methods","console","log","loadUserInfo","$confirm","confirmButtonText","cancelButtonText","type","then","$http","url","method","$message","success","$store","commit","user","params","friendId","online","chat","targetId","showName","headImageThumb","$router","push","updateFriendInfo","JSON","parse","stringify","firstLetter","strText","pinyinOptions","toneType","pyText","pinyin","isEnglish","character","test","computed","friendStore","state","getters","friendMap","map","Map","forEach","f","deleted","includes","letter","toUpperCase","has","get","set","arrayObj","Array","from","sort","a","b","localeCompare","keys","values","component"],"mappings":"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","file":"js/chunk-e3523218.c5e08883.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"friend-page\"},[_c('el-aside',{staticClass:\"friend-list-box\",attrs:{\"width\":\"260px\"}},[_c('div',{staticClass:\"friend-list-header\"},[_c('el-input',{staticClass:\"search-text\",attrs:{\"size\":\"small\",\"placeholder\":\"搜索\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})]),_c('el-button',{staticClass:\"add-btn\",attrs:{\"plain\":\"\",\"icon\":\"el-icon-plus\",\"title\":\"添加好友\"},on:{\"click\":function($event){return _vm.onShowAddFriend()}}}),_c('add-friend',{attrs:{\"dialogVisible\":_vm.showAddFriend},on:{\"close\":_vm.onCloseAddFriend}})],1),_c('el-scrollbar',{staticClass:\"friend-list-items\"},_vm._l((_vm.friendValues),function(friends,i){return _c('div',{key:i},[_c('div',{staticClass:\"index-title\"},[_vm._v(_vm._s(_vm.friendKeys[i]))]),_vm._l((friends),function(friend){return _c('div',{key:friend.id},[_c('friend-item',{attrs:{\"friend\":friend,\"active\":friend.id === _vm.activeFriend.id},on:{\"chat\":function($event){return _vm.onSendMessage(friend)},\"delete\":function($event){return _vm.onDelFriend(friend)}},nativeOn:{\"click\":function($event){return _vm.onActiveItem(friend)}}})],1)}),(i < _vm.friendValues.length - 1)?_c('div',{staticClass:\"divider\"}):_vm._e()],2)}),0)],1),_c('el-container',{staticClass:\"friend-box\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.userInfo.id),expression:\"userInfo.id\"}],staticClass:\"friend-header\"},[_vm._v(\" \"+_vm._s(_vm.userInfo.nickName)+\" \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.userInfo.id),expression:\"userInfo.id\"}]},[_c('div',{staticClass:\"friend-detail\"},[_c('head-image',{attrs:{\"size\":160,\"name\":_vm.userInfo.nickName,\"url\":_vm.userInfo.headImage,\"radius\":\"10%\"},nativeOn:{\"click\":function($event){return _vm.showFullImage()}}}),_c('div',[_c('div',{staticClass:\"info-item\"},[_c('el-descriptions',{staticClass:\"description\",attrs:{\"title\":\"好友信息\",\"column\":1}},[_c('el-descriptions-item',{attrs:{\"label\":\"用户名\"}},[_vm._v(_vm._s(_vm.userInfo.userName)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"昵称\"}},[_vm._v(_vm._s(_vm.userInfo.nickName)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"性别\"}},[_vm._v(_vm._s(_vm.userInfo.sex == 0 ? \"男\" : \"女\"))]),_c('el-descriptions-item',{attrs:{\"label\":\"签名\"}},[_vm._v(_vm._s(_vm.userInfo.signature))])],1)],1),_c('div',{staticClass:\"frient-btn-group\"},[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isFriend),expression:\"isFriend\"}],attrs:{\"icon\":\"el-icon-position\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSendMessage(_vm.userInfo)}}},[_vm._v(\"发消息\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isFriend),expression:\"!isFriend\"}],attrs:{\"icon\":\"el-icon-plus\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onAddFriend(_vm.userInfo)}}},[_vm._v(\"加为好友\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isFriend),expression:\"isFriend\"}],attrs:{\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.onDelFriend(_vm.userInfo)}}},[_vm._v(\"删除好友\")])],1)])],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-container class=\"friend-page\">\n\t\t<el-aside width=\"260px\" class=\"friend-list-box\">\n\t\t\t<div class=\"friend-list-header\">\n\t\t\t\t<el-input class=\"search-text\" size=\"small\" placeholder=\"搜索\" v-model=\"searchText\">\n\t\t\t\t\t<i class=\"el-icon-search el-input__icon\" slot=\"prefix\"> </i>\n\t\t\t\t</el-input>\n\t\t\t\t<el-button plain class=\"add-btn\" icon=\"el-icon-plus\" title=\"添加好友\"\n\t\t\t\t\t@click=\"onShowAddFriend()\"></el-button>\n\t\t\t\t<add-friend :dialogVisible=\"showAddFriend\" @close=\"onCloseAddFriend\"></add-friend>\n\t\t\t</div>\n\t\t\t<el-scrollbar class=\"friend-list-items\">\n\t\t\t\t<div v-for=\"(friends, i) in friendValues\" :key=\"i\">\n\t\t\t\t\t<div class=\"index-title\">{{ friendKeys[i] }}</div>\n\t\t\t\t\t<div v-for=\"(friend) in friends\" :key=\"friend.id\">\n\t\t\t\t\t\t<friend-item :friend=\"friend\" :active=\"friend.id === activeFriend.id\"\n\t\t\t\t\t\t\t@chat=\"onSendMessage(friend)\" @delete=\"onDelFriend(friend)\"\n\t\t\t\t\t\t\t@click.native=\"onActiveItem(friend)\">\n\t\t\t\t\t\t</friend-item>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"i < friendValues.length - 1\" class=\"divider\"></div>\n\t\t\t\t</div>\n\t\t\t</el-scrollbar>\n\t\t</el-aside>\n\t\t<el-container class=\"friend-box\">\n\t\t\t<div class=\"friend-header\" v-show=\"userInfo.id\">\n\t\t\t\t{{ userInfo.nickName }}\n\t\t\t</div>\n\t\t\t<div v-show=\"userInfo.id\">\n\t\t\t\t<div class=\"friend-detail\">\n\t\t\t\t\t<head-image :size=\"160\" :name=\"userInfo.nickName\" :url=\"userInfo.headImage\" radius=\"10%\"\n\t\t\t\t\t\t@click.native=\"showFullImage()\"></head-image>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\"info-item\">\n\t\t\t\t\t\t\t<el-descriptions title=\"好友信息\" class=\"description\" :column=\"1\">\n\t\t\t\t\t\t\t\t<el-descriptions-item label=\"用户名\">{{ userInfo.userName }}\n\t\t\t\t\t\t\t\t</el-descriptions-item>\n\t\t\t\t\t\t\t\t<el-descriptions-item label=\"昵称\">{{ userInfo.nickName }}\n\t\t\t\t\t\t\t\t</el-descriptions-item>\n\t\t\t\t\t\t\t\t<el-descriptions-item label=\"性别\">{{ userInfo.sex == 0 ? \"男\" : \"女\"\n\t\t\t\t\t\t\t\t}}</el-descriptions-item>\n\t\t\t\t\t\t\t\t<el-descriptions-item label=\"签名\">{{ userInfo.signature }}</el-descriptions-item>\n\t\t\t\t\t\t\t</el-descriptions>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"frient-btn-group\">\n\t\t\t\t\t\t\t<el-button v-show=\"isFriend\" icon=\"el-icon-position\" type=\"primary\"\n\t\t\t\t\t\t\t\t@click=\"onSendMessage(userInfo)\">发消息</el-button>\n\t\t\t\t\t\t\t<el-button v-show=\"!isFriend\" icon=\"el-icon-plus\" type=\"primary\"\n\t\t\t\t\t\t\t\t@click=\"onAddFriend(userInfo)\">加为好友</el-button>\n\t\t\t\t\t\t\t<el-button v-show=\"isFriend\" icon=\"el-icon-delete\" type=\"danger\"\n\t\t\t\t\t\t\t\t@click=\"onDelFriend(userInfo)\">删除好友</el-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-container>\n\t</el-container>\n</template>\n\n<script>\nimport FriendItem from \"../components/friend/FriendItem.vue\";\nimport AddFriend from \"../components/friend/AddFriend.vue\";\nimport HeadImage from \"../components/common/HeadImage.vue\";\nimport { pinyin } from 'pinyin-pro';\n\nexport default {\n\tname: \"friend\",\n\tcomponents: {\n\t\tFriendItem,\n\t\tAddFriend,\n\t\tHeadImage\n\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsearchText: \"\",\n\t\t\tshowAddFriend: false,\n\t\t\tuserInfo: {},\n\t\t\tactiveFriend: {}\n\t\t}\n\t},\n\tmethods: {\n\t\tonShowAddFriend() {\n\t\t\tthis.showAddFriend = true;\n\t\t},\n\t\tonCloseAddFriend() {\n\t\t\tthis.showAddFriend = false;\n\t\t},\n\t\tonActiveItem(friend) {\n\t\t\tconsole.log('hahahha')\n\t\t\tthis.activeFriend = friend;\n\t\t\tthis.loadUserInfo(friend.id);\n\t\t},\n\t\tonDelFriend(friend) {\n\t\t\tthis.$confirm(`确认删除'${friend.nickName}',并清空聊天记录吗?`, '确认解除?', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/friend/delete/${friend.id}`,\n\t\t\t\t\tmethod: 'delete'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$message.success(\"删除好友成功\");\n\t\t\t\t\tthis.$store.commit(\"removeFriend\", friend.id);\n\t\t\t\t\tthis.$store.commit(\"removePrivateChat\", friend.id);\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tonAddFriend(user) {\n\t\t\tthis.$http({\n\t\t\t\turl: \"/friend/add\",\n\t\t\t\tmethod: \"post\",\n\t\t\t\tparams: {\n\t\t\t\t\tfriendId: user.id\n\t\t\t\t}\n\t\t\t}).then(() => {\n\t\t\t\tthis.$message.success(\"添加成功，对方已成为您的好友\");\n\t\t\t\tlet friend = {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tnickName: user.nickName,\n\t\t\t\t\theadImage: user.headImage,\n\t\t\t\t\tonline: user.online\n\t\t\t\t}\n\t\t\t\tthis.$store.commit(\"addFriend\", friend);\n\t\t\t})\n\t\t},\n\t\tonSendMessage(user) {\n\t\t\tlet chat = {\n\t\t\t\ttype: 'PRIVATE',\n\t\t\t\ttargetId: user.id,\n\t\t\t\tshowName: user.nickName,\n\t\t\t\theadImage: user.headImageThumb,\n\t\t\t};\n\t\t\tthis.$store.commit(\"openChat\", chat);\n\t\t\tthis.$store.commit(\"activeChat\", 0);\n\t\t\tthis.$router.push(\"/home/chat\");\n\t\t},\n\t\tshowFullImage() {\n\t\t\tif (this.userInfo.headImage) {\n\t\t\t\tthis.$store.commit('showFullImageBox', this.userInfo.headImage);\n\t\t\t}\n\t\t},\n\t\tupdateFriendInfo() {\n\t\t\tif (this.isFriend) {\n\t\t\t\t// store的数据不能直接修改，深拷贝一份store的数据\n\t\t\t\tlet friend = JSON.parse(JSON.stringify(this.activeFriend));\n\t\t\t\tfriend.headImage = this.userInfo.headImageThumb;\n\t\t\t\tfriend.nickName = this.userInfo.nickName;\n\t\t\t\tthis.$store.commit(\"updateChatFromFriend\", friend);\n\t\t\t\tthis.$store.commit(\"updateFriend\", friend);\n\t\t\t}\n\t\t},\n\t\tloadUserInfo(id) {\n\t\t\t// 获取好友用户信息\n\t\t\tthis.$http({\n\t\t\t\turl: `/user/find/${id}`,\n\t\t\t\tmethod: 'GET'\n\t\t\t}).then((userInfo) => {\n\t\t\t\tthis.userInfo = userInfo;\n\t\t\t\tthis.updateFriendInfo();\n\t\t\t})\n\t\t},\n\t\tfirstLetter(strText) {\n\t\t\t// 使用pinyin-pro库将中文转换为拼音\n\t\t\tlet pinyinOptions = {\n\t\t\t\ttoneType: 'none', // 无声调\n\t\t\t\ttype: 'normal' // 普通拼音\n\t\t\t};\n\t\t\tlet pyText = pinyin(strText, pinyinOptions);\n\t\t\treturn pyText[0];\n\t\t},\n\t\tisEnglish(character) {\n\t\t\treturn /^[A-Za-z]+$/.test(character);\n\t\t}\n\t},\n\tcomputed: {\n\t\tfriendStore() {\n\t\t\treturn this.$store.state.friendStore;\n\t\t},\n\t\tisFriend() {\n\t\t\treturn this.$store.getters.isFriend(this.userInfo.id);\n\t\t},\n\t\tfriendMap() {\n\t\t\t// 按首字母分组\n\t\t\tlet map = new Map();\n\t\t\tthis.friendStore.friends.forEach((f) => {\n\t\t\t\tif (f.deleted || (this.searchText && !f.nickName.includes(this.searchText))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet letter = this.firstLetter(f.nickName).toUpperCase();\n\t\t\t\t// 非英文一律为#组\n\t\t\t\tif (!this.isEnglish(letter)) {\n\t\t\t\t\tletter = \"#\"\n\t\t\t\t}\n\t\t\t\tif (f.online) {\n\t\t\t\t\tletter = '在线'\n\t\t\t\t}\n\t\t\t\tif (map.has(letter)) {\n\t\t\t\t\tmap.get(letter).push(f);\n\t\t\t\t} else {\n\t\t\t\t\tmap.set(letter, [f]);\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 排序\n\t\t\tlet arrayObj = Array.from(map);\n\t\t\tarrayObj.sort((a, b) => {\n\t\t\t\t// #组在最后面\n\t\t\t\tif (a[0] == '#' || b[0] == '#') {\n\t\t\t\t\treturn b[0].localeCompare(a[0])\n\t\t\t\t}\n\t\t\t\treturn a[0].localeCompare(b[0])\n\t\t\t})\n\t\t\tmap = new Map(arrayObj.map(i => [i[0], i[1]]));\n\t\t\treturn map;\n\t\t},\n\t\tfriendKeys() {\n\t\t\treturn Array.from(this.friendMap.keys());\n\t\t},\n\t\tfriendValues() {\n\t\t\treturn Array.from(this.friendMap.values());\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.friend-page {\n\t.friend-list-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbackground: var(--im-background);\n\n\t\t.friend-list-header {\n\t\t\theight: 50px;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 8px;\n\n\t\t\t.add-btn {\n\t\t\t\tpadding: 5px !important;\n\t\t\t\tmargin: 5px;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tborder-radius: 50%;\n\t\t\t}\n\t\t}\n\n\t\t.friend-list-items {\n\t\t\tflex: 1;\n\n\t\t\t.index-title {\n\t\t\t\ttext-align: left;\n\t\t\t\tfont-size: var(--im-larger-size-larger);\n\t\t\t\tpadding: 5px 15px;\n\t\t\t\tcolor: var(--im-text-color-light);\n\t\t\t}\n\t\t}\n\t}\n\n\t.friend-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t.friend-header {\n\t\t\theight: 50px;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 12px;\n\t\t\tfont-size: var(--im-font-size-larger);\n\t\t\tborder-bottom: var(--im-border);\n\t\t\tbox-sizing: border-box;\n\t\t}\n\n\t\t.friend-detail {\n\t\t\tdisplay: flex;\n\t\t\tpadding: 50px 80px 20px 80px;\n\t\t\ttext-align: center;\n\n\t\t\t.info-item {\n\t\t\t\tmargin-left: 20px;\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t\tborder: 1px #ddd solid;\n\t\t\t}\n\n\t\t\t.description {\n\t\t\t\tpadding: 20px 20px 0 20px;\n\t\t\t}\n\t\t}\n\n\t\t.frient-btn-group {\n\t\t\ttext-align: left !important;\n\t\t\tpadding: 20px;\n\t\t}\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Friend.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Friend.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Friend.vue?vue&type=template&id=2f32779a\"\nimport script from \"./Friend.vue?vue&type=script&lang=js\"\nexport * from \"./Friend.vue?vue&type=script&lang=js\"\nimport style0 from \"./Friend.vue?vue&type=style&index=0&id=2f32779a&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Friend.vue?vue&type=style&index=0&id=2f32779a&prod&lang=scss\""],"sourceRoot":""}