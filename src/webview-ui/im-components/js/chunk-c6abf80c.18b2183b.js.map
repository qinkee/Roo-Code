{"version":3,"sources":["webpack:///./src/components/message/MessageRendererDemo.vue?09b8","webpack:///./src/components/message/MessageRendererDemo.vue","webpack:///src/components/message/MessageRendererDemo.vue","webpack:///./src/components/message/MessageRendererDemo.vue?f825","webpack:///./src/components/message/MessageRendererDemo.vue?0500"],"names":["render","_vm","this","_c","_self","staticClass","_v","directives","name","rawName","value","selectedType","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","multiple","loadTestMessage","attrs","enableKatex","domProps","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","enableMermaid","enableHighlight","isStreaming","startStreaming","stopStreaming","_e","customContent","composing","renderCustomContent","ref","currentMessage","rendererConfig","onRendered","onStreamingStart","onContentUpdate","onStreamingFinish","performanceStats","_s","JSON","stringify","staticRenderFns","TEST_MESSAGES","text","content","type","markdown","format","agent","isAgent","agentName","code","math","mermaid","mixed","streaming","STREAMING_CONTENT","components","UnifiedMessageRenderer","StreamingRenderer","data","streamingChunks","streamingIndex","streamingTimer","computed","katex","highlight","methods","alert","splitIntoChunks","$refs","streamingRenderer","setInterval","length","chunk","appendChunk","clearInterval","finishStreaming","chunkSize","chunks","i","push","console","log","stats","mounted","beforeDestroy","component"],"mappings":"2IAAA,W,iECAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACE,YAAY,yBAAyB,CAACF,EAAG,KAAK,CAACF,EAAIK,GAAG,gBAAgBH,EAAG,MAAM,CAACE,YAAY,kBAAkB,CAACF,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,KAAK,CAACF,EAAIK,GAAG,UAAUH,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,QAAQ,CAACF,EAAIK,GAAG,WAAWH,EAAG,SAAS,CAACI,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOT,EAAIU,aAAcC,WAAW,iBAAiBC,GAAG,CAAC,OAAS,CAAC,SAASC,GAAQ,IAAIC,EAAgBC,MAAMC,UAAUC,OAAOC,KAAKL,EAAOM,OAAOC,SAAQ,SAASC,GAAG,OAAOA,EAAEC,YAAWC,KAAI,SAASF,GAAG,IAAIG,EAAM,WAAYH,EAAIA,EAAEI,OAASJ,EAAEZ,MAAM,OAAOe,KAAOxB,EAAIU,aAAaG,EAAOM,OAAOO,SAAWZ,EAAgBA,EAAc,IAAId,EAAI2B,mBAAmB,CAACzB,EAAG,SAAS,CAAC0B,MAAM,CAAC,MAAQ,SAAS,CAAC5B,EAAIK,GAAG,SAASH,EAAG,SAAS,CAAC0B,MAAM,CAAC,MAAQ,aAAa,CAAC5B,EAAIK,GAAG,cAAcH,EAAG,SAAS,CAAC0B,MAAM,CAAC,MAAQ,UAAU,CAAC5B,EAAIK,GAAG,WAAWH,EAAG,SAAS,CAAC0B,MAAM,CAAC,MAAQ,SAAS,CAAC5B,EAAIK,GAAG,SAASH,EAAG,SAAS,CAAC0B,MAAM,CAAC,MAAQ,SAAS,CAAC5B,EAAIK,GAAG,UAAUH,EAAG,SAAS,CAAC0B,MAAM,CAAC,MAAQ,YAAY,CAAC5B,EAAIK,GAAG,eAAeH,EAAG,SAAS,CAAC0B,MAAM,CAAC,MAAQ,UAAU,CAAC5B,EAAIK,GAAG,UAAUH,EAAG,SAAS,CAAC0B,MAAM,CAAC,MAAQ,cAAc,CAAC5B,EAAIK,GAAG,cAAcH,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACI,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOT,EAAI6B,YAAalB,WAAW,gBAAgBiB,MAAM,CAAC,KAAO,YAAYE,SAAS,CAAC,QAAUf,MAAMgB,QAAQ/B,EAAI6B,aAAa7B,EAAIgC,GAAGhC,EAAI6B,YAAY,OAAO,EAAG7B,EAAI6B,aAAcjB,GAAG,CAAC,OAAS,SAASC,GAAQ,IAAIoB,EAAIjC,EAAI6B,YAAYK,EAAKrB,EAAOM,OAAOgB,IAAID,EAAKE,QAAuB,GAAGrB,MAAMgB,QAAQE,GAAK,CAAC,IAAII,EAAI,KAAKC,EAAItC,EAAIgC,GAAGC,EAAII,GAAQH,EAAKE,QAASE,EAAI,IAAItC,EAAI6B,YAAYI,EAAIM,OAAO,CAACF,KAAYC,GAAK,IAAItC,EAAI6B,YAAYI,EAAIO,MAAM,EAAEF,GAAKC,OAAON,EAAIO,MAAMF,EAAI,UAAWtC,EAAI6B,YAAYM,MAASnC,EAAIK,GAAG,gBAAgBH,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACI,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOT,EAAIyC,cAAe9B,WAAW,kBAAkBiB,MAAM,CAAC,KAAO,YAAYE,SAAS,CAAC,QAAUf,MAAMgB,QAAQ/B,EAAIyC,eAAezC,EAAIgC,GAAGhC,EAAIyC,cAAc,OAAO,EAAGzC,EAAIyC,eAAgB7B,GAAG,CAAC,OAAS,SAASC,GAAQ,IAAIoB,EAAIjC,EAAIyC,cAAcP,EAAKrB,EAAOM,OAAOgB,IAAID,EAAKE,QAAuB,GAAGrB,MAAMgB,QAAQE,GAAK,CAAC,IAAII,EAAI,KAAKC,EAAItC,EAAIgC,GAAGC,EAAII,GAAQH,EAAKE,QAASE,EAAI,IAAItC,EAAIyC,cAAcR,EAAIM,OAAO,CAACF,KAAYC,GAAK,IAAItC,EAAIyC,cAAcR,EAAIO,MAAM,EAAEF,GAAKC,OAAON,EAAIO,MAAMF,EAAI,UAAWtC,EAAIyC,cAAcN,MAASnC,EAAIK,GAAG,qBAAqBH,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,QAAQ,CAACA,EAAG,QAAQ,CAACI,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOT,EAAI0C,gBAAiB/B,WAAW,oBAAoBiB,MAAM,CAAC,KAAO,YAAYE,SAAS,CAAC,QAAUf,MAAMgB,QAAQ/B,EAAI0C,iBAAiB1C,EAAIgC,GAAGhC,EAAI0C,gBAAgB,OAAO,EAAG1C,EAAI0C,iBAAkB9B,GAAG,CAAC,OAAS,SAASC,GAAQ,IAAIoB,EAAIjC,EAAI0C,gBAAgBR,EAAKrB,EAAOM,OAAOgB,IAAID,EAAKE,QAAuB,GAAGrB,MAAMgB,QAAQE,GAAK,CAAC,IAAII,EAAI,KAAKC,EAAItC,EAAIgC,GAAGC,EAAII,GAAQH,EAAKE,QAASE,EAAI,IAAItC,EAAI0C,gBAAgBT,EAAIM,OAAO,CAACF,KAAYC,GAAK,IAAItC,EAAI0C,gBAAgBT,EAAIO,MAAM,EAAEF,GAAKC,OAAON,EAAIO,MAAMF,EAAI,UAAWtC,EAAI0C,gBAAgBP,MAASnC,EAAIK,GAAG,gBAAsC,cAArBL,EAAIU,aAA8BR,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,SAAS,CAAC0B,MAAM,CAAC,SAAW5B,EAAI2C,aAAa/B,GAAG,CAAC,MAAQZ,EAAI4C,iBAAiB,CAAC5C,EAAIK,GAAG,YAAYH,EAAG,SAAS,CAAC0B,MAAM,CAAC,UAAY5B,EAAI2C,aAAa/B,GAAG,CAAC,MAAQZ,EAAI6C,gBAAgB,CAAC7C,EAAIK,GAAG,cAAcL,EAAI8C,KAAK5C,EAAG,MAAM,CAACE,YAAY,iBAAiB,CAACF,EAAG,QAAQ,CAACF,EAAIK,GAAG,YAAYH,EAAG,WAAW,CAACI,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOT,EAAI+C,cAAepC,WAAW,kBAAkBiB,MAAM,CAAC,KAAO,KAAK,KAAO,MAAME,SAAS,CAAC,MAAS9B,EAAI+C,eAAgBnC,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOM,OAAO6B,YAAiBhD,EAAI+C,cAAclC,EAAOM,OAAOV,WAAUP,EAAG,SAAS,CAACU,GAAG,CAAC,MAAQZ,EAAIiD,sBAAsB,CAACjD,EAAIK,GAAG,iBAAiBH,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,KAAK,CAACF,EAAIK,GAAG,UAAgC,cAArBL,EAAIU,aAA8BR,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,2BAA2B,CAACgD,IAAI,iBAAiBtB,MAAM,CAAC,QAAU5B,EAAImD,eAAe,gBAAgBnD,EAAIoD,gBAAgBxC,GAAG,CAAC,SAAWZ,EAAIqD,eAAe,GAAGnD,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,qBAAqB,CAACgD,IAAI,oBAAoBtB,MAAM,CAAC,kBAAkB5B,EAAImD,eAAe,gBAAgBnD,EAAIoD,gBAAgBxC,GAAG,CAAC,kBAAkBZ,EAAIsD,iBAAiB,iBAAiBtD,EAAIuD,gBAAgB,mBAAmBvD,EAAIwD,sBAAsB,GAAIxD,EAAIyD,iBAAkBvD,EAAG,MAAM,CAACE,YAAY,qBAAqB,CAACF,EAAG,KAAK,CAACF,EAAIK,GAAG,UAAUH,EAAG,MAAM,CAACF,EAAIK,GAAGL,EAAI0D,GAAGC,KAAKC,UAAU5D,EAAIyD,iBAAkB,KAAM,SAASzD,EAAI8C,YAE5jJe,EAAkB,G,oCC4FtB,MAAAC,EAAA,CACAC,KAAA,CACAC,QAAA,mDACAC,KAAA,QAGAC,SAAA,CACAF,QAAA,6ZAqCAC,KAAA,WACAE,OAAA,YAGAC,MAAA,CACAJ,QAAA,0VAoBAC,KAAA,QACAI,SAAA,EACAC,UAAA,QAGAC,KAAA,CACAP,QAAA,m4BAgDAC,KAAA,WACAE,OAAA,YAGAK,KAAA,CACAR,QAAA,0iBAkBAC,KAAA,WACAE,OAAA,YAGAM,QAAA,CACAT,QAAA,keA4BAC,KAAA,WACAE,OAAA,YAGAO,MAAA,CACAV,QAAA,4kBA+CAC,KAAA,QACAE,OAAA,YAGAQ,UAAA,CACAX,QAAA,GACAC,KAAA,SACAU,WAAA,IAKAC,EAAA,yYAgCe,OACfrE,KAAA,sBAEAsE,WAAA,CACAC,8BACAC,0BAGAC,OACA,OACAtE,aAAA,WACAyC,eAAAW,EAAAI,SACAnB,cAAA,GAGAlB,aAAA,EACAY,eAAA,EACAC,iBAAA,EAGAC,aAAA,EACAsC,gBAAA,GACAC,eAAA,EACAC,eAAA,KAGA1B,iBAAA,OAIA2B,SAAA,CACAhC,iBACA,OACAiC,MAAA,KAAAxD,YACA4C,QAAA,KAAAhC,cACA6C,UAAA,KAAA5C,mBAKA6C,QAAA,CACA5D,kBACA,KAAAwB,eAAAW,EAAA,KAAApD,eAAAoD,EAAAC,KACA,KAAAN,iBAAA,MAGAR,sBACA,KAAAF,cAKA,KAAAI,eAAA,CACAa,QAAA,KAAAjB,cACAkB,KAAA,SACAE,OAAA,YAPAqB,MAAA,aAYA5C,iBACA,KAAAD,cAEA,KAAAA,aAAA,EACA,KAAAsC,gBAAA,KAAAQ,gBAAAb,EAAA,IACA,KAAAM,eAAA,EAGA,KAAAQ,MAAAC,kBAAA/C,iBAGA,KAAAuC,eAAAS,YAAA,KACA,QAAAV,gBAAA,KAAAD,gBAAAY,OAEA,YADA,KAAAhD,gBAIA,MAAAiD,EAAA,KAAAb,gBAAA,KAAAC,kBACA,KAAAQ,MAAAC,kBAAAI,YAAAD,IACA,OAGAjD,gBACA,KAAAF,cAEAqD,cAAA,KAAAb,gBACA,KAAAxC,aAAA,EAEA,KAAA+C,MAAAC,mBACA,KAAAD,MAAAC,kBAAAM,oBAIAR,gBAAA1B,EAAAmC,GACA,MAAAC,EAAA,GACA,QAAAC,EAAA,EAAAA,EAAArC,EAAA8B,OAAAO,GAAAF,EACAC,EAAAE,KAAAtC,EAAAvB,MAAA4D,IAAAF,IAEA,OAAAC,GAIA9C,aACAiD,QAAAC,IAAA,WAGAjD,mBACAgD,QAAAC,IAAA,UACA,KAAA9C,iBAAA,MAGAF,gBAAAS,GACAsC,QAAAC,IAAA,WAAAvC,EAAA6B,SAGArC,kBAAAwB,GACAsB,QAAAC,IAAA,SAAAvB,GACA,KAAAvB,iBAAAuB,EAAAwB,QAIAC,UAEA,KAAA9E,mBAGA+E,gBAEA,KAAAvB,gBACAa,cAAA,KAAAb,kBClfsX,I,wBCQlXwB,EAAY,eACd,EACA5G,EACA8D,GACA,EACA,KACA,WACA,MAIa,aAAA8C,E","file":"js/chunk-c6abf80c.18b2183b.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageRendererDemo.vue?vue&type=style&index=0&id=0f33ae9e&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"message-renderer-demo\"},[_c('h1',[_vm._v(\"ç»Ÿä¸€æ¶ˆæ¯æ¸²æŸ“ç»„ä»¶æµ‹è¯•\")]),_c('div',{staticClass:\"demo-container\"},[_c('div',{staticClass:\"control-panel\"},[_c('h3',[_vm._v(\"æµ‹è¯•æ§åˆ¶\")]),_c('div',{staticClass:\"control-group\"},[_c('label',[_vm._v(\"æ¶ˆæ¯ç±»å‹ï¼š\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedType),expression:\"selectedType\"}],on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedType=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.loadTestMessage]}},[_c('option',{attrs:{\"value\":\"text\"}},[_vm._v(\"çº¯æ–‡æœ¬\")]),_c('option',{attrs:{\"value\":\"markdown\"}},[_vm._v(\"Markdown\")]),_c('option',{attrs:{\"value\":\"agent\"}},[_vm._v(\"æ™ºèƒ½ä½“æ¶ˆæ¯\")]),_c('option',{attrs:{\"value\":\"code\"}},[_vm._v(\"ä»£ç å—\")]),_c('option',{attrs:{\"value\":\"math\"}},[_vm._v(\"æ•°å­¦å…¬å¼\")]),_c('option',{attrs:{\"value\":\"mermaid\"}},[_vm._v(\"Mermaidå›¾è¡¨\")]),_c('option',{attrs:{\"value\":\"mixed\"}},[_vm._v(\"æ··åˆå†…å®¹\")]),_c('option',{attrs:{\"value\":\"streaming\"}},[_vm._v(\"æµå¼æ¶ˆæ¯\")])])]),_c('div',{staticClass:\"control-group\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enableKatex),expression:\"enableKatex\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.enableKatex)?_vm._i(_vm.enableKatex,null)>-1:(_vm.enableKatex)},on:{\"change\":function($event){var $$a=_vm.enableKatex,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.enableKatex=$$a.concat([$$v]))}else{$$i>-1&&(_vm.enableKatex=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.enableKatex=$$c}}}}),_vm._v(\" å¯ç”¨æ•°å­¦å…¬å¼ \")])]),_c('div',{staticClass:\"control-group\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enableMermaid),expression:\"enableMermaid\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.enableMermaid)?_vm._i(_vm.enableMermaid,null)>-1:(_vm.enableMermaid)},on:{\"change\":function($event){var $$a=_vm.enableMermaid,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.enableMermaid=$$a.concat([$$v]))}else{$$i>-1&&(_vm.enableMermaid=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.enableMermaid=$$c}}}}),_vm._v(\" å¯ç”¨Mermaidå›¾è¡¨ \")])]),_c('div',{staticClass:\"control-group\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enableHighlight),expression:\"enableHighlight\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.enableHighlight)?_vm._i(_vm.enableHighlight,null)>-1:(_vm.enableHighlight)},on:{\"change\":function($event){var $$a=_vm.enableHighlight,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.enableHighlight=$$a.concat([$$v]))}else{$$i>-1&&(_vm.enableHighlight=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.enableHighlight=$$c}}}}),_vm._v(\" å¯ç”¨ä»£ç é«˜äº® \")])]),(_vm.selectedType === 'streaming')?_c('div',{staticClass:\"control-group\"},[_c('button',{attrs:{\"disabled\":_vm.isStreaming},on:{\"click\":_vm.startStreaming}},[_vm._v(\"å¼€å§‹æµå¼ä¼ è¾“\")]),_c('button',{attrs:{\"disabled\":!_vm.isStreaming},on:{\"click\":_vm.stopStreaming}},[_vm._v(\"åœæ­¢æµå¼ä¼ è¾“\")])]):_vm._e(),_c('div',{staticClass:\"control-group\"},[_c('label',[_vm._v(\"è‡ªå®šä¹‰å†…å®¹ï¼š\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.customContent),expression:\"customContent\"}],attrs:{\"rows\":\"10\",\"cols\":\"50\"},domProps:{\"value\":(_vm.customContent)},on:{\"input\":function($event){if($event.target.composing)return;_vm.customContent=$event.target.value}}}),_c('button',{on:{\"click\":_vm.renderCustomContent}},[_vm._v(\"æ¸²æŸ“è‡ªå®šä¹‰å†…å®¹\")])])]),_c('div',{staticClass:\"render-panel\"},[_c('h3',[_vm._v(\"æ¸²æŸ“ç»“æœ\")]),(_vm.selectedType !== 'streaming')?_c('div',{staticClass:\"message-wrapper\"},[_c('unified-message-renderer',{ref:\"normalRenderer\",attrs:{\"message\":_vm.currentMessage,\"custom-config\":_vm.rendererConfig},on:{\"rendered\":_vm.onRendered}})],1):_c('div',{staticClass:\"message-wrapper\"},[_c('streaming-renderer',{ref:\"streamingRenderer\",attrs:{\"initial-message\":_vm.currentMessage,\"custom-config\":_vm.rendererConfig},on:{\"streaming-start\":_vm.onStreamingStart,\"content-update\":_vm.onContentUpdate,\"streaming-finish\":_vm.onStreamingFinish}})],1),(_vm.performanceStats)?_c('div',{staticClass:\"performance-stats\"},[_c('h4',[_vm._v(\"æ€§èƒ½ç»Ÿè®¡\")]),_c('pre',[_vm._v(_vm._s(JSON.stringify(_vm.performanceStats, null, 2)))])]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"message-renderer-demo\">\n    <h1>ç»Ÿä¸€æ¶ˆæ¯æ¸²æŸ“ç»„ä»¶æµ‹è¯•</h1>\n    \n    <div class=\"demo-container\">\n      <!-- æ§åˆ¶é¢æ¿ -->\n      <div class=\"control-panel\">\n        <h3>æµ‹è¯•æ§åˆ¶</h3>\n        \n        <div class=\"control-group\">\n          <label>æ¶ˆæ¯ç±»å‹ï¼š</label>\n          <select v-model=\"selectedType\" @change=\"loadTestMessage\">\n            <option value=\"text\">çº¯æ–‡æœ¬</option>\n            <option value=\"markdown\">Markdown</option>\n            <option value=\"agent\">æ™ºèƒ½ä½“æ¶ˆæ¯</option>\n            <option value=\"code\">ä»£ç å—</option>\n            <option value=\"math\">æ•°å­¦å…¬å¼</option>\n            <option value=\"mermaid\">Mermaidå›¾è¡¨</option>\n            <option value=\"mixed\">æ··åˆå†…å®¹</option>\n            <option value=\"streaming\">æµå¼æ¶ˆæ¯</option>\n          </select>\n        </div>\n        \n        <div class=\"control-group\">\n          <label>\n            <input type=\"checkbox\" v-model=\"enableKatex\"> å¯ç”¨æ•°å­¦å…¬å¼\n          </label>\n        </div>\n        \n        <div class=\"control-group\">\n          <label>\n            <input type=\"checkbox\" v-model=\"enableMermaid\"> å¯ç”¨Mermaidå›¾è¡¨\n          </label>\n        </div>\n        \n        <div class=\"control-group\">\n          <label>\n            <input type=\"checkbox\" v-model=\"enableHighlight\"> å¯ç”¨ä»£ç é«˜äº®\n          </label>\n        </div>\n        \n        <div class=\"control-group\" v-if=\"selectedType === 'streaming'\">\n          <button @click=\"startStreaming\" :disabled=\"isStreaming\">å¼€å§‹æµå¼ä¼ è¾“</button>\n          <button @click=\"stopStreaming\" :disabled=\"!isStreaming\">åœæ­¢æµå¼ä¼ è¾“</button>\n        </div>\n        \n        <div class=\"control-group\">\n          <label>è‡ªå®šä¹‰å†…å®¹ï¼š</label>\n          <textarea v-model=\"customContent\" rows=\"10\" cols=\"50\"></textarea>\n          <button @click=\"renderCustomContent\">æ¸²æŸ“è‡ªå®šä¹‰å†…å®¹</button>\n        </div>\n      </div>\n      \n      <!-- æ¸²æŸ“ç»“æœ -->\n      <div class=\"render-panel\">\n        <h3>æ¸²æŸ“ç»“æœ</h3>\n        \n        <!-- æ™®é€šæ¶ˆæ¯æ¸²æŸ“ -->\n        <div v-if=\"selectedType !== 'streaming'\" class=\"message-wrapper\">\n          <unified-message-renderer\n            ref=\"normalRenderer\"\n            :message=\"currentMessage\"\n            :custom-config=\"rendererConfig\"\n            @rendered=\"onRendered\"\n          />\n        </div>\n        \n        <!-- æµå¼æ¶ˆæ¯æ¸²æŸ“ -->\n        <div v-else class=\"message-wrapper\">\n          <streaming-renderer\n            ref=\"streamingRenderer\"\n            :initial-message=\"currentMessage\"\n            :custom-config=\"rendererConfig\"\n            @streaming-start=\"onStreamingStart\"\n            @content-update=\"onContentUpdate\"\n            @streaming-finish=\"onStreamingFinish\"\n          />\n        </div>\n        \n        <!-- æ€§èƒ½ç»Ÿè®¡ -->\n        <div v-if=\"performanceStats\" class=\"performance-stats\">\n          <h4>æ€§èƒ½ç»Ÿè®¡</h4>\n          <pre>{{ JSON.stringify(performanceStats, null, 2) }}</pre>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport UnifiedMessageRenderer from './UnifiedMessageRenderer.vue';\nimport StreamingRenderer from './StreamingRenderer.vue';\n\n// æµ‹è¯•æ•°æ®\nconst TEST_MESSAGES = {\n  text: {\n    content: 'è¿™æ˜¯ä¸€æ¡æ™®é€šçš„æ–‡æœ¬æ¶ˆæ¯ã€‚\\nåŒ…å«æ¢è¡Œç¬¦ã€‚\\nè¿˜æœ‰ä¸€ä¸ªé“¾æ¥ï¼šhttps://example.com',\n    type: 'text'\n  },\n  \n  markdown: {\n    content: `# Markdown æµ‹è¯•\n\n## äºŒçº§æ ‡é¢˜\n\nè¿™æ˜¯ä¸€ä¸ªåŒ…å«å„ç§ **Markdown** è¯­æ³•çš„æµ‹è¯•æ¶ˆæ¯ã€‚\n\n### åˆ—è¡¨æµ‹è¯•\n- æ— åºåˆ—è¡¨é¡¹ 1\n- æ— åºåˆ—è¡¨é¡¹ 2\n  - åµŒå¥—é¡¹\n  - å¦ä¸€ä¸ªåµŒå¥—é¡¹\n\n1. æœ‰åºåˆ—è¡¨é¡¹ 1\n2. æœ‰åºåˆ—è¡¨é¡¹ 2\n\n### ä»»åŠ¡åˆ—è¡¨\n- [x] å·²å®Œæˆçš„ä»»åŠ¡\n- [ ] æœªå®Œæˆçš„ä»»åŠ¡\n- [ ] å¦ä¸€ä¸ªå¾…åŠäº‹é¡¹\n\n### å¼•ç”¨\n> è¿™æ˜¯ä¸€æ®µå¼•ç”¨æ–‡å­—\n> å¯ä»¥æœ‰å¤šè¡Œ\n\n### è¡¨æ ¼\n| åˆ—1 | åˆ—2 | åˆ—3 |\n|-----|-----|-----|\n| A1  | B1  | C1  |\n| A2  | B2  | C2  |\n\n### é“¾æ¥å’Œå›¾ç‰‡\n[è¿™æ˜¯ä¸€ä¸ªé“¾æ¥](https://example.com)\n\n### åˆ†éš”çº¿\n---\n\n*æ–œä½“æ–‡å­—* å’Œ **ç²—ä½“æ–‡å­—** ä»¥åŠ ***ç²—æ–œä½“***`,\n    type: 'markdown',\n    format: 'markdown'\n  },\n  \n  agent: {\n    content: `æˆ‘æ¥å¸®æ‚¨åˆ†æè¿™ä¸ªé—®é¢˜ã€‚\n\n## åˆ†ææ­¥éª¤\n\n1. **é—®é¢˜ç†è§£**ï¼šé¦–å…ˆéœ€è¦æ˜ç¡®é—®é¢˜çš„æ ¸å¿ƒ\n2. **æ–¹æ¡ˆè®¾è®¡**ï¼šåŸºäºéœ€æ±‚è®¾è®¡è§£å†³æ–¹æ¡ˆ\n3. **å®æ–½è®¡åˆ’**ï¼šåˆ¶å®šå…·ä½“çš„å®æ–½æ­¥éª¤\n\n\\`\\`\\`javascript\n// ç¤ºä¾‹ä»£ç \nfunction calculateSum(numbers) {\n  return numbers.reduce((acc, num) => acc + num, 0);\n}\n\nconst result = calculateSum([1, 2, 3, 4, 5]);\nconsole.log('Sum:', result); // Output: 15\n\\`\\`\\`\n\n### æ€»ç»“\nä»¥ä¸Šæ˜¯æˆ‘çš„åˆ†æå’Œå»ºè®®ï¼Œå¸Œæœ›å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚`,\n    type: 'AGENT',\n    isAgent: true,\n    agentName: 'AIåŠ©æ‰‹'\n  },\n  \n  code: {\n    content: `è¿™é‡Œæ˜¯ä»£ç ç¤ºä¾‹ï¼š\n\n\\`\\`\\`javascript\n// JavaScript ä»£ç é«˜äº®æµ‹è¯•\nclass MessageRenderer {\n  constructor(options) {\n    this.options = options;\n    this.buffer = '';\n  }\n  \n  render(content) {\n    const rendered = this.processContent(content);\n    return \\`<div class=\"message\">\\${rendered}</div>\\`;\n  }\n  \n  processContent(content) {\n    // å¤„ç†å†…å®¹\n    return content\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n  }\n}\n\nconst renderer = new MessageRenderer({ markdown: true });\nconsole.log(renderer.render('Hello, World!'));\n\\`\\`\\`\n\n\\`\\`\\`python\n# Python ä»£ç ç¤ºä¾‹\ndef fibonacci(n):\n    \"\"\"ç”Ÿæˆæ–æ³¢é‚£å¥‘æ•°åˆ—\"\"\"\n    if n <= 0:\n        return []\n    elif n == 1:\n        return [0]\n    elif n == 2:\n        return [0, 1]\n    \n    fib = [0, 1]\n    for i in range(2, n):\n        fib.append(fib[-1] + fib[-2])\n    \n    return fib\n\nprint(fibonacci(10))\n\\`\\`\\`\n\nè¿˜æœ‰è¡Œå†…ä»£ç ï¼š\\`const x = 42;\\``,\n    type: 'markdown',\n    format: 'markdown'\n  },\n  \n  math: {\n    content: `æ•°å­¦å…¬å¼æµ‹è¯•ï¼š\n\nè¡Œå†…å…¬å¼ï¼š$E = mc^2$ æ˜¯çˆ±å› æ–¯å¦çš„è´¨èƒ½æ–¹ç¨‹ã€‚\n\nå—çº§å…¬å¼ï¼š\n$$\n\\\\begin{align}\n\\\\nabla \\\\times \\\\vec{\\\\mathbf{B}} -\\\\, \\\\frac1c\\\\, \\\\frac{\\\\partial\\\\vec{\\\\mathbf{E}}}{\\\\partial t} &= \\\\frac{4\\\\pi}{c}\\\\vec{\\\\mathbf{j}} \\\\\\\\\n\\\\nabla \\\\cdot \\\\vec{\\\\mathbf{E}} &= 4 \\\\pi \\\\rho \\\\\\\\\n\\\\nabla \\\\times \\\\vec{\\\\mathbf{E}}\\\\, +\\\\, \\\\frac1c\\\\, \\\\frac{\\\\partial\\\\vec{\\\\mathbf{B}}}{\\\\partial t} &= \\\\vec{\\\\mathbf{0}} \\\\\\\\\n\\\\nabla \\\\cdot \\\\vec{\\\\mathbf{B}} &= 0\n\\\\end{align}\n$$\n\nå¦ä¸€ä¸ªå…¬å¼ï¼š\n$$\nf(x) = \\\\int_{-\\\\infty}^{\\\\infty} \\\\hat{f}(\\\\xi) e^{2\\\\pi i \\\\xi x} d\\\\xi\n$$`,\n    type: 'markdown',\n    format: 'markdown'\n  },\n  \n  mermaid: {\n    content: `æµç¨‹å›¾ç¤ºä¾‹ï¼š\n\n\\`\\`\\`mermaid\ngraph TD\n    A[å¼€å§‹] --> B{æ˜¯å¦ç™»å½•?}\n    B -->|æ˜¯| C[è¿›å…¥ä¸»é¡µ]\n    B -->|å¦| D[æ˜¾ç¤ºç™»å½•é¡µ]\n    D --> E[è¾“å…¥è´¦å·å¯†ç ]\n    E --> F[éªŒè¯]\n    F -->|æˆåŠŸ| C\n    F -->|å¤±è´¥| D\n    C --> G[ç»“æŸ]\n\\`\\`\\`\n\n\\`\\`\\`mermaid\nsequenceDiagram\n    participant ç”¨æˆ·\n    participant å‰ç«¯\n    participant åç«¯\n    participant æ•°æ®åº“\n    \n    ç”¨æˆ·->>å‰ç«¯: å‘é€æ¶ˆæ¯\n    å‰ç«¯->>åç«¯: POST /api/message\n    åç«¯->>æ•°æ®åº“: ä¿å­˜æ¶ˆæ¯\n    æ•°æ®åº“-->>åç«¯: è¿”å›ç»“æœ\n    åç«¯-->>å‰ç«¯: å“åº”\n    å‰ç«¯-->>ç”¨æˆ·: æ˜¾ç¤ºç»“æœ\n\\`\\`\\``,\n    type: 'markdown',\n    format: 'markdown'\n  },\n  \n  mixed: {\n    content: `# ç»¼åˆå†…å®¹æµ‹è¯•\n\nè¿™æ˜¯ä¸€ä¸ªåŒ…å«å¤šç§å…ƒç´ çš„**ç»¼åˆæµ‹è¯•**ã€‚\n\n## 1. ä»£ç ç¤ºä¾‹\n\n\\`\\`\\`javascript\nconst greeting = (name) => {\n  return \\`Hello, \\${name}!\\`;\n};\n\\`\\`\\`\n\n## 2. æ•°å­¦å…¬å¼\n\nç‰›é¡¿ç¬¬äºŒå®šå¾‹ï¼š$F = ma$\n\näºŒæ¬¡æ–¹ç¨‹çš„è§£ï¼š\n$$x = \\\\frac{-b \\\\pm \\\\sqrt{b^2 - 4ac}}{2a}$$\n\n## 3. è¡¨æ ¼\n\n| åŠŸèƒ½ | æ”¯æŒ | å¤‡æ³¨ |\n|------|------|------|\n| Markdown | âœ… | å®Œæ•´æ”¯æŒ |\n| LaTeX | âœ… | KaTeXæ¸²æŸ“ |\n| ä»£ç é«˜äº® | âœ… | Prism.js |\n\n## 4. æµç¨‹å›¾\n\n\\`\\`\\`mermaid\ngraph LR\n    A[è¾“å…¥] --> B[å¤„ç†]\n    B --> C[è¾“å‡º]\n\\`\\`\\`\n\n## 5. ä»»åŠ¡åˆ—è¡¨\n\n- [x] å®ç°åŸºç¡€æ¸²æŸ“\n- [x] æ·»åŠ æ•°å­¦å…¬å¼\n- [ ] æ€§èƒ½ä¼˜åŒ–\n- [ ] æ·»åŠ ä¸»é¢˜\n\n> ğŸ’¡ **æç¤º**ï¼šè¿™ä¸ªç»„ä»¶æ”¯æŒå®Œæ•´çš„ GFM (GitHub Flavored Markdown) è¯­æ³•ã€‚\n\n---\n\n*æµ‹è¯•å®Œæˆï¼*`,\n    type: 'AGENT',\n    format: 'markdown'\n  },\n  \n  streaming: {\n    content: '',\n    type: 'STREAM',\n    streaming: true\n  }\n};\n\n// æµå¼æ¶ˆæ¯æµ‹è¯•å†…å®¹\nconst STREAMING_CONTENT = `# æµå¼ä¼ è¾“æµ‹è¯•\n\nè¿™æ˜¯ä¸€ä¸ª**æµå¼ä¼ è¾“**çš„æµ‹è¯•æ¶ˆæ¯ï¼Œå†…å®¹ä¼šé€æ­¥æ˜¾ç¤ºã€‚\n\n## åŠŸèƒ½ç‰¹ç‚¹\n\n1. æ”¯æŒå¢é‡æ¸²æŸ“\n2. æ™ºèƒ½ç¼“å†²ä¼˜åŒ–\n3. æ€§èƒ½ç›‘æ§\n\n\\`\\`\\`javascript\n// æµå¼æ¸²æŸ“ç¤ºä¾‹\nfunction streamRender(chunks) {\n  chunks.forEach((chunk, index) => {\n    setTimeout(() => {\n      appendContent(chunk);\n    }, index * 100);\n  });\n}\n\\`\\`\\`\n\næ•°å­¦å…¬å¼ä¹Ÿèƒ½æ­£å¸¸æ¸²æŸ“ï¼š$E = mc^2$\n\n| æµ‹è¯•é¡¹ | ç»“æœ |\n|--------|------|\n| æ¸²æŸ“é€Ÿåº¦ | ä¼˜ç§€ |\n| å†…å­˜å ç”¨ | æ­£å¸¸ |\n\n> æµå¼ä¼ è¾“è®©ç”¨æˆ·ä½“éªŒæ›´åŠ æµç•…ï¼\n\næµ‹è¯•å®Œæˆã€‚`;\n\nexport default {\n  name: 'MessageRendererDemo',\n  \n  components: {\n    UnifiedMessageRenderer,\n    StreamingRenderer\n  },\n  \n  data() {\n    return {\n      selectedType: 'markdown',\n      currentMessage: TEST_MESSAGES.markdown,\n      customContent: '',\n      \n      // é…ç½®é€‰é¡¹\n      enableKatex: true,\n      enableMermaid: true,\n      enableHighlight: true,\n      \n      // æµå¼ç›¸å…³\n      isStreaming: false,\n      streamingChunks: [],\n      streamingIndex: 0,\n      streamingTimer: null,\n      \n      // æ€§èƒ½ç»Ÿè®¡\n      performanceStats: null\n    };\n  },\n  \n  computed: {\n    rendererConfig() {\n      return {\n        katex: this.enableKatex,\n        mermaid: this.enableMermaid,\n        highlight: this.enableHighlight\n      };\n    }\n  },\n  \n  methods: {\n    loadTestMessage() {\n      this.currentMessage = TEST_MESSAGES[this.selectedType] || TEST_MESSAGES.text;\n      this.performanceStats = null;\n    },\n    \n    renderCustomContent() {\n      if (!this.customContent) {\n        alert('è¯·è¾“å…¥è‡ªå®šä¹‰å†…å®¹');\n        return;\n      }\n      \n      this.currentMessage = {\n        content: this.customContent,\n        type: 'CUSTOM',\n        format: 'markdown'\n      };\n    },\n    \n    // æµå¼ä¼ è¾“ç›¸å…³\n    startStreaming() {\n      if (this.isStreaming) return;\n      \n      this.isStreaming = true;\n      this.streamingChunks = this.splitIntoChunks(STREAMING_CONTENT, 10);\n      this.streamingIndex = 0;\n      \n      // å¼€å§‹æµå¼ä¼ è¾“\n      this.$refs.streamingRenderer.startStreaming();\n      \n      // æ¨¡æ‹Ÿæµå¼æ•°æ®\n      this.streamingTimer = setInterval(() => {\n        if (this.streamingIndex >= this.streamingChunks.length) {\n          this.stopStreaming();\n          return;\n        }\n        \n        const chunk = this.streamingChunks[this.streamingIndex++];\n        this.$refs.streamingRenderer.appendChunk(chunk);\n      }, 100);\n    },\n    \n    stopStreaming() {\n      if (!this.isStreaming) return;\n      \n      clearInterval(this.streamingTimer);\n      this.isStreaming = false;\n      \n      if (this.$refs.streamingRenderer) {\n        this.$refs.streamingRenderer.finishStreaming();\n      }\n    },\n    \n    splitIntoChunks(text, chunkSize) {\n      const chunks = [];\n      for (let i = 0; i < text.length; i += chunkSize) {\n        chunks.push(text.slice(i, i + chunkSize));\n      }\n      return chunks;\n    },\n    \n    // äº‹ä»¶å¤„ç†\n    onRendered() {\n      console.log('æ¶ˆæ¯æ¸²æŸ“å®Œæˆ');\n    },\n    \n    onStreamingStart() {\n      console.log('æµå¼ä¼ è¾“å¼€å§‹');\n      this.performanceStats = null;\n    },\n    \n    onContentUpdate(content) {\n      console.log('å†…å®¹æ›´æ–°ï¼Œé•¿åº¦:', content.length);\n    },\n    \n    onStreamingFinish(data) {\n      console.log('æµå¼ä¼ è¾“å®Œæˆ', data);\n      this.performanceStats = data.stats;\n    }\n  },\n  \n  mounted() {\n    // åˆå§‹åŠ è½½\n    this.loadTestMessage();\n  },\n  \n  beforeDestroy() {\n    // æ¸…ç†å®šæ—¶å™¨\n    if (this.streamingTimer) {\n      clearInterval(this.streamingTimer);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.message-renderer-demo {\n  padding: 20px;\n  max-width: 1400px;\n  margin: 0 auto;\n  \n  h1 {\n    color: #333;\n    border-bottom: 2px solid #0066cc;\n    padding-bottom: 10px;\n    margin-bottom: 20px;\n  }\n  \n  .demo-container {\n    display: flex;\n    gap: 20px;\n    \n    .control-panel {\n      flex: 0 0 400px;\n      background: #f5f5f5;\n      padding: 20px;\n      border-radius: 8px;\n      \n      h3 {\n        margin-top: 0;\n        color: #333;\n      }\n      \n      .control-group {\n        margin-bottom: 15px;\n        \n        label {\n          display: block;\n          margin-bottom: 5px;\n          color: #666;\n        }\n        \n        select, textarea {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n        }\n        \n        button {\n          padding: 8px 16px;\n          background: #0066cc;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          margin-right: 10px;\n          \n          &:hover {\n            background: #0052a3;\n          }\n          \n          &:disabled {\n            background: #ccc;\n            cursor: not-allowed;\n          }\n        }\n        \n        input[type=\"checkbox\"] {\n          margin-right: 5px;\n        }\n      }\n    }\n    \n    .render-panel {\n      flex: 1;\n      \n      h3 {\n        margin-top: 0;\n        color: #333;\n      }\n      \n      .message-wrapper {\n        background: white;\n        border: 1px solid #ddd;\n        border-radius: 8px;\n        padding: 20px;\n        min-height: 300px;\n        max-height: 600px;\n        overflow-y: auto;\n      }\n      \n      .performance-stats {\n        margin-top: 20px;\n        background: #f9f9f9;\n        border: 1px solid #e1e4e8;\n        border-radius: 4px;\n        padding: 15px;\n        \n        h4 {\n          margin-top: 0;\n          color: #666;\n        }\n        \n        pre {\n          background: white;\n          padding: 10px;\n          border-radius: 4px;\n          overflow-x: auto;\n          font-size: 12px;\n        }\n      }\n    }\n  }\n}\n\n// å“åº”å¼å¸ƒå±€\n@media (max-width: 1024px) {\n  .message-renderer-demo {\n    .demo-container {\n      flex-direction: column;\n      \n      .control-panel {\n        flex: none;\n        width: 100%;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageRendererDemo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageRendererDemo.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MessageRendererDemo.vue?vue&type=template&id=0f33ae9e&scoped=true\"\nimport script from \"./MessageRendererDemo.vue?vue&type=script&lang=js\"\nexport * from \"./MessageRendererDemo.vue?vue&type=script&lang=js\"\nimport style0 from \"./MessageRendererDemo.vue?vue&type=style&index=0&id=0f33ae9e&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f33ae9e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}