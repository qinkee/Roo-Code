{"version":3,"sources":["webpack:///./src/components/message/MessageRendererDemo.vue?09b8","webpack:///./src/components/message/MessageRendererDemo.vue","webpack:///src/components/message/MessageRendererDemo.vue","webpack:///./src/components/message/MessageRendererDemo.vue?f825","webpack:///./src/components/message/MessageRendererDemo.vue?0500"],"names":["render","_vm","this","_c","_self","staticClass","_v","directives","name","rawName","value","selectedType","expression","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","multiple","loadTestMessage","attrs","enableKatex","domProps","isArray","_i","$$a","$$el","$$c","checked","$$v","$$i","concat","slice","enableMermaid","enableHighlight","isStreaming","startStreaming","stopStreaming","_e","customContent","composing","renderCustomContent","ref","currentMessage","rendererConfig","onRendered","onStreamingStart","onContentUpdate","onStreamingFinish","performanceStats","_s","JSON","stringify","staticRenderFns","TEST_MESSAGES","text","content","type","markdown","format","agent","isAgent","agentName","code","math","mermaid","mixed","streaming","STREAMING_CONTENT","components","UnifiedMessageRenderer","StreamingRenderer","data","streamingChunks","streamingIndex","streamingTimer","computed","katex","highlight","methods","alert","splitIntoChunks","$refs","streamingRenderer","setInterval","length","chunk","appendChunk","clearInterval","finishStreaming","chunkSize","chunks","i","push","console","log","stats","mounted","beforeDestroy","component"],"mappings":"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","file":"js/chunk-c6abf80c.18b2183b.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageRendererDemo.vue?vue&type=style&index=0&id=0f33ae9e&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"message-renderer-demo\"},[_c('h1',[_vm._v(\"统一消息渲染组件测试\")]),_c('div',{staticClass:\"demo-container\"},[_c('div',{staticClass:\"control-panel\"},[_c('h3',[_vm._v(\"测试控制\")]),_c('div',{staticClass:\"control-group\"},[_c('label',[_vm._v(\"消息类型：\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedType),expression:\"selectedType\"}],on:{\"change\":[function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedType=$event.target.multiple ? $$selectedVal : $$selectedVal[0]},_vm.loadTestMessage]}},[_c('option',{attrs:{\"value\":\"text\"}},[_vm._v(\"纯文本\")]),_c('option',{attrs:{\"value\":\"markdown\"}},[_vm._v(\"Markdown\")]),_c('option',{attrs:{\"value\":\"agent\"}},[_vm._v(\"智能体消息\")]),_c('option',{attrs:{\"value\":\"code\"}},[_vm._v(\"代码块\")]),_c('option',{attrs:{\"value\":\"math\"}},[_vm._v(\"数学公式\")]),_c('option',{attrs:{\"value\":\"mermaid\"}},[_vm._v(\"Mermaid图表\")]),_c('option',{attrs:{\"value\":\"mixed\"}},[_vm._v(\"混合内容\")]),_c('option',{attrs:{\"value\":\"streaming\"}},[_vm._v(\"流式消息\")])])]),_c('div',{staticClass:\"control-group\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enableKatex),expression:\"enableKatex\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.enableKatex)?_vm._i(_vm.enableKatex,null)>-1:(_vm.enableKatex)},on:{\"change\":function($event){var $$a=_vm.enableKatex,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.enableKatex=$$a.concat([$$v]))}else{$$i>-1&&(_vm.enableKatex=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.enableKatex=$$c}}}}),_vm._v(\" 启用数学公式 \")])]),_c('div',{staticClass:\"control-group\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enableMermaid),expression:\"enableMermaid\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.enableMermaid)?_vm._i(_vm.enableMermaid,null)>-1:(_vm.enableMermaid)},on:{\"change\":function($event){var $$a=_vm.enableMermaid,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.enableMermaid=$$a.concat([$$v]))}else{$$i>-1&&(_vm.enableMermaid=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.enableMermaid=$$c}}}}),_vm._v(\" 启用Mermaid图表 \")])]),_c('div',{staticClass:\"control-group\"},[_c('label',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.enableHighlight),expression:\"enableHighlight\"}],attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":Array.isArray(_vm.enableHighlight)?_vm._i(_vm.enableHighlight,null)>-1:(_vm.enableHighlight)},on:{\"change\":function($event){var $$a=_vm.enableHighlight,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.enableHighlight=$$a.concat([$$v]))}else{$$i>-1&&(_vm.enableHighlight=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.enableHighlight=$$c}}}}),_vm._v(\" 启用代码高亮 \")])]),(_vm.selectedType === 'streaming')?_c('div',{staticClass:\"control-group\"},[_c('button',{attrs:{\"disabled\":_vm.isStreaming},on:{\"click\":_vm.startStreaming}},[_vm._v(\"开始流式传输\")]),_c('button',{attrs:{\"disabled\":!_vm.isStreaming},on:{\"click\":_vm.stopStreaming}},[_vm._v(\"停止流式传输\")])]):_vm._e(),_c('div',{staticClass:\"control-group\"},[_c('label',[_vm._v(\"自定义内容：\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.customContent),expression:\"customContent\"}],attrs:{\"rows\":\"10\",\"cols\":\"50\"},domProps:{\"value\":(_vm.customContent)},on:{\"input\":function($event){if($event.target.composing)return;_vm.customContent=$event.target.value}}}),_c('button',{on:{\"click\":_vm.renderCustomContent}},[_vm._v(\"渲染自定义内容\")])])]),_c('div',{staticClass:\"render-panel\"},[_c('h3',[_vm._v(\"渲染结果\")]),(_vm.selectedType !== 'streaming')?_c('div',{staticClass:\"message-wrapper\"},[_c('unified-message-renderer',{ref:\"normalRenderer\",attrs:{\"message\":_vm.currentMessage,\"custom-config\":_vm.rendererConfig},on:{\"rendered\":_vm.onRendered}})],1):_c('div',{staticClass:\"message-wrapper\"},[_c('streaming-renderer',{ref:\"streamingRenderer\",attrs:{\"initial-message\":_vm.currentMessage,\"custom-config\":_vm.rendererConfig},on:{\"streaming-start\":_vm.onStreamingStart,\"content-update\":_vm.onContentUpdate,\"streaming-finish\":_vm.onStreamingFinish}})],1),(_vm.performanceStats)?_c('div',{staticClass:\"performance-stats\"},[_c('h4',[_vm._v(\"性能统计\")]),_c('pre',[_vm._v(_vm._s(JSON.stringify(_vm.performanceStats, null, 2)))])]):_vm._e()])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"message-renderer-demo\">\n    <h1>统一消息渲染组件测试</h1>\n    \n    <div class=\"demo-container\">\n      <!-- 控制面板 -->\n      <div class=\"control-panel\">\n        <h3>测试控制</h3>\n        \n        <div class=\"control-group\">\n          <label>消息类型：</label>\n          <select v-model=\"selectedType\" @change=\"loadTestMessage\">\n            <option value=\"text\">纯文本</option>\n            <option value=\"markdown\">Markdown</option>\n            <option value=\"agent\">智能体消息</option>\n            <option value=\"code\">代码块</option>\n            <option value=\"math\">数学公式</option>\n            <option value=\"mermaid\">Mermaid图表</option>\n            <option value=\"mixed\">混合内容</option>\n            <option value=\"streaming\">流式消息</option>\n          </select>\n        </div>\n        \n        <div class=\"control-group\">\n          <label>\n            <input type=\"checkbox\" v-model=\"enableKatex\"> 启用数学公式\n          </label>\n        </div>\n        \n        <div class=\"control-group\">\n          <label>\n            <input type=\"checkbox\" v-model=\"enableMermaid\"> 启用Mermaid图表\n          </label>\n        </div>\n        \n        <div class=\"control-group\">\n          <label>\n            <input type=\"checkbox\" v-model=\"enableHighlight\"> 启用代码高亮\n          </label>\n        </div>\n        \n        <div class=\"control-group\" v-if=\"selectedType === 'streaming'\">\n          <button @click=\"startStreaming\" :disabled=\"isStreaming\">开始流式传输</button>\n          <button @click=\"stopStreaming\" :disabled=\"!isStreaming\">停止流式传输</button>\n        </div>\n        \n        <div class=\"control-group\">\n          <label>自定义内容：</label>\n          <textarea v-model=\"customContent\" rows=\"10\" cols=\"50\"></textarea>\n          <button @click=\"renderCustomContent\">渲染自定义内容</button>\n        </div>\n      </div>\n      \n      <!-- 渲染结果 -->\n      <div class=\"render-panel\">\n        <h3>渲染结果</h3>\n        \n        <!-- 普通消息渲染 -->\n        <div v-if=\"selectedType !== 'streaming'\" class=\"message-wrapper\">\n          <unified-message-renderer\n            ref=\"normalRenderer\"\n            :message=\"currentMessage\"\n            :custom-config=\"rendererConfig\"\n            @rendered=\"onRendered\"\n          />\n        </div>\n        \n        <!-- 流式消息渲染 -->\n        <div v-else class=\"message-wrapper\">\n          <streaming-renderer\n            ref=\"streamingRenderer\"\n            :initial-message=\"currentMessage\"\n            :custom-config=\"rendererConfig\"\n            @streaming-start=\"onStreamingStart\"\n            @content-update=\"onContentUpdate\"\n            @streaming-finish=\"onStreamingFinish\"\n          />\n        </div>\n        \n        <!-- 性能统计 -->\n        <div v-if=\"performanceStats\" class=\"performance-stats\">\n          <h4>性能统计</h4>\n          <pre>{{ JSON.stringify(performanceStats, null, 2) }}</pre>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport UnifiedMessageRenderer from './UnifiedMessageRenderer.vue';\nimport StreamingRenderer from './StreamingRenderer.vue';\n\n// 测试数据\nconst TEST_MESSAGES = {\n  text: {\n    content: '这是一条普通的文本消息。\\n包含换行符。\\n还有一个链接：https://example.com',\n    type: 'text'\n  },\n  \n  markdown: {\n    content: `# Markdown 测试\n\n## 二级标题\n\n这是一个包含各种 **Markdown** 语法的测试消息。\n\n### 列表测试\n- 无序列表项 1\n- 无序列表项 2\n  - 嵌套项\n  - 另一个嵌套项\n\n1. 有序列表项 1\n2. 有序列表项 2\n\n### 任务列表\n- [x] 已完成的任务\n- [ ] 未完成的任务\n- [ ] 另一个待办事项\n\n### 引用\n> 这是一段引用文字\n> 可以有多行\n\n### 表格\n| 列1 | 列2 | 列3 |\n|-----|-----|-----|\n| A1  | B1  | C1  |\n| A2  | B2  | C2  |\n\n### 链接和图片\n[这是一个链接](https://example.com)\n\n### 分隔线\n---\n\n*斜体文字* 和 **粗体文字** 以及 ***粗斜体***`,\n    type: 'markdown',\n    format: 'markdown'\n  },\n  \n  agent: {\n    content: `我来帮您分析这个问题。\n\n## 分析步骤\n\n1. **问题理解**：首先需要明确问题的核心\n2. **方案设计**：基于需求设计解决方案\n3. **实施计划**：制定具体的实施步骤\n\n\\`\\`\\`javascript\n// 示例代码\nfunction calculateSum(numbers) {\n  return numbers.reduce((acc, num) => acc + num, 0);\n}\n\nconst result = calculateSum([1, 2, 3, 4, 5]);\nconsole.log('Sum:', result); // Output: 15\n\\`\\`\\`\n\n### 总结\n以上是我的分析和建议，希望对您有所帮助。`,\n    type: 'AGENT',\n    isAgent: true,\n    agentName: 'AI助手'\n  },\n  \n  code: {\n    content: `这里是代码示例：\n\n\\`\\`\\`javascript\n// JavaScript 代码高亮测试\nclass MessageRenderer {\n  constructor(options) {\n    this.options = options;\n    this.buffer = '';\n  }\n  \n  render(content) {\n    const rendered = this.processContent(content);\n    return \\`<div class=\"message\">\\${rendered}</div>\\`;\n  }\n  \n  processContent(content) {\n    // 处理内容\n    return content\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n  }\n}\n\nconst renderer = new MessageRenderer({ markdown: true });\nconsole.log(renderer.render('Hello, World!'));\n\\`\\`\\`\n\n\\`\\`\\`python\n# Python 代码示例\ndef fibonacci(n):\n    \"\"\"生成斐波那契数列\"\"\"\n    if n <= 0:\n        return []\n    elif n == 1:\n        return [0]\n    elif n == 2:\n        return [0, 1]\n    \n    fib = [0, 1]\n    for i in range(2, n):\n        fib.append(fib[-1] + fib[-2])\n    \n    return fib\n\nprint(fibonacci(10))\n\\`\\`\\`\n\n还有行内代码：\\`const x = 42;\\``,\n    type: 'markdown',\n    format: 'markdown'\n  },\n  \n  math: {\n    content: `数学公式测试：\n\n行内公式：$E = mc^2$ 是爱因斯坦的质能方程。\n\n块级公式：\n$$\n\\\\begin{align}\n\\\\nabla \\\\times \\\\vec{\\\\mathbf{B}} -\\\\, \\\\frac1c\\\\, \\\\frac{\\\\partial\\\\vec{\\\\mathbf{E}}}{\\\\partial t} &= \\\\frac{4\\\\pi}{c}\\\\vec{\\\\mathbf{j}} \\\\\\\\\n\\\\nabla \\\\cdot \\\\vec{\\\\mathbf{E}} &= 4 \\\\pi \\\\rho \\\\\\\\\n\\\\nabla \\\\times \\\\vec{\\\\mathbf{E}}\\\\, +\\\\, \\\\frac1c\\\\, \\\\frac{\\\\partial\\\\vec{\\\\mathbf{B}}}{\\\\partial t} &= \\\\vec{\\\\mathbf{0}} \\\\\\\\\n\\\\nabla \\\\cdot \\\\vec{\\\\mathbf{B}} &= 0\n\\\\end{align}\n$$\n\n另一个公式：\n$$\nf(x) = \\\\int_{-\\\\infty}^{\\\\infty} \\\\hat{f}(\\\\xi) e^{2\\\\pi i \\\\xi x} d\\\\xi\n$$`,\n    type: 'markdown',\n    format: 'markdown'\n  },\n  \n  mermaid: {\n    content: `流程图示例：\n\n\\`\\`\\`mermaid\ngraph TD\n    A[开始] --> B{是否登录?}\n    B -->|是| C[进入主页]\n    B -->|否| D[显示登录页]\n    D --> E[输入账号密码]\n    E --> F[验证]\n    F -->|成功| C\n    F -->|失败| D\n    C --> G[结束]\n\\`\\`\\`\n\n\\`\\`\\`mermaid\nsequenceDiagram\n    participant 用户\n    participant 前端\n    participant 后端\n    participant 数据库\n    \n    用户->>前端: 发送消息\n    前端->>后端: POST /api/message\n    后端->>数据库: 保存消息\n    数据库-->>后端: 返回结果\n    后端-->>前端: 响应\n    前端-->>用户: 显示结果\n\\`\\`\\``,\n    type: 'markdown',\n    format: 'markdown'\n  },\n  \n  mixed: {\n    content: `# 综合内容测试\n\n这是一个包含多种元素的**综合测试**。\n\n## 1. 代码示例\n\n\\`\\`\\`javascript\nconst greeting = (name) => {\n  return \\`Hello, \\${name}!\\`;\n};\n\\`\\`\\`\n\n## 2. 数学公式\n\n牛顿第二定律：$F = ma$\n\n二次方程的解：\n$$x = \\\\frac{-b \\\\pm \\\\sqrt{b^2 - 4ac}}{2a}$$\n\n## 3. 表格\n\n| 功能 | 支持 | 备注 |\n|------|------|------|\n| Markdown | ✅ | 完整支持 |\n| LaTeX | ✅ | KaTeX渲染 |\n| 代码高亮 | ✅ | Prism.js |\n\n## 4. 流程图\n\n\\`\\`\\`mermaid\ngraph LR\n    A[输入] --> B[处理]\n    B --> C[输出]\n\\`\\`\\`\n\n## 5. 任务列表\n\n- [x] 实现基础渲染\n- [x] 添加数学公式\n- [ ] 性能优化\n- [ ] 添加主题\n\n> 💡 **提示**：这个组件支持完整的 GFM (GitHub Flavored Markdown) 语法。\n\n---\n\n*测试完成！*`,\n    type: 'AGENT',\n    format: 'markdown'\n  },\n  \n  streaming: {\n    content: '',\n    type: 'STREAM',\n    streaming: true\n  }\n};\n\n// 流式消息测试内容\nconst STREAMING_CONTENT = `# 流式传输测试\n\n这是一个**流式传输**的测试消息，内容会逐步显示。\n\n## 功能特点\n\n1. 支持增量渲染\n2. 智能缓冲优化\n3. 性能监控\n\n\\`\\`\\`javascript\n// 流式渲染示例\nfunction streamRender(chunks) {\n  chunks.forEach((chunk, index) => {\n    setTimeout(() => {\n      appendContent(chunk);\n    }, index * 100);\n  });\n}\n\\`\\`\\`\n\n数学公式也能正常渲染：$E = mc^2$\n\n| 测试项 | 结果 |\n|--------|------|\n| 渲染速度 | 优秀 |\n| 内存占用 | 正常 |\n\n> 流式传输让用户体验更加流畅！\n\n测试完成。`;\n\nexport default {\n  name: 'MessageRendererDemo',\n  \n  components: {\n    UnifiedMessageRenderer,\n    StreamingRenderer\n  },\n  \n  data() {\n    return {\n      selectedType: 'markdown',\n      currentMessage: TEST_MESSAGES.markdown,\n      customContent: '',\n      \n      // 配置选项\n      enableKatex: true,\n      enableMermaid: true,\n      enableHighlight: true,\n      \n      // 流式相关\n      isStreaming: false,\n      streamingChunks: [],\n      streamingIndex: 0,\n      streamingTimer: null,\n      \n      // 性能统计\n      performanceStats: null\n    };\n  },\n  \n  computed: {\n    rendererConfig() {\n      return {\n        katex: this.enableKatex,\n        mermaid: this.enableMermaid,\n        highlight: this.enableHighlight\n      };\n    }\n  },\n  \n  methods: {\n    loadTestMessage() {\n      this.currentMessage = TEST_MESSAGES[this.selectedType] || TEST_MESSAGES.text;\n      this.performanceStats = null;\n    },\n    \n    renderCustomContent() {\n      if (!this.customContent) {\n        alert('请输入自定义内容');\n        return;\n      }\n      \n      this.currentMessage = {\n        content: this.customContent,\n        type: 'CUSTOM',\n        format: 'markdown'\n      };\n    },\n    \n    // 流式传输相关\n    startStreaming() {\n      if (this.isStreaming) return;\n      \n      this.isStreaming = true;\n      this.streamingChunks = this.splitIntoChunks(STREAMING_CONTENT, 10);\n      this.streamingIndex = 0;\n      \n      // 开始流式传输\n      this.$refs.streamingRenderer.startStreaming();\n      \n      // 模拟流式数据\n      this.streamingTimer = setInterval(() => {\n        if (this.streamingIndex >= this.streamingChunks.length) {\n          this.stopStreaming();\n          return;\n        }\n        \n        const chunk = this.streamingChunks[this.streamingIndex++];\n        this.$refs.streamingRenderer.appendChunk(chunk);\n      }, 100);\n    },\n    \n    stopStreaming() {\n      if (!this.isStreaming) return;\n      \n      clearInterval(this.streamingTimer);\n      this.isStreaming = false;\n      \n      if (this.$refs.streamingRenderer) {\n        this.$refs.streamingRenderer.finishStreaming();\n      }\n    },\n    \n    splitIntoChunks(text, chunkSize) {\n      const chunks = [];\n      for (let i = 0; i < text.length; i += chunkSize) {\n        chunks.push(text.slice(i, i + chunkSize));\n      }\n      return chunks;\n    },\n    \n    // 事件处理\n    onRendered() {\n      console.log('消息渲染完成');\n    },\n    \n    onStreamingStart() {\n      console.log('流式传输开始');\n      this.performanceStats = null;\n    },\n    \n    onContentUpdate(content) {\n      console.log('内容更新，长度:', content.length);\n    },\n    \n    onStreamingFinish(data) {\n      console.log('流式传输完成', data);\n      this.performanceStats = data.stats;\n    }\n  },\n  \n  mounted() {\n    // 初始加载\n    this.loadTestMessage();\n  },\n  \n  beforeDestroy() {\n    // 清理定时器\n    if (this.streamingTimer) {\n      clearInterval(this.streamingTimer);\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.message-renderer-demo {\n  padding: 20px;\n  max-width: 1400px;\n  margin: 0 auto;\n  \n  h1 {\n    color: #333;\n    border-bottom: 2px solid #0066cc;\n    padding-bottom: 10px;\n    margin-bottom: 20px;\n  }\n  \n  .demo-container {\n    display: flex;\n    gap: 20px;\n    \n    .control-panel {\n      flex: 0 0 400px;\n      background: #f5f5f5;\n      padding: 20px;\n      border-radius: 8px;\n      \n      h3 {\n        margin-top: 0;\n        color: #333;\n      }\n      \n      .control-group {\n        margin-bottom: 15px;\n        \n        label {\n          display: block;\n          margin-bottom: 5px;\n          color: #666;\n        }\n        \n        select, textarea {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n        }\n        \n        button {\n          padding: 8px 16px;\n          background: #0066cc;\n          color: white;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          margin-right: 10px;\n          \n          &:hover {\n            background: #0052a3;\n          }\n          \n          &:disabled {\n            background: #ccc;\n            cursor: not-allowed;\n          }\n        }\n        \n        input[type=\"checkbox\"] {\n          margin-right: 5px;\n        }\n      }\n    }\n    \n    .render-panel {\n      flex: 1;\n      \n      h3 {\n        margin-top: 0;\n        color: #333;\n      }\n      \n      .message-wrapper {\n        background: white;\n        border: 1px solid #ddd;\n        border-radius: 8px;\n        padding: 20px;\n        min-height: 300px;\n        max-height: 600px;\n        overflow-y: auto;\n      }\n      \n      .performance-stats {\n        margin-top: 20px;\n        background: #f9f9f9;\n        border: 1px solid #e1e4e8;\n        border-radius: 4px;\n        padding: 15px;\n        \n        h4 {\n          margin-top: 0;\n          color: #666;\n        }\n        \n        pre {\n          background: white;\n          padding: 10px;\n          border-radius: 4px;\n          overflow-x: auto;\n          font-size: 12px;\n        }\n      }\n    }\n  }\n}\n\n// 响应式布局\n@media (max-width: 1024px) {\n  .message-renderer-demo {\n    .demo-container {\n      flex-direction: column;\n      \n      .control-panel {\n        flex: none;\n        width: 100%;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageRendererDemo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MessageRendererDemo.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MessageRendererDemo.vue?vue&type=template&id=0f33ae9e&scoped=true\"\nimport script from \"./MessageRendererDemo.vue?vue&type=script&lang=js\"\nexport * from \"./MessageRendererDemo.vue?vue&type=script&lang=js\"\nimport style0 from \"./MessageRendererDemo.vue?vue&type=style&index=0&id=0f33ae9e&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0f33ae9e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}