{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/emoji/24.gif","webpack:///./src/view/EditorFriend.vue?a744","webpack:///./src/components/common/Icp.vue?a31d","webpack:///./src/components/rtc/RtcPrivateAcceptor.vue?f348","webpack:///./src/assets/emoji/8.gif","webpack:///./src/components/chat/ChatGroupReaded.vue?4157","webpack:///./src/view/plugin.vue?f5d5","webpack:///./src/view/EditorChatPlugin.vue?b9a9","webpack:///./src/view/PluginChat.vue?4f6f","webpack:///./src/components/chat/ChatBoxPlugin.vue?19c6","webpack:///./src/components/chat/ChatMessageItem.vue?6b6c","webpack:///./src/components/common/RightMenu.vue?f454","webpack:///./src/components/rtc/RtcGroupJoin.vue?e992","webpack:///./src/components/common/Emotion.vue","webpack:///src/components/common/Emotion.vue","webpack:///./src/components/common/Emotion.vue?48bd","webpack:///./src/components/common/Emotion.vue?fe78","webpack:///./src/components/common/FileUpload.vue","webpack:///src/components/common/FileUpload.vue","webpack:///./src/components/common/FileUpload.vue?2c7c","webpack:///./src/components/common/FileUpload.vue?e2d5","webpack:///./src/assets/emoji/40.gif","webpack:///./src/components/common/LoadingDots.vue","webpack:///src/components/common/LoadingDots.vue","webpack:///./src/components/common/LoadingDots.vue?f1e7","webpack:///./src/components/common/LoadingDots.vue?6a0d","webpack:///./src/components/group/GroupMemberSelector.vue","webpack:///./src/components/group/GroupMemberItem.vue","webpack:///src/components/group/GroupMemberItem.vue","webpack:///./src/components/group/GroupMemberItem.vue?5c35","webpack:///./src/components/group/GroupMemberItem.vue?8ced","webpack:///src/components/group/GroupMemberSelector.vue","webpack:///./src/components/group/GroupMemberSelector.vue?a65f","webpack:///./src/components/group/GroupMemberSelector.vue?f421","webpack:///./src/components/rtc/RtcGroupVideo.vue?9826","webpack:///./src/components/common/FullImage.vue?536c","webpack:///./src/assets/emoji/17.gif","webpack:///./src/view/InboxFriend.vue?4f8d","webpack:///./src/components/group/GroupMember.vue","webpack:///src/components/group/GroupMember.vue","webpack:///./src/components/group/GroupMember.vue?3748","webpack:///./src/components/group/GroupMember.vue?703c","webpack:///./src/assets/emoji/5.gif","webpack:///./src/components/friend/FriendItem.vue?3c0a","webpack:///./src/components/chat/ContainerManager.vue?8e56","webpack:///./src/assets/emoji/19.gif","webpack:///./src/components/message/UnifiedMessageRenderer.vue?c1e3","webpack:///./src/assets/emoji/2.gif","webpack:///./src/view/InboxSession.vue?2dc1","webpack:///./src/components/chat/ChatAtBox.vue","webpack:///src/components/chat/ChatAtBox.vue","webpack:///./src/components/chat/ChatAtBox.vue?90fd","webpack:///./src/components/chat/ChatAtBox.vue?30a1","webpack:///./src/assets/emoji/27.gif","webpack:///./src/components/group/AddGroupMember.vue?ba24","webpack:///./src/assets/emoji/47.gif","webpack:///./src/assets/emoji/25.gif","webpack:///./src/components/chat/ChatMessageItem.vue","webpack:///./src/components/chat/ChatGroupReaded.vue","webpack:///src/components/chat/ChatGroupReaded.vue","webpack:///./src/components/chat/ChatGroupReaded.vue?8770","webpack:///./src/components/chat/ChatGroupReaded.vue?8861","webpack:///./src/components/common/FileIcon.vue","webpack:///src/components/common/FileIcon.vue","webpack:///./src/components/common/FileIcon.vue?06c1","webpack:///./src/components/common/FileIcon.vue?42da","webpack:///src/components/chat/ChatMessageItem.vue","webpack:///./src/components/chat/ChatMessageItem.vue?fa71","webpack:///./src/components/chat/ChatMessageItem.vue?454c","webpack:///./src/components/message/MessageTypeAdapter.js","webpack:///./src/components/group/GroupMemberSelector.vue?38e4","webpack:///./src/assets/emoji/41.gif","webpack:///./src/assets/emoji/4.gif","webpack:///./src/assets/emoji/9.gif","webpack:///./src/components/common/RightMenu.vue","webpack:///src/components/common/RightMenu.vue","webpack:///./src/components/common/RightMenu.vue?6ef4","webpack:///./src/components/common/RightMenu.vue?57f8","webpack:///./src/components/common/HeadImage.vue","webpack:///src/components/common/HeadImage.vue","webpack:///./src/components/common/HeadImage.vue?62c6","webpack:///./src/components/common/HeadImage.vue?3c1e","webpack:///./src/components/common/FileIcon.vue?8f3d","webpack:///./src/view/EditorChat.vue?58ef","webpack:///./src/assets/emoji/12.gif","webpack:///./src/view/Login.vue?3a1d","webpack:///./src/assets/emoji/52.gif","webpack:///./src/assets/emoji/22.gif","webpack:///./src/assets/emoji/16.gif","webpack:///./src/components/chat/TerminalSelectorPlugin.vue?6dae","webpack:///./src/assets/emoji/39.gif","webpack:///./src/view/Register.vue?43a2","webpack:///./src/components/chat/ChatItem.vue","webpack:///src/components/chat/ChatItem.vue","webpack:///./src/components/chat/ChatItem.vue?2f08","webpack:///./src/components/chat/ChatItem.vue?7494","webpack:///./src/assets/emoji/30.gif","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/App.vue?b3ed","webpack:///./src/App.vue?315a","webpack:///./src/view/Login.vue","webpack:///src/view/Login.vue","webpack:///./src/view/Login.vue?5195","webpack:///./src/view/Login.vue?a3b4","webpack:///./src/view/Register.vue","webpack:///src/view/Register.vue","webpack:///./src/view/Register.vue?364a","webpack:///./src/view/Register.vue?1507","webpack:///./src/view/Home.vue","webpack:///./src/components/setting/Setting.vue","webpack:///src/components/setting/Setting.vue","webpack:///./src/components/setting/Setting.vue?7003","webpack:///./src/components/setting/Setting.vue?c374","webpack:///./src/components/common/UserInfo.vue","webpack:///src/components/common/UserInfo.vue","webpack:///./src/components/common/UserInfo.vue?2e84","webpack:///./src/components/common/UserInfo.vue?2274","webpack:///./src/components/common/FullImage.vue","webpack:///src/components/common/FullImage.vue","webpack:///./src/components/common/FullImage.vue?a7c2","webpack:///./src/components/common/FullImage.vue?acda","webpack:///./src/components/rtc/RtcPrivateVideo.vue","webpack:///./src/components/rtc/RtcPrivateAcceptor.vue","webpack:///src/components/rtc/RtcPrivateAcceptor.vue","webpack:///./src/components/rtc/RtcPrivateAcceptor.vue?182d","webpack:///./src/components/rtc/RtcPrivateAcceptor.vue?d5a6","webpack:///./src/api/webrtc.js","webpack:///./src/api/camera.js","webpack:///./src/api/httpRequest.js","webpack:///./src/api/rtcPrivateApi.js","webpack:///src/components/rtc/RtcPrivateVideo.vue","webpack:///./src/components/rtc/RtcPrivateVideo.vue?e76f","webpack:///./src/components/rtc/RtcPrivateVideo.vue?2a90","webpack:///./src/components/rtc/RtcGroupVideo.vue","webpack:///src/components/rtc/RtcGroupVideo.vue","webpack:///./src/components/rtc/RtcGroupVideo.vue?8971","webpack:///./src/components/rtc/RtcGroupVideo.vue?a87f","webpack:///src/view/Home.vue","webpack:///./src/view/Home.vue?e1ba","webpack:///./src/view/Home.vue?54a6","webpack:///./src/view/Vscode.vue","webpack:///./src/view/Inbox.vue","webpack:///./src/view/InboxSession.vue","webpack:///./src/components/chat/TerminalSelector.vue","webpack:///src/components/chat/TerminalSelector.vue","webpack:///./src/components/chat/TerminalSelector.vue?de73","webpack:///./src/components/chat/TerminalSelector.vue?89e7","webpack:///src/view/InboxSession.vue","webpack:///./src/view/InboxSession.vue?e3aa","webpack:///./src/view/InboxSession.vue?f98b","webpack:///./src/view/InboxFriend.vue","webpack:///src/view/InboxFriend.vue","webpack:///./src/view/InboxFriend.vue?fa49","webpack:///./src/view/InboxFriend.vue?c37e","webpack:///./src/view/InboxGroup.vue","webpack:///src/view/InboxGroup.vue","webpack:///./src/view/InboxGroup.vue?3a7d","webpack:///./src/view/InboxGroup.vue?ce9b","webpack:///src/view/Inbox.vue","webpack:///./src/view/Inbox.vue?24b5","webpack:///./src/view/Inbox.vue?3196","webpack:///./src/view/ShadanChat.vue","webpack:///./src/view/EditorChat.vue","webpack:///src/view/EditorChat.vue","webpack:///./src/view/EditorChat.vue?3b48","webpack:///./src/view/EditorChat.vue?7820","webpack:///./src/view/EditorFriend.vue","webpack:///src/view/EditorFriend.vue","webpack:///./src/view/EditorFriend.vue?b373","webpack:///./src/view/EditorFriend.vue?439c","webpack:///./src/view/EditorGroup.vue","webpack:///src/view/EditorGroup.vue","webpack:///./src/view/EditorGroup.vue?115a","webpack:///./src/view/EditorGroup.vue?6e08","webpack:///src/view/ShadanChat.vue","webpack:///./src/view/ShadanChat.vue?5675","webpack:///./src/view/ShadanChat.vue?8ef7","webpack:///src/view/Vscode.vue","webpack:///./src/view/Vscode.vue?b5a5","webpack:///./src/view/Vscode.vue?ea63","webpack:///./src/view/plugin.vue","webpack:///./src/view/InboxPlugin.vue","webpack:///./src/view/InboxPluginSession.vue","webpack:///./src/components/chat/TerminalSelectorPlugin.vue","webpack:///src/components/chat/TerminalSelectorPlugin.vue","webpack:///./src/components/chat/TerminalSelectorPlugin.vue?14cd","webpack:///./src/components/chat/TerminalSelectorPlugin.vue?c285","webpack:///src/view/InboxPluginSession.vue","webpack:///./src/view/InboxPluginSession.vue?207a","webpack:///./src/view/InboxPluginSession.vue?acb9","webpack:///src/view/InboxPlugin.vue","webpack:///./src/view/InboxPlugin.vue?c28e","webpack:///./src/view/InboxPlugin.vue?fca1","webpack:///./src/view/PluginChat.vue","webpack:///./src/view/EditorChatPlugin.vue","webpack:///./src/components/chat/ChatBoxPlugin.vue","webpack:///src/components/chat/ChatBoxPlugin.vue","webpack:///./src/components/chat/ChatBoxPlugin.vue?d23a","webpack:///./src/components/chat/ChatBoxPlugin.vue?bb34","webpack:///src/view/EditorChatPlugin.vue","webpack:///./src/view/EditorChatPlugin.vue?4a0e","webpack:///./src/view/EditorChatPlugin.vue?dcd4","webpack:///src/view/PluginChat.vue","webpack:///./src/view/PluginChat.vue?f59c","webpack:///./src/view/PluginChat.vue?8e31","webpack:///src/view/plugin.vue","webpack:///./src/view/plugin.vue?f146","webpack:///./src/view/plugin.vue?2a7e","webpack:///./src/router/index.js","webpack:///./src/api/wssocket.js","webpack:///./src/api/messageType.js","webpack:///./src/api/emotion.js","webpack:///./src/api/url.js","webpack:///./src/api/element.js","webpack:///./src/api/enums.js","webpack:///./src/store/userStore.js","webpack:///./src/store/vscodeStorageAdapter.js","webpack:///./src/store/chatStore.js","webpack:///./src/store/friendStore.js","webpack:///./src/store/groupStore.js","webpack:///./src/store/configStore.js","webpack:///./src/store/uiStore.js","webpack:///./src/store/index.js","webpack:///./src/api/date.js","webpack:///./src/utils/directive/dialogDrag.js","webpack:///./src/main.js","webpack:///./src/components/chat/ContainerManager.vue","webpack:///src/components/chat/ContainerManager.vue","webpack:///./src/components/chat/ContainerManager.vue?993f","webpack:///./src/components/chat/ContainerManager.vue?c63a","webpack:///./src/components/chat/ChatRecord.vue?de40","webpack:///./src/components/chat/LLMStreamMessage.vue?537b","webpack:///./src/components/friend/AddFriend.vue","webpack:///src/components/friend/AddFriend.vue","webpack:///./src/components/friend/AddFriend.vue?564d","webpack:///./src/components/friend/AddFriend.vue?f893","webpack:///./src/assets/emoji/21.gif","webpack:///./src/components/friend/AddFriend.vue?98ae","webpack:///./src/assets/emoji/34.gif","webpack:///./src/assets/emoji/48.gif","webpack:///./src/assets/emoji/28.gif","webpack:///./src/assets/emoji sync ^\\.\\/.*\\.gif$","webpack:///./src/assets/emoji/42.gif","webpack:///./src/components/common/Icp.vue","webpack:///./src/components/chat/ChatHistory.vue","webpack:///src/components/chat/ChatHistory.vue","webpack:///./src/components/chat/ChatHistory.vue?3ce3","webpack:///./src/components/chat/ChatHistory.vue?bb2e","webpack:///./src/components/setting/Setting.vue?5474","webpack:///./src/components/message/UnifiedMessageRenderer.vue","webpack:///src/components/message/UnifiedMessageRenderer.vue","webpack:///./src/components/message/UnifiedMessageRenderer.vue?cbdb","webpack:///./src/components/message/UnifiedMessageRenderer.vue?159b","webpack:///./src/components/group/GroupItem.vue","webpack:///src/components/group/GroupItem.vue","webpack:///./src/components/group/GroupItem.vue?7fb5","webpack:///./src/components/group/GroupItem.vue?86e5","webpack:///./src/assets/emoji/44.gif","webpack:///./src/view/Inbox.vue?8694","webpack:///./src/components/chat/ChatBox.vue","webpack:///./src/components/chat/ChatAgentSide.vue","webpack:///./src/components/chat/ChatAgentMember.vue","webpack:///src/components/chat/ChatAgentMember.vue","webpack:///./src/components/chat/ChatAgentMember.vue?66ed","webpack:///./src/components/chat/ChatAgentMember.vue?90ae","webpack:///src/components/chat/ChatAgentSide.vue","webpack:///./src/components/chat/ChatAgentSide.vue?9cfb","webpack:///./src/components/chat/ChatAgentSide.vue?4c74","webpack:///./src/components/chat/ChatAgentCard.vue","webpack:///./src/mixins/agentCardMixin.js","webpack:///src/components/chat/ChatAgentCard.vue","webpack:///./src/components/chat/ChatAgentCard.vue?7f02","webpack:///./src/components/chat/ChatAgentCard.vue?a8f0","webpack:///./src/components/chat/LLMStreamMessage.vue","webpack:///src/components/chat/LLMStreamMessage.vue","webpack:///./src/components/chat/LLMStreamMessage.vue?6c18","webpack:///./src/components/chat/LLMStreamMessage.vue?5f9b","webpack:///src/components/chat/ChatBox.vue","webpack:///./src/components/chat/ChatBox.vue?4c0d","webpack:///./src/components/chat/ChatBox.vue?52d1","webpack:///./src/components/chat/ChatGroupSide.vue?6688","webpack:///./src/assets/emoji/15.gif","webpack:///./src/assets/emoji/54.gif","webpack:///./src/components/chat/TerminalSelector.vue?a47d","webpack:///./src/view/InboxGroup.vue?cecc","webpack:///./src/assets/emoji/26.gif","webpack:///./src/components/chat/ChatGroupSide.vue","webpack:///src/components/chat/ChatGroupSide.vue","webpack:///./src/components/chat/ChatGroupSide.vue?5d23","webpack:///./src/components/chat/ChatGroupSide.vue?2510","webpack:///./src/assets/emoji/53.gif","webpack:///./src/components/common/VirtualScroller.vue","webpack:///src/components/common/VirtualScroller.vue","webpack:///./src/components/common/VirtualScroller.vue?af54","webpack:///./src/components/common/VirtualScroller.vue?2303","webpack:///./src/utils/zeroWidthEncoder.js","webpack:///./src/assets/emoji/35.gif","webpack:///./src/components/message/StreamingRenderer.vue","webpack:///src/components/message/StreamingRenderer.vue","webpack:///./src/components/message/StreamingRenderer.vue?b49a","webpack:///./src/components/message/StreamingRenderer.vue?ef0e","webpack:///./src/components/chat/ChatHistory.vue?2b37","webpack:///./src/assets/emoji/6.gif","webpack:///./src/assets/emoji/45.gif","webpack:///./src/assets/emoji/36.gif","webpack:///./src/assets/image/icp_logo.png","webpack:///./src/components/group/GroupMember.vue?7006","webpack:///./src/components/common/UserInfo.vue?4d1b","webpack:///./src/components/group/GroupMemberItem.vue?9575","webpack:///./src/assets/emoji/37.gif","webpack:///./src/view/EditorGroup.vue?1f9d","webpack:///./src/assets/emoji/31.gif","webpack:///./src/assets/emoji/33.gif","webpack:///./src/components/common/Icp.vue?7566","webpack:///./src/assets/emoji/55.gif","webpack:///./src/components/chat/ChatAgentCard.vue?126d","webpack:///./src/App.vue?9723","webpack:///./src/assets/emoji/14.gif","webpack:///./src/view/InboxPlugin.vue?affd","webpack:///./src/assets/emoji/46.gif","webpack:///./src/components/chat/ChatAgentMember.vue?9cfc","webpack:///./src/assets/emoji/43.gif","webpack:///./src/components/chat/ChatBox.vue?efc8","webpack:///./src/assets/emoji/13.gif","webpack:///./src/view/Home.vue?0f2d","webpack:///./src/assets/emoji/11.gif","webpack:///./src/components/common/HeadImage.vue?e765","webpack:///./src/components/group/AddGroupMember.vue","webpack:///src/components/group/AddGroupMember.vue","webpack:///./src/components/group/AddGroupMember.vue?9f60","webpack:///./src/components/group/AddGroupMember.vue?874b","webpack:///./src/assets/emoji/49.gif","webpack:///./src/components/chat/ChatItem.vue?b20c","webpack:///./src/view/ShadanChat.vue?4d00","webpack:///./src/components/chat/ChatRecord.vue","webpack:///src/components/chat/ChatRecord.vue","webpack:///./src/components/chat/ChatRecord.vue?f892","webpack:///./src/components/chat/ChatRecord.vue?d2aa","webpack:///./src/assets/emoji/38.gif","webpack:///./src/components/chat/ChatAtBox.vue?d2ab","webpack:///./src/components/chat/RooCodeAtPanel.vue?1500","webpack:///./src/components/message/renderers/MarkdownRenderer.vue","webpack:///src/components/message/renderers/MarkdownRenderer.vue","webpack:///./src/components/message/renderers/MarkdownRenderer.vue?1593","webpack:///./src/components/message/renderers/MarkdownRenderer.vue?047d","webpack:///./src/components/chat/ChatGroupMember.vue","webpack:///src/components/chat/ChatGroupMember.vue","webpack:///./src/components/chat/ChatGroupMember.vue?c6a2","webpack:///./src/components/chat/ChatGroupMember.vue?e645","webpack:///./src/components/message/renderers/MarkdownRenderer.vue?9f29","webpack:///./src/components/chat/ChatInput.vue?4344","webpack:///./src/view/InboxPluginSession.vue?a85b","webpack:///./src/assets/emoji/32.gif","webpack:///./src/components/rtc/RtcGroupJoin.vue","webpack:///src/components/rtc/RtcGroupJoin.vue","webpack:///./src/components/rtc/RtcGroupJoin.vue?1f58","webpack:///./src/components/rtc/RtcGroupJoin.vue?660a","webpack:///./src/assets/audio/call.wav","webpack:///./src/assets/emoji/10.gif","webpack:///./src/assets/emoji/3.gif","webpack:///./src/assets/emoji/20.gif","webpack:///./public/logo-128.png","webpack:///./src/components/message/index.js","webpack:///./src/components/chat/ChatGroupMember.vue?eb17","webpack:///./src/view/Vscode.vue?816b","webpack:///./src/components/common/LoadingDots.vue?7eb7","webpack:///./src/components/common/Emotion.vue?2a32","webpack:///./src/components/rtc/RtcPrivateVideo.vue?557e","webpack:///./src/assets/emoji/29.gif","webpack:///./src/utils/logManager.js","webpack:///./src/assets/emoji/51.gif","webpack:///./src/components/message/StreamingRenderer.vue?801d","webpack:///./src/assets/emoji/50.gif","webpack:///./src/assets/emoji/56.gif","webpack:///./src/api/vscode-adapter.js","webpack:///./src/components/group/GroupItem.vue?80c0","webpack:///./src/components/common/Icp.vue?c8da","webpack:///./src/assets/emoji/7.gif","webpack:///./src/assets/emoji/0.gif","webpack:///./src/assets/audio/tip.wav","webpack:///./src/assets/emoji/1.gif","webpack:///./src/view/PluginChat.vue?6160","webpack:///./src/assets/emoji/23.gif","webpack:///./src/components/chat/ChatAgentSide.vue?b4cc","webpack:///./src/components/chat/ChatInput.vue","webpack:///./src/components/chat/RooCodeAtPanel.vue","webpack:///src/components/chat/RooCodeAtPanel.vue","webpack:///./src/components/chat/RooCodeAtPanel.vue?9bfb","webpack:///./src/components/chat/RooCodeAtPanel.vue?eb39","webpack:///src/components/chat/ChatInput.vue","webpack:///./src/components/chat/ChatInput.vue?229e","webpack:///./src/components/chat/ChatInput.vue?e94a","webpack:///./src/assets/emoji/18.gif","webpack:///./src/components/friend/FriendItem.vue","webpack:///src/components/friend/FriendItem.vue","webpack:///./src/components/friend/FriendItem.vue?35cb","webpack:///./src/components/friend/FriendItem.vue?35de"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","component","render","_vm","this","_c","_self","directives","rawName","show","expression","on","$event","close","staticClass","style","x","y","staticStyle","_l","$emo","emoTextList","emoText","ref","refInFor","onClickEmo","staticRenderFns","pos","adapter","rendered","mounted","VSCodeAdapter","updated","renderEmojis","methods","$nextTick","forEach","refName","element","$refs","emoHtml","textToImg","setInnerHTML","warn","textContent","emotion","$emit","open","computed","attrs","onFileUpload","fileTypes","join","disabled","beforeUpload","_t","loading","uploadHeaders","sessionStorage","getItem","props","action","String","required","Array","default","maxSize","Number","showLoading","Boolean","file","$loading","lock","text","spinner","background","formData","FormData","append","$http","url","method","headers","catch","finally","fileType","find","toLowerCase","$message","fileSizeStr","Math","round","_m","isShow","model","searchText","callback","$$v","slot","showMembers","scopedSlots","_u","fn","item","nativeOn","onClickMember","locked","onChange","stopPropagation","checked","$set","_v","_s","checkedMembers","members","userId","_e","ok","height","headImageSize","member","showNickName","headImage","online","components","HeadImage","ceil","GroupMemberItem","GroupMember","VirtualScroller","groupId","checkedIds","lockedIds","hideIds","loadGroupMembers","indexOf","hide","ids","filter","quit","includes","showDel","onDelete","idx","id","activeIdx","onSelectMember","ChatGroupMember","ownerId","targetUserId","enableAgents","init","scrollBox","wrap","scrollTop","$store","state","userStore","userInfo","startsWith","moveUp","scrollToActive","moveDown","select","clientHeight","scrollHeight","isOwner","watch","handler","newText","oldText","msgInfo","$enums","MESSAGE_TYPE","TIP_TIME","$date","toTimeText","sendTime","isNormal","TIP_TEXT","class","mine","isTipMessage","showName","parseInt","sendId","selfSend","handleContextMenu","isLoading","isAgentMessage","content","streaming","TEXT","agentMessageObject","onMessageRendered","IMAGE","JSON","parse","thumbUrl","showFullImageBox","loadFail","onSendFail","FILE","onFileDownloadClick","fileSize","AUDIO","onPlayVoice","isAction","ACT_RT_VOICE","ACT_RT_VIDEO","status","MESSAGE_STATUS","READED","receipt","onShowReadedBox","receiptOk","readedCount","menu","rightMenu","menuItems","onSelectMenu","groupMembers","currentTarget","preventDefault","readedMembers","unreadMembers","arrowY","rect","left","right","top","loadReadedUser","params","messageId","userIds","chatInfo","targetId","commit","width","size","fileName","extension","split","pop","globalAdapter","RightMenu","ChatGroupReaded","FileIcon","LoadingDots","UnifiedMessageRenderer","audioPlayState","lastRenderedContent","agentId","log","renderMessageText","initTextSelectionOptimization","smartRenderMessageText","optimizeTextSelection","isVSCodeEnv","vscodeVueChatUtils","vscodeServices","acquireVsCodeApi","$el","classList","add","messageTextElement","messageText","userSelect","webkitUserSelect","mozUserSelect","msUserSelect","cursor","pointerEvents","addEventListener","button","htmlText","imageUrl","originUrl","saveImageToWorkspace","$vscode","response","fetch","arrayBuffer","uint8Array","Uint8Array","contentType","URL","pathParts","pathname","lastPart","sessionId","success","saveArrayBufferToWorkspace","audio","Audio","play","showRightMenu","chatMsgBox","getBoundingClientRect","chatGroupReadedBox","fileUrl","saveRemoteFileToWorkspace","finalFileName","loadStatus","items","icon","$msgType","isAgent","isAI","fromAgent","modelName","extra","format","isError","color","ZeroWidthEncoder","require","cleanContent","cleanText","$url","replaceURLWithHTMLLinks","transform","MessageTypeAdapter","createDefaultMessage","adapters","adaptPrivateMessage","adaptGroupMessage","adaptAgentMessage","adaptSystemMessage","adaptStreamMessage","adaptLLMMessage","msgType","adaptDefaultMessage","features","markdown","katex","mermaid","codeHighlight","msg","detectFormat","detectFeatures","isStreaming","agent_id","agentName","agent_name","modelInfo","model_info","temperature","maxTokens","max_tokens","completionTokens","completion_tokens","promptTokens","prompt_tokens","extractContent","contentFields","field","isMarkdown","is_markdown","hasMarkdownSyntax","hasLatex","hasMermaid","hasCodeBlock","patterns","some","pattern","test","originalMessage","update","adapted","adapt","isShowUserInfo","showUserInfo","validUrl","imageError","avatarImageStyle","handleImageError","avatarTextStyle","displayText","colors","radius","user","trimmedUrl","trim","trimmed","substring","toUpperCase","w","h","textBackgroundColor","hash","charCodeAt","textColor","active","handleClick","handleDoubleClick","chat","headImageId","unreadCount","showTime","atText","isShowSendName","sendNickName","domProps","lastContent","index","disableDoubleClick","getMenuItems","isTerminalInbox","debug","parts","isNaN","messages","lastMsg","lastSendTime","atMe","atAll","autoLoginLoading","autoLoginPhone","isInVSCodeEnvironment","activeTab","forceSetActiveTab","accountForm","accountRules","_k","keyCode","submitAccountForm","arguments","userName","password","smsForm","smsRules","submitSmsForm","countdown","sendCode","phoneLogin","bindPhone","bindPhoneForm","bindPhoneRules","submitBindPhone","phone","bindPhoneCountdown","sendBindPhoneCode","cancelBindPhone","qrcodeStatus","wxTicket","refreshQrcode","openRegisterInBrowser","Icp","isVSCodeEnvironment","checkUsername","rule","checkPassword","checkPhone","phoneRegex","checkSmsCode","tabKey","timer","qrcodeTimer","wxTicketTimer","checkLoginTimer","UUID","uuidv4","bindPhoneTimer","currentOpenid","terminal","terminalNo","validator","trigger","currentTerminalType","getCurrentTerminal","tabName","$forceUpdate","startQrcodeTimer","startWxTicketTimer","startCheckLoginTimer","stopWxTicketTimer","stopCheckLoginTimer","handleTabClick","tab","BoxIMComponents","parent","navigator","userAgent","location","protocol","_window$process","SharedServicesAccessor","TERMINAL_TYPE","VSCODE","process","isElectron","PC","cordova","PhoneGap","phonegap","APP","WEB","getUrlParam","search","urlParams","URLSearchParams","hashQueryIndex","hashQuery","hashParams","loginForm","PLUGIN","submitAutoLogin","errorMessage","setCookie","setItem","accessToken","refreshToken","hasVscodeServices","vscodeServicesType","_this$vscodeServices","_window$vscodeService","username","avatar","email","lastLoginTime","Date","now","loginSuccess","_this$$vscode","_this$$vscode$get","userStateService","login","fullUserInfo","nickName","apiKey","tokenKey","dispatch","showInfo","showError","phoneParam","$router","validatePhoneNumber","axios","mobile","localStorage","startCountdown","GetWxTicket","setInterval","clearInterval","CheckLogin","openid","submitLogin2","formRef","accountFormWeb","validate","valid","submitLogin","smsFormWeb","_window$vscodeService2","removeItem","_window$vscodeService3","storedCode","submitForm","formName","resetForm","resetFields","getCookie","reg","RegExp","arr","cookie","match","unescape","escape","startBindPhoneCountdown","info","registerUrl","openExternal","_this$$store","_this$$store2","_this$$store3","_this$$store4","_this$$store5","handleAutoLogin","hasStore","hasState","hasUserStore","currentIsLoggedIn","isLoggedIn","hasSetIsLoggedInAction","_actions","setIsLoggedIn","storeModules","keys","newTab","oldTab","beforeDestroy","registerForm","rules","confirmPassword","checkUserName","checkNickName","checkConfirmPassword","_error$response","fullscreen","isFullscreen","headImageThumb","showSettingDialog","showSetting","onExit","closeSetting","uiStore","fullImage","visible","onClose","imageAction","onUploadSuccess","sex","signature","onSubmit","FileUpload","newData","oldData","stringify","showFullImage","isFriend","onSendMessage","onAddFriend","$route","path","friendId","friend","deleted","getters","fit","title","showRoom","onQuit","isVideo","isChating","isHost","isWaiting","onAccept","onReject","tip","modeText","ImWebRtc","constructor","configuration","stream","isEnable","RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCSessionDescription","webkitRTCSessionDescription","mozRTCSessionDescription","RTCIceCandidate","webkitRTCIceCandidate","mozRTCIceCandidate","setupPeerConnection","peerConnection","ontrack","streams","setStream","removeStream","getTracks","track","addTrack","onIcecandidate","onicecandidate","candidate","onStateChange","oniceconnectionstatechange","iceConnectionState","createOffer","offerParam","offer","setLocalDescription","createAnswer","setRemoteDescription","answer","addIceCandidate","uid","onaddstream","ImCamera","mediaDevices","getUserMedia","openVideo","constraints","video","echoCancellation","noiseSuppression","openAudio","stop","http","baseURL","withCredentials","refreshTokenPromise","getToken","token","currentUser","vscodeError","setToken","interceptors","use","config","encodeURIComponent","async","Message","duration","customClass","newAccessToken","refreshError","RtcPrivateApi","accept","handup","cancel","failed","reason","sendCandidate","heartbeat","RtcPrivateAcceptor","camera","webrtc","API","localStream","remoteStream","videoTime","videoTimer","heartbeatTimer","candidates","rtcInfo","onCall","initAudio","loop","initRtc","remoteVideo","srcObject","checkDevEnable","startHeartBeat","openStream","pause","startChatTime","waitTimer","onHandup","onCancel","onRTCMessage","RTC_CALL_VOICE","RTC_CALL_VIDEO","isClose","onRTCCall","RTC_ACCEPT","onRTCAccept","RTC_REJECT","onRTCReject","RTC_CANCEL","onRTCCancel","RTC_FAILED","onRTCFailed","RTC_HANDUP","onRTCHandup","RTC_CANDIDATE","onRTCCandidate","localVideo","muted","strTitle","currentTime","min","floor","sec","strTime","iceServers","configStore","created","beforeUnmount","Setting","UserInfo","FullImage","RtcPrivateVideo","RtcGroupVideo","lastPlayAudioTime","getTime","reconnecting","$eventBus","$on","rctInfo","rtcPrivateVideo","rtcGroupVideo","$wsApi","connect","onConnect","onReconnectWs","pullPrivateOfflineMessage","chatStore","privateMsgMaxId","pullGroupOfflineMessage","groupMsgMaxId","onMessage","cmd","$alert","confirmButtonText","handlePrivateMessage","handleGroupMessage","handleSystemMessage","reconnectWs","reconnect","minId","senderTerminal","isTerminalChat","targetTerminal","insertTerminalMessage","recvId","LOADING","RECEIPT","RECALL","FRIEND_NEW","FRIEND_DEL","isRtcPrivate","isTip","loadFriendInfo","insertPrivateMessage","playAudioTip","currentTerminal","getTerminalName","getTerminalIcon","terminalNames","terminalIcons","GROUP_NEW","GROUP_DEL","isRtcGroup","group","loadGroupInfo","insertGroupMessage","showGroupName","VIDEO","USER_BANNED","findFriend","findGroup","chats","delete","newCount","oldCount","$elm","setTitleTip","immediate","unmounted","handleChatItemClick","selectedChatData","switchUi","viewCode","aiSessionsCollapsed","expanded","aiSessions","loadingAI","session","_vm$activeAISession","activeAISession","hasComplexTools","thinking","isThinking","isRooCodeTask","onActiveAIItem","onDelAIItem","onTopAIItem","filteredHumanSessions","generateChatKey","enrichChatDisplay","isHumanChatActive","onDelHumanItem","onTopHumanItem","onActiveHumanItem","dialogVisible","handleClose","availableTerminals","current","selectTerminal","getStatusClass","getStatusText","onlineTerminals","openQuickSend","showQuickSend","resetQuickSend","selectedTerminal","ctrlKey","sendQuickMessage","quickMessage","sending","val","loadTerminalStatus","otherOnlineTerminals","available","warning","firstOnlineTerminal","messageData","post","createTargetTerminalChat","currentUserId","ChatItem","TerminalSelector","messageContent","sessionEventUnsubscribe","retryCount","maxRetries","loadingErrors","isActivatingSession","lastActivatedSessionId","activationDebounceTimer","activationCooldown","isLoadingAllSessions","debugMode","rooCodeTaskListener","rooCodeRefreshTimer","newVal","saveCollapseState","loadingGroupMsg","loadingPrivateMsg","filteredAiSessions","_sortedFiltered$","filtered","map","aiSummary","lastMessage","generateAISessionSummary","verifiedSession","lastMessageTime","aiModel","messageCount","isActive","aiThreadId","lastModified","toISOString","createdAt","stored","criticalFields","sortedFiltered","sort","a","b","getLastTime","timeFields","time","max","timeA","timeB","searchTextLower","validChats","uniqueChatsMap","Map","receivingTerminal","has","set","uniqueChats","from","values","aIsTerminal","bIsTerminal","loadCollapseState","loadAllSessions","setupRooCodeTaskListener","_this$chatStore","_this$aiSessions","hasHumanChats","hasAIChats","cleanupEventListeners","cleanupRooCodeTaskListener","_aiSummaryCache","clear","saved","requestIdleCallback","humanChatsPromise","aiChatsPromise","allSettled","loadHumanChats","loadAISessionsFromUnified","_this$chatStore$chats","getDefaultAvatar","_this$chatStore$chats2","sessionRef","unifiedSessionId","unifiedSessionService","setActiveSession","_unifiedSessionServic","allSessions","getAllSessions","sessionExists","syncSingleSessionToUnified","panelManagerService","openChatEditor","chatUser","onDelItem","onTop","chatIdx","realChatIndex","findIndex","targetIdMatch","nameMatch","typeMatch","terminalMatch","onActiveItem","onDelTerminalInboxItem","onTopTerminalInboxItem","actualChat","correctIndex","$confirm","cancelButtonText","page","processedMessages","tmpId","random","generateTerminalSenderName","latestMessage","terminalName","enriched","terminalType","chatType","initializeUnifiedSessionService","rooCodeTasks","rooCodeService","taskData","getTaskHistory","tasks","task","taskSession","convertToAISession","originalTask","_session$metadata","_session$metadata2","cacheKey","metadata","_session$metadata3","metadataMessageCount","sessionMessageCount","finalMessageCount","summary","firstKey","next","getAIAvatar","avatars","Gemini","sessionIndex","aiSession","onActiveRooCodeTask","openAIChatEditor","activateTask","taskId","_this$$message","executeCommand","_this$$message2","onDelRooCodeTask","_this$activeAISession","threadId","_this$$message5","chatThreadService","_this$$message4","_this$$message3","deleteThread","deleteSessionIndex","realIndex","$bus","_this$$message6","confirm","deleteTask","_this$$message7","_this$$message8","_this$$message9","truncateText","maxLength","setupEventListeners","onSessionChanged","disposable","handleSessionEvent","dispose","handleSessionCreated","sessionType","handleImSessionActivated","handleAiSessionActivated","handleSessionDeleted","sessionIdToRemove","replace","originalLength","sessionThreadId","removedCount","detail","eventData","sessionData","newSession","_event$session","_this$chatStore$chats3","_this$chatStore$chats5","realSessionRef","_this$chatStore$chats4","targetIdStr","toString","matchingSession","_ref","chatTargetId","_this$chatStore$chats6","_ref2","_window$SharedService","actualIndex","_this$chatStore$chats7","_event$session2","_this$aiSessions2","matchingAISession","ai","_window$SharedService2","openAIChat","getHumanSessionIndex","filteredIndex","filteredSessions","formatTime","timestamp","date","diff","toLocaleDateString","month","day","_this$$message10","_this$$message11","formatSyncTime","toLocaleTimeString","hour","minute","setActiveSessionInUnified","transformSessionForWorkspace","originalData","initializeWorkspaceSync","syncSessionsToUnified","syncVueSessionsFromWebView","humanSessions","_session$messages","syncSession","activeChat","stack","_session$messages2","singleSession","onTaskHistoryChanged","handleRooCodeTaskUpdate","nonRooCodeSessions","sortedSessions","activeTaskId","activeSession","_s$originalTask","removeEventListener","checkAndFixStoreState","initializeComponent","finalCheck","_this$chatStore$chats8","onShowAddFriend","showAddFriend","onCloseAddFriend","friendValues","friends","friendKeys","activeFriend","onDelFriend","FriendItem","AddFriend","loadUserInfo","CustomEvent","dispatchEvent","updateFriendInfo","firstLetter","strText","pinyinOptions","toneType","pyText","pinyin","isEnglish","character","friendStore","friendMap","f","letter","arrayObj","localeCompare","onCreateGroup","groupValues","groups","groupKeys","activeGroup","GroupItem","AddGroupMember","GroupMemberSelector","showAddGroupMember","showMaxIdx","$prompt","inputPattern","inputErrorMessage","chatGroup","onInvite","addGroupMember","onRemove","removeSelector","onRemoveComplete","onSaveGroup","vo","onDissolve","reset","onScroll","scrollbar","groupStore","ownerName","groupMap","g","InboxSession","InboxFriend","InboxGroup","handleLLMChunk","handleLLMEnd","handleLLMError","llmMessage","fromId","toId","streamId","sequence","isLLMStream","chatData","handleUserLogout","handleTokenRefresh","clos","isPCTerminalChat","isAIChat","onMessageSent","selectedAIChat","ChatBox","ContainerManager","showThinkingPanel","currentSessionId","dragHintElement","processingMessage","globalDragListeners","unifiedSessionUnsubscribe","tabs","label","assistantStatus","feedbackText","aiInsights","description","priority","settings","showRealtime","autoExpand","showConfidence","analysisDepth","updateInterval","exportFormat","assistantStatusText","statusMap","idle","analyzing","loadSettings","detectPCTerminalChat","getCurrentChatId","onAIChatSelected","handleEnsurePanelVisible","shouldEnsurePanelVisible","ensureChatRecordVisible","ensureIMChatVisible","ensureAIChatVisible","jumpToProMode","_this$selectedAIChat","postMessage","openAIProMode","_this$selectedAIChat2","artifact","downloadToWorkspace","toggleThinkingPanel","resumeThinkingAnalysis","pauseThinkingAnalysis","onRealtimeModeChanged","enabled","onDashboardDataRefreshed","onChainSelected","chainId","analyzeCurrentConversation","addInsight","suggestResponse","optimizeThinking","exportInsights","insights","dataStr","blob","Blob","createObjectURL","download","click","revokeObjectURL","insight","unshift","submitFeedback","updateSettings","resetSettings","saveSettings","savedSettings","onMessageReceived","onThinkingChainUpdated","setupUnifiedSessionListener","$off","containerManager","isCollapsed","toggleCollapse","triggerThinkingAnalysis","preview","confidence","fileData","currentSession","getCurrentSessionInfo","saveFileToSession","participants","sessionInfo","defaultSessionId","results","uploadFiles","filePath","_results$","generateSessionPath","sanitizedName","generateSafeFileName","originalName","readFileContent","reader","FileReader","readAsArrayBuffer","protectVSCodeService","service","serviceName","Proxy","prop","ownKeys","getOwnPropertyNames","getOwnPropertyDescriptor","setupFileDragDrop","handleDragEnter","isDragTargetInChatArea","stopImmediatePropagation","handleDragOver","dataTransfer","dropEffect","handleDragLeave","handleDrop","handleFileDropToComponent","isInEditorChat","contains","chatBox","querySelector","chatInput","dragOverlay","isInChatBox","isInChatInput","isInDragOverlay","files","chatInputArea","$children","child","$options","chatInputEditor","handleDroppedFiles","isDragOver","dragCounter","handleFileDrop","removeGlobalDragListeners","hasFiles","showDragHint","addDragOverClass","relatedTarget","hideDragHint","removeDragOverClass","types","filesLength","itemsLength","itemFiles","kind","getAsFile","processDroppedFiles","filePaths","parseVSCodeDragData","handleVSCodeFilePaths","showErrorNotification","showSessionSelectionRequired","confirmed","confirmFileSend","internalUriList","getData","uris","uri","parsedData","isArray","resourcesData","resources","resource","codeFiles","uriList","plainText","lines","cleanPaths","_window$vscodeService4","showFileProcessingProgress","successCount","failCount","hideFileProcessingProgress","validFiles","handleFileSend","hasFileType","_this$getCurrentSessi","hint","className","innerHTML","remove","fileList","formatFileSize","modal","alert","fileCount","bytes","k","sizes","parseFloat","pow","toFixed","cleanupFileDragDrop","_this$$el","_this$$el2","dropZones","dropZone","capture","_window$vscode","_unifiedSessionServic2","_window$vscodeService5","vscode","services","hasService","serviceType","hasOnSessionChanged","hasGetAllSessions","handleUnifiedSessionEvent","hasDisposable","disposableType","hasDispose","setupFallbackSessionListener","fallbackHandler","lastActiveSessionId","pollInterval","getActiveSession","currentActiveSessionId","originalCleanup","eventType","hasSession","eventDetails","handleImSessionActivatedFromUnified","handleAiSessionActivatedFromUnified","matchingChat","_this$chatStore$activ","chatIndex","newChatData","activateChatData","newActiveChat","deep","friendData","findChatIdx","$parent","newFriend","oldFriend","newFriendData","remarkGroupName","remarkNickName","notice","isGroup","newGroup","oldGroup","scrollWrap","EditorChat","EditorFriend","EditorGroup","Inbox","ShadanChat","currentComponent","selectedFriendData","showChatView","showFriendView","backToInbox","onChatItemClick","onFriendClick","onGroupClick","showTerminalSelector","filteredChats","handleTerminalSelected","terminalChats","initOtherTerminalChats","terminals","cleanupTerminalChatsFromStore","existingChat","lastTimeTip","sendSystemMessage","moveTerminalChatsToTop","terminalChatIndices","_this$$store$state$us","terminalKey","terminalKeys","json","systemMessage","substr","existingChatIndex","heademoji","$watch","firstChat","InboxPluginSession","groupData","activated","deactivated","goBack","isShowingChat","currentChatData","handleStartChat","isShowingFriend","closeRefBox","readedMessage","showSide","messageList","showMinIdx","isMessageFromCurrentUser","deleteMessage","recallMessage","showEmotionBox","onImageBefore","onImageSuccess","onImageFail","onFileBefore","onFileSuccess","onFileFail","memberSize","isReceipt","onSwitchReceipt","showRecordBox","showPrivateVideo","onGroupVideo","showHistoryBox","sendMessage","notifySend","loadGroup","onEmotion","showRecord","closeRecordBox","onSendRecord","onInviteOk","showHistory","closeHistoryBox","ChatInput","ChatMessageItem","ChatGroupSide","Emotion","ChatRecord","ChatHistory","ChatAtBox","RtcGroupJoin","sendImageUrl","sendImageFile","placeholder","lockMessage","reqQueue","isSending","scrollThrottle","scrollTimer","lastScrollTime","activeEventBus","activeEventName","moveChatToTop","emoBox","refreshPlaceHolder","sendMessageRequest","isBanned","showBannedTip","saveFileToWorkspace","generateId","fileId","UNSEND","fillTargetId","scrollToBottom","waitForInitialization","readFileAsArrayBuffer","onCloseSide","onScrollToTop","scrollElement","offsetWidth","fixLeft","fixTop","insertEmoji","maxChannel","rtcSel","userInfos","isCamera","isMicroPhone","inviterId","focus","submit","fullList","sendText","hasSuccessfulSend","sendTextMessage","atUserIds","sendImageMessage","sendFileMessage","resetEditor","res","tempMsgInfo","finalMsgInfo","SENDED","assign","failedMsgInfo","FAILED","check","fileUpload","loadReaded","fId","maxId","loadFriend","_this$chat","_this$chat2","_this$chat3","_this$chat4","_this$chat5","_this$chat6","div","getElementById","editBox","processReqQueue","reqData","messageAction","isFromCurrentTerminal","initializeTerminalChat","realUserId","setupVSCodeFileEventListeners","eventName","vueEventBus","handleVSCodeFileSend","source","switchToTargetSession","sendFileFromVSCode","targetChat","cleanupVSCodeFileEventListeners","messageSize","_this$chat7","_this$chat8","_this$chat9","_this$chat10","_this$chat11","_this$chat12","_this$chat13","messagesExists","messagesCount","visibleMessageCount","_","visibleCount","privateUserBanned","groupBanned","newChat","oldChat","newShowMinIdx","newSize","oldSize","_this$chat14","cleanup","initializeThinkingSession","_this$$vscode2","chatWorkspace","getChatThreadsService","notification","refreshFiles","notificationError","uploadFileToSession","_this$$vscode3","writable","configurable","waitForSharedServicesAccessor","isInitialized","VueServicesAccessor","serviceIdentifier","args","_this$get","showNotification","_this$get2","vueServicesAccessor","Vue","validateVSCodeServices","attempts","maxAttempts","fileService","notificationService","uploadFilesFromPaths","showSuccessNotification","uploadFilesToSession","testUnifiedSessionServiceAccess","hasSetActiveSession","sessions","sessionsCount","firstSessionSample","_this$$vscode4","_window$SharedService3","_window$SharedService4","fixVSCodeServices","currentMode","switchToFriendMode","InboxPlugin","PluginChat","currentView","VueRouter","routes","redirect","Login","Register","Vscode","Plugin","Home","children","websock","rec","isConnect","connectCallBack","messageCallBack","closeCallBack","wsurl","WebSocket","onmessage","sendInfo","heartCheck","start","onclose","onopen","loginInfo","send","timeoutObj","heartBeat","agentData","readyState","OPEN","CONNECTING","getMessageCallBack","setMessageCallBack","isStatus","extClass","word","textToUrl","urlRegex","offset","offsetTop","offsetParent","offsetLeft","RTC_GROUP_SETUP","RTC_GROUP_ACCEPT","RTC_GROUP_REJECT","RTC_GROUP_FAILED","RTC_GROUP_CANCEL","RTC_GROUP_QUIT","RTC_GROUP_INVITE","RTC_GROUP_JOIN","RTC_GROUP_OFFER","RTC_GROUP_ANSWER","RTC_GROUP_CANDIDATE","RTC_GROUP_DEVICE","RTC_STATE","FREE","WAIT_CALL","WAIT_ACCEPT","ACCEPTED","CHATING","MCP","terminalMap","0","1","2","3","4","5","mutations","setUserInfo","updateUserInfo","setTerminal","setRtcInfo","setRtcState","rtcState","actions","loadUser","context","savedTerminal","initTerminal","electronAPI","VSCodeStorageAdapter","migrationStatus","isCompleted","lastMigrationTime","migratedCount","totalCount","getSharedServicesAccessor","accessor","getInstance","maxWaitTime","startTime","checkServices","_userStore$state$user","initialize","actualUserId","adaptedChat","adaptVueChatFormat","syncVueChatsToVSCode","_userStore$state$user2","adaptedChats","_userStore$state$user3","loadVueChatsFromVSCode","chatsData","_userStore$state$user4","saveVueChatsToVSCode","completeChatsData","lastSync","query","options","searchAllMessages","localForageData","_userStore$state$user5","extractChatsFromLocalForage","migrationResult","saveMultipleVueChats","getMigrationStatus","resetMigrationStatus","totalMessages","indexSize","lastUpdated","stats","getFTSIndexStats","rebuildFTSIndex","syncReactThreadsToVSCode","vscodeStorageAdapter","cacheChats","saveTimer","isLoadingChat","initChats","cleanedChats","fixedCount","actualPrivateMaxId","actualGroupMaxId","msgId","openChat","findChats","isSame","isSameChat","clearActiveChat","resetUnreadCount","findChatByFriend","removeChat","removePrivateChat","removeGroupChat","moveTop","firstNormalChatIndex","handleRooCodeMentions","zeroWidthParams","extractAllFromText","taskMentionPattern","taskMatch","startIndex","endIndex","nextAtIndex","taskContent","originalTaskMatch","fullContent","originalStartIndex","originalEndIndex","taskName","fullContentLength","hasZeroWidth","commandService","commandParams","agentMentionPattern","agentMatch","agentContent","originalAgentMatch","modeId","taskPattern","taskMatches","matchAll","taskInfo","agentPattern","agentMatches","mappings","insertMessage","_msgInfo$content","findChat","findMessage","原有id","原有tmpId","新id","新tmpId","timeMessage","insertPos","MESSAGE_TYPE_TEXT","contentLength","batchInsertMessages","newMessagesCount","updateMessage","quoteMessage","ensureAgentChat","parentChat","agent","agentChat","parentId","parentType","skipGeneralStorage","localForage","agentKeys","exists","updateChatFromFriend","updateChatFromUser","updateChatFromGroup","findChatByGroup","setLoadingChatState","markChatsAsStored","chatIndices","cleanEmptyMessages","beforeCount","hasContent","afterCount","sortTerminalChatsToTop","normalChats","aTerminal","bTerminal","chat1","chat2","refreshChats","saveToStorage","chatsToSave","saveVueChatsDataToVSCode","existingData","chatKeys","agentChatKeys","uniqueChatKeys","Set","duplicateChats","chatKey","_chat$messages","currentAgentKeys","saveToStorageImmediate","_state$chats","chatsLength","hasChats","chatsCount","agentChats","updatePrivateMsgMaxId","saveMaxIdImmediate","updatedData","cleanDuplicateChats","duplicates","seenKeys","_chat$messages2","parseTargetIdFromKey","_chat$messages3","terminalMsgMaxId","_chat$messages4","parentPart","typeParts","parentName","allChats","migrateFromLocalForage","searchLocalMessages","lowercaseQuery","sessionTitle","sender","highlightedContent","limit","fileInfo","localMessage","latestMessages","entries","senderTerminalCode","separatedChats","aiChats","humanChats","fid","gid","findAgentChat","getChatAgents","setFriends","onlineWeb","onlineApp","_this$state$groupStor","_this$state$userStore","setActiveFriend","updateFriend","removeFriend","_this$state$groupStor2","_this$state$userStore2","addFriend","_this$state$groupStor3","_this$state$userStore3","refreshOnlineStatus","setOnlineStatus","userTerminal","f1","f2","setGroups","_this$state$friendSto","addGroup","_this$state$friendSto2","removeGroup","_this$state$friendSto3","updateGroup","_this$state$friendSto4","_this$state$userStore4","setActiveGroup","setConfig","loadConfig","showUserInfoBox","setUserInfoBoxPos","documentElement","clientWidth","closeUserInfoBox","closeFullImageBox","changeViewCode","Vuex","Store","load","unload","syncUserState","vscodeUserState","normalizedUser","logout","syncToRooCode","_state$userStore","_state$friendStore","_state$groupStore","friendsCount","groupsCount","apiToken","strict","timeStamp","simple","dateTime","timeDiff","timeText","isYestday","formatDateTime","isYear","yesterday","getFullYear","getMonth","getDate","dateObject","getHours","getMinutes","second","getSeconds","directive","el","binding","vnode","oldVnode","dialogHeaderEl","dragDom","sty","currentStyle","getComputedStyle","onmousedown","disX","clientX","disY","clientY","screenWidth","body","screenHeight","dragDomWidth","dragDomheight","offsetHeight","minDragDomLeft","maxDragDomLeft","minDragDomTop","maxDragDomTop","styL","styT","onmousemove","onmouseup","ElementUI","socketApi","messageType","httpRequest","enums","productionTip","router","store","App","_vm$podInfo$access_in","_vm$podInfo$access_in2","_vm$podInfo$access_in3","_vm$podInfo$access_in4","_vm$podInfo$access_in5","_vm$podInfo$access_in6","_vm$podInfo$access_in7","collapsed","statusClass","statusIcon","statusText","podInfo","handleCommand","access_info","vnc","novnc_url","vnc_url","ssh","command","ssh_command","refreshStatus","createPod","podStatus","cpu","memory","storage","vncPassword","vnc_password","credentials","copyToClipboard","openVNC","copyVNCLink","copySSHCommand","created_at","start_time","checkInterval","apiUrl","lastCheckTime","checkIntervalTime","cachedPodInfo","lastSuccessfulFetch","phase","endpoint","isRefresh","callAPI","pods","podName","getPodDetail","basicInfo","newPodInfo","__containerManagerCache","cpu_limit","memory_limit","storage_size","dangerouslyUseHTMLString","pod_name","checkPodStatus","confirmAction","_this$podInfo","_this$podInfo2","vncUrl","_this$podInfo3","_this$podInfo4","_this$podInfo5","_this$podInfo6","textarea","execCommand","performAction","toLocaleString","year","initApiToken","userInfoStr","hasApiKey","apiKeyPreview","hasTokenKey","tokenKeyPreview","currentToken","setupSmartRefresh","interval","globalCache","savedState","onSearch","users","webpackContext","req","webpackContextResolve","_setupProxy","loadAll","high","loadMessages","param","histroyAction","refreshScrollPos","newValue","oldValue","enableMarkdown","displayContent","rendererConfig","highlight","onRendered","processedTextContent","showEnhancements","MarkdownRenderer","forceFormat","customConfig","internalContent","renderComplete","adaptedMessage","defaultConfig","newContent","appendContent","markdownRenderer","updateContent","setContent","finishStreaming","getRenderedHTML","currentAgentChat","returnToParentChat","parentChatName","recentAgents","showAgentSide","avatarsExpanded","expandAvatars","collapseAvatars","handleAvatarMouseEnter","hideAgentCard","quickStartAgentChat","charAt","toggleSidePanel","hoveredAgentCard","agentCardStyle","onPanelEnter","onPanelLeave","displayMessages","isMineMessage","onLLMStreamCompleted","onLLMStreamError","isPrivate","activeSideTab","startAgentChat","editAgent","filteredMyAgents","agentSectionTitle","_vm$selectedAgent","selectedAgent","selectAgent","filteredSharedAgents","_vm$selectedAgent2","refreshAgents","roleDescription","getStatusTagType","canManageAgent","_vm$agent$capabilitie","isAvailable","startChat","borderRadius","border","primaryStatusClass","primaryStatusText","deploymentClass","deploymentText","isPublished","isRecentlyActive","serviceStatusText","capabilities","maxConcurrency","displayCapabilities","capability","canEdit","canManage","isOnline","canShare","pulse","showPulse","pulseInterval","serviceStatus","lastHeartbeat","_this$agent$deploymen","deployment","_this$agent$deploymen2","typeMap","modeMap","_this$agent$capabilit","_this$agent$capabilit2","_this$agent$capabilit3","_this$agent$capabilit4","caps","messageTypes","taskTypes","_this$agent$deploymen3","shareScope","startPulseAnimation","stopPulseAnimation","ChatAgentMember","myAgents","sharedAgents","baseHeight","itemCount","targetName","loadUserAgents","loadGroupSharedAgents","loadFriendSharedAgents","fullTargetId","agents","callRooCodeCommand","allowedGroups","excludeUserId","allowedUsers","loadAgents","cap","showActions","mixins","agentCardMixin","streamingMessage","onStreamingFinish","handleError","StreamingRenderer","chunks","endTime","startStream","streamingRenderer","startStreaming","addChunk","appendChunk","endStream","errorData","ChatAgentSide","ChatAgentCard","LLMStreamMessage","a2aClient","streamingMessageId","hoverCardTimeout","avatarsFullyExpanded","avatarExpandTimeout","avatarFullyExpandTimeout","pendingHoverCard","hoverCheckTimeout","activeLLMStream","llmStreams","agentStatusTimer","lastCompletedTask","safeGetProperty","sendToAgent","_this$currentAgentCha","throttle","func","delay","timeoutId","lastExecTime","handleAvatarError","handleLLMStreamRequest","question","streamInfo","isStarted","handleLLMStreamChunk","requestAnimationFrame","streamRef","handleLLMStreamEnd","setTaskContinuation","chatInputRef","handleLLMStreamError","currentScroll","registerLLMStreamHandlers","originalCallback","_agent$publishInfo","A2AClient","BoxIM","handleAgentMessage","onStatusChange","statusInfo","handleAgentStatusChange","agentWithEndpoint","serviceEndpoint","publishInfo","serverUrl","startAgentStatusMonitoring","placeholderIndex","placeholderId","existingIndex","updatedMessage","saveAgentChatHistory","streamingMsg","agentMsg","isConnected","currentStatus","stopAgentStatusMonitoring","payload","storageKey","savedData","initA2AClient","_this$currentAgentCha2","_this$currentAgentCha3","_this$currentAgentCha4","dataToSave","userChatKey","userChats","_this$a2aClient","disconnect","_this$currentAgentCha5","parentIndex","textMessages","userMsg","placeholderMsgId","placeholderMsg","showAgentCard","position","bottom","matches","clearHideTimeout","container","animatedWrapper","fixedWrapper","savedChat","agentInfo","loadRecentAgents","foundAgent","filteredAgents","allMessages","displayTitle","insertIndex","windowWidth","cardWidth","avatarCenterX","avatarBottomY","arrowOffset","_this$a2aClient2","exitAgentChat","loadAgentChatHistory","editing","isInitEvent","lockTip","initEvent","showTip","ZeroWidthEncoderFinal","stringToBytes","encoded","byte","low","CHARS","BOUNDARY","START","END","startIdx","endIdx","highIdx","lowIdx","bytesToString","typeChar","remaining","idMatch","chatTypeMatch","senderTerminalMatch","str","byte1","fromCharCode","byte2","byte3","byte4","allZeroWidth","cleaned","char","encode","regex","exec","decode","_defineProperty","MentionHelperFinal","embedInText","hasZeroWidthParams","proxy","StreamingBuffer","buffer","renderTimer","lastRenderTime","chunkSize","renderInterval","maxBufferSize","autoFlushDelay","onFlush","onAppend","totalChunks","totalRenders","totalChars","timeSinceLastRender","flush","scheduleFlush","finish","getStats","bufferSize","avgChunkSize","renderEfficiency","initialMessage","streamingConfig","streamingBuffer","performanceMonitor","renders","initStreamingBuffer","handleFlush","handleAppend","initialContent","contentSize","messageRenderer","getPerformanceStats","cancelStreaming","setFullContent","getCurrentContent","reduce","sum","avgRenderInterval","charsPerSecond","bufferStats","onSwitchCheck","isCheck","checkCount","onRemoveFriend","onOk","inviteVO","friendIds","stateTip","rc","onStopAudio","onStartRecord","onPauseRecord","onResumeRecord","onCompleteRecord","onPlayAudio","onRestartRecord","Recorder","destroy","resume","wav","getWAVBlob","renderedContent","enableKatex","enableMermaid","enableHighlight","md","renderBuffer","mermaidInitialized","contentToRender","renderContent","initMarkdownIt","initMermaid","MarkdownIt","html","linkify","typographer","breaks","lang","hljs","getLanguage","highlighted","language","ignoreIllegals","utils","escapeHtml","setupPlugins","renderer","table_open","taskListPlugin","katexPlugin","defaultLinkRender","link_open","tokens","env","self","renderToken","aIndex","attrIndex","attrPush","defaultFenceRender","fence","mermaidId","langClass","core","ruler","after","checkboxRegex","checkbox","inline","silent","end","block","startLine","endLine","bMarks","tShift","eMarks","nextLine","nextPos","getLines","line","math_inline","renderToString","throwOnError","math_block","displayMode","startOnLoad","theme","flowchart","useMaxWidth","htmlLabels","curve","securityLevel","parseError","renderMermaidCharts","markdownContainer","mermaidElements","querySelectorAll","dataset","processed","graphDefinition","graphId","renderError","host","install","$messageAdapter","LogManager","globalLevel","componentLevels","criticalEvents","levels","critical","off","instance","shouldLog","level","_this$config$componen","numLevel","isCritical","componentLevel","setComponentLevel","setGlobalLevel","getConfig","logManager","setLevel","_isVSCodeEnv","_vscodeUtils","_safeHTMLUtils","_initialized","_scrollThrottle","safeHTML","safeSetInnerHTML","safeScrollToBottom","getVSCodeUtils","getSafeHTMLUtils","currentContent","vscodeUtils","elementId","lastScroll","fallbackScrollToBottom","performantScrollToBottom","rafId","cancelAnimationFrame","newRafId","batchSetInnerHTML","updates","createDocumentFragment","getEnvironmentInfo","isVSCode","hasVSCodeUtils","hasSafeHTML","scrollThrottleSize","logPerformanceInfo","isEmpty","onPaste","onKeydown","compositionFlag","onCompositionEnd","onEditorInput","onMousedown","onBlur","atSearchText","onAtSelect","panelStyle","selectedCategory","backToFirstLevel","composing","filterItems","filteredItems","slug","activeIndex","selected","isItemSelected","selectItem","iconClass","modeType","selectCategory","currentSelection","openTime","openedFromIndicator","clickCheckInterval","currentUserTerminal","userTerminalName","currentSenderTerminal","currentTargetId","currentChatType","panelHeight","isBelow","maxHeight","innerHeight","availableHeight","existingSelection","removeEventListeners","adjustedX","panelWidth","innerWidth","loadMembers","loadItems","locateSelectedItem","lowerSearch","addEventListeners","adjustPanelPosition","handleKeydown","startClickPolling","handleClickOutside","lastClickTime","ignoreClicksUntil","updateClickTime","isClickInPanel","activeElement","scrollToActiveItem","panel","innerText","closest","confirmSelection","maxIndex","activeItem","containerRect","itemRect","hasMembers","category","allItems","_this$groupMembers","concat","newTaskItem","isNewTask","taskItems","tokensIn","tokensOut","processedModes","roleDefinition","systemModes","userModes","seenSlugs","selectedItem","_this$groupMembers2","_this$activeChat","_this$activeChat2","propsTargetUserId","activeChatTargetId","activeChatType","finalTargetId","finalChatType","senderTerminalName","MentionHelper","createTaskMention","_this$groupMembers3","_this$activeChat3","_this$activeChat4","createAgentMention","getCurrentSelection","clearSelection","RooCodeAtPanel","imageList","currentId","atIng","rooCodeAtIng","changeStored","blurRange","taskContinuation","isContinuationActive","safeGetInnerHTML","txt","clipboardData","range","getSelection","getRangeAt","startContainer","endContainer","startOffset","endOffset","deleteContents","textNode","createTextNode","insertNode","collapse","imagePush","newLine","imageElement","imgId","selectElement","asFile","filePush","fileElement","createFile","selection","t1","createRange","setStart","setEnd","firstChild","selectNodeContents","removeAllRanges","addRange","empty","atBox","shiftKey","childNodes","contentEditable","rooCodePanel","beforeAtText","showRooCodePanel","updateRange","inputContainer","onRooCodeSelect","onRooCodeMentionClick","newResult","newId","oldId","replaceRooCodeMention","oldElement","newElement","itemId","itemData","replaceChild","setStartAfter","emojiText","emojiElement","emojiCode","sizeConvert","len","divElement","parentElement","insertAdjacentElement","showAtBox","html2Escape","strHtml","nodes","tempText","each","node","nodeType","nodeName","fullLength","outerHTML","count","hasAtUsers","processedFiles","isImageFile","imageCount","documentCount","imageTypes","fillTaskMention","editor","cleanTaskName","displayTextLength","spaceNode","setCursorToEnd","onDoubleClick"],"mappings":"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","file":"js/main.f09f91b7.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"main\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"main\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2d21df69\":\"dc1619bd\",\"chunk-55cbb4e4\":\"ea9cf772\",\"chunk-64ed2b64\":\"7af92757\",\"chunk-a1723fe6\":\"be8cd437\",\"chunk-c6abf80c\":\"18b2183b\",\"chunk-e3523218\":\"c5e08883\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-55cbb4e4\":1,\"chunk-64ed2b64\":1,\"chunk-a1723fe6\":1,\"chunk-c6abf80c\":1,\"chunk-e3523218\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-2d21df69\":\"31d6cfe0\",\"chunk-55cbb4e4\":\"4f0736c9\",\"chunk-64ed2b64\":\"8c601e18\",\"chunk-a1723fe6\":\"646e4d02\",\"chunk-c6abf80c\":\"23eed669\",\"chunk-e3523218\":\"ecf99e9e\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"56d7\",\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = __webpack_public_path__ + \"img/24.52e37bff.gif\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorFriend.vue?vue&type=style&index=0&id=27b2c0bc&prod&lang=scss\"","import { render, staticRenderFns } from \"./Icp.vue?vue&type=template&id=49bc27c3\"\nimport script from \"./Icp.vue?vue&type=script&lang=js\"\nexport * from \"./Icp.vue?vue&type=script&lang=js\"\nimport style0 from \"./Icp.vue?vue&type=style&index=0&id=49bc27c3&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcPrivateAcceptor.vue?vue&type=style&index=0&id=3908b535&prod&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/8.89742749.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatGroupReaded.vue?vue&type=style&index=0&id=da0f0dcc&prod&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plugin.vue?vue&type=style&index=0&id=61bdadf0&prod&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorChatPlugin.vue?vue&type=style&index=0&id=65028289&prod&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PluginChat.vue?vue&type=style&index=1&id=bc1e3166&prod&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatBoxPlugin.vue?vue&type=style&index=0&id=1334967a&prod&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageItem.vue?vue&type=style&index=0&id=602398ff&prod&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RightMenu.vue?vue&type=style&index=0&id=5d68fb58&prod&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcGroupJoin.vue?vue&type=style&index=0&id=74737c1c&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}],on:{\"click\":function($event){return _vm.close()}}},[_c('div',{staticClass:\"emotion-box\",style:({ 'left': _vm.x + 'px', 'top': _vm.y + 'px' })},[_c('el-scrollbar',{staticStyle:{\"height\":\"220px\"}},[_c('div',{staticClass:\"emotion-item-list\"},_vm._l((_vm.$emo.emoTextList),function(emoText,i){return _c('div',{key:i,ref:`emoItem_${i}`,refInFor:true,staticClass:\"emotion-item\",on:{\"click\":function($event){return _vm.onClickEmo(emoText)}}})}),0)])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-show=\"show\" @click=\"close()\">\n\t\t<div class=\"emotion-box\" :style=\"{ 'left': x + 'px', 'top': y + 'px' }\">\n\t\t\t<el-scrollbar style=\"height: 220px\">\n\t\t\t\t<div class=\"emotion-item-list\">\n\t\t\t\t\t<div class=\"emotion-item\" v-for=\"(emoText, i) in $emo.emoTextList\" :key=\"i\"\n\t\t\t\t\t\t@click=\"onClickEmo(emoText)\" :ref=\"`emoItem_${i}`\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</el-scrollbar>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport VSCodeAdapter from '../../api/vscode-adapter.js';\n\nexport default {\n\tname: \"emotion\",\n\tdata() {\n\t\treturn {\n\t\t\tshow: false,\n\t\t\tpos: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t},\n\t\t\tadapter: null,\n\t\t\trendered: false\n\t\t}\n\t},\n\tmounted() {\n\t\t// 初始化VSCode适配器（不需要new，直接使用对象）\n\t\tthis.adapter = VSCodeAdapter;\n\t},\n\tupdated() {\n\t\t// 每次更新后渲染emoji\n\t\tthis.renderEmojis();\n\t},\n\tmethods: {\n\t\t/**\n\t\t * 安全渲染所有emoji\n\t\t */\n\t\trenderEmojis() {\n\t\t\tif (!this.show || this.rendered) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$emo.emoTextList.forEach((emoText, i) => {\n\t\t\t\t\tconst refName = `emoItem_${i}`;\n\t\t\t\t\tconst element = this.$refs[refName];\n\t\t\t\t\t\n\t\t\t\t\tif (element && element[0]) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// 使用适配器安全设置emoji HTML\n\t\t\t\t\t\t\tconst emoHtml = this.$emo.textToImg(emoText, 'emoji-large');\n\t\t\t\t\t\t\tthis.adapter.setInnerHTML(element[0], emoHtml);\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.warn('[Emotion] Failed to render emoji with adapter:', error);\n\t\t\t\t\t\t\t// 降级处理：使用纯文本\n\t\t\t\t\t\t\telement[0].textContent = emoText;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.rendered = true;\n\t\t\t});\n\t\t},\n\t\tonClickEmo(emoText) {\n\t\t\tlet emotion = `#${emoText};`\n\t\t\tthis.$emit('emotion', emotion)\n\t\t},\n\t\topen(pos) {\n\t\t\tthis.pos = pos;\n\t\t\tthis.show = true;\n\t\t\tthis.rendered = false; // 重置渲染状态\n\t\t\t// 延迟渲染emoji\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.renderEmojis();\n\t\t\t});\n\t\t},\n\t\tclose() {\n\t\t\tthis.show = false;\n\t\t\tthis.rendered = false;\n\t\t}\n\t},\n\tcomputed: {\n\t\tx() {\n\t\t\treturn this.pos.x - 22;\n\t\t},\n\t\ty() {\n\t\t\treturn this.pos.y - 234;\n\t\t}\n\t}\n}\n</script>\n<style scoped lang=\"scss\">\n.emotion-box {\n\tposition: fixed;\n\twidth: 372px;\n\tbox-sizing: border-box;\n\tpadding: 5px;\n\t//border-radius: 5px;\n\tbackground-color: #fff;\n\tbox-shadow: var(--im-box-shadow);\n\n\t.emotion-item-list {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\n\t\t.emotion-item {\n\t\t\ttext-align: center;\n\t\t\tcursor: pointer;\n\t\t\tpadding: 2px;\n\n\t\t}\n\t}\n\n\t//&:after {\n\t//\tcontent: \"\";\n\t//\tposition: absolute;\n\t//\tleft: 185px;\n\t//\tbottom: -30px;\n\t//\twidth: 0;\n\t//\theight: 0;\n\t//\tborder-style: solid dashed dashed;\n\t//\tborder-color: #f5f5f5 transparent transparent;\n\t//\toverflow: hidden;\n\t//\tborder-width: 15px;\n\t//}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Emotion.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Emotion.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Emotion.vue?vue&type=template&id=8244047c&scoped=true\"\nimport script from \"./Emotion.vue?vue&type=script&lang=js\"\nexport * from \"./Emotion.vue?vue&type=script&lang=js\"\nimport style0 from \"./Emotion.vue?vue&type=style&index=0&id=8244047c&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8244047c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-upload',{attrs:{\"action\":'#',\"http-request\":_vm.onFileUpload,\"accept\":_vm.fileTypes == null ? '' : _vm.fileTypes.join(','),\"show-file-list\":false,\"disabled\":_vm.disabled,\"before-upload\":_vm.beforeUpload,\"multiple\":true}},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-upload :action=\"'#'\" :http-request=\"onFileUpload\" :accept=\"fileTypes == null ? '' : fileTypes.join(',')\"\n\t\t:show-file-list=\"false\" :disabled=\"disabled\" :before-upload=\"beforeUpload\" :multiple=\"true\">\n\t\t<slot></slot>\n\t</el-upload>\n</template>\n\n<script>\nexport default {\n\tname: \"fileUpload\",\n\tdata() {\n\t\treturn {\n\t\t\tloading: null,\n\t\t\tuploadHeaders: {\n\t\t\t\t\"accessToken\": sessionStorage.getItem('accessToken')\n\t\t\t}\n\t\t}\n\t},\n\tprops: {\n\t\taction: {\n\t\t\ttype: String,\n\t\t\trequired: false\n\t\t},\n\t\tfileTypes: {\n\t\t\ttype: Array,\n\t\t\tdefault: null\n\t\t},\n\t\tmaxSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: null\n\t\t},\n\t\tshowLoading: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tmethods: {\n\t\tonFileUpload(file) {\n\t\t\t// 展示加载条\n\t\t\tif (this.showLoading) {\n\t\t\t\tthis.loading = this.$loading({\n\t\t\t\t\tlock: true,\n\t\t\t\t\ttext: '正在上传...',\n\t\t\t\t\tspinner: 'el-icon-loading',\n\t\t\t\t\tbackground: 'rgba(0, 0, 0, 0.7)'\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet formData = new FormData()\n\t\t\tformData.append('file', file.file)\n\t\t\tthis.$http({\n\t\t\t\turl: this.action,\n\t\t\t\tdata: formData,\n\t\t\t\tmethod: 'post',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t}\n\t\t\t}).then((data) => {\n\t\t\t\tthis.$emit(\"success\", data, file.file);\n\t\t\t}).catch((e) => {\n\t\t\t\tthis.$emit(\"fail\", e, file.file);\n\t\t\t}).finally(() => {\n\t\t\t\tthis.loading && this.loading.close();\n\t\t\t})\n\t\t},\n\t\tbeforeUpload(file) {\n\t\t\t// 校验文件类型\n\t\t\tif (this.fileTypes && this.fileTypes.length > 0) {\n\t\t\t\tlet fileType = file.type;\n\t\t\t\tlet t = this.fileTypes.find((t) => t.toLowerCase() === fileType);\n\t\t\t\tif (t === undefined) {\n\t\t\t\t\tthis.$message.error(`文件格式错误，请上传以下格式的文件：${this.fileTypes.join(\"、\")}`);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// 校验大小\n\t\t\t// if (this.maxSize && file.size > this.maxSize) {\n\t\t\t// \tthis.$message.error(`文件大小不能超过 ${this.fileSizeStr}!`);\n\t\t\t// \treturn false;\n\t\t\t// }\n\t\t\tthis.$emit(\"before\", file);\n\t\t\treturn true;\n\t\t}\n\t},\n\tcomputed: {\n\t\tfileSizeStr() {\n\t\t\tif (this.maxSize > 1024 * 1024) {\n\t\t\t\treturn Math.round(this.maxSize / 1024 / 1024) + \"M\";\n\t\t\t}\n\t\t\tif (this.maxSize > 1024) {\n\t\t\t\treturn Math.round(this.maxSize / 1024) + \"KB\";\n\t\t\t}\n\t\t\treturn this.maxSize + \"B\";\n\t\t}\n\t}\n}\n</script>\n\n<style></style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileUpload.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FileUpload.vue?vue&type=template&id=1d84d55d\"\nimport script from \"./FileUpload.vue?vue&type=script&lang=js\"\nexport * from \"./FileUpload.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/40.2b8929bd.gif\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"loading-dots\"},[_c('span',{staticClass:\"dot\"}),_c('span',{staticClass:\"dot\"}),_c('span',{staticClass:\"dot\"})])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"loading-dots\">\n    <span class=\"dot\"></span>\n    <span class=\"dot\"></span>\n    <span class=\"dot\"></span>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'LoadingDots'\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.loading-dots {\n  display: inline-flex;\n  align-items: center;\n  gap: 4px;\n  padding: 8px 12px;\n  background: #f0f0f0;\n  border-radius: 8px;\n  min-width: 60px;\n  height: 36px;\n  \n  .dot {\n    width: 8px;\n    height: 8px;\n    background: #999;\n    border-radius: 50%;\n    animation: pulse 1.4s infinite ease-in-out both;\n    \n    &:nth-child(1) {\n      animation-delay: -0.32s;\n    }\n    \n    &:nth-child(2) {\n      animation-delay: -0.16s;\n    }\n  }\n}\n\n@keyframes pulse {\n  0%, 80%, 100% {\n    transform: scale(0.8);\n    opacity: 0.5;\n  }\n  40% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n// 暗色主题支持\n@media (prefers-color-scheme: dark) {\n  .loading-dots {\n    background: #2a2a2a;\n    \n    .dot {\n      background: #ddd;\n    }\n  }\n}\n\n// 对话框内的样式调整\n.chat-msg-text .loading-dots {\n  background: transparent;\n  padding: 0;\n  min-width: auto;\n  height: auto;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingDots.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingDots.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./LoadingDots.vue?vue&type=template&id=793015df&scoped=true\"\nimport script from \"./LoadingDots.vue?vue&type=script&lang=js\"\nexport * from \"./LoadingDots.vue?vue&type=script&lang=js\"\nimport style0 from \"./LoadingDots.vue?vue&type=style&index=0&id=793015df&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"793015df\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":\"选择成员\",\"visible\":_vm.isShow,\"width\":\"700px\",\"modal\":false},on:{\"update:visible\":function($event){_vm.isShow=$event}}},[_c('div',{staticClass:\"group-member-selector\"},[_c('div',{staticClass:\"left-box\"},[_c('el-input',{attrs:{\"placeholder\":\"搜索\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"suffix\"},slot:\"suffix\"})]),_c('virtual-scroller',{staticClass:\"scroll-box\",attrs:{\"items\":_vm.showMembers},scopedSlots:_vm._u([{key:\"default\",fn:function({ item }){return [_c('group-member-item',{attrs:{\"member\":item},nativeOn:{\"click\":function($event){return _vm.onClickMember(item)}}},[_c('el-checkbox',{attrs:{\"disabled\":item.locked},on:{\"change\":function($event){return _vm.onChange(item)}},nativeOn:{\"click\":function($event){$event.stopPropagation();}},model:{value:(item.checked),callback:function ($$v) {_vm.$set(item, \"checked\", $$v)},expression:\"item.checked\"}})],1)]}}])})],1),_c('div',{staticClass:\"arrow el-icon-d-arrow-right\"}),_c('div',{staticClass:\"right-box\"},[_c('div',{staticClass:\"select-tip\"},[_vm._v(\" 已勾选\"+_vm._s(_vm.checkedMembers.length)+\"位成员\")]),_c('div',{staticClass:\"checked-member-list\"},_vm._l((_vm.members),function(m){return _c('div',{key:m.userId},[(m.checked)?_c('group-member',{staticClass:\"member-item\",attrs:{\"member\":m}}):_vm._e()],1)}),0)])]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.close()}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.ok()}}},[_vm._v(\"确 定\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"group-member-item\",style:({ 'height': _vm.height + 'px' })},[_c('div',{staticClass:\"member-avatar\"},[_c('head-image',{attrs:{\"size\":_vm.headImageSize,\"name\":_vm.member.showNickName,\"url\":_vm.member.headImage,\"online\":_vm.member.online}})],1),_c('div',{staticClass:\"member-name\",style:({ 'line-height': _vm.height + 'px' })},[_c('div',[_vm._v(_vm._s(_vm.member.showNickName))])]),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"group-member-item\" :style=\"{ 'height': height + 'px' }\">\n        <div class=\"member-avatar\">\n            <head-image :size=\"headImageSize\" :name=\"member.showNickName\" :url=\"member.headImage\"\n                :online=\"member.online\"> </head-image>\n        </div>\n        <div class=\"member-name\" :style=\"{ 'line-height': height + 'px' }\">\n            <div>{{ member.showNickName }}</div>\n        </div>\n        <slot></slot>\n    </div>\n</template>\n\n<script>\nimport HeadImage from \"../common/HeadImage.vue\";\nexport default {\n    name: \"groupMember\",\n    components: { HeadImage },\n    data() {\n        return {};\n    },\n    props: {\n        member: {\n            type: Object,\n            required: true\n        },\n        height: {\n            type: Number,\n            default: 50\n        }\n    },\n    computed: {\n        headImageSize() {\n            return Math.ceil(this.height * 0.75)\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\n.group-member-item {\n    display: flex;\n    position: relative;\n    padding: 0 15px;\n    align-items: center;\n    white-space: nowrap;\n    box-sizing: border-box;\n\n    &:hover {\n        background-color: var(--im-background-active);\n    }\n\n    &.active {\n        background-color: #eeeeee;\n    }\n\n    .member-name {\n        flex: 1;\n        padding-left: 10px;\n        height: 100%;\n        text-align: left;\n        white-space: nowrap;\n        overflow: hidden;\n        font-size: var(--im-font-size);\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupMemberItem.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupMemberItem.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GroupMemberItem.vue?vue&type=template&id=ee848b34\"\nimport script from \"./GroupMemberItem.vue?vue&type=script&lang=js\"\nexport * from \"./GroupMemberItem.vue?vue&type=script&lang=js\"\nimport style0 from \"./GroupMemberItem.vue?vue&type=style&index=0&id=ee848b34&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<el-dialog title=\"选择成员\" :visible.sync=\"isShow\" width=\"700px\" :modal=\"false\">\n\t\t<div class=\"group-member-selector\">\n\t\t\t<div class=\"left-box\">\n\t\t\t\t<el-input placeholder=\"搜索\" v-model=\"searchText\">\n\t\t\t\t\t<i class=\"el-icon-search el-input__icon\" slot=\"suffix\"> </i>\n\t\t\t\t</el-input>\n\t\t\t\t<virtual-scroller class=\"scroll-box\" :items=\"showMembers\">\n\t\t\t\t\t<template v-slot=\"{ item }\">\n\t\t\t\t\t\t<group-member-item :member=\"item\" @click.native=\"onClickMember(item)\">\n\t\t\t\t\t\t\t<el-checkbox :disabled=\"item.locked\" v-model=\"item.checked\" @change=\"onChange(item)\"\n\t\t\t\t\t\t\t\t@click.native.stop=\"\"></el-checkbox>\n\t\t\t\t\t\t</group-member-item>\n\t\t\t\t\t</template>\n\t\t\t\t</virtual-scroller>\n\t\t\t</div>\n\t\t\t<div class=\"arrow el-icon-d-arrow-right\"></div>\n\t\t\t<div class=\"right-box\">\n\t\t\t\t<div class=\"select-tip\"> 已勾选{{ checkedMembers.length }}位成员</div>\n\t\t\t\t<div class=\"checked-member-list\">\n\t\t\t\t\t<div v-for=\"m in members\" :key=\"m.userId\">\n\t\t\t\t\t\t<group-member class=\"member-item\" v-if=\"m.checked\" :member=\"m\"></group-member>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<span slot=\"footer\" class=\"dialog-footer\">\n\t\t\t<el-button @click=\"close()\">取 消</el-button>\n\t\t\t<el-button type=\"primary\" @click=\"ok()\">确 定</el-button>\n\t\t</span>\n\t</el-dialog>\n</template>\n\n<script>\nimport VirtualScroller from '../common/VirtualScroller.vue';\nimport GroupMemberItem from './GroupMemberItem.vue';\nimport GroupMember from './GroupMember.vue';\n\nexport default {\n\tname: \"addGroupMember\",\n\tcomponents: {\n\t\tGroupMemberItem,\n\t\tGroupMember,\n\t\tVirtualScroller\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisShow: false,\n\t\t\tsearchText: \"\",\n\t\t\tmaxSize: -1,\n\t\t\tmembers: []\n\t\t}\n\t},\n\tprops: {\n\t\tgroupId: {\n\t\t\ttype: Number\n\t\t}\n\t},\n\tmethods: {\n\t\topen(maxSize, checkedIds, lockedIds, hideIds) {\n\t\t\tthis.maxSize = maxSize;\n\t\t\tthis.isShow = true;\n\t\t\tthis.loadGroupMembers(checkedIds, lockedIds, hideIds);\n\t\t},\n\t\tloadGroupMembers(checkedIds, lockedIds, hideIds) {\n\t\t\tthis.$http({\n\t\t\t\turl: `/group/members/${this.groupId}`,\n\t\t\t\tmethod: 'get'\n\t\t\t}).then((members) => {\n\t\t\t\tmembers.forEach((m) => {\n\t\t\t\t\t// 默认选择和锁定的用户\n\t\t\t\t\tm.checked = checkedIds.indexOf(m.userId) >= 0;\n\t\t\t\t\tm.locked = lockedIds.indexOf(m.userId) >= 0;\n\t\t\t\t\t// 隐藏指定的用户（比如群主）\n\t\t\t\t\tm.hide = hideIds && hideIds.indexOf(m.userId) >= 0;\n\t\t\t\t});\n\t\t\t\tthis.members = members;\n\t\t\t});\n\t\t},\n\t\tonClickMember(m) {\n\t\t\tif (!m.locked) {\n\t\t\t\tm.checked = !m.checked;\n\t\t\t}\n\t\t\tif (this.checkedMembers.length > this.maxSize) {\n\t\t\t\tthis.$message.error(`最多选择${this.maxSize}位成员`)\n\t\t\t\tm.checked = false;\n\t\t\t}\n\t\t},\n\t\tonChange(m) {\n\t\t\tif (this.checkedMembers.length > this.maxSize) {\n\t\t\t\tthis.$message.error(`最多选择${this.maxSize}位成员`)\n\t\t\t\tm.checked = false;\n\t\t\t}\n\t\t},\n\t\tok() {\n\t\t\tthis.$emit(\"complete\", this.checkedMembers);\n\t\t\tthis.isShow = false;\n\t\t},\n\t\tclose() {\n\t\t\tthis.isShow = false;\n\t\t}\n\t},\n\tcomputed: {\n\t\tcheckedMembers() {\n\t\t\tlet ids = [];\n\t\t\tthis.members.forEach((m) => {\n\t\t\t\tif (m.checked) {\n\t\t\t\t\tids.push(m);\n\t\t\t\t}\n\t\t\t})\n\t\t\treturn ids;\n\t\t},\n\t\tshowMembers() {\n\t\t\treturn this.members.filter((m) => !m.hide && !m.quit && m.showNickName.includes(this.searchText))\n\t\t}\n\t}\n\n}\n</script>\n\n<style lang=\"scss\">\n.group-member-selector {\n\tdisplay: flex;\n\n\n\t.left-box {\n\t\twidth: 48%;\n\t\toverflow: hidden;\n\t\tborder: var(--im-border);\n\n\n\t\t.scroll-box {\n\t\t\theight: 400px;\n\t\t}\n\n\n\t\t.el-input__inner {\n\t\t\tborder: none;\n\t\t\tborder-bottom: var(--im-border);\n\t\t}\n\t}\n\n\n\t.arrow {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tfont-size: 20px;\n\t\tpadding: 10px;\n\t\tfont-weight: 600;\n\t\tcolor: var(--im-color-primary);\n\t}\n\n\t.right-box {\n\t\twidth: 48%;\n\t\tborder: var(--im-border);\n\n\t\t.select-tip {\n\t\t\ttext-align: left;\n\t\t\theight: 40px;\n\t\t\tline-height: 40px;\n\t\t\ttext-indent: 5px;\n\t\t\tcolor: var(--im-text-color-light)\n\t\t}\n\n\t\t.checked-member-list {\n\t\t\tpadding: 10px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row;\n\t\t\tflex-wrap: wrap;\n\n\t\t\t.member-item {\n\t\t\t\tpadding: 2px;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupMemberSelector.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupMemberSelector.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GroupMemberSelector.vue?vue&type=template&id=968a283e\"\nimport script from \"./GroupMemberSelector.vue?vue&type=script&lang=js\"\nexport * from \"./GroupMemberSelector.vue?vue&type=script&lang=js\"\nimport style0 from \"./GroupMemberSelector.vue?vue&type=style&index=0&id=968a283e&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcGroupVideo.vue?vue&type=style&index=0&id=1e429f56&prod&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FullImage.vue?vue&type=style&index=0&id=4393d12e&prod&lang=scss\"","module.exports = \"data:image/gif;base64,R0lGODlhUABQAPcxANi7Mv/uRLmbKP/rPv/jRodoHf/xUf/mS/LSNf/wTv/dMKKCIv/sU//pSZd5I0UoEf/lNUwuE8KqNFY4FXdYG2BCFoBnJenTQGlKFz0gD+/aR/zfNbCZNP/1V6aLK+TJNtG7PXBSGf/pT+G7K+vGLf/vSv/yVerAKv/hMZJxHv/2Xf/gQ9exKf/ZMf/eOP/aM//oOfTdPP/nQf/iPv/VMP/IK/mxHv/PLP/SLf/PMP/3dP/LK/y7KfiqD+yIEvelDf2/LP/3bf/+4f/6p//92P/ELfWjCP/HMPisEfaiDP/AKv/LHO6NEferC/+3Df++J//DKf/LL/mzIf/KNvu5J/3BLv/HGviuGv/CFvqvEv/7tP/6mvmuD//JMv/7rv/xS/+8Ef/xXf/yc//ZOf/xbP+9Kv/jUP/xZf/dPv/eTf/2ZP/0UPGWDv/tZP/ZPvq2JPy0Gv/uWv/qX//VSPSeC/SZEP+4Iv/ye/23I/y0H//0iv63HvuyE/yoD//4e//9z//0mv/bSP+6Jv/VPP/LO//aQv/tdP/hbPCREf/RPv/bXP/aUv/eVf/mXv/iVv/VQvqwGfSmD+mDFPerF/OWEfaeD//AMP/sbf/ygv/fXP/dZP/QJP/ZTf/ogP/pcf/jXf/mbf/ukP/UT//OPf/4gv/sgv/OR/mhEPy9K//mev/FOP/YWf/iZP25Fv/RQ/68Gf/0kv/DNf/HPf/ldP/mZvCcAfzPLv/uif/qiP/vmf/pZ//WVP/5iv/6of/5kuqDE//8u/WmCP/RTPWoE/u2E//KIf/8xfaoDP/3xv/SN/7EMPKaCv/1vf/QNPvZNP/ypsumJ/OjBf/WNLaSI/PJLfOjC//TM+mCFINkHP/MNPOgBuqCFPKfBP/oVsOeJv/JQ+mCE+qCE//se+mBFP+uDvDgSv+yDf/PHwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUVEMUIyMENFQjJEMTFFQzkzMDFFRTlDQ0MyNzBFMjciIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUVEMUIyMERFQjJEMTFFQzkzMDFFRTlDQ0MyNzBFMjciPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo1RUQxQjIwQUVCMkQxMUVDOTMwMUVFOUNDQzI3MEUyNyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo1RUQxQjIwQkVCMkQxMUVDOTMwMUVFOUNDQzI3MEUyNyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQz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\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxFriend.vue?vue&type=style&index=0&id=427844bc&prod&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"group-member\"},[_c('head-image',{attrs:{\"id\":_vm.member.userId,\"name\":_vm.member.showNickName,\"url\":_vm.member.headImage,\"size\":38,\"online\":_vm.member.online}},[(_vm.showDel)?_c('div',{staticClass:\"btn-kick el-icon-error\",on:{\"click\":function($event){$event.stopPropagation();return _vm.onDelete()}}}):_vm._e()]),_c('div',{staticClass:\"member-name\"},[_vm._v(_vm._s(_vm.member.showNickName))])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"group-member\">\n\t\t<head-image :id=\"member.userId\" :name=\"member.showNickName\" :url=\"member.headImage\" :size=\"38\"\n\t\t\t:online=\"member.online\">\n\t\t\t<div v-if=\"showDel\" @click.stop=\"onDelete()\" class=\"btn-kick el-icon-error\"></div>\n\t\t</head-image>\n\t\t<div class=\"member-name\">{{ member.showNickName }}</div>\n\t</div>\n</template>\n\n<script>\nimport HeadImage from \"../common/HeadImage.vue\";\nexport default {\n\tname: \"groupMember\",\n\tcomponents: { HeadImage },\n\tdata() {\n\t\treturn {};\n\t},\n\tprops: {\n\t\tmember: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tshowDel: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tmethods: {\n\t\tonDelete() {\n\t\t\tthis.$emit(\"del\", this.member);\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.group-member {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\twidth: 50px;\n\n\t.member-name {\n\t\tfont-size: 12px;\n\t\ttext-align: center;\n\t\twidth: 100%;\n\t\theight: 30px;\n\t\tline-height: 30px;\n\t\twhite-space: nowrap;\n\t\ttext-overflow: ellipsis;\n\t\toverflow: hidden\n\t}\n\n\t.btn-kick {\n\t\tdisplay: none;\n\t\tposition: absolute;\n\t\tright: -8px;\n\t\ttop: -8px;\n\t\tcolor: darkred;\n\t\tfont-size: 20px;\n\t\tcursor: pointer;\n\t}\n\n\t&:hover .btn-kick {\n\t\tdisplay: block;\n\t\tcolor: #ce1818;\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupMember.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupMember.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GroupMember.vue?vue&type=template&id=98e9470e\"\nimport script from \"./GroupMember.vue?vue&type=script&lang=js\"\nexport * from \"./GroupMember.vue?vue&type=script&lang=js\"\nimport style0 from \"./GroupMember.vue?vue&type=style&index=0&id=98e9470e&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/5.11e27819.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendItem.vue?vue&type=style&index=0&id=1a2afe26&prod&scope=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContainerManager.vue?vue&type=style&index=0&id=118f200b&prod&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/19.89260df5.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnifiedMessageRenderer.vue?vue&type=style&index=0&id=09d3c536&prod&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/2.302b51b8.gif\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxSession.vue?vue&type=style&index=0&id=45d813b4&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-scrollbar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show && _vm.showMembers.length),expression:\"show && showMembers.length\"}],ref:\"scrollBox\",staticClass:\"group-member-choose\",style:({ 'left': _vm.pos.x + 'px', 'top': _vm.pos.y - 300 + 'px' })},_vm._l((_vm.showMembers),function(member,idx){return _c('div',{key:member.id},[_c('chat-group-member',{attrs:{\"member\":member,\"height\":40,\"active\":_vm.activeIdx == idx},nativeOn:{\"click\":function($event){return _vm.onSelectMember(member)}}})],1)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-scrollbar v-show=\"show && showMembers.length\" ref=\"scrollBox\" class=\"group-member-choose\"\n\t\t:style=\"{ 'left': pos.x + 'px', 'top': pos.y - 300 + 'px' }\">\n\t\t<div v-for=\"(member, idx) in showMembers\" :key=\"member.id\">\n\t\t\t<chat-group-member :member=\"member\" :height=\"40\" :active='activeIdx == idx'\n\t\t\t\t@click.native=\"onSelectMember(member)\"></chat-group-member>\n\t\t</div>\n\t</el-scrollbar>\n</template>\n\n<script>\nimport ChatGroupMember from \"./ChatGroupMember.vue\";\nexport default {\n\tname: \"chatAtBox\",\n\tcomponents: {\n\t\tChatGroupMember\n\t},\n\tprops: {\n\t\tsearchText: {\n\t\t\ttype: String,\n\t\t\tdefault: \"\"\n\t\t},\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t},\n\t\tmembers: {\n\t\t\ttype: Array\n\t\t},\n\t\ttargetUserId: {\n\t\t\ttype: Number,\n\t\t\tdefault: null\n\t\t},\n\t\tenableAgents: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshow: false,\n\t\t\tpos: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t},\n\t\t\tactiveIdx: 0,\n\t\t\tshowMembers: []\n\t\t};\n\t},\n\tmethods: {\n\t\tinit() {\n\t\t\tthis.$refs.scrollBox.wrap.scrollTop = 0;\n\t\t\tthis.showMembers = [];\n\t\t\tlet userId = this.$store.state.userStore.userInfo.id;\n\t\t\tlet name = \"全体成员\";\n\t\t\tif (this.ownerId == userId && name.startsWith(this.searchText)) {\n\t\t\t\tthis.showMembers.push({\n\t\t\t\t\tuserId: -1,\n\t\t\t\t\tshowNickName: name\n\t\t\t\t})\n\t\t\t}\n\t\t\tthis.members.forEach((m) => {\n\t\t\t\t// 只显示100条\n\t\t\t\tif (this.showMembers.length > 100) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (m.userId != userId && !m.quit && m.showNickName.startsWith(this.searchText)) {\n\t\t\t\t\tthis.showMembers.push(m);\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.activeIdx = this.showMembers.length > 0 ? 0 : -1;\n\t\t},\n\t\topen(pos) {\n\t\t\tthis.show = true;\n\t\t\tthis.pos = pos;\n\t\t\tthis.init();\n\t\t},\n\t\tclose() {\n\t\t\tthis.show = false;\n\t\t},\n\t\tmoveUp() {\n\t\t\tif (this.activeIdx > 0) {\n\t\t\t\tthis.activeIdx--;\n\t\t\t\tthis.scrollToActive()\n\t\t\t}\n\t\t},\n\t\tmoveDown() {\n\t\t\tif (this.activeIdx < this.showMembers.length - 1) {\n\t\t\t\tthis.activeIdx++;\n\t\t\t\tthis.scrollToActive()\n\t\t\t}\n\t\t},\n\t\tselect() {\n\t\t\tif (this.activeIdx >= 0) {\n\t\t\t\tthis.onSelectMember(this.showMembers[this.activeIdx])\n\t\t\t}\n\t\t\tthis.close();\n\t\t},\n\t\tscrollToActive() {\n\t\t\tif (this.activeIdx * 35 - this.$refs.scrollBox.wrap.clientHeight > this.$refs.scrollBox.wrap.scrollTop) {\n\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop += 140;\n\t\t\t\tif (this.$refs.scrollBox.wrap.scrollTop > this.$refs.scrollBox.wrap.scrollHeight) {\n\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = this.$refs.scrollBox.wrap.scrollHeight\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.activeIdx * 35 < this.$refs.scrollBox.wrap.scrollTop) {\n\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop -= 140;\n\t\t\t\tif (this.$refs.scrollBox.wrap.scrollTop < 0) {\n\t\t\t\t\tthis.$refs.scrollBox.wrap.scrollTop = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonSelectMember(member) {\n\t\t\tthis.$emit(\"select\", member);\n\t\t\tthis.show = false;\n\t\t}\n\t},\n\tcomputed: {\n\t\tisOwner() {\n\t\t\treturn this.$store.state.userStore.userInfo.id == this.ownerId;\n\t\t}\n\t},\n\twatch: {\n\t\tsearchText: {\n\t\t\thandler(newText, oldText) {\n\t\t\t\tthis.init();\n\t\t\t}\n\t\t}\n\t}\n\n}\n</script>\n\n<style scoped lang=\"scss\">\n.group-member-choose {\n\tposition: fixed;\n\twidth: 200px;\n\theight: 300px;\n\t//border: 1px solid #53a0e79c;\n\t//border-radius: 5px;\n\tbackground-color: #fff;\n\tbox-shadow: var(--im-box-shadow);\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAtBox.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAtBox.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatAtBox.vue?vue&type=template&id=3bf3de43&scoped=true\"\nimport script from \"./ChatAtBox.vue?vue&type=script&lang=js\"\nexport * from \"./ChatAtBox.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatAtBox.vue?vue&type=style&index=0&id=3bf3de43&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3bf3de43\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/27.65ed7407.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddGroupMember.vue?vue&type=style&index=0&id=4a3a9c6e&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/47.b4ac667a.gif\";","module.exports = __webpack_public_path__ + \"img/25.6f582617.gif\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-msg-item\"},[(_vm.msgInfo.type == _vm.$enums.MESSAGE_TYPE.TIP_TIME)?_c('div',{staticClass:\"chat-msg-tip\"},[_vm._v(\" \"+_vm._s(_vm.$date.toTimeText(_vm.msgInfo.sendTime))+\" \")]):(_vm.isNormal || _vm.msgInfo.type == _vm.$enums.MESSAGE_TYPE.TIP_TEXT)?_c('div',{staticClass:\"chat-msg-normal\",class:{ 'chat-msg-mine': _vm.mine }},[(!_vm.isTipMessage)?_c('div',{staticClass:\"head-image\"},[_c('head-image',{attrs:{\"name\":_vm.showName,\"size\":38,\"url\":_vm.headImage,\"id\":parseInt(_vm.msgInfo.sendId) || 0}})],1):_vm._e(),_c('div',{staticClass:\"chat-msg-content\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mode == 1 && _vm.msgInfo.groupId && !_vm.msgInfo.selfSend && !_vm.isTipMessage),expression:\"mode == 1 && msgInfo.groupId && !msgInfo.selfSend && !isTipMessage\"}],staticClass:\"chat-msg-top\"},[_c('span',[_vm._v(_vm._s(_vm.showName))])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mode == 2 && !_vm.isTipMessage),expression:\"mode == 2 && !isTipMessage\"}],staticClass:\"chat-msg-top\"},[_c('span',[_vm._v(_vm._s(_vm.showName))]),_c('span',[_vm._v(_vm._s(_vm.$date.toTimeText(_vm.msgInfo.sendTime)))])]),_c('div',{staticClass:\"chat-msg-bottom\",on:{\"contextmenu\":function($event){return _vm.handleContextMenu($event)}}},[_c('div',{ref:\"chatMsgBox\"},[(_vm.msgInfo.isLoading)?_c('div',{staticClass:\"chat-msg-text\"},[_c('loading-dots')],1):(_vm.isAgentMessage && (_vm.msgInfo.content || !_vm.msgInfo.streaming))?_c('div',{staticClass:\"chat-msg-text\",class:{ 'agent-error-message': _vm.msgInfo.type === 'error' }},[_c('unified-message-renderer',{attrs:{\"message\":_vm.agentMessageObject,\"force-format\":'markdown',\"show-enhancements\":false},on:{\"rendered\":_vm.onMessageRendered}})],1):(_vm.isAgentMessage && _vm.msgInfo.streaming && !_vm.msgInfo.content)?_c('div',{staticClass:\"chat-msg-text\"},[_c('loading-dots')],1):(_vm.msgInfo.type == _vm.$enums.MESSAGE_TYPE.TEXT)?_c('span',{ref:\"messageText\",staticClass:\"chat-msg-text\"}):_vm._e(),(_vm.msgInfo.type == _vm.$enums.MESSAGE_TYPE.TIP_TEXT)?_c('span',{staticClass:\"chat-msg-text\"},[_vm._v(_vm._s(_vm.msgInfo.content))]):_vm._e(),(_vm.msgInfo.type == _vm.$enums.MESSAGE_TYPE.IMAGE)?_c('div',{staticClass:\"chat-msg-image\"},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"img-load-box\",attrs:{\"element-loading-text\":\"上传中..\",\"element-loading-background\":\"rgba(0, 0, 0, 0.4)\"}},[_c('img',{staticClass:\"send-image\",attrs:{\"src\":JSON.parse(_vm.msgInfo.content).thumbUrl,\"loading\":\"lazy\"},on:{\"click\":function($event){return _vm.showFullImageBox()}}})]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loadFail),expression:\"loadFail\"}],staticClass:\"send-fail el-icon-warning\",attrs:{\"title\":\"发送失败\"},on:{\"click\":_vm.onSendFail}})]):_vm._e(),(_vm.msgInfo.type == _vm.$enums.MESSAGE_TYPE.FILE)?_c('div',{staticClass:\"chat-msg-file\"},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"chat-file-box\"},[_c('div',{staticClass:\"chat-file-info\"},[_c('el-link',{staticClass:\"chat-file-name\",attrs:{\"underline\":true,\"target\":\"_blank\",\"type\":\"primary\",\"href\":_vm.data.url,\"download\":_vm.data.name},on:{\"click\":_vm.onFileDownloadClick}},[_vm._v(_vm._s(_vm.data.name))]),_c('div',{staticClass:\"chat-file-size\"},[_vm._v(_vm._s(_vm.fileSize))])],1),_c('div',{staticClass:\"chat-file-icon\"},[_c('FileIcon',{attrs:{\"fileName\":_vm.data.name,\"size\":44}})],1)]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loadFail),expression:\"loadFail\"}],staticClass:\"send-fail el-icon-warning\",attrs:{\"title\":\"发送失败\"},on:{\"click\":_vm.onSendFail}})]):_vm._e()]),(_vm.msgInfo.type == _vm.$enums.MESSAGE_TYPE.AUDIO)?_c('div',{staticClass:\"chat-msg-voice\",on:{\"click\":function($event){return _vm.onPlayVoice()}}},[_c('audio',{attrs:{\"controls\":\"\",\"src\":JSON.parse(_vm.msgInfo.content).url}})]):_vm._e(),(_vm.isAction)?_c('div',{staticClass:\"chat-action chat-msg-text\"},[(_vm.msgInfo.type == _vm.$enums.MESSAGE_TYPE.ACT_RT_VOICE)?_c('span',{staticClass:\"iconfont icon-chat-voice\",attrs:{\"title\":\"重新呼叫\"},on:{\"click\":function($event){return _vm.$emit('call')}}}):_vm._e(),(_vm.msgInfo.type == _vm.$enums.MESSAGE_TYPE.ACT_RT_VIDEO)?_c('span',{staticClass:\"iconfont icon-chat-video\",attrs:{\"title\":\"重新呼叫\"},on:{\"click\":function($event){return _vm.$emit('call')}}}):_vm._e(),_c('span',[_vm._v(_vm._s(_vm.msgInfo.content))])]):_vm._e(),(!_vm.isAction)?_c('div',{staticClass:\"chat-msg-status\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.msgInfo.selfSend && !_vm.msgInfo.groupId\n\t\t\t\t\t\t&& _vm.msgInfo.status == _vm.$enums.MESSAGE_STATUS.READED),expression:\"msgInfo.selfSend && !msgInfo.groupId\\n\\t\\t\\t\\t\\t\\t&& msgInfo.status == $enums.MESSAGE_STATUS.READED\"}],staticClass:\"chat-readed\"},[_vm._v(\"已读\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.msgInfo.selfSend && !_vm.msgInfo.groupId\n\t\t\t\t\t\t&& _vm.msgInfo.status != _vm.$enums.MESSAGE_STATUS.READED),expression:\"msgInfo.selfSend && !msgInfo.groupId\\n\\t\\t\\t\\t\\t\\t&& msgInfo.status != $enums.MESSAGE_STATUS.READED\"}],staticClass:\"chat-unread\"},[_vm._v(\"未读\")])]):_vm._e(),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.msgInfo.receipt),expression:\"msgInfo.receipt\"}],staticClass:\"chat-receipt\",on:{\"click\":_vm.onShowReadedBox}},[(_vm.msgInfo.receiptOk)?_c('span',{staticClass:\"icon iconfont icon-ok\",attrs:{\"title\":\"全体已读\"}}):_c('span',[_vm._v(_vm._s(_vm.msgInfo.readedCount)+\"人已读\")])])])])]):_vm._e(),_c('right-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menu && _vm.rightMenu.show),expression:\"menu && rightMenu.show\"}],attrs:{\"pos\":_vm.rightMenu.pos,\"items\":_vm.menuItems},on:{\"close\":function($event){_vm.rightMenu.show = false},\"select\":_vm.onSelectMenu}}),_c('chat-group-readed',{ref:\"chatGroupReadedBox\",attrs:{\"msgInfo\":_vm.msgInfo,\"groupMembers\":_vm.groupMembers}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.show),expression:\"show\"}]},[_c('div',{staticClass:\"chat-group-readed-mask\",on:{\"click\":function($event){if($event.target !== $event.currentTarget)return null;return _vm.close()}}},[_c('div',{staticClass:\"chat-group-readed\",style:({ 'left': _vm.pos.x + 'px', 'top': _vm.pos.y + 'px' }),on:{\"click\":function($event){$event.preventDefault();}}},[_c('el-tabs',{attrs:{\"type\":\"border-card\",\"stretch\":true}},[_c('el-tab-pane',{attrs:{\"label\":`已读(${_vm.readedMembers.length})`}},[_c('virtual-scroller',{staticClass:\"scroll-box\",attrs:{\"items\":_vm.readedMembers},scopedSlots:_vm._u([{key:\"default\",fn:function({ item }){return [_c('chat-group-member',{attrs:{\"member\":item}})]}}])})],1),_c('el-tab-pane',{attrs:{\"label\":`未读(${_vm.unreadMembers.length})`}},[_c('virtual-scroller',{staticClass:\"scroll-box\",attrs:{\"items\":_vm.unreadMembers},scopedSlots:_vm._u([{key:\"default\",fn:function({ item }){return [_c('chat-group-member',{attrs:{\"member\":item}})]}}])})],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.msgInfo.selfSend),expression:\"msgInfo.selfSend\"}],staticClass:\"arrow-right\",style:({ 'top': _vm.pos.arrowY + 'px' })},[_c('div',{staticClass:\"arrow-right-inner\"})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.msgInfo.selfSend),expression:\"!msgInfo.selfSend\"}],staticClass:\"arrow-left\",style:({ 'top': _vm.pos.arrowY + 'px' })},[_c('div',{staticClass:\"arrow-left-inner\"})])],1)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div v-show=\"show\">\n\t\t<div class=\"chat-group-readed-mask\" @click.self=\"close()\">\n\t\t\t<div class=\"chat-group-readed\" :style=\"{ 'left': pos.x + 'px', 'top': pos.y + 'px' }\" @click.prevent=\"\">\n\t\t\t\t<el-tabs type=\"border-card\" :stretch=\"true\">\n\t\t\t\t\t<el-tab-pane :label=\"`已读(${readedMembers.length})`\">\n\t\t\t\t\t\t<virtual-scroller class=\"scroll-box\" :items=\"readedMembers\">\n\t\t\t\t\t\t\t<template v-slot=\"{ item }\">\n\t\t\t\t\t\t\t\t<chat-group-member :member=\"item\"></chat-group-member>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</virtual-scroller>\n\t\t\t\t\t</el-tab-pane>\n\t\t\t\t\t<el-tab-pane :label=\"`未读(${unreadMembers.length})`\">\n\t\t\t\t\t\t<virtual-scroller class=\"scroll-box\" :items=\"unreadMembers\">\n\t\t\t\t\t\t\t<template v-slot=\"{ item }\">\n\t\t\t\t\t\t\t\t<chat-group-member :member=\"item\"></chat-group-member>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</virtual-scroller>\n\t\t\t\t\t</el-tab-pane>\n\t\t\t\t</el-tabs>\n\t\t\t\t<div v-show=\"msgInfo.selfSend\" class=\"arrow-right\" :style=\"{ 'top': pos.arrowY + 'px' }\">\n\t\t\t\t\t<div class=\"arrow-right-inner\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-show=\"!msgInfo.selfSend\" class=\"arrow-left\" :style=\"{ 'top': pos.arrowY + 'px' }\">\n\t\t\t\t\t<div class=\"arrow-left-inner\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t</div>\n</template>\n\n\n<script>\nimport VirtualScroller from '../common/VirtualScroller.vue';\nimport ChatGroupMember from \"./ChatGroupMember.vue\";\n\nexport default {\n\tname: \"chatGroupReaded\",\n\tcomponents: {\n\t\tChatGroupMember, VirtualScroller\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshow: false,\n\t\t\tpos: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tarrowY: 0\n\t\t\t},\n\t\t\treadedMembers: [],\n\t\t\tunreadMembers: []\n\t\t}\n\t},\n\tprops: {\n\t\tgroupMembers: {\n\t\t\ttype: Array\n\t\t},\n\t\tmsgInfo: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tmethods: {\n\t\tclose() {\n\t\t\tthis.show = false;\n\t\t},\n\t\topen(rect) {\n\t\t\tthis.show = true;\n\t\t\tthis.pos.arrowY = 200;\n\t\t\t// 计算窗口位置\n\t\t\tif (this.msgInfo.selfSend) {\n\t\t\t\t// 自己发的消息弹出在消息的左边\n\t\t\t\tthis.pos.x = rect.left - 310;\n\t\t\t} else {\n\t\t\t\t// 别人发的消息弹窗在消息右边\n\t\t\t\tthis.pos.x = rect.right + 20;\n\t\t\t}\n\t\t\tthis.pos.y = rect.top + rect.height / 2 - 215;\n\t\t\t// 防止窗口溢出\n\t\t\tif (this.pos.y < 0) {\n\t\t\t\tthis.pos.arrowY += this.pos.y\n\t\t\t\tthis.pos.y = 0;\n\t\t\t}\n\t\t\tthis.loadReadedUser()\n\t\t},\n\t\tloadReadedUser() {\n\t\t\tthis.readedMembers = [];\n\t\t\tthis.unreadMembers = [];\n\t\t\t\n\t\t\t// 如果没有群成员信息，直接返回\n\t\t\tif (!this.groupMembers || this.groupMembers.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis.$http({\n\t\t\t\turl: \"/message/group/findReadedUsers\",\n\t\t\t\tmethod: 'get',\n\t\t\t\tparams: { groupId: this.msgInfo.groupId, messageId: this.msgInfo.id }\n\t\t\t}).then(userIds => {\n\t\t\t\tthis.groupMembers.forEach(member => {\n\t\t\t\t\t// 发送者和已退群的不显示\n\t\t\t\t\tif (member.userId == this.msgInfo.sendId || member.quit) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// 区分已读还是未读\n\t\t\t\t\tif (userIds.find(userId => member.userId == userId)) {\n\t\t\t\t\t\tthis.readedMembers.push(member);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.unreadMembers.push(member);\n\t\t\t\t\t}\n\t\t\t\t})\n                // 更新已读人数\n                let msgInfo = {\n                    id: this.msgInfo.id,\n                    groupId: this.msgInfo.groupId,\n                    readedCount: this.readedMembers.length\n                }\n                let chatInfo = {\n                    type: 'GROUP',\n                    targetId: this.msgInfo.groupId\n                }\n                this.$store.commit(\"updateMessage\", [msgInfo, chatInfo])\n\t\t\t})\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.chat-group-readed-mask {\n\tposition: fixed;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 9999;\n}\n\n.chat-group-readed {\n\tposition: fixed;\n\twidth: 300px;\n\n\t.scroll-box {\n\t\theight: 400px;\n\t}\n\n\t.arrow-left {\n\t\tposition: absolute;\n\t\tleft: -15px;\n\t\twidth: 0;\n\t\theight: 0;\n\t\tborder-top: 15px solid transparent;\n\t\tborder-bottom: 15px solid transparent;\n\t\tborder-right: 15px solid #ccc;\n\n\t\t.arrow-left-inner {\n\t\t\tposition: absolute;\n\t\t\ttop: -12px;\n\t\t\tleft: 3px;\n\t\t\twidth: 0;\n\t\t\theight: 0;\n\t\t\toverflow: hidden;\n\t\t\tborder-top: 12px solid transparent;\n\t\t\tborder-bottom: 12px solid transparent;\n\t\t\tborder-right: 12px solid white;\n\t\t}\n\t}\n\n\t.arrow-right {\n\t\tposition: absolute;\n\t\tright: -15px;\n\t\twidth: 0;\n\t\theight: 0;\n\t\tborder-top: 15px solid transparent;\n\t\tborder-bottom: 15px solid transparent;\n\t\tborder-left: 15px solid #ccc;\n\n\t\t.arrow-right-inner {\n\t\t\tposition: absolute;\n\t\t\ttop: -12px;\n\t\t\tright: 3px;\n\t\t\twidth: 0;\n\t\t\theight: 0;\n\t\t\toverflow: hidden;\n\t\t\tborder-top: 12px solid transparent;\n\t\t\tborder-bottom: 12px solid transparent;\n\t\t\tborder-left: 12px solid white;\n\t\t}\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatGroupReaded.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatGroupReaded.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatGroupReaded.vue?vue&type=template&id=da0f0dcc\"\nimport script from \"./ChatGroupReaded.vue?vue&type=script&lang=js\"\nexport * from \"./ChatGroupReaded.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatGroupReaded.vue?vue&type=style&index=0&id=da0f0dcc&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"file-icon\",style:({ width: _vm.size + 'px', height: _vm.size + 'px' })},[(_vm.fileType === 'pdf')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#E53E3E\"}}),_c('path',{attrs:{\"d\":\"M12 32h24M12 36h16\",\"stroke\":\"white\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"22\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"10\",\"font-weight\":\"bold\"}},[_vm._v(\"PDF\")])]):(_vm.fileType === 'word')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#2B6CB0\"}}),_c('path',{attrs:{\"d\":\"M12 32h24M12 36h20M12 28h18\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"stroke-linecap\":\"round\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"20\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"8\",\"font-weight\":\"bold\"}},[_vm._v(\"DOC\")])]):(_vm.fileType === 'excel')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#38A169\"}}),_c('path',{attrs:{\"d\":\"M14 16h20M14 20h20M14 24h20M14 28h20M14 32h20\",\"stroke\":\"white\",\"stroke-width\":\"1.5\"}}),_c('path',{attrs:{\"d\":\"M20 14v20M28 14v20\",\"stroke\":\"white\",\"stroke-width\":\"1.5\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"40\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"7\",\"font-weight\":\"bold\"}},[_vm._v(\"XLS\")])]):(_vm.fileType === 'powerpoint')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#D69E2E\"}}),_c('rect',{attrs:{\"x\":\"14\",\"y\":\"16\",\"width\":\"20\",\"height\":\"12\",\"rx\":\"2\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"fill\":\"none\"}}),_c('circle',{attrs:{\"cx\":\"18\",\"cy\":\"22\",\"r\":\"1\",\"fill\":\"white\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"36\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"7\",\"font-weight\":\"bold\"}},[_vm._v(\"PPT\")])]):(_vm.fileType === 'image')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#805AD5\"}}),_c('rect',{attrs:{\"x\":\"12\",\"y\":\"14\",\"width\":\"24\",\"height\":\"18\",\"rx\":\"2\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"fill\":\"none\"}}),_c('circle',{attrs:{\"cx\":\"18\",\"cy\":\"20\",\"r\":\"2\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"fill\":\"none\"}}),_c('path',{attrs:{\"d\":\"M12 28l6-6 4 4 8-8 6 6v4\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"fill\":\"none\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"40\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"7\",\"font-weight\":\"bold\"}},[_vm._v(\"IMG\")])]):(_vm.fileType === 'video')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#E53E3E\"}}),_c('rect',{attrs:{\"x\":\"10\",\"y\":\"16\",\"width\":\"28\",\"height\":\"16\",\"rx\":\"2\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"fill\":\"none\"}}),_c('polygon',{attrs:{\"points\":\"20,20 20,28 26,24\",\"fill\":\"white\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"40\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"7\",\"font-weight\":\"bold\"}},[_vm._v(\"MP4\")])]):(_vm.fileType === 'audio')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#38A169\"}}),_c('path',{attrs:{\"d\":\"M20 14v20M24 10v28M28 16v16M32 18v12M16 18v12\",\"stroke\":\"white\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"40\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"7\",\"font-weight\":\"bold\"}},[_vm._v(\"MP3\")])]):(_vm.fileType === 'archive')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#744210\"}}),_c('rect',{attrs:{\"x\":\"14\",\"y\":\"12\",\"width\":\"20\",\"height\":\"24\",\"rx\":\"2\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"fill\":\"none\"}}),_c('path',{attrs:{\"d\":\"M18 16h12M18 20h12M18 24h12M18 28h12\",\"stroke\":\"white\",\"stroke-width\":\"1\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"42\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"7\",\"font-weight\":\"bold\"}},[_vm._v(\"ZIP\")])]):(_vm.fileType === 'code')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#319795\"}}),_c('path',{attrs:{\"d\":\"M16 18l-4 6 4 6M32 18l4 6-4 6M22 14l-4 20\",\"stroke\":\"white\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"40\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"6\",\"font-weight\":\"bold\"}},[_vm._v(\"CODE\")])]):(_vm.fileType === 'text')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#4A5568\"}}),_c('path',{attrs:{\"d\":\"M14 16h20M14 20h22M14 24h18M14 28h20M14 32h16\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"stroke-linecap\":\"round\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"40\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"7\",\"font-weight\":\"bold\"}},[_vm._v(\"TXT\")])]):(_vm.fileType === 'executable')?_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#2D3748\"}}),_c('rect',{attrs:{\"x\":\"16\",\"y\":\"14\",\"width\":\"16\",\"height\":\"16\",\"rx\":\"2\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"fill\":\"none\"}}),_c('rect',{attrs:{\"x\":\"20\",\"y\":\"18\",\"width\":\"8\",\"height\":\"8\",\"rx\":\"1\",\"fill\":\"white\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"38\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"7\",\"font-weight\":\"bold\"}},[_vm._v(\"EXE\")])]):_c('svg',{attrs:{\"viewBox\":\"0 0 48 48\",\"width\":\"100%\",\"height\":\"100%\"}},[_c('rect',{attrs:{\"width\":\"48\",\"height\":\"48\",\"rx\":\"4\",\"fill\":\"#718096\"}}),_c('path',{attrs:{\"d\":\"M14 10h14l6 6v26H14V10z\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"fill\":\"none\"}}),_c('path',{attrs:{\"d\":\"M28 10v6h6\",\"stroke\":\"white\",\"stroke-width\":\"1.5\",\"fill\":\"none\"}}),_c('path',{attrs:{\"d\":\"M18 22h12M18 26h12M18 30h8\",\"stroke\":\"white\",\"stroke-width\":\"1\",\"stroke-linecap\":\"round\"}}),_c('text',{attrs:{\"x\":\"24\",\"y\":\"40\",\"text-anchor\":\"middle\",\"fill\":\"white\",\"font-size\":\"6\",\"font-weight\":\"bold\"}},[_vm._v(\"FILE\")])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"file-icon\" :style=\"{ width: size + 'px', height: size + 'px' }\">\n\t\t<!-- PDF文件图标 -->\n\t\t<svg v-if=\"fileType === 'pdf'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#E53E3E\"/>\n\t\t\t<path d=\"M12 32h24M12 36h16\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n\t\t\t<text x=\"24\" y=\"22\" text-anchor=\"middle\" fill=\"white\" font-size=\"10\" font-weight=\"bold\">PDF</text>\n\t\t</svg>\n\n\t\t<!-- Word文档图标 -->\n\t\t<svg v-else-if=\"fileType === 'word'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#2B6CB0\"/>\n\t\t\t<path d=\"M12 32h24M12 36h20M12 28h18\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n\t\t\t<text x=\"24\" y=\"20\" text-anchor=\"middle\" fill=\"white\" font-size=\"8\" font-weight=\"bold\">DOC</text>\n\t\t</svg>\n\n\t\t<!-- Excel表格图标 -->\n\t\t<svg v-else-if=\"fileType === 'excel'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#38A169\"/>\n\t\t\t<path d=\"M14 16h20M14 20h20M14 24h20M14 28h20M14 32h20\" stroke=\"white\" stroke-width=\"1.5\"/>\n\t\t\t<path d=\"M20 14v20M28 14v20\" stroke=\"white\" stroke-width=\"1.5\"/>\n\t\t\t<text x=\"24\" y=\"40\" text-anchor=\"middle\" fill=\"white\" font-size=\"7\" font-weight=\"bold\">XLS</text>\n\t\t</svg>\n\n\t\t<!-- PowerPoint图标 -->\n\t\t<svg v-else-if=\"fileType === 'powerpoint'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#D69E2E\"/>\n\t\t\t<rect x=\"14\" y=\"16\" width=\"20\" height=\"12\" rx=\"2\" stroke=\"white\" stroke-width=\"1.5\" fill=\"none\"/>\n\t\t\t<circle cx=\"18\" cy=\"22\" r=\"1\" fill=\"white\"/>\n\t\t\t<text x=\"24\" y=\"36\" text-anchor=\"middle\" fill=\"white\" font-size=\"7\" font-weight=\"bold\">PPT</text>\n\t\t</svg>\n\n\t\t<!-- 图片文件图标 -->\n\t\t<svg v-else-if=\"fileType === 'image'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#805AD5\"/>\n\t\t\t<rect x=\"12\" y=\"14\" width=\"24\" height=\"18\" rx=\"2\" stroke=\"white\" stroke-width=\"1.5\" fill=\"none\"/>\n\t\t\t<circle cx=\"18\" cy=\"20\" r=\"2\" stroke=\"white\" stroke-width=\"1.5\" fill=\"none\"/>\n\t\t\t<path d=\"M12 28l6-6 4 4 8-8 6 6v4\" stroke=\"white\" stroke-width=\"1.5\" fill=\"none\"/>\n\t\t\t<text x=\"24\" y=\"40\" text-anchor=\"middle\" fill=\"white\" font-size=\"7\" font-weight=\"bold\">IMG</text>\n\t\t</svg>\n\n\t\t<!-- 视频文件图标 -->\n\t\t<svg v-else-if=\"fileType === 'video'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#E53E3E\"/>\n\t\t\t<rect x=\"10\" y=\"16\" width=\"28\" height=\"16\" rx=\"2\" stroke=\"white\" stroke-width=\"1.5\" fill=\"none\"/>\n\t\t\t<polygon points=\"20,20 20,28 26,24\" fill=\"white\"/>\n\t\t\t<text x=\"24\" y=\"40\" text-anchor=\"middle\" fill=\"white\" font-size=\"7\" font-weight=\"bold\">MP4</text>\n\t\t</svg>\n\n\t\t<!-- 音频文件图标 -->\n\t\t<svg v-else-if=\"fileType === 'audio'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#38A169\"/>\n\t\t\t<path d=\"M20 14v20M24 10v28M28 16v16M32 18v12M16 18v12\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\"/>\n\t\t\t<text x=\"24\" y=\"40\" text-anchor=\"middle\" fill=\"white\" font-size=\"7\" font-weight=\"bold\">MP3</text>\n\t\t</svg>\n\n\t\t<!-- 压缩文件图标 -->\n\t\t<svg v-else-if=\"fileType === 'archive'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#744210\"/>\n\t\t\t<rect x=\"14\" y=\"12\" width=\"20\" height=\"24\" rx=\"2\" stroke=\"white\" stroke-width=\"1.5\" fill=\"none\"/>\n\t\t\t<path d=\"M18 16h12M18 20h12M18 24h12M18 28h12\" stroke=\"white\" stroke-width=\"1\"/>\n\t\t\t<text x=\"24\" y=\"42\" text-anchor=\"middle\" fill=\"white\" font-size=\"7\" font-weight=\"bold\">ZIP</text>\n\t\t</svg>\n\n\t\t<!-- 代码文件图标 -->\n\t\t<svg v-else-if=\"fileType === 'code'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#319795\"/>\n\t\t\t<path d=\"M16 18l-4 6 4 6M32 18l4 6-4 6M22 14l-4 20\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n\t\t\t<text x=\"24\" y=\"40\" text-anchor=\"middle\" fill=\"white\" font-size=\"6\" font-weight=\"bold\">CODE</text>\n\t\t</svg>\n\n\t\t<!-- 文本文件图标 -->\n\t\t<svg v-else-if=\"fileType === 'text'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#4A5568\"/>\n\t\t\t<path d=\"M14 16h20M14 20h22M14 24h18M14 28h20M14 32h16\" stroke=\"white\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n\t\t\t<text x=\"24\" y=\"40\" text-anchor=\"middle\" fill=\"white\" font-size=\"7\" font-weight=\"bold\">TXT</text>\n\t\t</svg>\n\n\t\t<!-- 可执行文件图标 -->\n\t\t<svg v-else-if=\"fileType === 'executable'\" viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#2D3748\"/>\n\t\t\t<rect x=\"16\" y=\"14\" width=\"16\" height=\"16\" rx=\"2\" stroke=\"white\" stroke-width=\"1.5\" fill=\"none\"/>\n\t\t\t<rect x=\"20\" y=\"18\" width=\"8\" height=\"8\" rx=\"1\" fill=\"white\"/>\n\t\t\t<text x=\"24\" y=\"38\" text-anchor=\"middle\" fill=\"white\" font-size=\"7\" font-weight=\"bold\">EXE</text>\n\t\t</svg>\n\n\t\t<!-- 默认文件图标 -->\n\t\t<svg v-else viewBox=\"0 0 48 48\" width=\"100%\" height=\"100%\">\n\t\t\t<rect width=\"48\" height=\"48\" rx=\"4\" fill=\"#718096\"/>\n\t\t\t<path d=\"M14 10h14l6 6v26H14V10z\" stroke=\"white\" stroke-width=\"1.5\" fill=\"none\"/>\n\t\t\t<path d=\"M28 10v6h6\" stroke=\"white\" stroke-width=\"1.5\" fill=\"none\"/>\n\t\t\t<path d=\"M18 22h12M18 26h12M18 30h8\" stroke=\"white\" stroke-width=\"1\" stroke-linecap=\"round\"/>\n\t\t\t<text x=\"24\" y=\"40\" text-anchor=\"middle\" fill=\"white\" font-size=\"6\" font-weight=\"bold\">FILE</text>\n\t\t</svg>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: 'FileIcon',\n\tprops: {\n\t\tfileName: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 44\n\t\t}\n\t},\n\tcomputed: {\n\t\tfileType() {\n\t\t\tif (!this.fileName) return 'default';\n\t\t\t\n\t\t\t// 获取文件扩展名\n\t\t\tconst extension = this.fileName.toLowerCase().split('.').pop();\n\t\t\t\n\t\t\t// 根据扩展名确定文件类型\n\t\t\tswitch (extension) {\n\t\t\t\t// PDF文件\n\t\t\t\tcase 'pdf':\n\t\t\t\t\treturn 'pdf';\n\t\t\t\t\n\t\t\t\t// Word文档\n\t\t\t\tcase 'doc':\n\t\t\t\tcase 'docx':\n\t\t\t\t\treturn 'word';\n\t\t\t\t\n\t\t\t\t// Excel表格\n\t\t\t\tcase 'xls':\n\t\t\t\tcase 'xlsx':\n\t\t\t\tcase 'csv':\n\t\t\t\t\treturn 'excel';\n\t\t\t\t\n\t\t\t\t// PowerPoint\n\t\t\t\tcase 'ppt':\n\t\t\t\tcase 'pptx':\n\t\t\t\t\treturn 'powerpoint';\n\t\t\t\t\n\t\t\t\t// 图片文件\n\t\t\t\tcase 'jpg':\n\t\t\t\tcase 'jpeg':\n\t\t\t\tcase 'png':\n\t\t\t\tcase 'gif':\n\t\t\t\tcase 'bmp':\n\t\t\t\tcase 'webp':\n\t\t\t\tcase 'svg':\n\t\t\t\tcase 'ico':\n\t\t\t\t\treturn 'image';\n\t\t\t\t\n\t\t\t\t// 视频文件\n\t\t\t\tcase 'mp4':\n\t\t\t\tcase 'avi':\n\t\t\t\tcase 'mov':\n\t\t\t\tcase 'wmv':\n\t\t\t\tcase 'flv':\n\t\t\t\tcase 'mkv':\n\t\t\t\tcase 'webm':\n\t\t\t\tcase '3gp':\n\t\t\t\t\treturn 'video';\n\t\t\t\t\n\t\t\t\t// 音频文件\n\t\t\t\tcase 'mp3':\n\t\t\t\tcase 'wav':\n\t\t\t\tcase 'flac':\n\t\t\t\tcase 'aac':\n\t\t\t\tcase 'ogg':\n\t\t\t\tcase 'wma':\n\t\t\t\tcase 'm4a':\n\t\t\t\t\treturn 'audio';\n\t\t\t\t\n\t\t\t\t// 压缩文件\n\t\t\t\tcase 'zip':\n\t\t\t\tcase 'rar':\n\t\t\t\tcase '7z':\n\t\t\t\tcase 'tar':\n\t\t\t\tcase 'gz':\n\t\t\t\tcase 'bz2':\n\t\t\t\tcase 'xz':\n\t\t\t\t\treturn 'archive';\n\t\t\t\t\n\t\t\t\t// 代码文件\n\t\t\t\tcase 'js':\n\t\t\t\tcase 'ts':\n\t\t\t\tcase 'html':\n\t\t\t\tcase 'htm':\n\t\t\t\tcase 'css':\n\t\t\t\tcase 'scss':\n\t\t\t\tcase 'sass':\n\t\t\t\tcase 'less':\n\t\t\t\tcase 'vue':\n\t\t\t\tcase 'jsx':\n\t\t\t\tcase 'tsx':\n\t\t\t\tcase 'json':\n\t\t\t\tcase 'xml':\n\t\t\t\tcase 'yml':\n\t\t\t\tcase 'yaml':\n\t\t\t\tcase 'py':\n\t\t\t\tcase 'java':\n\t\t\t\tcase 'cpp':\n\t\t\t\tcase 'c':\n\t\t\t\tcase 'cs':\n\t\t\t\tcase 'go':\n\t\t\t\tcase 'php':\n\t\t\t\tcase 'rb':\n\t\t\t\tcase 'swift':\n\t\t\t\tcase 'kt':\n\t\t\t\tcase 'sql':\n\t\t\t\tcase 'sh':\n\t\t\t\tcase 'bat':\n\t\t\t\t\treturn 'code';\n\t\t\t\t\n\t\t\t\t// 文本文件\n\t\t\t\tcase 'txt':\n\t\t\t\tcase 'md':\n\t\t\t\tcase 'markdown':\n\t\t\t\tcase 'log':\n\t\t\t\tcase 'cfg':\n\t\t\t\tcase 'conf':\n\t\t\t\tcase 'ini':\n\t\t\t\t\treturn 'text';\n\t\t\t\t\n\t\t\t\t// 可执行文件\n\t\t\t\tcase 'exe':\n\t\t\t\tcase 'msi':\n\t\t\t\tcase 'dmg':\n\t\t\t\tcase 'pkg':\n\t\t\t\tcase 'deb':\n\t\t\t\tcase 'rpm':\n\t\t\t\tcase 'appimage':\n\t\t\t\t\treturn 'executable';\n\t\t\t\t\n\t\t\t\t// 默认\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'default';\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.file-icon {\n\tdisplay: inline-flex;\n\talign-items: center;\n\tjustify-content: center;\n\tflex-shrink: 0;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileIcon.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileIcon.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FileIcon.vue?vue&type=template&id=1a1bedc0&scoped=true\"\nimport script from \"./FileIcon.vue?vue&type=script&lang=js\"\nexport * from \"./FileIcon.vue?vue&type=script&lang=js\"\nimport style0 from \"./FileIcon.vue?vue&type=style&index=0&id=1a1bedc0&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1a1bedc0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"chat-msg-item\">\n\t\t<div class=\"chat-msg-tip\" v-if=\"msgInfo.type == $enums.MESSAGE_TYPE.TIP_TIME\">\n\t\t\t{{ $date.toTimeText(msgInfo.sendTime) }}\n\t\t</div>\n\t\t<div class=\"chat-msg-normal\" v-else-if=\"isNormal || msgInfo.type == $enums.MESSAGE_TYPE.TIP_TEXT\" :class=\"{ 'chat-msg-mine': mine }\">\n\t\t\t<div class=\"head-image\" v-if=\"!isTipMessage\">\n\t\t\t\t<head-image :name=\"showName\" :size=\"38\" :url=\"headImage\" :id=\"parseInt(msgInfo.sendId) || 0\"></head-image>\n\t\t\t</div>\n\t\t\t<div class=\"chat-msg-content\">\n\t\t\t\t<div v-show=\"mode == 1 && msgInfo.groupId && !msgInfo.selfSend && !isTipMessage\" class=\"chat-msg-top\">\n\t\t\t\t\t<span>{{ showName }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div v-show=\"mode == 2 && !isTipMessage\" class=\"chat-msg-top\">\n\t\t\t\t\t<span>{{ showName }}</span>\n\t\t\t\t\t<span>{{ $date.toTimeText(msgInfo.sendTime) }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"chat-msg-bottom\" @contextmenu=\"handleContextMenu($event)\">\n\t\t\t\t\t<div ref=\"chatMsgBox\">\n\t\t\t\t\t\t<!-- 如果是加载中状态，显示加载动效 -->\n\t\t\t\t\t\t<div class=\"chat-msg-text\" v-if=\"msgInfo.isLoading\">\n\t\t\t\t\t\t\t<loading-dots />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<!-- 智能体消息使用统一Markdown渲染器 (如果有内容或不在加载中) -->\n\t\t\t\t\t\t<div class=\"chat-msg-text\" \n\t\t\t\t\t\t\t:class=\"{ 'agent-error-message': msgInfo.type === 'error' }\"\n\t\t\t\t\t\t\tv-else-if=\"isAgentMessage && (msgInfo.content || !msgInfo.streaming)\">\n\t\t\t\t\t\t\t<unified-message-renderer\n\t\t\t\t\t\t\t\t:message=\"agentMessageObject\"\n\t\t\t\t\t\t\t\t:force-format=\"'markdown'\"\n\t\t\t\t\t\t\t\t:show-enhancements=\"false\"\n\t\t\t\t\t\t\t\t@rendered=\"onMessageRendered\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<!-- 流式智能体消息但还没内容时，显示加载动效 -->\n\t\t\t\t\t\t<div class=\"chat-msg-text\" v-else-if=\"isAgentMessage && msgInfo.streaming && !msgInfo.content\">\n\t\t\t\t\t\t\t<loading-dots />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<!-- 普通文本消息 -->\n\t\t\t\t\t\t<span class=\"chat-msg-text\" v-else-if=\"msgInfo.type == $enums.MESSAGE_TYPE.TEXT\"\n\t\t\t\t\t\t\tref=\"messageText\"></span>\n\t\t\t\t\t\t<span class=\"chat-msg-text\" v-if=\"msgInfo.type == $enums.MESSAGE_TYPE.TIP_TEXT\">{{ msgInfo.content }}</span>\n\t\t\t\t\t\t<div class=\"chat-msg-image\" v-if=\"msgInfo.type == $enums.MESSAGE_TYPE.IMAGE\">\n\t\t\t\t\t\t\t<div class=\"img-load-box\" v-loading=\"loading\" element-loading-text=\"上传中..\"\n\t\t\t\t\t\t\t\telement-loading-background=\"rgba(0, 0, 0, 0.4)\">\n\t\t\t\t\t\t\t\t<img class=\"send-image\" :src=\"JSON.parse(msgInfo.content).thumbUrl\"\n\t\t\t\t\t\t\t\t\t@click=\"showFullImageBox()\" loading=\"lazy\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span title=\"发送失败\" v-show=\"loadFail\" @click=\"onSendFail\"\n\t\t\t\t\t\t\t\tclass=\"send-fail el-icon-warning\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"chat-msg-file\" v-if=\"msgInfo.type == $enums.MESSAGE_TYPE.FILE\">\n\t\t\t\t\t\t\t<div class=\"chat-file-box\" v-loading=\"loading\">\n\t\t\t\t\t\t\t\t<div class=\"chat-file-info\">\n\t\t\t\t\t\t\t\t\t<el-link class=\"chat-file-name\" :underline=\"true\" target=\"_blank\" type=\"primary\"\n\t\t\t\t\t\t\t\t\t\t:href=\"data.url\" :download=\"data.name\" @click=\"onFileDownloadClick\">{{ data.name }}</el-link>\n\t\t\t\t\t\t\t\t\t<div class=\"chat-file-size\">{{ fileSize }}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"chat-file-icon\">\n\t\t\t\t\t\t\t\t\t<FileIcon :fileName=\"data.name\" :size=\"44\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<span title=\"发送失败\" v-show=\"loadFail\" @click=\"onSendFail\"\n\t\t\t\t\t\t\t\tclass=\"send-fail el-icon-warning\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"chat-msg-voice\" v-if=\"msgInfo.type == $enums.MESSAGE_TYPE.AUDIO\" @click=\"onPlayVoice()\">\n\t\t\t\t\t\t<audio controls :src=\"JSON.parse(msgInfo.content).url\"></audio>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"chat-action chat-msg-text\" v-if=\"isAction\">\n\t\t\t\t\t\t<span v-if=\"msgInfo.type == $enums.MESSAGE_TYPE.ACT_RT_VOICE\" title=\"重新呼叫\"\n\t\t\t\t\t\t\t@click=\"$emit('call')\" class=\"iconfont icon-chat-voice\"></span>\n\t\t\t\t\t\t<span v-if=\"msgInfo.type == $enums.MESSAGE_TYPE.ACT_RT_VIDEO\" title=\"重新呼叫\"\n\t\t\t\t\t\t\t@click=\"$emit('call')\" class=\"iconfont icon-chat-video\"></span>\n\t\t\t\t\t\t<span>{{ msgInfo.content }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"chat-msg-status\" v-if=\"!isAction\">\n\t\t\t\t\t\t<span class=\"chat-readed\" v-show=\"msgInfo.selfSend && !msgInfo.groupId\n\t\t\t\t\t\t\t&& msgInfo.status == $enums.MESSAGE_STATUS.READED\">已读</span>\n\t\t\t\t\t\t<span class=\"chat-unread\" v-show=\"msgInfo.selfSend && !msgInfo.groupId\n\t\t\t\t\t\t\t&& msgInfo.status != $enums.MESSAGE_STATUS.READED\">未读</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"chat-receipt\" v-show=\"msgInfo.receipt\" @click=\"onShowReadedBox\">\n\t\t\t\t\t\t<span v-if=\"msgInfo.receiptOk\" class=\"icon iconfont icon-ok\" title=\"全体已读\"></span>\n\t\t\t\t\t\t<span v-else>{{ msgInfo.readedCount }}人已读</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<right-menu v-show=\"menu && rightMenu.show\" :pos=\"rightMenu.pos\" :items=\"menuItems\"\n\t\t\t@close=\"rightMenu.show = false\" @select=\"onSelectMenu\"></right-menu>\n\t\t<chat-group-readed ref=\"chatGroupReadedBox\" :msgInfo=\"msgInfo\" :groupMembers=\"groupMembers\"></chat-group-readed>\n\t</div>\n</template>\n\n<script>\nimport HeadImage from \"../common/HeadImage.vue\";\nimport RightMenu from '../common/RightMenu.vue';\nimport ChatGroupReaded from './ChatGroupReaded.vue';\nimport FileIcon from '../common/FileIcon.vue';\nimport LoadingDots from '../common/LoadingDots.vue';\nimport VSCodeAdapter from '../../api/vscode-adapter.js';\nimport { UnifiedMessageRenderer } from '../message';\n\n// 全局适配器实例，避免重复初始化\nconst globalAdapter = VSCodeAdapter;\n\nexport default {\n\tname: \"messageItem\",\n\tcomponents: {\n\t\tHeadImage,\n\t\tRightMenu,\n\t\tChatGroupReaded,\n\t\tFileIcon,\n\t\tLoadingDots,\n\t\tUnifiedMessageRenderer\n\t},\n\tprops: {\n\t\tmode: {\n\t\t\ttype: Number,\n\t\t\tdefault: 1\n\t\t},\n\t\tmine: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\theadImage: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tshowName: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tmsgInfo: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tgroupMembers: {\n\t\t\ttype: Array\n\t\t},\n\t\tmenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\taudioPlayState: 'STOP',\n\t\t\trightMenu: {\n\t\t\t\tshow: false,\n\t\t\t\tpos: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t}\n\t\t\t},\n\t\t\tlastRenderedContent: null // 缓存上次渲染的内容\n\t\t}\n\t},\n\tmounted() {\n\t\t// 调试日志\n\t\tif (this.msgInfo.isLoading !== undefined || this.msgInfo.agentId) {\n\t\t\tconsole.log('[ChatMessageItem] 消息状态 - isLoading:', this.msgInfo.isLoading, \n\t\t\t\t'isAgentMessage:', this.isAgentMessage, \n\t\t\t\t'content:', this.msgInfo.content,\n\t\t\t\t'agentId:', this.msgInfo.agentId);\n\t\t}\n\t\t\n\t\t// 只在首次挂载时渲染\n\t\tthis.renderMessageText();\n\t\t\n\t\t// 🔧 VSCode环境下的文本选择优化\n\t\tthis.initTextSelectionOptimization();\n\t},\n\tupdated() {\n\t\t// 只在消息内容实际变化时重新渲染\n\t\tthis.smartRenderMessageText();\n\t\t\n\t\t// 🔧 确保文本选择优化在组件更新后仍然有效\n\t\tthis.$nextTick(() => {\n\t\t\tthis.optimizeTextSelection();\n\t\t});\n\t},\n\tmethods: {\n\t\t/**\n\t\t * 🔧 初始化文本选择优化 - 解决VSCode环境下无法选中文本的问题\n\t\t */\n\t\tinitTextSelectionOptimization() {\n\t\t\ttry {\n\t\t\t\t// 检测VSCode环境\n\t\t\t\tconst isVSCodeEnv = typeof window !== 'undefined' && \n\t\t\t\t\t(window.vscodeVueChatUtils !== undefined || \n\t\t\t\t\t window.vscodeServices !== undefined ||\n\t\t\t\t\t window.acquireVsCodeApi !== undefined);\n\n\t\t\t\tif (isVSCodeEnv) {\n\t\t\t\t\t// 为根元素添加VSCode环境标识类\n\t\t\t\t\tif (this.$el) {\n\t\t\t\t\t\tthis.$el.classList.add('vscode-environment');\n\t\t\t\t\t}\n\n\t\t\t\t\t// 等待DOM更新后处理文本元素\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.optimizeTextSelection();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.warn('[ChatMessageItem] 文本选择优化失败:', error);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * 🔧 优化文本选择 - 确保消息文本可以被选中复制\n\t\t */\n\t\toptimizeTextSelection() {\n\t\t\tconst messageTextElement = this.$refs.messageText;\n\t\t\tif (messageTextElement) {\n\t\t\t\t// 强制设置文本选择样式\n\t\t\t\tmessageTextElement.style.userSelect = 'text';\n\t\t\t\tmessageTextElement.style.webkitUserSelect = 'text';\n\t\t\t\tmessageTextElement.style.mozUserSelect = 'text';\n\t\t\t\tmessageTextElement.style.msUserSelect = 'text';\n\t\t\t\tmessageTextElement.style.cursor = 'text';\n\t\t\t\tmessageTextElement.style.pointerEvents = 'auto';\n\t\t\t\t\n\t\t\t\t// 添加CSS类标识\n\t\t\t\tmessageTextElement.classList.add('text-selectable');\n\t\t\t\t\n\t\t\t\t// 阻止某些可能干扰文本选择的事件\n\t\t\t\tmessageTextElement.addEventListener('selectstart', function(e) {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}, true);\n\t\t\t\t\n\t\t\t\tmessageTextElement.addEventListener('mousedown', function(e) {\n\t\t\t\t\t// 允许左键点击进行文本选择\n\t\t\t\t\tif (e.button === 0) {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t}, true);\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * 智能渲染消息文本内容（避免不必要的重渲染）\n\t\t */\n\t\tsmartRenderMessageText() {\n\t\t\tif (!this.$refs.messageText || this.msgInfo.type !== this.$enums.MESSAGE_TYPE.TEXT) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 只有内容真正变化时才重新渲染\n\t\t\tif (this.htmlText !== this.lastRenderedContent) {\n\t\t\t\tthis.renderMessageText();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * 高性能渲染消息文本内容\n\t\t */\n\t\trenderMessageText() {\n\t\t\tif (!this.$refs.messageText || this.msgInfo.type !== this.$enums.MESSAGE_TYPE.TEXT) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 使用全局适配器实例，避免重复初始化\n\t\t\t\tglobalAdapter.setInnerHTML(this.$refs.messageText, this.htmlText);\n\t\t\t\tthis.lastRenderedContent = this.htmlText;\n\t\t\t\t\n\t\t\t\t// 🔧 渲染后确保文本选择优化（VSCode环境）\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.optimizeTextSelection();\n\t\t\t\t});\n\t\t\t} catch (error) {\n\t\t\t\t// 静默降级处理：使用纯文本\n\t\t\t\tthis.$refs.messageText.textContent = this.msgInfo.content;\n\t\t\t\tthis.lastRenderedContent = this.msgInfo.content;\n\t\t\t\t\n\t\t\t\t// 即使降级处理也要确保文本可选择\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.optimizeTextSelection();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonSendFail() {\n\t\t\tthis.$message.error(\"该文件已发送失败，目前不支持自动重新发送，建议手动重新发送\")\n\t\t},\n\t\tshowFullImageBox() {\n\t\t\tlet imageUrl = JSON.parse(this.msgInfo.content).originUrl;\n\t\t\tif (imageUrl) {\n\t\t\t\tthis.$store.commit('showFullImageBox', imageUrl);\n\t\t\t\t// 同时保存图片到工作区\n\t\t\t\tthis.saveImageToWorkspace(imageUrl);\n\t\t\t}\n\t\t},\n\t\tasync saveImageToWorkspace(imageUrl) {\n\t\t\ttry {\n\t\t\t\t// 使用Vue服务访问框架获取VSCode服务\n\t\t\t\tif (this.$vscode && imageUrl) {\n\t\t\t\t\t// 下载图片内容\n\t\t\t\t\tconst response = await fetch(imageUrl);\n\t\t\t\t\tconst arrayBuffer = await response.arrayBuffer();\n\t\t\t\t\tconst uint8Array = new Uint8Array(arrayBuffer);\n\t\t\t\t\t\n\t\t\t\t\t// 从URL中提取文件扩展名，或者根据content-type推断\n\t\t\t\t\tconst contentType = response.headers.get('content-type') || '';\n\t\t\t\t\tlet extension = '.jpg'; // 默认扩展名\n\t\t\t\t\tif (contentType.includes('png')) extension = '.png';\n\t\t\t\t\telse if (contentType.includes('gif')) extension = '.gif';\n\t\t\t\t\telse if (contentType.includes('webp')) extension = '.webp';\n\t\t\t\t\t\n\t\t\t\t\t// 生成图片文件名，尝试从URL中提取原始名称\n\t\t\t\t\tlet fileName = `image${extension}`;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst url = new URL(imageUrl);\n\t\t\t\t\t\tconst pathParts = url.pathname.split('/');\n\t\t\t\t\t\tconst lastPart = pathParts[pathParts.length - 1];\n\t\t\t\t\t\tif (lastPart && lastPart.includes('.')) {\n\t\t\t\t\t\t\tfileName = lastPart;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// 如果URL解析失败，使用默认名称\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 获取会话ID\n\t\t\t\t\tconst sessionId = this.msgInfo.groupId || this.msgInfo.targetId || 'unknown';\n\t\t\t\t\t\n\t\t\t\t\t// 使用 SharedServicesAccessor 的 saveArrayBufferToWorkspace 方法\n\t\t\t\t\tconst success = await this.$vscode.saveArrayBufferToWorkspace(uint8Array, fileName, sessionId);\n\t\t\t\t\t\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tconsole.log('[ChatMessageItem] Image saved to workspace via SharedServicesAccessor:', {\n\t\t\t\t\t\t\tfileName: fileName,\n\t\t\t\t\t\t\tfileSize: uint8Array.length,\n\t\t\t\t\t\t\tsessionId: sessionId\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('[ChatMessageItem] Failed to save image via SharedServicesAccessor');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatMessageItem] Failed to save image to workspace:', error);\n\t\t\t}\n\t\t},\n\t\tonPlayVoice() {\n\t\t\tif (!this.audio) {\n\t\t\t\tthis.audio = new Audio();\n\t\t\t}\n\t\t\tthis.audio.src = JSON.parse(this.msgInfo.content).url;\n\t\t\tthis.audio.play();\n\t\t\tthis.onPlayVoice = 'RUNNING';\n\t\t},\n\t\tshowRightMenu(e) {\n\t\t\tthis.rightMenu.pos = {\n\t\t\t\tx: e.x,\n\t\t\t\ty: e.y\n\t\t\t};\n\t\t\tthis.rightMenu.show = \"true\";\n\t\t},\n\t\tonSelectMenu(item) {\n\t\t\tthis.$emit(item.key.toLowerCase(), this.msgInfo);\n\t\t},\n\t\tonShowReadedBox() {\n\t\t\tlet rect = this.$refs.chatMsgBox.getBoundingClientRect();\n\t\t\tthis.$refs.chatGroupReadedBox.open(rect);\n\t\t},\n\t\tasync onFileDownloadClick() {\n\t\t\t// 当用户点击文件下载时，同时保存到VSCode工作区\n\t\t\ttry {\n\t\t\t\tconst fileUrl = this.data.url;\n\t\t\t\tconst fileName = this.data.name;\n\t\t\t\t\n\t\t\t\tif (fileUrl && fileName) {\n\t\t\t\t\tawait this.saveRemoteFileToWorkspace(fileUrl, fileName);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatMessageItem] Failed to save downloaded file to workspace:', error);\n\t\t\t}\n\t\t},\n\t\tasync saveRemoteFileToWorkspace(fileUrl, fileName) {\n\t\t\ttry {\n\t\t\t\t// 使用Vue服务访问框架获取VSCode服务\n\t\t\t\tif (this.$vscode) {\n\t\t\t\t\t// 下载文件内容\n\t\t\t\t\tconst response = await fetch(fileUrl);\n\t\t\t\t\tconst arrayBuffer = await response.arrayBuffer();\n\t\t\t\t\tconst uint8Array = new Uint8Array(arrayBuffer);\n\t\t\t\t\t\n\t\t\t\t\t// 使用原始文件名，重复文件名处理由SharedServicesAccessor负责\n\t\t\t\t\tconst finalFileName = fileName;\n\t\t\t\t\t\n\t\t\t\t\t// 获取会话ID\n\t\t\t\t\tconst sessionId = this.msgInfo.groupId || this.msgInfo.targetId || 'unknown';\n\t\t\t\t\t\n\t\t\t\t\t// 使用 SharedServicesAccessor 的 saveArrayBufferToWorkspace 方法\n\t\t\t\t\tconst success = await this.$vscode.saveArrayBufferToWorkspace(uint8Array, finalFileName, sessionId);\n\t\t\t\t\t\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tconsole.log('[ChatMessageItem] Downloaded file saved to workspace via SharedServicesAccessor:', {\n\t\t\t\t\t\t\tfileName: finalFileName,\n\t\t\t\t\t\t\tfileSize: uint8Array.length,\n\t\t\t\t\t\t\tsessionId: sessionId\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('[ChatMessageItem] Failed to save downloaded file via SharedServicesAccessor');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatMessageItem] Failed to save remote file to workspace:', error);\n\t\t\t}\n\t\t},\n\t\thandleContextMenu(event) {\n\t\t\t// 阻止默认的右键菜单\n\t\t\tevent.preventDefault();\n\t\t\t// 阻止文本选择\n\t\t\tevent.stopPropagation();\n\t\t\t// 显示右键菜单\n\t\t\tthis.showRightMenu(event);\n\t\t},\n\t\t// Markdown消息渲染完成回调\n\t\tonMessageRendered() {\n\t\t\t// 触发消息渲染完成事件\n\t\t\tthis.$emit('message-rendered', this.msgInfo);\n\t\t\t// 确保消息滚动到可视区域\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$emit('need-scroll');\n\t\t\t});\n\t\t}\n\t},\n\tcomputed: {\n\t\tloading() {\n\t\t\treturn this.msgInfo.loadStatus && this.msgInfo.loadStatus === \"loading\";\n\t\t},\n\t\tloadFail() {\n\t\t\treturn this.msgInfo.loadStatus && this.msgInfo.loadStatus === \"fail\";\n\t\t},\n\t\tdata() {\n\t\t\treturn JSON.parse(this.msgInfo.content)\n\t\t},\n\t\tfileSize() {\n\t\t\tlet size = this.data.size;\n\t\t\tif (size > 1024 * 1024) {\n\t\t\t\treturn Math.round(size / 1024 / 1024) + \"M\";\n\t\t\t}\n\t\t\tif (size > 1024) {\n\t\t\t\treturn Math.round(size / 1024) + \"KB\";\n\t\t\t}\n\t\t\treturn size + \"B\";\n\t\t},\n\t\tmenuItems() {\n\t\t\tlet items = [];\n\t\t\titems.push({\n\t\t\t\tkey: 'DELETE',\n\t\t\t\tname: '删除',\n\t\t\t\ticon: 'el-icon-delete'\n\t\t\t});\n\t\t\tif (this.msgInfo.selfSend && this.msgInfo.id > 0) {\n\t\t\t\titems.push({\n\t\t\t\t\tkey: 'RECALL',\n\t\t\t\t\tname: '撤回',\n\t\t\t\t\ticon: 'el-icon-refresh-left'\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn items;\n\t\t},\n\t\tisAction() {\n\t\t\treturn this.$msgType.isAction(this.msgInfo.type);\n\t\t},\n\t\tisNormal() {\n\t\t\tconst type = this.msgInfo.type;\n\t\t\treturn this.$msgType.isNormal(type) || this.$msgType.isAction(type)\n\t\t},\n\t\t// 判断是否为智能体消息\n\t\tisAgentMessage() {\n\t\t\t// 检查多种可能的标记字段\n\t\t\treturn (this.msgInfo.type === this.$enums.MESSAGE_TYPE.TEXT || this.msgInfo.type === 'error') && (\n\t\t\t\tthis.msgInfo.isAgent || \n\t\t\t\tthis.msgInfo.isAI ||\n\t\t\t\tthis.msgInfo.fromAgent ||\n\t\t\t\tthis.msgInfo.agentId ||\n\t\t\t\tthis.msgInfo.modelName ||\n\t\t\t\t(this.msgInfo.sendId && String(this.msgInfo.sendId).startsWith('agent_')) ||\n\t\t\t\t(this.msgInfo.extra && this.msgInfo.extra.isAgent)\n\t\t\t);\n\t\t},\n\t\t// 构建智能体消息对象\n\t\tagentMessageObject() {\n\t\t\treturn {\n\t\t\t\tcontent: this.msgInfo.content || '',\n\t\t\t\ttype: this.msgInfo.type === 'error' ? 'ERROR' : 'AGENT',\n\t\t\t\tformat: 'markdown',\n\t\t\t\tisAgent: true,\n\t\t\t\tisError: this.msgInfo.type === 'error',\n\t\t\t\tmsgInfo: this.msgInfo,\n\t\t\t\tsendId: this.msgInfo.sendId,\n\t\t\t\tagentId: this.msgInfo.agentId,\n\t\t\t\tmodelName: this.msgInfo.modelName\n\t\t\t};\n\t\t},\n\t\thtmlText() {\n\t\t\tlet color = this.msgInfo.selfSend ? 'white' : '';\n\t\t\t// 清理零宽字符以避免显示问题\n\t\t\tconst { ZeroWidthEncoder } = require('@/utils/zeroWidthEncoder.js');\n\t\t\tlet cleanContent = ZeroWidthEncoder.cleanText(this.msgInfo.content);\n\t\t\tlet text = this.$url.replaceURLWithHTMLLinks(cleanContent, color)\n\t\t\treturn this.$emo.transform(text,'emoji-normal')\n\t\t},\n\t\tisTipMessage() {\n\t\t\treturn this.msgInfo.type === this.$enums.MESSAGE_TYPE.TIP_TIME;\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.chat-msg-item {\n\n\t.chat-msg-tip {\n\t\tline-height: 50px;\n\t\tfont-size: var(--im-font-size-small);\n\t\tcolor: var(--im-text-color-light);\n\t\ttext-align: center;\n\t}\n\n\t.chat-msg-normal {\n\t\tposition: relative;\n\t\tfont-size: 0;\n\t\tpadding-left: 48px;\n\t\tmin-height: 50px;\n\t\tmargin-top: 10px;\n\n\t\t.head-image {\n\t\t\tposition: absolute;\n\t\t\twidth: 40px;\n\t\t\theight: 40px;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t}\n\n\t\t.chat-msg-content {\n\t\t\ttext-align: left;\n\n\t\t\t.send-fail {\n\t\t\t\tcolor: #e60c0c;\n\t\t\t\tfont-size: 30px;\n\t\t\t\tcursor: pointer;\n\t\t\t\tmargin: 0 20px;\n\t\t\t}\n\n\t\t\t.chat-msg-top {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-wrap: nowrap;\n\t\t\t\tcolor: var(--im-text-color-light);\n\t\t\t\tfont-size: var(--im-font-size);\n\t\t\t\tline-height: 20px;\n\n\t\t\t\tspan {\n\t\t\t\t\tmargin-right: 12px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.chat-msg-bottom {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tpadding-right: 300px;\n\t\t\t\tpadding-left: 5px;\n\n\t\t\t\t.chat-msg-text {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tline-height: 26px;\n\t\t\t\t\t//margin-top: 3px;\n\t\t\t\t\tpadding: 6px 10px;\n\t\t\t\t\tbackground-color: var(--im-background);\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\tfont-size: var(--im-font-size);\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\twhite-space: pre-wrap;\n\t\t\t\t\tword-break: break-all;\n\t\t\t\t\t\n\t\t\t\t\t// Markdown内容样式优化\n\t\t\t\t\t::v-deep .unified-message-renderer {\n\t\t\t\t\t\t.message-markdown {\n\t\t\t\t\t\t\t.markdown-body {\n\t\t\t\t\t\t\t\tbackground: transparent !important;\n\t\t\t\t\t\t\t\tpadding: 0 !important;\n\t\t\t\t\t\t\t\tcolor: inherit !important;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 调整标题样式\n\t\t\t\t\t\t\t\th1, h2, h3, h4, h5, h6 {\n\t\t\t\t\t\t\t\t\tmargin-top: 8px;\n\t\t\t\t\t\t\t\t\tmargin-bottom: 6px;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t&:first-child {\n\t\t\t\t\t\t\t\t\t\tmargin-top: 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 调整段落间距\n\t\t\t\t\t\t\t\tp {\n\t\t\t\t\t\t\t\t\tmargin: 4px 0;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t&:last-child {\n\t\t\t\t\t\t\t\t\t\tmargin-bottom: 0;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 列表样式\n\t\t\t\t\t\t\t\tul, ol {\n\t\t\t\t\t\t\t\t\tmargin: 4px 0;\n\t\t\t\t\t\t\t\t\tpadding-left: 20px;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 代码块样式\n\t\t\t\t\t\t\t\t.code-block-wrapper {\n\t\t\t\t\t\t\t\t\tmargin: 6px -6px;\n\t\t\t\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t.code-block-header {\n\t\t\t\t\t\t\t\t\t\tpadding: 4px 8px;\n\t\t\t\t\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t.code-block-content {\n\t\t\t\t\t\t\t\t\t\tpre {\n\t\t\t\t\t\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\t\t\t\t\t\tpadding: 8px;\n\t\t\t\t\t\t\t\t\t\t\tbackground: rgba(0, 0, 0, 0.03);\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\tcode {\n\t\t\t\t\t\t\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 行内代码\n\t\t\t\t\t\t\t\tcode:not(pre code) {\n\t\t\t\t\t\t\t\t\tpadding: 2px 4px;\n\t\t\t\t\t\t\t\t\tfont-size: 85%;\n\t\t\t\t\t\t\t\t\tbackground-color: rgba(27, 31, 35, 0.05);\n\t\t\t\t\t\t\t\t\tborder-radius: 3px;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 表格样式\n\t\t\t\t\t\t\t\t.markdown-table {\n\t\t\t\t\t\t\t\t\tmargin: 6px 0;\n\t\t\t\t\t\t\t\t\tfont-size: 13px;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tth, td {\n\t\t\t\t\t\t\t\t\t\tpadding: 4px 8px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 引用样式\n\t\t\t\t\t\t\t\tblockquote {\n\t\t\t\t\t\t\t\t\tmargin: 6px 0;\n\t\t\t\t\t\t\t\t\tpadding: 4px 0 4px 12px;\n\t\t\t\t\t\t\t\t\tborder-left-width: 3px;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 确保文本可选择 - 解决VSCode环境下无法选中文本的问题\n\t\t\t\t\tuser-select: text !important;\n\t\t\t\t\t-webkit-user-select: text !important;\n\t\t\t\t\t-moz-user-select: text !important;\n\t\t\t\t\t-ms-user-select: text !important;\n\t\t\t\t\tcursor: text;\n\n\t\t\t\t\t&:after {\n\t\t\t\t\t\tcontent: \"\";\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tleft: -10px;\n\t\t\t\t\t\ttop: 13px;\n\t\t\t\t\t\twidth: 0;\n\t\t\t\t\t\theight: 0;\n\t\t\t\t\t\tborder-style: solid dashed dashed;\n\t\t\t\t\t\tborder-color: #eee transparent transparent;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tborder-width: 10px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.chat-msg-image {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-wrap: nowrap;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t\talign-items: center;\n\n\t\t\t\t\t.send-image {\n\t\t\t\t\t\tmin-width: 200px;\n\t\t\t\t\t\tmin-height: 150px;\n\t\t\t\t\t\tmax-width: 400px;\n\t\t\t\t\t\tmax-height: 300px;\n\t\t\t\t\t\tborder-radius: 8px;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t.chat-msg-file {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-wrap: nowrap;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tmargin-bottom: 2px;\n\n\t\t\t\t\t.chat-file-box {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-wrap: nowrap;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tmin-height: 60px;\n\t\t\t\t\t\tbox-shadow: var(--im-box-shadow-light);\n\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\tpadding: 10px 15px;\n\n\t\t\t\t\t\t.chat-file-info {\n\t\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\ttext-align: left;\n\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\tmargin-right: 10px;\n\n\t\t\t\t\t\t\t.chat-file-name {\n\t\t\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\t\t\tmin-width: 160px;\n\t\t\t\t\t\t\t\tmax-width: 220px;\n\t\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\t\tmargin-bottom: 4px;\n\t\t\t\t\t\t\t\twhite-space: pre-wrap;\n\t\t\t\t\t\t\t\tword-break: break-all;\n\t\t\t\t\t\t\t\tcolor: #000000 !important;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t.chat-file-size {\n\t\t\t\t\t\t\t\tfont-size: var(--im-font-size-smaller);\n\t\t\t\t\t\t\t\tcolor: #999999;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.chat-file-icon {\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\twidth: 44px;\n\t\t\t\t\t\t\theight: 44px;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.send-fail {\n\t\t\t\t\t\tcolor: #e60c0c;\n\t\t\t\t\t\tfont-size: 30px;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tmargin: 0 20px;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t.chat-msg-voice {\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tcursor: pointer;\n\n\t\t\t\t\taudio {\n\t\t\t\t\t\theight: 45px;\n\t\t\t\t\t\tpadding: 5px 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.chat-action {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\n\t\t\t\t\t.iconfont {\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tfont-size: 22px;\n\t\t\t\t\t\tpadding-right: 8px;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.chat-msg-status {\n\t\t\t\t\tdisplay: block;\n\n\t\t\t\t\t.chat-readed {\n\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\tcolor: var(--im-text-color-light);\n\t\t\t\t\t}\n\n\t\t\t\t\t.chat-unread {\n\t\t\t\t\t\tfont-size: var(--im-font-size-smaller);\n\t\t\t\t\t\tcolor: var(--im-color-danger);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.chat-receipt {\n\t\t\t\t\tfont-size: var(--im-font-size-smaller);\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tcolor: var(--im-text-color-light);\n\n\t\t\t\t\t.icon-ok {\n\t\t\t\t\t\tfont-size: 20px;\n\t\t\t\t\t\tcolor: var(--im-color-sucess);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.chat-at-user {\n\t\t\t\t\tpadding: 2px 5px;\n\t\t\t\t\tborder-radius: 3px;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t&.chat-msg-mine {\n\t\t\ttext-align: right;\n\t\t\tpadding-left: 0;\n\t\t\tpadding-right: 48px;\n\n\t\t\t.head-image {\n\t\t\t\tleft: auto;\n\t\t\t\tright: 0;\n\t\t\t}\n\n\t\t\t.chat-msg-content {\n\t\t\t\ttext-align: right;\n\n\t\t\t\t.chat-msg-top {\n\t\t\t\t\tflex-direction: row-reverse;\n\n\t\t\t\t\tspan {\n\t\t\t\t\t\tmargin-left: 12px;\n\t\t\t\t\t\tmargin-right: 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.chat-msg-bottom {\n\t\t\t\t\tpadding-left: 180px;\n\t\t\t\t\tpadding-right: 5px;\n\n\t\t\t\t\t.chat-msg-text {\n\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\tbackground-color: var(--im-color-primary-light-2);\n\t\t\t\t\t\tcolor: #fff;\n\n\t\t\t\t\t\t&:after {\n\t\t\t\t\t\t\tleft: auto;\n\t\t\t\t\t\t\tright: -10px;\n\t\t\t\t\t\t\tborder-top-color: var(--im-color-primary-light-2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 自己发送的Markdown消息样式\n\t\t\t\t\t\t::v-deep .unified-message-renderer {\n\t\t\t\t\t\t\t.message-markdown {\n\t\t\t\t\t\t\t\t.markdown-body {\n\t\t\t\t\t\t\t\t\tcolor: #fff !important;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 链接颜色\n\t\t\t\t\t\t\t\t\ta {\n\t\t\t\t\t\t\t\t\t\tcolor: #b3d9ff !important;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t\t\t\t\tcolor: #d9ecff !important;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 代码块在深色背景下的样式\n\t\t\t\t\t\t\t\t\t.code-block-wrapper {\n\t\t\t\t\t\t\t\t\t\t.code-block-header {\n\t\t\t\t\t\t\t\t\t\t\tbackground: rgba(255, 255, 255, 0.1);\n\t\t\t\t\t\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t.copy-button {\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: rgba(255, 255, 255, 0.15);\n\t\t\t\t\t\t\t\t\t\t\t\tborder-color: rgba(255, 255, 255, 0.3);\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackground: rgba(255, 255, 255, 0.2);\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t.code-block-content {\n\t\t\t\t\t\t\t\t\t\t\tpre {\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: rgba(0, 0, 0, 0.2);\n\t\t\t\t\t\t\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 行内代码\n\t\t\t\t\t\t\t\t\tcode:not(pre code) {\n\t\t\t\t\t\t\t\t\t\tbackground-color: rgba(255, 255, 255, 0.15);\n\t\t\t\t\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 表格\n\t\t\t\t\t\t\t\t\t.markdown-table {\n\t\t\t\t\t\t\t\t\t\tth {\n\t\t\t\t\t\t\t\t\t\t\tbackground-color: rgba(255, 255, 255, 0.1);\n\t\t\t\t\t\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\ttr:nth-child(2n) {\n\t\t\t\t\t\t\t\t\t\t\tbackground-color: rgba(255, 255, 255, 0.05);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tth, td {\n\t\t\t\t\t\t\t\t\t\t\tborder-color: rgba(255, 255, 255, 0.2);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 引用\n\t\t\t\t\t\t\t\t\tblockquote {\n\t\t\t\t\t\t\t\t\t\tborder-left-color: rgba(255, 255, 255, 0.5);\n\t\t\t\t\t\t\t\t\t\tcolor: rgba(255, 255, 255, 0.9);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.chat-msg-image {\n\t\t\t\t\t\tflex-direction: row-reverse;\n\t\t\t\t\t}\n\n\t\t\t\t\t.chat-msg-file {\n\t\t\t\t\t\tflex-direction: row-reverse;\n\t\t\t\t\t}\n\n\t\t\t\t\t.chat-action {\n\t\t\t\t\t\tflex-direction: row-reverse;\n\n\t\t\t\t\t\t.iconfont {\n\t\t\t\t\t\t\ttransform: rotateY(180deg);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n}\n\n// 全局VSCode环境样式覆盖\n:global(.vscode-environment) {\n\t.chat-msg-text,\n\t.chat-msg-text * {\n\t\tuser-select: text !important;\n\t\t-webkit-user-select: text !important;\n\t\t-moz-user-select: text !important;\n\t\t-ms-user-select: text !important;\n\t\tcursor: text !important;\n\t\tpointer-events: auto !important;\n\t}\n}\n\n// 🔧 文本选择优化样式\n:global(.text-selectable) {\n\tuser-select: text !important;\n\t-webkit-user-select: text !important;\n\t-moz-user-select: text !important;\n\t-ms-user-select: text !important;\n\tcursor: text !important;\n\tpointer-events: auto !important;\n\t\n\t// 覆盖可能阻止文本选择的样式\n\t&, & * {\n\t\tuser-select: text !important;\n\t\t-webkit-user-select: text !important;\n\t\t-moz-user-select: text !important;\n\t\t-ms-user-select: text !important;\n\t}\n}\n\n// 智能体错误消息样式\n.agent-error-message {\n\tbackground: linear-gradient(135deg, #fff5f5 0%, #fed7d7 100%);\n\tborder: 1px solid #feb2b2;\n\tborder-radius: 8px;\n\tpadding: 12px 16px;\n\tmargin: 4px 0;\n\tposition: relative;\n\t\n\t// 错误消息图标\n\t&::before {\n\t\tcontent: \"⚠️\";\n\t\tposition: absolute;\n\t\ttop: 12px;\n\t\tleft: 16px;\n\t\tfont-size: 16px;\n\t\twidth: 20px;\n\t\theight: 20px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t\n\t// 为内容添加左边距以避免与图标重叠\n\t.unified-message-renderer,\n\t.markdown-renderer,\n\t.markdown-body {\n\t\tmargin-left: 28px;\n\t\tcolor: #742a2a;\n\t\t\n\t\t// 确保链接在错误消息中仍然可见\n\t\ta {\n\t\t\tcolor: #e53e3e !important;\n\t\t\ttext-decoration: underline;\n\t\t}\n\t\t\n\t\t// 代码块样式调整\n\t\tcode {\n\t\t\tbackground: rgba(229, 62, 62, 0.1);\n\t\t\tcolor: #742a2a;\n\t\t\tborder: 1px solid rgba(229, 62, 62, 0.2);\n\t\t}\n\t\t\n\t\tpre {\n\t\t\tbackground: rgba(229, 62, 62, 0.05);\n\t\t\tborder: 1px solid rgba(229, 62, 62, 0.2);\n\t\t}\n\t\t\n\t\t// 强调文本样式\n\t\tstrong, b {\n\t\t\tcolor: #742a2a;\n\t\t\tfont-weight: 600;\n\t\t}\n\t\t\n\t\t// 列表样式\n\t\tul, ol {\n\t\t\tcolor: #742a2a;\n\t\t}\n\t\t\n\t\t// 确保所有文本都是错误色调\n\t\tp {\n\t\t\tcolor: #742a2a;\n\t\t}\n\t}\n\t\n\t// 暗色主题支持\n\t.dark & {\n\t\tbackground: linear-gradient(135deg, #2d1b1b 0%, #4a2a2a 100%);\n\t\tborder-color: #e53e3e;\n\t\t\n\t\t.unified-message-renderer,\n\t\t.markdown-renderer,\n\t\t.markdown-body {\n\t\t\tcolor: #fc8181;\n\t\t\t\n\t\t\ta {\n\t\t\t\tcolor: #f56565 !important;\n\t\t\t}\n\t\t\t\n\t\t\tcode {\n\t\t\t\tbackground: rgba(245, 101, 101, 0.2);\n\t\t\t\tcolor: #fc8181;\n\t\t\t}\n\t\t\t\n\t\t\tpre {\n\t\t\t\tbackground: rgba(245, 101, 101, 0.1);\n\t\t\t}\n\t\t\t\n\t\t\tstrong, b, p, ul, ol {\n\t\t\t\tcolor: #fc8181;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageItem.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatMessageItem.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatMessageItem.vue?vue&type=template&id=602398ff&scoped=true\"\nimport script from \"./ChatMessageItem.vue?vue&type=script&lang=js\"\nexport * from \"./ChatMessageItem.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatMessageItem.vue?vue&type=style&index=0&id=602398ff&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"602398ff\",\n  null\n  \n)\n\nexport default component.exports","/**\n * 消息类型适配器\n * 将不同类型的消息统一适配为标准格式\n */\nexport default class MessageTypeAdapter {\n  /**\n   * 适配消息对象\n   * @param {Object} message 原始消息对象\n   * @returns {Object} 适配后的消息对象\n   */\n  static adapt(message) {\n    if (!message) {\n      return this.createDefaultMessage();\n    }\n    \n    // 根据消息类型选择适配器\n    const adapters = {\n      'PRIVATE': this.adaptPrivateMessage,\n      'GROUP': this.adaptGroupMessage,\n      'AGENT': this.adaptAgentMessage,\n      'SYSTEM': this.adaptSystemMessage,\n      'STREAM': this.adaptStreamMessage,\n      'LLM': this.adaptLLMMessage\n    };\n    \n    const adapter = adapters[message.type] || adapters[message.msgType] || this.adaptDefaultMessage;\n    return adapter.call(this, message);\n  }\n  \n  /**\n   * 创建默认消息对象\n   */\n  static createDefaultMessage() {\n    return {\n      content: '',\n      format: 'text',\n      features: {\n        markdown: false,\n        katex: false,\n        mermaid: false,\n        codeHighlight: false\n      },\n      streaming: false,\n      type: 'UNKNOWN'\n    };\n  }\n  \n  /**\n   * 适配私聊消息\n   */\n  static adaptPrivateMessage(message) {\n    return {\n      ...message,\n      content: message.content || message.msg || '',\n      format: this.detectFormat(message),\n      features: this.detectFeatures(message),\n      streaming: false,\n      type: 'PRIVATE'\n    };\n  }\n  \n  /**\n   * 适配群聊消息\n   */\n  static adaptGroupMessage(message) {\n    return {\n      ...message,\n      content: message.content || message.msg || '',\n      format: this.detectFormat(message),\n      features: this.detectFeatures(message),\n      streaming: false,\n      type: 'GROUP'\n    };\n  }\n  \n  /**\n   * 适配智能体消息\n   */\n  static adaptAgentMessage(message) {\n    const content = message.content || message.msg || message.message || '';\n    \n    return {\n      ...message,\n      content: content,\n      format: 'markdown', // 智能体消息默认使用markdown\n      features: {\n        markdown: true,\n        katex: true,\n        mermaid: true,\n        codeHighlight: true\n      },\n      streaming: message.streaming || message.isStreaming || false,\n      type: 'AGENT',\n      isAgent: true,\n      // 智能体特有属性\n      agentId: message.agentId || message.agent_id,\n      agentName: message.agentName || message.agent_name,\n      modelInfo: message.modelInfo || message.model_info\n    };\n  }\n  \n  /**\n   * 适配系统消息\n   */\n  static adaptSystemMessage(message) {\n    return {\n      ...message,\n      content: message.content || message.msg || '',\n      format: 'text',\n      features: {\n        markdown: false,\n        katex: false,\n        mermaid: false,\n        codeHighlight: false\n      },\n      streaming: false,\n      type: 'SYSTEM'\n    };\n  }\n  \n  /**\n   * 适配流式消息\n   */\n  static adaptStreamMessage(message) {\n    return {\n      ...message,\n      content: message.content || message.msg || '',\n      format: 'markdown',\n      features: {\n        markdown: true,\n        katex: true,\n        mermaid: true,\n        codeHighlight: true\n      },\n      streaming: true,\n      type: 'STREAM'\n    };\n  }\n  \n  /**\n   * 适配LLM消息\n   */\n  static adaptLLMMessage(message) {\n    return {\n      ...message,\n      content: message.content || message.text || message.message || '',\n      format: 'markdown',\n      features: {\n        markdown: true,\n        katex: true,\n        mermaid: true,\n        codeHighlight: true\n      },\n      streaming: message.streaming !== false,\n      type: 'LLM',\n      // LLM特有属性\n      model: message.model,\n      temperature: message.temperature,\n      maxTokens: message.max_tokens || message.maxTokens,\n      completionTokens: message.completion_tokens || message.completionTokens,\n      promptTokens: message.prompt_tokens || message.promptTokens\n    };\n  }\n  \n  /**\n   * 适配默认消息\n   */\n  static adaptDefaultMessage(message) {\n    const content = this.extractContent(message);\n    \n    return {\n      ...message,\n      content: content,\n      format: this.detectFormat(message),\n      features: this.detectFeatures(message),\n      streaming: message.streaming || false,\n      type: message.type || 'DEFAULT'\n    };\n  }\n  \n  /**\n   * 提取消息内容\n   */\n  static extractContent(message) {\n    // 尝试从不同字段提取内容\n    const contentFields = ['content', 'msg', 'message', 'text', 'body', 'data'];\n    \n    for (const field of contentFields) {\n      if (message[field]) {\n        if (typeof message[field] === 'string') {\n          return message[field];\n        }\n        if (typeof message[field] === 'object' && message[field].text) {\n          return message[field].text;\n        }\n      }\n    }\n    \n    return '';\n  }\n  \n  /**\n   * 检测消息格式\n   */\n  static detectFormat(message) {\n    // 优先使用消息自带的格式标记\n    if (message.format) {\n      return message.format;\n    }\n    \n    // 检查消息类型\n    if (message.isMarkdown || message.is_markdown) {\n      return 'markdown';\n    }\n    \n    // 智能体和LLM消息默认markdown\n    if (message.type === 'AGENT' || message.type === 'LLM' || message.isAgent) {\n      return 'markdown';\n    }\n    \n    // 检测内容是否包含markdown语法\n    const content = this.extractContent(message);\n    if (this.hasMarkdownSyntax(content)) {\n      return 'markdown';\n    }\n    \n    return 'text';\n  }\n  \n  /**\n   * 检测消息特性\n   */\n  static detectFeatures(message) {\n    const content = this.extractContent(message);\n    \n    // 如果是纯文本，所有特性都关闭\n    if (this.detectFormat(message) === 'text') {\n      return {\n        markdown: false,\n        katex: false,\n        mermaid: false,\n        codeHighlight: false\n      };\n    }\n    \n    return {\n      markdown: true,\n      katex: this.hasLatex(content),\n      mermaid: this.hasMermaid(content),\n      codeHighlight: this.hasCodeBlock(content)\n    };\n  }\n  \n  /**\n   * 检测Markdown语法\n   */\n  static hasMarkdownSyntax(content) {\n    if (!content) return false;\n    \n    const patterns = [\n      /^#{1,6}\\s/m,           // 标题\n      /\\*\\*[^*]+\\*\\*/,        // 粗体\n      /\\*[^*]+\\*/,            // 斜体\n      /```[\\s\\S]*?```/,       // 代码块\n      /`[^`]+`/,              // 行内代码\n      /^\\s*[-*+]\\s/m,         // 无序列表\n      /^\\s*\\d+\\.\\s/m,         // 有序列表\n      /\\[([^\\]]+)\\]\\(([^)]+)\\)/, // 链接\n      /^\\|.*\\|$/m,            // 表格\n      /^>/m                   // 引用\n    ];\n    \n    return patterns.some(pattern => pattern.test(content));\n  }\n  \n  /**\n   * 检测LaTeX公式\n   */\n  static hasLatex(content) {\n    if (!content) return false;\n    return /\\$[^$]+\\$|\\$\\$[\\s\\S]+?\\$\\$|\\\\\\[[\\s\\S]+?\\\\\\]|\\\\\\([\\s\\S]+?\\\\\\)/.test(content);\n  }\n  \n  /**\n   * 检测Mermaid图表\n   */\n  static hasMermaid(content) {\n    if (!content) return false;\n    return /```mermaid[\\s\\S]*?```/.test(content);\n  }\n  \n  /**\n   * 检测代码块\n   */\n  static hasCodeBlock(content) {\n    if (!content) return false;\n    return /```[\\s\\S]*?```/.test(content);\n  }\n  \n  /**\n   * 合并消息更新（用于流式消息）\n   */\n  static mergeUpdate(originalMessage, update) {\n    const adapted = this.adapt(originalMessage);\n    \n    // 合并内容\n    if (update.content !== undefined) {\n      adapted.content = update.append ? adapted.content + update.content : update.content;\n    }\n    \n    // 更新流式状态\n    if (update.streaming !== undefined) {\n      adapted.streaming = update.streaming;\n    }\n    \n    // 更新其他属性\n    return {\n      ...adapted,\n      ...update,\n      content: adapted.content\n    };\n  }\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupMemberSelector.vue?vue&type=style&index=0&id=968a283e&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/41.0b009f7b.gif\";","module.exports = __webpack_public_path__ + \"img/4.be67348c.gif\";","module.exports = __webpack_public_path__ + \"img/9.0b2dd09a.gif\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"right-menu-mask\",on:{\"click\":function($event){$event.stopPropagation();return _vm.close()},\"contextmenu\":function($event){$event.preventDefault();return _vm.close()}}},[_c('div',{staticClass:\"right-menu\",style:({ 'left': _vm.pos.x + 'px', 'top': _vm.pos.y + 'px' })},[_c('el-menu',{attrs:{\"text-color\":\"#333333\"}},_vm._l((_vm.items),function(item){return _c('el-menu-item',{key:item.key,attrs:{\"title\":item.name},nativeOn:{\"click\":function($event){$event.stopPropagation();return _vm.onSelectMenu(item)}}},[_c('span',[_vm._v(_vm._s(item.name))])])}),1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"right-menu-mask\" @click.stop=\"close()\" @contextmenu.prevent=\"close()\">\n\t\t<div class=\"right-menu\" :style=\"{ 'left': pos.x + 'px', 'top': pos.y + 'px' }\">\n\t\t\t<el-menu text-color=\"#333333\">\n\t\t\t\t<el-menu-item v-for=\"(item) in items\" :key=\"item.key\" :title=\"item.name\"\n\t\t\t\t\t@click.native.stop=\"onSelectMenu(item)\">\n\t\t\t\t\t<!--\t\t\t\t\t<span :class=\"item.icon\"></span>-->\n\t\t\t\t\t<span>{{ item.name }}</span>\n\t\t\t\t</el-menu-item>\n\t\t\t</el-menu>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: \"rightMenu\",\n\tdata() {\n\t\treturn {}\n\t},\n\tprops: {\n\t\tpos: {\n\t\t\ttype: Object\n\t\t},\n\t\titems: {\n\t\t\ttype: Array\n\t\t}\n\t},\n\tmethods: {\n\t\tclose() {\n\t\t\tthis.$emit(\"close\");\n\t\t},\n\t\tonSelectMenu(item) {\n\t\t\tthis.$emit(\"select\", item);\n\t\t\tthis.close();\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.right-menu-mask {\n\tposition: fixed;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n\twidth: 100%;\n\theight: 100%;\n\tz-index: 9999;\n}\n\n.right-menu {\n\tposition: fixed;\n\tborder-radius: 8px;\n\toverflow: hidden;\n\tbox-shadow: var(--im-box-shadow-light);\n\n\t.el-menu {\n\t\tborder-radius: 4px;\n\t\toverflow: hidden;\n\n\t\t.el-menu-item {\n\t\t\theight: 36px;\n\t\t\tline-height: 36px;\n\t\t\tmin-width: 100px;\n\t\t\ttext-align: left;\n\t\t\tpadding: 0 0 0 20px;\n\n\t\t\t&:hover {\n\t\t\t\tbackground-color: var(--im-background-active);\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RightMenu.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RightMenu.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RightMenu.vue?vue&type=template&id=5d68fb58\"\nimport script from \"./RightMenu.vue?vue&type=script&lang=js\"\nexport * from \"./RightMenu.vue?vue&type=script&lang=js\"\nimport style0 from \"./RightMenu.vue?vue&type=style&index=0&id=5d68fb58&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"head-image\",style:({ cursor: _vm.isShowUserInfo ? 'pointer' : null }),on:{\"click\":function($event){return _vm.showUserInfo($event)}}},[_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.validUrl && !_vm.imageError),expression:\"validUrl && !imageError\"}],staticClass:\"avatar-image\",style:(_vm.avatarImageStyle),attrs:{\"src\":_vm.validUrl,\"loading\":\"lazy\"},on:{\"error\":_vm.handleImageError}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.validUrl || _vm.imageError),expression:\"!validUrl || imageError\"}],staticClass:\"avatar-text\",style:(_vm.avatarTextStyle)},[_vm._v(\" \"+_vm._s(_vm.displayText)+\" \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.online),expression:\"online\"}],staticClass:\"online\",attrs:{\"title\":\"用户当前在线\"}}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"head-image\" @click=\"showUserInfo($event)\" :style=\"{ cursor: isShowUserInfo ? 'pointer' : null }\">\n\t\t<img class=\"avatar-image\" v-show=\"validUrl && !imageError\" :src=\"validUrl\" :style=\"avatarImageStyle\" loading=\"lazy\" @error=\"handleImageError\" />\n\t\t<div class=\"avatar-text\" v-show=\"!validUrl || imageError\" :style=\"avatarTextStyle\">\n\t\t\t{{ displayText }}\n\t\t</div>\n\t\t<div v-show=\"online\" class=\"online\" title=\"用户当前在线\"></div>\n\t\t<slot></slot>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: \"headImage\",\n\tdata() {\n\t\treturn {\n\t\t\timageError: false,\n\t\t\tcolors: [\"#5daa31\", \"#c7515a\", \"#e03697\", \"#85029b\",\n\t\t\t\t\"#c9b455\", \"#326eb6\", \"#ff6b6b\", \"#4ecdc4\", \n\t\t\t\t\"#45b7d1\", \"#96ceb4\", \"#feca57\", \"#ff9ff3\"\n\t\t\t]\n\t\t}\n\t},\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 42\n\t\t},\n\t\twidth: {\n\t\t\ttype: Number\n\t\t},\n\t\theight: {\n\t\t\ttype: Number\n\t\t},\n\t\tradius: {\n\t\t\ttype: String,\n\t\t\tdefault: \"50%\"\n\t\t},\n\t\turl: {\n\t\t\ttype: String\n\t\t},\n\t\tname: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\tonline: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tisShowUserInfo: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tmethods: {\n\t\tshowUserInfo(e) {\n\t\t\tif (!this.isShowUserInfo) return;\n\t\t\tif (this.id && this.id > 0) {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/user/find/${this.id}`,\n\t\t\t\t\tmethod: 'get'\n\t\t\t\t}).then((user) => {\n\t\t\t\t\tthis.$store.commit(\"setUserInfoBoxPos\", e);\n\t\t\t\t\tthis.$store.commit(\"showUserInfoBox\", user);\n\t\t\t\t}).catch(() => {\n\t\t\t\t\t// 静默处理错误\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\thandleImageError() {\n\t\t\tthis.imageError = true;\n\t\t}\n\t},\n\tcomputed: {\n\t\tvalidUrl() {\n\t\t\tconst url = this.url;\n\t\t\tif (!url || typeof url !== 'string') return null;\n\t\t\t\n\t\t\tconst trimmedUrl = url.trim();\n\t\t\tif (!trimmedUrl) return null;\n\t\t\t\n\t\t\t// 检查是否是emoji（单个字符且不是常规URL）\n\t\t\tif (trimmedUrl.length <= 4 && !trimmedUrl.includes('http') && !trimmedUrl.includes('.')) {\n\t\t\t\treturn null; // emoji应该显示为文本，不是图片\n\t\t\t}\n\t\t\t\n\t\t\treturn trimmedUrl;\n\t\t},\n\t\tdisplayText() {\n\t\t\tconst url = this.url;\n\t\t\tconst name = this.name;\n\t\t\t\n\t\t\t// 如果URL是emoji，直接显示emoji\n\t\t\tif (url && typeof url === 'string') {\n\t\t\t\tconst trimmedUrl = url.trim();\n\t\t\t\tif (trimmedUrl.length <= 4 && !trimmedUrl.includes('http') && !trimmedUrl.includes('.')) {\n\t\t\t\t\treturn trimmedUrl; // 直接返回emoji\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 否则使用名称的前两个字符\n\t\t\tif (name && typeof name === 'string' && name.trim()) {\n\t\t\t\tconst trimmed = name.trim();\n\t\t\t\tif (trimmed.length >= 2) {\n\t\t\t\t\treturn trimmed.substring(0, 2).toUpperCase();\n\t\t\t\t} else if (trimmed.length === 1) {\n\t\t\t\t\treturn trimmed.toUpperCase();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\treturn \"👤\";\n\t\t},\n\t\tavatarImageStyle() {\n\t\t\tlet w = this.width ? this.width : this.size;\n\t\t\tlet h = this.height ? this.height : this.size;\n\t\t\treturn `width:${w}px; height:${h}px;\n\t\t\t\t\tborder-radius: ${this.radius};`\n\t\t},\n\t\tavatarTextStyle() {\n\t\t\tlet w = this.width ? this.width : this.size;\n\t\t\tlet h = this.height ? this.height : this.size;\n\t\t\treturn `\n\t\t\t\t  width: ${w}px;height:${h}px;\n\t\t\t\t\tbackground-color: ${this.textBackgroundColor};\n\t\t\t\t\tfont-size:${w * 0.35}px;\n\t\t\t\t\tborder-radius: ${this.radius};\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t`\n\t\t},\n\t\ttextBackgroundColor() {\n\t\t\tconst name = this.name;\n\t\t\tif (!name || typeof name !== 'string' || !name.trim()) {\n\t\t\t\treturn '#cccccc';\n\t\t\t}\n\t\t\t\n\t\t\tlet hash = 0;\n\t\t\tfor (let i = 0; i < name.length; i++) {\n\t\t\t\thash += name.charCodeAt(i);\n\t\t\t}\n\t\t\treturn this.colors[hash % this.colors.length];\n\t\t},\n\t\ttextColor() {\n\t\t\tlet hash = 0;\n\t\t\tfor (var i = 0; i < this.name.length; i++) {\n\t\t\t\thash += this.name.charCodeAt(i);\n\t\t\t}\n\t\t\treturn this.colors[hash % this.colors.length];\n\t\t}\n\t},\n\twatch: {\n\t\turl() {\n\t\t\tthis.imageError = false;\n\t\t}\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n.head-image {\n\tposition: relative;\n\t//cursor: pointer;\n\n\t.avatar-image {\n\t\tposition: relative;\n\t\toverflow: hidden;\n\t\tdisplay: block;\n\t}\n\n\t.avatar-text {\n\t\tcolor: white;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\t//border: 1px solid #ccc;\n\t\t//box-shadow: var(--im-box-shadow);\n\t}\n\n\t.online {\n\t\tposition: absolute;\n\t\tright: -5px;\n\t\tbottom: 0;\n\t\twidth: 12px;\n\t\theight: 12px;\n\t\tbackground: limegreen;\n\t\tborder-radius: 50%;\n\t\tborder: 2px solid white;\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeadImage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeadImage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./HeadImage.vue?vue&type=template&id=e3d94e8e&scoped=true\"\nimport script from \"./HeadImage.vue?vue&type=script&lang=js\"\nexport * from \"./HeadImage.vue?vue&type=script&lang=js\"\nimport style0 from \"./HeadImage.vue?vue&type=style&index=0&id=e3d94e8e&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e3d94e8e\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FileIcon.vue?vue&type=style&index=0&id=1a1bedc0&prod&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorChat.vue?vue&type=style&index=0&id=2b814f64&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/12.c86081d0.gif\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=f811964e&prod&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/52.21a20728.gif\";","module.exports = __webpack_public_path__ + \"img/22.1a731ef9.gif\";","module.exports = __webpack_public_path__ + \"img/16.942bf804.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TerminalSelectorPlugin.vue?vue&type=style&index=0&id=80b38fb2&prod&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/39.a8484b5b.gif\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=style&index=0&id=8363db98&prod&scoped=true&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-item\",class:_vm.active ? 'active' : '',on:{\"click\":_vm.handleClick,\"dblclick\":_vm.handleDoubleClick,\"contextmenu\":function($event){$event.preventDefault();return _vm.showRightMenu($event)}}},[_c('div',{staticClass:\"chat-left\"},[_c('head-image',{attrs:{\"url\":_vm.chat.headImage,\"name\":_vm.chat.showName,\"size\":42,\"id\":_vm.headImageId,\"isShowUserInfo\":_vm.chat.type !== 'ai'}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chat.unreadCount > 0),expression:\"chat.unreadCount > 0\"}],staticClass:\"unread-text\"},[_vm._v(_vm._s(_vm.chat.unreadCount))])],1),_c('div',{staticClass:\"chat-right\"},[_c('div',{staticClass:\"chat-name\"},[_c('div',{staticClass:\"chat-name-text\"},[_c('div',[_vm._v(_vm._s(_vm.chat.showName))]),(_vm.chat.type == 'GROUP')?_c('el-tag',{attrs:{\"size\":\"mini\",\"effect\":\"dark\"}},[_vm._v(\"群\")]):_vm._e()],1),_c('div',{staticClass:\"chat-time-text\"},[_vm._v(_vm._s(_vm.showTime))])]),_c('div',{staticClass:\"chat-content\"},[_c('div',{staticClass:\"chat-at-text\"},[_vm._v(_vm._s(_vm.atText))]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isShowSendName),expression:\"isShowSendName\"}],staticClass:\"chat-send-name\"},[_vm._v(_vm._s(_vm.chat.sendNickName + ': '))]),_c('div',{staticClass:\"chat-content-text\",domProps:{\"innerHTML\":_vm._s(_vm.$emo.transform(_vm.chat.lastContent,'emoji-small'))}})])]),_c('right-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.rightMenu.show),expression:\"rightMenu.show\"}],attrs:{\"pos\":_vm.rightMenu.pos,\"items\":_vm.rightMenu.items},on:{\"close\":function($event){_vm.rightMenu.show = false},\"select\":_vm.onSelectMenu}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"chat-item\" :class=\"active ? 'active' : ''\" @click=\"handleClick\" @dblclick=\"handleDoubleClick\" @contextmenu.prevent=\"showRightMenu($event)\">\n\t\t<div class=\"chat-left\">\n\t\t\t<head-image \n\t\t\t\t:url=\"chat.headImage\" \n\t\t\t\t:name=\"chat.showName\" \n\t\t\t\t:size=\"42\"\n\t\t\t\t:id=\"headImageId\" \n\t\t\t\t:isShowUserInfo=\"chat.type !== 'ai'\">\n\t\t\t</head-image>\n\t\t\t<div v-show=\"chat.unreadCount > 0\" class=\"unread-text\">{{ chat.unreadCount }}</div>\n\t\t</div>\n\t\t<div class=\"chat-right\">\n\t\t\t<div class=\"chat-name\">\n\t\t\t\t<div class=\"chat-name-text\">\n\t\t\t\t\t<div>{{ chat.showName }}</div>\n\t\t\t\t\t<el-tag v-if=\"chat.type == 'GROUP'\" size=\"mini\" effect=\"dark\">群</el-tag>\n\t\t\t\t\t<!-- <el-tag v-if=\"chat.isTerminalInbox\" size=\"mini\" type=\"success\" effect=\"dark\">终端</el-tag> -->\n\t\t\t\t</div>\n\t\t\t\t<div class=\"chat-time-text\">{{ showTime }}</div>\n\t\t\t</div>\n\t\t\t<div class=\"chat-content\">\n\t\t\t\t<div class=\"chat-at-text\">{{ atText }}</div>\n\t\t\t\t<div class=\"chat-send-name\" v-show=\"isShowSendName\">{{ chat.sendNickName + ':&nbsp;' }}</div>\n\t\t\t\t<div class=\"chat-content-text\" v-html=\"$emo.transform(chat.lastContent,'emoji-small')\"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<right-menu v-show=\"rightMenu.show\" :pos=\"rightMenu.pos\" :items=\"rightMenu.items\"\n\t\t\t@close=\"rightMenu.show = false\" @select=\"onSelectMenu\"></right-menu>\n\t</div>\n\n</template>\n\n<script>\nimport HeadImage from '../common/HeadImage.vue';\nimport RightMenu from '../common/RightMenu.vue';\nimport { log } from \"@/utils/logManager.js\";\n\nexport default {\n\tname: \"chatItem\",\n\tcomponents: {\n\t\tHeadImage,\n\t\tRightMenu\n\t},\n\tdata() {\n\t\treturn {\n\t\t\trightMenu: {\n\t\t\t\tshow: false,\n\t\t\t\tpos: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t},\n\t\t\t\titems: []\n\t\t\t}\n\t\t}\n\t},\n\tprops: {\n\t\tchat: {\n\t\t\ttype: Object\n\t\t},\n\t\tactive: {\n\t\t\ttype: Boolean\n\t\t},\n\t\tindex: {\n\t\t\ttype: Number\n\t\t},\n\t\t// 新增：是否禁用双击模式（改为单击即激活）\n\t\tdisableDoubleClick: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tmethods: {\n\t\tshowRightMenu(e) {\n\t\t\t// 动态设置右键菜单项\n\t\t\tthis.rightMenu.items = this.getMenuItems();\n\t\t\tthis.rightMenu.pos = {\n\t\t\t\tx: e.x,\n\t\t\t\ty: e.y\n\t\t\t};\n\t\t\tthis.rightMenu.show = \"true\";\n\t\t},\n\t\tgetMenuItems() {\n\t\t\tconst items = [];\n\t\t\t\n\t\t\t// 终端会话不显示置顶选项（因为它们已经置顶）\n\t\t\tif (!this.chat.isTerminalInbox) {\n\t\t\t\titems.push({\n\t\t\t\t\tkey: 'TOP',\n\t\t\t\t\tname: '置顶',\n\t\t\t\t\ticon: 'el-icon-top'\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// 终端会话不允许删除\n\t\t\tif (!this.chat.isTerminalInbox) {\n\t\t\t\titems.push({\n\t\t\t\t\tkey: 'DELETE',\n\t\t\t\t\tname: '删除',\n\t\t\t\t\ticon: 'el-icon-delete'\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\treturn items;\n\t\t},\n\t\tonSelectMenu(item) {\n\t\t\t// 修复：使用正确的参数传递索引，而不是不存在的msgInfo\n\t\t\tthis.$emit(item.key.toLowerCase(), this.index);\n\t\t},\n\t\thandleClick() {\n\t\t\t// 使用统一日志管理器，设置为debug级别（正常情况下不显示）\n\t\t\tlog.debug('ChatItem', '被点击了，索引:', this.index, '会话:', this.chat.showName);\n\t\t\t\n\t\t\t// 如果禁用双击模式，单击就激活\n\t\t\tif (this.disableDoubleClick) {\n\t\t\t\tlog.debug('ChatItem', '单击模式：立即激活会话');\n\t\t\t\tthis.$emit('active', this.index);\n\t\t\t}\n\t\t\t// 否则等待双击\n\t\t},\n\t\thandleDoubleClick() {\n\t\t\t// 双击激活（仅在非禁用双击模式下）\n\t\t\tif (!this.disableDoubleClick) {\n\t\t\t\tlog.debug('ChatItem', '双击模式：激活会话');\n\t\t\t\tthis.$emit('active', this.index);\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\t// 🔧 新增：计算HeadImage组件需要的数值ID\n\t\theadImageId() {\n\t\t\tif (this.chat.type !== 'PRIVATE') {\n\t\t\t\treturn 0; // 非私聊会话返回0，不显示用户信息\n\t\t\t}\n\t\t\t\n\t\t\t// 🔧 处理终端收件箱会话的特殊targetId格式\n\t\t\tif (this.chat.isTerminalInbox && typeof this.chat.targetId === 'string') {\n\t\t\t\t// 从\"1_2\"格式中提取用户ID（第一部分）\n\t\t\t\tconst parts = this.chat.targetId.split('_');\n\t\t\t\tconst userId = parseInt(parts[0]);\n\t\t\t\treturn isNaN(userId) ? 0 : userId;\n\t\t\t}\n\t\t\t\n\t\t\t// 普通私聊会话\n\t\t\tconst targetId = parseInt(this.chat.targetId);\n\t\t\treturn isNaN(targetId) ? 0 : targetId;\n\t\t},\n\t\tisShowSendName() {\n\t\t\tif (!this.chat.sendNickName) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet size = this.chat.messages.length;\n\t\t\tif (size == 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// 只有群聊的普通消息需要显示名称\n\t\t\tlet lastMsg = this.chat.messages[size - 1];\n\t\t\treturn this.$msgType.isNormal(lastMsg.type)\n\t\t},\n\t\tshowTime() {\n\t\t\treturn this.$date.toTimeText(this.chat.lastSendTime, true)\n\t\t},\n\t\tatText() {\n\t\t\tif (this.chat.atMe) {\n\t\t\t\treturn \"[有人@我]\"\n\t\t\t} else if (this.chat.atAll) {\n\t\t\t\treturn \"[@全体成员]\"\n\t\t\t}\n\t\t\treturn \"\";\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.chat-item {\n\theight: 50px;\n\tdisplay: flex;\n\tposition: relative;\n\tpadding: 5px 10px;\n\talign-items: center;\n\tbackground-color: var(--im-background);\n\twhite-space: nowrap;\n\tcursor: pointer;\n\n\t&:hover {\n\t\tbackground-color: var(--im-background-active);\n\t}\n\n\t&.active {\n\t\tbackground-color: var(--im-background-active-dark);\n\t}\n\n\t.chat-left {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\n\t\t.unread-text {\n\t\t\tposition: absolute;\n\t\t\tbackground-color: #f56c6c;\n\t\t\tright: -4px;\n\t\t\ttop: -8px;\n\t\t\tcolor: white;\n\t\t\tborder-radius: 30px;\n\t\t\tpadding: 1px 5px;\n\t\t\tfont-size: 10px;\n\t\t\ttext-align: center;\n\t\t\twhite-space: nowrap;\n\t\t\tborder: 1px solid #f1e5e5;\n\t\t}\n\t}\n\n\n\t.chat-right {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding-left: 10px;\n\t\ttext-align: left;\n\t\toverflow: hidden;\n\n\t\t.chat-name {\n\t\t\tdisplay: flex;\n\t\t\tline-height: 20px;\n\t\t\theight: 20px;\n\n\t\t\t.chat-name-text {\n\t\t\t\tflex: 1;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tfont-size: var(--im-font-size);\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\n\t\t\t\t.el-tag {\n\t\t\t\t\tmin-width: 22px;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tbackground-color: #2830d3;\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\tborder: 0;\n\t\t\t\t\theight: 16px;\n\t\t\t\t\tline-height: 16px;\n\t\t\t\t\tfont-size: 10px;\n\t\t\t\t\tmargin-left: 2px;\n\t\t\t\t\topacity: 0.8;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.chat-time-text {\n\t\t\t\tfont-size: var(--im-font-size-smaller);\n\t\t\t\ttext-align: right;\n\t\t\t\tcolor: var(--im-text-color-light);\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t\tpadding-left: 10px;\n\t\t\t}\n\t\t}\n\n\t\t.chat-content {\n\t\t\tdisplay: flex;\n\t\t\tline-height: 22px;\n\n\t\t\t.chat-at-text {\n\t\t\t\tcolor: #c70b0b;\n\t\t\t\tfont-size: var(--im-font-size-smaller);\n\t\t\t}\n\n\t\t\t.chat-send-name {\n\t\t\t\tfont-size: var(--im-font-size-small);\n\t\t\t\tcolor: var(--im-text-color-light);\n\t\t\t}\n\n\n\t\t\t.chat-content-text {\n\t\t\t\tflex: 1;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\tfont-size: var(--im-font-size-small);\n\t\t\t\tcolor: var(--im-text-color-light);\n\n\t\t\t}\n\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatItem.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatItem.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatItem.vue?vue&type=template&id=41523d72\"\nimport script from \"./ChatItem.vue?vue&type=script&lang=js\"\nexport * from \"./ChatItem.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatItem.vue?vue&type=style&index=0&id=41523d72&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/30.5bd2ccd2.gif\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <router-view></router-view>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App',\n  components: {}\n}\n</script>\n\n<style lang=\"scss\">\n#app {\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  color: var(--im-text-color);\n  font-family: var(--im-font-family);\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??ref--13-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??ref--13-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=42f9bf9e\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=42f9bf9e&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-view\"},[(_vm.autoLoginLoading)?_c('div',{staticClass:\"auto-login-loading\"},[_c('div',{staticClass:\"loading-content\"},[_vm._m(0),_c('div',{staticClass:\"loading-text\"},[_vm._v(\"正在自动登录...\")]),_c('div',{staticClass:\"loading-phone\"},[_vm._v(\"手机号：\"+_vm._s(_vm.autoLoginPhone))])])]):_c('div',{staticClass:\"login-content\"},[_c('div',{staticClass:\"login-form\"},[_vm._m(1),(_vm.isInVSCodeEnvironment())?_c('div',{staticClass:\"custom-tabs\"},[_c('div',{staticClass:\"custom-tabs-header\"},[_c('div',{staticClass:\"custom-tab-item\",class:{ active: _vm.activeTab === 'account' },on:{\"click\":function($event){return _vm.forceSetActiveTab('account')}}},[_vm._v(\" 账号登录 \")]),_c('div',{staticClass:\"custom-tab-item\",class:{ active: _vm.activeTab === 'sms' },on:{\"click\":function($event){return _vm.forceSetActiveTab('sms')}}},[_vm._v(\" 短信登录 \")]),_c('div',{staticClass:\"custom-tab-item\",class:{ active: _vm.activeTab === 'qrcode' },on:{\"click\":function($event){return _vm.forceSetActiveTab('qrcode')}}},[_vm._v(\" 扫码登录 \")])]),_c('div',{staticClass:\"custom-tabs-content\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeTab === 'account'),expression:\"activeTab === 'account'\"}],staticClass:\"custom-tab-pane\"},[_c('el-form',{ref:\"accountForm\",attrs:{\"model\":_vm.accountForm,\"status-icon\":\"\",\"rules\":_vm.accountRules},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.submitAccountForm.apply(null, arguments)}}},[_c('el-form-item',{attrs:{\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入用户名\",\"prefix-icon\":\"el-icon-user\"},model:{value:(_vm.accountForm.userName),callback:function ($$v) {_vm.$set(_vm.accountForm, \"userName\", $$v)},expression:\"accountForm.userName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\",\"placeholder\":\"请输入密码\",\"prefix-icon\":\"el-icon-lock\"},model:{value:(_vm.accountForm.password),callback:function ($$v) {_vm.$set(_vm.accountForm, \"password\", $$v)},expression:\"accountForm.password\"}})],1),_c('el-form-item',[_c('el-button',{staticClass:\"login-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitAccountForm}},[_vm._v(\"登录\")])],1)],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeTab === 'sms'),expression:\"activeTab === 'sms'\"}],staticClass:\"custom-tab-pane\"},[_c('el-form',{ref:\"smsForm\",attrs:{\"model\":_vm.smsForm,\"status-icon\":\"\",\"rules\":_vm.smsRules},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.submitSmsForm.apply(null, arguments)}}},[_c('el-form-item',{attrs:{\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入手机号\",\"prefix-icon\":\"el-icon-phone\"},model:{value:(_vm.smsForm.userName),callback:function ($$v) {_vm.$set(_vm.smsForm, \"userName\", $$v)},expression:\"smsForm.userName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('div',{staticClass:\"verification-code-row\"},[_c('el-input',{staticClass:\"code-input\",attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入验证码\",\"prefix-icon\":\"el-icon-message\"},model:{value:(_vm.smsForm.password),callback:function ($$v) {_vm.$set(_vm.smsForm, \"password\", $$v)},expression:\"smsForm.password\"}}),_c('el-button',{staticClass:\"send-code-btn\",attrs:{\"type\":\"primary\",\"disabled\":_vm.countdown > 0},on:{\"click\":_vm.sendCode}},[_vm._v(\" \"+_vm._s(_vm.countdown > 0 ? `${_vm.countdown}s后重发` : '发送验证码')+\" \")])],1)]),_c('el-form-item',[_c('el-button',{staticClass:\"login-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.phoneLogin}},[_vm._v(\"登录\")])],1)],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeTab === 'qrcode'),expression:\"activeTab === 'qrcode'\"}],staticClass:\"custom-tab-pane\"},[(!_vm.bindPhone)?_c('div',{staticClass:\"qrcode-container\"},[_c('div',{staticClass:\"qrcode-box\"},[(_vm.qrcodeStatus === 'loading')?_c('div',{staticClass:\"qrcode-loading\"},[_c('i',{staticClass:\"el-icon-loading\"}),_c('p',[_vm._v(\"二维码生成中...\")])]):(_vm.qrcodeStatus === 'active')?_c('div',{staticClass:\"qrcode-active\"},[_c('div',{staticClass:\"qrcode-image\"},[(!_vm.wxTicket)?_c('div',{staticClass:\"mock-qrcode\"},[_c('i',{staticClass:\"el-icon-mobile-phone\"}),_c('p',[_vm._v(\"二维码加载中...\")])]):_c('div',{staticClass:\"qrcode-real\"},[_c('img',{attrs:{\"src\":`https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=${_vm.wxTicket}`,\"alt\":\"微信登录二维码\"}})])]),_c('p',{staticClass:\"qrcode-tip\"},[_vm._v(\"请使用手机扫描二维码登录\")])]):(_vm.qrcodeStatus === 'expired')?_c('div',{staticClass:\"qrcode-expired\"},[_c('i',{staticClass:\"el-icon-refresh\"}),_c('p',[_vm._v(\"二维码已过期\")]),_c('p',{staticClass:\"auto-refresh-tip\"},[_vm._v(\"正在自动刷新...\")]),_c('el-button',{staticClass:\"manual-refresh-btn\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.refreshQrcode}},[_c('i',{staticClass:\"el-icon-refresh-right\"}),_vm._v(\" 立即刷新 \")])],1):(_vm.qrcodeStatus === 'scanned')?_c('div',{staticClass:\"qrcode-scanned\"},[_c('i',{staticClass:\"el-icon-success\"}),_c('p',[_vm._v(\"扫描成功，请在手机上确认登录\")])]):_vm._e()])]):_c('div',{staticClass:\"bind-phone-container\"},[_vm._m(2),_c('el-form',{ref:\"bindPhoneForm\",attrs:{\"model\":_vm.bindPhoneForm,\"status-icon\":\"\",\"rules\":_vm.bindPhoneRules},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.submitBindPhone.apply(null, arguments)}}},[_c('el-form-item',{attrs:{\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入手机号\",\"prefix-icon\":\"el-icon-phone\"},model:{value:(_vm.bindPhoneForm.phone),callback:function ($$v) {_vm.$set(_vm.bindPhoneForm, \"phone\", $$v)},expression:\"bindPhoneForm.phone\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"code\"}},[_c('div',{staticClass:\"verification-code-row\"},[_c('el-input',{staticClass:\"code-input\",attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入验证码\",\"prefix-icon\":\"el-icon-message\"},model:{value:(_vm.bindPhoneForm.code),callback:function ($$v) {_vm.$set(_vm.bindPhoneForm, \"code\", $$v)},expression:\"bindPhoneForm.code\"}}),_c('el-button',{staticClass:\"send-code-btn\",attrs:{\"type\":\"primary\",\"disabled\":_vm.bindPhoneCountdown > 0},on:{\"click\":_vm.sendBindPhoneCode}},[_vm._v(\" \"+_vm._s(_vm.bindPhoneCountdown > 0 ? `${_vm.bindPhoneCountdown}s后重发` : '发送验证码')+\" \")])],1)]),_c('el-form-item',[_c('el-button',{staticClass:\"login-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitBindPhone}},[_vm._v(\"确认绑定\")])],1),_c('el-form-item',[_c('el-button',{staticClass:\"cancel-btn\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.cancelBindPhone}},[_vm._v(\"取消绑定\")])],1)],1)],1)])])]):_c('el-tabs',{staticClass:\"login-tabs\",model:{value:(_vm.activeTab),callback:function ($$v) {_vm.activeTab=$$v},expression:\"activeTab\"}},[_c('el-tab-pane',{attrs:{\"label\":\"账号登录\",\"name\":\"account\"}},[_c('el-form',{ref:\"accountFormWeb\",attrs:{\"model\":_vm.accountForm,\"status-icon\":\"\",\"rules\":_vm.accountRules},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.submitAccountForm.apply(null, arguments)}}},[_c('el-form-item',{attrs:{\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入用户名\",\"prefix-icon\":\"el-icon-user\"},model:{value:(_vm.accountForm.userName),callback:function ($$v) {_vm.$set(_vm.accountForm, \"userName\", $$v)},expression:\"accountForm.userName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\",\"placeholder\":\"请输入密码\",\"prefix-icon\":\"el-icon-lock\"},model:{value:(_vm.accountForm.password),callback:function ($$v) {_vm.$set(_vm.accountForm, \"password\", $$v)},expression:\"accountForm.password\"}})],1),_c('el-form-item',[_c('el-button',{staticClass:\"login-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitAccountForm}},[_vm._v(\"登录\")])],1)],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"短信登录\",\"name\":\"sms\"}},[_c('el-form',{ref:\"smsFormWeb\",attrs:{\"model\":_vm.smsForm,\"status-icon\":\"\",\"rules\":_vm.smsRules},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.submitSmsForm.apply(null, arguments)}}},[_c('el-form-item',{attrs:{\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入手机号\",\"prefix-icon\":\"el-icon-phone\"},model:{value:(_vm.smsForm.userName),callback:function ($$v) {_vm.$set(_vm.smsForm, \"userName\", $$v)},expression:\"smsForm.userName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('div',{staticClass:\"verification-code-row\"},[_c('el-input',{staticClass:\"code-input\",attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入验证码\",\"prefix-icon\":\"el-icon-message\"},model:{value:(_vm.smsForm.password),callback:function ($$v) {_vm.$set(_vm.smsForm, \"password\", $$v)},expression:\"smsForm.password\"}}),_c('el-button',{staticClass:\"send-code-btn\",attrs:{\"type\":\"primary\",\"disabled\":_vm.countdown > 0},on:{\"click\":_vm.sendCode}},[_vm._v(\" \"+_vm._s(_vm.countdown > 0 ? `${_vm.countdown}s后重发` : '发送验证码')+\" \")])],1)]),_c('el-form-item',[_c('el-button',{staticClass:\"login-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.phoneLogin}},[_vm._v(\"登录\")])],1)],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"扫码登录\",\"name\":\"qrcode\"}},[(!_vm.bindPhone)?_c('div',{staticClass:\"qrcode-container\"},[_c('div',{staticClass:\"qrcode-box\"},[(_vm.qrcodeStatus === 'loading')?_c('div',{staticClass:\"qrcode-loading\"},[_c('i',{staticClass:\"el-icon-loading\"}),_c('p',[_vm._v(\"二维码生成中...\")])]):(_vm.qrcodeStatus === 'active')?_c('div',{staticClass:\"qrcode-active\"},[_c('div',{staticClass:\"qrcode-image\"},[(!_vm.wxTicket)?_c('div',{staticClass:\"mock-qrcode\"},[_c('i',{staticClass:\"el-icon-mobile-phone\"}),_c('p',[_vm._v(\"二维码加载中...\")])]):_c('div',{staticClass:\"qrcode-real\"},[_c('img',{attrs:{\"src\":`https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=${_vm.wxTicket}`,\"alt\":\"微信登录二维码\"}})])]),_c('p',{staticClass:\"qrcode-tip\"},[_vm._v(\"请使用手机扫描二维码登录\")])]):(_vm.qrcodeStatus === 'expired')?_c('div',{staticClass:\"qrcode-expired\"},[_c('i',{staticClass:\"el-icon-refresh\"}),_c('p',[_vm._v(\"二维码已过期\")]),_c('p',{staticClass:\"auto-refresh-tip\"},[_vm._v(\"正在自动刷新...\")]),_c('el-button',{staticClass:\"manual-refresh-btn\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.refreshQrcode}},[_c('i',{staticClass:\"el-icon-refresh-right\"}),_vm._v(\" 立即刷新 \")])],1):(_vm.qrcodeStatus === 'scanned')?_c('div',{staticClass:\"qrcode-scanned\"},[_c('i',{staticClass:\"el-icon-success\"}),_c('p',[_vm._v(\"扫描成功，请在手机上确认登录\")])]):_vm._e()])]):_c('div',{staticClass:\"bind-phone-container\"},[_c('div',{staticClass:\"bind-phone-header\"},[_c('p',[_vm._v(\"请绑定手机号以完成登录\")])]),_c('el-form',{ref:\"bindPhoneFormWeb\",attrs:{\"model\":_vm.bindPhoneForm,\"status-icon\":\"\",\"rules\":_vm.bindPhoneRules},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.submitBindPhone.apply(null, arguments)}}},[_c('el-form-item',{attrs:{\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入手机号\",\"prefix-icon\":\"el-icon-phone\"},model:{value:(_vm.bindPhoneForm.phone),callback:function ($$v) {_vm.$set(_vm.bindPhoneForm, \"phone\", $$v)},expression:\"bindPhoneForm.phone\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"code\"}},[_c('div',{staticClass:\"verification-code-row\"},[_c('el-input',{staticClass:\"code-input\",attrs:{\"autocomplete\":\"off\",\"placeholder\":\"请输入验证码\",\"prefix-icon\":\"el-icon-message\"},model:{value:(_vm.bindPhoneForm.code),callback:function ($$v) {_vm.$set(_vm.bindPhoneForm, \"code\", $$v)},expression:\"bindPhoneForm.code\"}}),_c('el-button',{staticClass:\"send-code-btn\",attrs:{\"type\":\"primary\",\"disabled\":_vm.bindPhoneCountdown > 0},on:{\"click\":_vm.sendBindPhoneCode}},[_vm._v(\" \"+_vm._s(_vm.bindPhoneCountdown > 0 ? `${_vm.bindPhoneCountdown}s后重发` : '发送验证码')+\" \")])],1)]),_c('el-form-item',[_c('el-button',{staticClass:\"login-btn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitBindPhone}},[_vm._v(\"确认绑定\")])],1),_c('el-form-item',[_c('el-button',{staticClass:\"cancel-btn\",attrs:{\"type\":\"text\"},on:{\"click\":_vm.cancelBindPhone}},[_vm._v(\"取消绑定\")])],1)],1)],1)])],1),_c('div',{staticClass:\"register\"},[(_vm.window.vscodeServices)?_c('a',{attrs:{\"href\":\"#\"},on:{\"click\":function($event){$event.preventDefault();return _vm.openRegisterInBrowser.apply(null, arguments)}}},[_vm._v(\"没有账号,前往注册\")]):_c('router-link',{attrs:{\"to\":\"/register\"}},[_vm._v(\"没有账号,前往注册\")])],1)],1)]),_c('icp')],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"loading-spinner\"},[_c('i',{staticClass:\"el-icon-loading\"})])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login-brand\"},[_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"../../public/logo-128.png\")}}),_c('div',[_vm._v(\"登录傻蛋IM\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"bind-phone-header\"},[_c('p',[_vm._v(\"请绑定手机号以完成登录\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"login-view\">\n\t\t<!-- 自动登录加载状态 -->\n\t\t<div v-if=\"autoLoginLoading\" class=\"auto-login-loading\">\n\t\t\t<div class=\"loading-content\">\n\t\t\t\t<div class=\"loading-spinner\">\n\t\t\t\t\t<i class=\"el-icon-loading\"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"loading-text\">正在自动登录...</div>\n\t\t\t\t<div class=\"loading-phone\">手机号：{{ autoLoginPhone }}</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<!-- 正常登录界面 -->\n\t\t<div v-else class=\"login-content\">\n\t\t\t<div class=\"login-form\">\n\t\t\t\t<div class=\"login-brand\">\n\t\t\t\t\t<img class=\"logo\" src=\"../../public/logo-128.png\" />\n\t\t\t\t\t<div>登录傻蛋IM</div>\n\t\t\t\t</div>\n\n\t\t\t\t<!-- Tab标签页 -->\n\t\t\t\t<div class=\"custom-tabs\" v-if=\"isInVSCodeEnvironment()\">\n\t\t\t\t\t<!-- 自定义Tab头部 -->\n\t\t\t\t\t<div class=\"custom-tabs-header\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"custom-tab-item\" \n\t\t\t\t\t\t\t:class=\"{ active: activeTab === 'account' }\"\n\t\t\t\t\t\t\t@click=\"forceSetActiveTab('account')\">\n\t\t\t\t\t\t\t账号登录\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"custom-tab-item\" \n\t\t\t\t\t\t\t:class=\"{ active: activeTab === 'sms' }\"\n\t\t\t\t\t\t\t@click=\"forceSetActiveTab('sms')\">\n\t\t\t\t\t\t\t短信登录\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"custom-tab-item\" \n\t\t\t\t\t\t\t:class=\"{ active: activeTab === 'qrcode' }\"\n\t\t\t\t\t\t\t@click=\"forceSetActiveTab('qrcode')\">\n\t\t\t\t\t\t\t扫码登录\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Tab内容 -->\n\t\t\t\t\t<div class=\"custom-tabs-content\">\n\t\t\t\t\t\t<!-- 账号登录 -->\n\t\t\t\t\t\t<div v-show=\"activeTab === 'account'\" class=\"custom-tab-pane\">\n\t\t\t\t\t\t\t<el-form :model=\"accountForm\" status-icon :rules=\"accountRules\" ref=\"accountForm\"\n\t\t\t\t\t\t\t\t@keyup.enter.native=\"submitAccountForm\">\n\t\t\t\t\t\t\t\t<el-form-item prop=\"userName\">\n\t\t\t\t\t\t\t\t\t<el-input v-model=\"accountForm.userName\" autocomplete=\"off\" placeholder=\"请输入用户名\"\n\t\t\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-user\">\n\t\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t\t<el-form-item prop=\"password\">\n\t\t\t\t\t\t\t\t\t<el-input type=\"password\" v-model=\"accountForm.password\" autocomplete=\"off\"\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"请输入密码\" prefix-icon=\"el-icon-lock\">\n\t\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitAccountForm\" class=\"login-btn\">登录</el-button>\n\t\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t</el-form>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- 短信登录 -->\n\t\t\t\t\t<div v-show=\"activeTab === 'sms'\" class=\"custom-tab-pane\">\n\t\t\t\t\t\t<el-form :model=\"smsForm\" status-icon :rules=\"smsRules\" ref=\"smsForm\"\n\t\t\t\t\t\t\t@keyup.enter.native=\"submitSmsForm\">\n\t\t\t\t\t\t\t<el-form-item prop=\"userName\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"smsForm.userName\" autocomplete=\"off\" placeholder=\"请输入手机号\"\n\t\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-phone\">\n\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item prop=\"password\">\n\t\t\t\t\t\t\t\t<div class=\"verification-code-row\">\n\t\t\t\t\t\t\t\t\t<el-input v-model=\"smsForm.password\" autocomplete=\"off\" placeholder=\"请输入验证码\"\n\t\t\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-message\" class=\"code-input\">\n\t\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"sendCode\" :disabled=\"countdown > 0\"\n\t\t\t\t\t\t\t\t\t\tclass=\"send-code-btn\">\n\t\t\t\t\t\t\t\t\t\t{{ countdown > 0 ? `${countdown}s后重发` : '发送验证码' }}\n\t\t\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"phoneLogin\" class=\"login-btn\">登录</el-button>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t</el-form>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- 扫码登录 -->\n\t\t\t\t\t<div v-show=\"activeTab === 'qrcode'\" class=\"custom-tab-pane\">\n\t\t\t\t\t\t<!-- 二维码登录界面 -->\n\t\t\t\t\t\t<div v-if=\"!bindPhone\" class=\"qrcode-container\">\n\t\t\t\t\t\t\t<div class=\"qrcode-box\">\n\t\t\t\t\t\t\t\t<div v-if=\"qrcodeStatus === 'loading'\" class=\"qrcode-loading\">\n\t\t\t\t\t\t\t\t\t<i class=\"el-icon-loading\"></i>\n\t\t\t\t\t\t\t\t\t<p>二维码生成中...</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-else-if=\"qrcodeStatus === 'active'\" class=\"qrcode-active\">\n\t\t\t\t\t\t\t\t\t<div class=\"qrcode-image\">\n\t\t\t\t\t\t\t\t\t\t<!-- 这里可以放置实际的二维码图片 -->\n\t\t\t\t\t\t\t\t\t\t<div class=\"mock-qrcode\" v-if=\"!wxTicket\">\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-mobile-phone\"></i>\n\t\t\t\t\t\t\t\t\t\t\t<p>二维码加载中...</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"qrcode-real\" v-else>\n\t\t\t\t\t\t\t\t\t\t\t<img :src=\"`https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=${wxTicket}`\"\n\t\t\t\t\t\t\t\t\t\t\t\talt=\"微信登录二维码\" />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<p class=\"qrcode-tip\">请使用手机扫描二维码登录</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-else-if=\"qrcodeStatus === 'expired'\" class=\"qrcode-expired\">\n\t\t\t\t\t\t\t\t\t<i class=\"el-icon-refresh\"></i>\n\t\t\t\t\t\t\t\t\t<p>二维码已过期</p>\n\t\t\t\t\t\t\t\t\t<p class=\"auto-refresh-tip\">正在自动刷新...</p>\n\t\t\t\t\t\t\t\t\t<el-button type=\"text\" @click=\"refreshQrcode\" class=\"manual-refresh-btn\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-refresh-right\"></i>\n\t\t\t\t\t\t\t\t\t\t立即刷新\n\t\t\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div v-else-if=\"qrcodeStatus === 'scanned'\" class=\"qrcode-scanned\">\n\t\t\t\t\t\t\t\t\t<i class=\"el-icon-success\"></i>\n\t\t\t\t\t\t\t\t\t<p>扫描成功，请在手机上确认登录</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<!-- 手机号绑定界面 -->\n\t\t\t\t\t\t<div v-else class=\"bind-phone-container\">\n\t\t\t\t\t\t\t<div class=\"bind-phone-header\">\n\t\t\t\t\t\t\t\t<p>请绑定手机号以完成登录</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<el-form :model=\"bindPhoneForm\" status-icon :rules=\"bindPhoneRules\" ref=\"bindPhoneForm\"\n\t\t\t\t\t\t\t\t@keyup.enter.native=\"submitBindPhone\">\n\t\t\t\t\t\t\t\t<el-form-item prop=\"phone\">\n\t\t\t\t\t\t\t\t\t<el-input v-model=\"bindPhoneForm.phone\" autocomplete=\"off\" placeholder=\"请输入手机号\"\n\t\t\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-phone\">\n\t\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t\t<el-form-item prop=\"code\">\n\t\t\t\t\t\t\t\t\t<div class=\"verification-code-row\">\n\t\t\t\t\t\t\t\t\t\t<el-input v-model=\"bindPhoneForm.code\" autocomplete=\"off\" placeholder=\"请输入验证码\"\n\t\t\t\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-message\" class=\"code-input\">\n\t\t\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"sendBindPhoneCode\"\n\t\t\t\t\t\t\t\t\t\t\t:disabled=\"bindPhoneCountdown > 0\" class=\"send-code-btn\">\n\t\t\t\t\t\t\t\t\t\t\t{{ bindPhoneCountdown > 0 ? `${bindPhoneCountdown}s后重发` : '发送验证码' }}\n\t\t\t\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitBindPhone\"\n\t\t\t\t\t\t\t\t\t\tclass=\"login-btn\">确认绑定</el-button>\n\t\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t\t\t\t<el-button type=\"text\" @click=\"cancelBindPhone\" class=\"cancel-btn\">取消绑定</el-button>\n\t\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t</el-form>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<!-- Web端使用原生el-tabs -->\n\t\t\t<el-tabs v-else v-model=\"activeTab\" class=\"login-tabs\">\n\t\t\t\t<!-- 账号登录 -->\n\t\t\t\t<el-tab-pane label=\"账号登录\" name=\"account\">\n\t\t\t\t\t<el-form :model=\"accountForm\" status-icon :rules=\"accountRules\" ref=\"accountFormWeb\"\n\t\t\t\t\t\t@keyup.enter.native=\"submitAccountForm\">\n\t\t\t\t\t\t<el-form-item prop=\"userName\">\n\t\t\t\t\t\t\t<el-input v-model=\"accountForm.userName\" autocomplete=\"off\" placeholder=\"请输入用户名\"\n\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-user\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item prop=\"password\">\n\t\t\t\t\t\t\t<el-input type=\"password\" v-model=\"accountForm.password\" autocomplete=\"off\"\n\t\t\t\t\t\t\t\tplaceholder=\"请输入密码\" prefix-icon=\"el-icon-lock\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitAccountForm\" class=\"login-btn\">登录</el-button>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-form>\n\t\t\t\t</el-tab-pane>\n\n\t\t\t\t<!-- 短信登录 -->\n\t\t\t\t<el-tab-pane label=\"短信登录\" name=\"sms\">\n\t\t\t\t\t<el-form :model=\"smsForm\" status-icon :rules=\"smsRules\" ref=\"smsFormWeb\"\n\t\t\t\t\t\t@keyup.enter.native=\"submitSmsForm\">\n\t\t\t\t\t\t<el-form-item prop=\"userName\">\n\t\t\t\t\t\t\t<el-input v-model=\"smsForm.userName\" autocomplete=\"off\" placeholder=\"请输入手机号\"\n\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-phone\">\n\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item prop=\"password\">\n\t\t\t\t\t\t\t<div class=\"verification-code-row\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"smsForm.password\" autocomplete=\"off\" placeholder=\"请输入验证码\"\n\t\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-message\" class=\"code-input\">\n\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"sendCode\" :disabled=\"countdown > 0\"\n\t\t\t\t\t\t\t\t\tclass=\"send-code-btn\">\n\t\t\t\t\t\t\t\t\t{{ countdown > 0 ? `${countdown}s后重发` : '发送验证码' }}\n\t\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"phoneLogin\" class=\"login-btn\">登录</el-button>\n\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t</el-form>\n\t\t\t\t</el-tab-pane>\n\n\t\t\t\t<!-- 扫码登录 -->\n\t\t\t\t<el-tab-pane label=\"扫码登录\" name=\"qrcode\">\n\t\t\t\t\t<!-- 二维码登录界面 -->\n\t\t\t\t\t<div v-if=\"!bindPhone\" class=\"qrcode-container\">\n\t\t\t\t\t\t<div class=\"qrcode-box\">\n\t\t\t\t\t\t\t<div v-if=\"qrcodeStatus === 'loading'\" class=\"qrcode-loading\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-loading\"></i>\n\t\t\t\t\t\t\t\t<p>二维码生成中...</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else-if=\"qrcodeStatus === 'active'\" class=\"qrcode-active\">\n\t\t\t\t\t\t\t\t<div class=\"qrcode-image\">\n\t\t\t\t\t\t\t\t\t<!-- 这里可以放置实际的二维码图片 -->\n\t\t\t\t\t\t\t\t\t<div class=\"mock-qrcode\" v-if=\"!wxTicket\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-mobile-phone\"></i>\n\t\t\t\t\t\t\t\t\t\t<p>二维码加载中...</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"qrcode-real\" v-else>\n\t\t\t\t\t\t\t\t\t\t<img :src=\"`https://mp.weixin.qq.com/cgi-bin/showqrcode?ticket=${wxTicket}`\"\n\t\t\t\t\t\t\t\t\t\t\talt=\"微信登录二维码\" />\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<p class=\"qrcode-tip\">请使用手机扫描二维码登录</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else-if=\"qrcodeStatus === 'expired'\" class=\"qrcode-expired\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-refresh\"></i>\n\t\t\t\t\t\t\t\t<p>二维码已过期</p>\n\t\t\t\t\t\t\t\t<p class=\"auto-refresh-tip\">正在自动刷新...</p>\n\t\t\t\t\t\t\t\t<el-button type=\"text\" @click=\"refreshQrcode\" class=\"manual-refresh-btn\">\n\t\t\t\t\t\t\t\t\t<i class=\"el-icon-refresh-right\"></i>\n\t\t\t\t\t\t\t\t\t立即刷新\n\t\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else-if=\"qrcodeStatus === 'scanned'\" class=\"qrcode-scanned\">\n\t\t\t\t\t\t\t\t<i class=\"el-icon-success\"></i>\n\t\t\t\t\t\t\t\t<p>扫描成功，请在手机上确认登录</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<!-- 手机号绑定界面 -->\n\t\t\t\t\t<div v-else class=\"bind-phone-container\">\n\t\t\t\t\t\t<div class=\"bind-phone-header\">\n\t\t\t\t\t\t\t<p>请绑定手机号以完成登录</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<el-form :model=\"bindPhoneForm\" status-icon :rules=\"bindPhoneRules\" ref=\"bindPhoneFormWeb\"\n\t\t\t\t\t\t\t@keyup.enter.native=\"submitBindPhone\">\n\t\t\t\t\t\t\t<el-form-item prop=\"phone\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"bindPhoneForm.phone\" autocomplete=\"off\" placeholder=\"请输入手机号\"\n\t\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-phone\">\n\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item prop=\"code\">\n\t\t\t\t\t\t\t\t<div class=\"verification-code-row\">\n\t\t\t\t\t\t\t\t\t<el-input v-model=\"bindPhoneForm.code\" autocomplete=\"off\" placeholder=\"请输入验证码\"\n\t\t\t\t\t\t\t\t\t\tprefix-icon=\"el-icon-message\" class=\"code-input\">\n\t\t\t\t\t\t\t\t\t</el-input>\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"sendBindPhoneCode\"\n\t\t\t\t\t\t\t\t\t\t:disabled=\"bindPhoneCountdown > 0\" class=\"send-code-btn\">\n\t\t\t\t\t\t\t\t\t\t{{ bindPhoneCountdown > 0 ? `${bindPhoneCountdown}s后重发` : '发送验证码' }}\n\t\t\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t\t\t<el-button type=\"primary\" @click=\"submitBindPhone\"\n\t\t\t\t\t\t\t\t\tclass=\"login-btn\">确认绑定</el-button>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item>\n\t\t\t\t\t\t\t\t<el-button type=\"text\" @click=\"cancelBindPhone\" class=\"cancel-btn\">取消绑定</el-button>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t</el-form>\n\t\t\t\t\t</div>\n\t\t\t\t</el-tab-pane>\n\t\t\t</el-tabs>\n\n\t\t\t\t<div class=\"register\">\n\t\t\t\t\t<a v-if=\"window.vscodeServices\" href=\"#\" @click.prevent=\"openRegisterInBrowser\">没有账号,前往注册</a>\n\t\t\t\t\t<router-link v-else to=\"/register\">没有账号,前往注册</router-link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<icp></icp>\n\t</div>\n</template>\n\n<script>\nimport Icp from '../components/common/Icp.vue'\nimport axios from 'axios'\nimport { v4 as uuidv4 } from 'uuid'\n\nexport default {\n\tname: \"login\",\n\tcomponents: {\n\t\tIcp\n\t},\n\tprops: {\n\t\tisVSCodeEnvironment: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\tvscodeServices: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t}\n\t},\n\tdata() {\n\t\tvar checkUsername = (rule, value, callback) => {\n\t\t\tif (!value) {\n\t\t\t\treturn callback(new Error('请输入用户名'));\n\t\t\t}\n\t\t\tcallback();\n\t\t};\n\t\tvar checkPassword = (rule, value, callback) => {\n\t\t\tif (value === '') {\n\t\t\t\tcallback(new Error('请输入密码'));\n\t\t\t}\n\t\t\tcallback();\n\t\t};\n\t\tvar checkPhone = (rule, value, callback) => {\n\t\t\tif (!value) {\n\t\t\t\treturn callback(new Error('请输入手机号'));\n\t\t\t}\n\t\t\tconst phoneRegex = /^1[3-9]\\d{9}$/;\n\t\t\tif (!phoneRegex.test(value)) {\n\t\t\t\treturn callback(new Error('请输入正确的手机号格式'));\n\t\t\t}\n\t\t\tcallback();\n\t\t};\n\t\tvar checkSmsCode = (rule, value, callback) => {\n\t\t\tif (!value) {\n\t\t\t\treturn callback(new Error('请输入验证码'));\n\t\t\t}\n\t\t\tcallback();\n\t\t};\n\n\t\treturn {\n\t\t\t// 自动登录相关状态\n\t\t\tautoLoginLoading: false,\n\t\t\tautoLoginPhone: '',\n\t\t\twindow: window, // 添加window对象到data中，以便在模板中使用\n\n\t\t\tactiveTab: 'account', // 默认显示账号登录\n\t\t\ttabKey: 0, // 用于强制刷新tabs的key\n\t\t\tcountdown: 0, // 倒计时秒数\n\t\t\ttimer: null, // 定时器\n\t\t\tqrcodeStatus: 'active', // 二维码状态: loading, active, expired, scanned\n\t\t\tqrcodeTimer: null, // 二维码定时器\n\t\t\twxTicketTimer: null, // 微信ticket定时器\n\t\t\tcheckLoginTimer: null, // CheckLogin定时器\n\t\t\tUUID: uuidv4(),\n\t\t\twxTicket: '',\n\t\t\tbindPhone: false,\n\t\t\tbindPhoneCountdown: 0, // 绑定手机号验证码倒计时\n\t\t\tbindPhoneTimer: null, // 绑定手机号验证码定时器\n\t\t\tcurrentOpenid: '', // 当前扫码用户的openid\n\t\t\tuserInfo: null,\n\t\t\t// 账号登录表单\n\t\t\taccountForm: {\n\t\t\t\t// 重要：区分terminal和terminalNo\n\t\t\t\t// terminal: 登录终端类型（动态），根据实际环境设置\n\t\t\t\t// terminalNo: 账号隔离标识（静态），必须为0（默认账号类型）\n\t\t\t\tterminal: 0, // 默认值，在mounted中会根据环境重新设置\n\t\t\t\tterminalNo: 0, // 必须为0，这是默认账号类型\n\t\t\t\tuserName: '',\n\t\t\t\tpassword: ''\n\t\t\t},\n\t\t\taccountRules: {\n\t\t\t\tuserName: [{\n\t\t\t\t\tvalidator: checkUsername,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tpassword: [{\n\t\t\t\t\tvalidator: checkPassword,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}]\n\t\t\t},\n\n\t\t\t// 短信登录表单\n\t\t\tsmsForm: {\n\t\t\t\t// 重要：区分terminal和terminalNo\n\t\t\t\t// terminal: 登录终端类型（动态），根据实际环境设置\n\t\t\t\t// terminalNo: 账号隔离标识（静态），必须为0（默认账号类型）\n\t\t\t\tterminal: 0, // 默认值，在mounted中会根据环境重新设置\n\t\t\t\tterminalNo: 0, // 必须为0，这是默认账号类型\n\t\t\t\tuserName: '',\n\t\t\t\tpassword: ''\n\t\t\t},\n\t\t\tsmsRules: {\n\t\t\t\tuserName: [{\n\t\t\t\t\tvalidator: checkPhone,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tpassword: [{\n\t\t\t\t\tvalidator: checkSmsCode,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}]\n\t\t\t},\n\n\t\t\t// 绑定手机号表单\n\t\t\tbindPhoneForm: {\n\t\t\t\tphone: '',\n\t\t\t\tcode: ''\n\t\t\t},\n\t\t\tbindPhoneRules: {\n\t\t\t\tphone: [{\n\t\t\t\t\tvalidator: checkPhone,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tcode: [{\n\t\t\t\t\tvalidator: checkSmsCode,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}]\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\t// 根据环境动态获取终端类型\n\t\tcurrentTerminalType() {\n\t\t\t// 使用与ChatBox.vue相同的终端检测逻辑\n\t\t\treturn this.getCurrentTerminal();\n\t\t}\n\t},\n\tmethods: {\n\t\t// 强制设置activeTab - VSCode环境专用\n\t\tforceSetActiveTab(tabName) {\n\t\t\tconsole.log('[Login] Force setting tab to:', tabName, 'from:', this.activeTab);\n\t\t\t\n\t\t\t// 直接设置activeTab\n\t\t\tthis.activeTab = tabName;\n\t\t\t\n\t\t\t// 强制刷新DOM\n\t\t\tthis.$forceUpdate();\n\t\t\t\n\t\t\t// 使用nextTick确保DOM更新\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tconsole.log('[Login] Tab switched to:', this.activeTab);\n\t\t\t\t\n\t\t\t\t// 触发watch中的逻辑\n\t\t\t\tif (tabName === 'qrcode') {\n\t\t\t\t\tif (this.qrcodeStatus === 'active') {\n\t\t\t\t\t\tthis.startQrcodeTimer();\n\t\t\t\t\t}\n\t\t\t\t\tthis.startWxTicketTimer();\n\t\t\t\t\tthis.startCheckLoginTimer();\n\t\t\t\t} else {\n\t\t\t\t\tthis.stopWxTicketTimer();\n\t\t\t\t\tthis.stopCheckLoginTimer();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 处理Tab点击事件 - 解决VSCode环境下的切换问题\n\t\thandleTabClick(tab) {\n\t\t\tconsole.log('[Login] Tab clicked:', tab.name, 'current activeTab:', this.activeTab);\n\t\t\t\n\t\t\t// 在VSCode环境下强制更新activeTab\n\t\t\tif (this.isInVSCodeEnvironment()) {\n\t\t\t\t// 使用nextTick确保DOM更新\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t// 强制更新activeTab的值\n\t\t\t\t\tthis.activeTab = tab.name;\n\t\t\t\t\t\n\t\t\t\t\t// 如果还是没有切换成功，强制刷新组件\n\t\t\t\t\tif (this.activeTab !== tab.name) {\n\t\t\t\t\t\tconsole.log('[Login] Force switching to tab:', tab.name);\n\t\t\t\t\t\tthis.activeTab = tab.name;\n\t\t\t\t\t\tthis.tabKey++; // 更新key强制重新渲染\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 检测是否在VSCode环境中\n\t\tisInVSCodeEnvironment() {\n\t\t\treturn (\n\t\t\t\tthis.isVSCodeEnvironment || // props传入\n\t\t\t\twindow.BoxIMComponents || // BoxIM组件存在\n\t\t\t\twindow.vscodeServices || // vscode服务存在\n\t\t\t\twindow.parent !== window || // 在iframe中\n\t\t\t\twindow.acquireVsCodeApi || // VSCode WebView API\n\t\t\t\tnavigator.userAgent.includes('VSCode') || // User Agent\n\t\t\t\twindow.location.protocol === 'vscode-webview:' // VSCode WebView协议\n\t\t\t);\n\t\t},\n\t\t\n\t\t// 获取当前终端类型\n\t\tgetCurrentTerminal() {\n\t\t\t// 根据环境判断当前终端类型\n\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t// 检测VSCode环境 - 多种方式检测\n\t\t\t\tif (window.parent !== window || // 在iframe中\n\t\t\t\t\twindow.acquireVsCodeApi || // VSCode WebView API\n\t\t\t\t\twindow.SharedServicesAccessor || // 我们的VSCode服务\n\t\t\t\t\tnavigator.userAgent.includes('VSCode') || // User Agent\n\t\t\t\t\twindow.location.protocol === 'vscode-webview:') { // VSCode WebView协议\n\t\t\t\t\treturn this.$enums.TERMINAL_TYPE.VSCODE; // VSCode\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 检测Electron环境\n\t\t\t\tif (window.require || \n\t\t\t\t\twindow.process?.type || \n\t\t\t\t\twindow.isElectron ||\n\t\t\t\t\tnavigator.userAgent.includes('Electron')) {\n\t\t\t\t\treturn this.$enums.TERMINAL_TYPE.PC; // PC客户端\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 检测移动端App环境\n\t\t\t\tif (window.cordova || \n\t\t\t\t\twindow.PhoneGap || \n\t\t\t\t\twindow.phonegap ||\n\t\t\t\t\tnavigator.userAgent.includes('wv') || // WebView\n\t\t\t\t\tnavigator.userAgent.includes('Mobile')) {\n\t\t\t\t\treturn this.$enums.TERMINAL_TYPE.APP; // App\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn this.$enums.TERMINAL_TYPE.WEB; // Web\n\t\t\t}\n\t\t\treturn this.$enums.TERMINAL_TYPE.WEB; // 默认Web\n\t\t},\n\n\t\t// 获取URL参数 - 支持哈希路由参数\n\t\tgetUrlParam(name) {\n\t\t\tconsole.log('当前完整URL:', window.location.href);\n\t\t\tconsole.log('当前search:', window.location.search);\n\t\t\tconsole.log('当前hash:', window.location.hash);\n\n\t\t\t// 首先尝试从普通查询参数获取\n\t\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\t\tlet value = urlParams.get(name);\n\t\t\tconsole.log(`从普通查询参数获取 ${name}:`, value);\n\n\t\t\t// 如果普通查询参数中没有找到，则从hash中查找\n\t\t\tif (!value && window.location.hash) {\n\t\t\t\tconst hash = window.location.hash;\n\t\t\t\tconsole.log('处理hash:', hash);\n\n\t\t\t\t// 查找hash中的查询参数部分\n\t\t\t\tconst hashQueryIndex = hash.indexOf('?');\n\t\t\t\tif (hashQueryIndex !== -1) {\n\t\t\t\t\tconst hashQuery = hash.substring(hashQueryIndex + 1);\n\t\t\t\t\tconsole.log('hash查询参数字符串:', hashQuery);\n\t\t\t\t\tconst hashParams = new URLSearchParams(hashQuery);\n\t\t\t\t\tvalue = hashParams.get(name);\n\t\t\t\t\tconsole.log(`从hash查询参数获取 ${name}:`, value);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('hash中没有找到查询参数');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconsole.log(`最终获取参数 ${name}:`, value);\n\t\t\treturn value;\n\t\t},\n\n\t\t// 自动登录处理\n\t\tasync handleAutoLogin() {\n\t\t\tconst phone = this.getUrlParam('phone');\n\n\t\t\tif (phone) {\n\t\t\t\t// 验证手机号格式\n\t\t\t\tconst phoneRegex = /^1[3-9]\\d{9}$/;\n\t\t\t\tif (!phoneRegex.test(phone)) {\n\t\t\t\t\tthis.$message.error('URL中的手机号格式不正确');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.autoLoginPhone = phone;\n\t\t\t\tthis.autoLoginLoading = true;\n\n\t\t\t\ttry {\n\t\t\t\t\tconsole.log('开始自动登录，手机号:', phone);\n\n\t\t\t\t\t// 调用后端接口获取用户信息\n\t\t\t\t\tconst userInfo = await this.$http({\n\t\t\t\t\t\turl: \"/phoneLoginInfo\",\n\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\tdata: { \n\t\t\t\t\t\t\tphone: phone, \n\t\t\t\t\t\t\t// 注意：terminalNo必须为0（默认账号类型）\n\t\t\t\t\t\t\tterminalNo: 0 \n\t\t\t\t\t\t},\n\t\t\t\t\t\ttimeout: 10000\n\t\t\t\t\t});\n\n\t\t\t\t\tconsole.log(\"自动登录用户信息查询成功:\", userInfo);\n\n\t\t\t\t\tif (userInfo && userInfo.userName && userInfo.password) {\n\t\t\t\t\t\t// 构造登录表单数据\n\t\t\t\t\t\tconst loginForm = {\n\t\t\t\t\t\t\t// 重要：区分terminal和terminalNo\n\t\t\t\t\t\t\t// terminal: 登录终端类型（4=插件端）\n\t\t\t\t\t\t\t// terminalNo: 账号隔离标识，必须为0（默认账号类型）\n\t\t\t\t\t\t\tterminal: this.$enums.TERMINAL_TYPE.PLUGIN,  // 插件端\n\t\t\t\t\t\t\tterminalNo: 0, // 必须为0，默认账号类型\n\t\t\t\t\t\t\tuserName: userInfo.userName,\n\t\t\t\t\t\t\tpassword: userInfo.password,\n\t\t\t\t\t\t\tphone: userInfo.phone\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// 执行登录\n\t\t\t\t\t\tawait this.submitAutoLogin(loginForm);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error('用户信息不完整或用户不存在');\n\t\t\t\t\t}\n\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(\"自动登录失败:\", error);\n\t\t\t\t\tthis.autoLoginLoading = false;\n\n\t\t\t\t\t// 显示错误信息\n\t\t\t\t\tconst errorMessage = error.message || '自动登录失败，请手动登录';\n\t\t\t\t\tthis.$message.error(errorMessage);\n\n\t\t\t\t\t// 3秒后隐藏加载状态，显示正常登录界面\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.autoLoginLoading = false;\n\t\t\t\t\t}, 3000);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// 自动登录提交\n\t\tasync submitAutoLogin(formData) {\n\t\t\ttry {\n\t\t\t\tconst data = await this.$http({\n\t\t\t\t\turl: \"/loginByPhone\",\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: formData\n\t\t\t\t});\n\n\t\t\t\tconsole.log(\"自动登录成功:\", data);\n\n\t\t\t\t// 保存用户信息到cookie\n\t\t\t\tthis.setCookie('username', formData.userName);\n\t\t\t\t// 保存token\n\t\t\t\tsessionStorage.setItem(\"accessToken\", data.accessToken);\n\t\t\t\tsessionStorage.setItem(\"refreshToken\", data.refreshToken);\n\n\t\t\t\tthis.$message.success(\"自动登录成功\");\n\n\t\t\t\t// 检查是否在VSCode环境中\n\t\t\t\tconsole.log('[AutoLogin] Checking VSCode environment:', {\n\t\t\t\t\tisVSCodeEnvironment: this.isVSCodeEnvironment,\n\t\t\t\t\thasVscodeServices: !!this.vscodeServices,\n\t\t\t\t\tvscodeServicesType: typeof this.vscodeServices\n\t\t\t\t});\n\n\t\t\t\tif (this.isVSCodeEnvironment && this.vscodeServices) {\n\t\t\t\t\t// 通知VSCode登录成功\n\t\t\t\t\tconst userInfo = {\n\t\t\t\t\t\tuserId: data.userId || data.id,\n\t\t\t\t\t\tusername: formData.userName,\n\t\t\t\t\t\tavatar: data.avatar,\n\t\t\t\t\t\temail: data.email,\n\t\t\t\t\t\tstatus: 'online',\n\t\t\t\t\t\tlastLoginTime: Date.now()\n\t\t\t\t\t};\n\t\t\t\t\tconsole.log('[AutoLogin] Notifying VSCode of login success:', userInfo);\n\n\t\t\t\t\t// 🔥 触发success事件给UniversalIM组件\n\t\t\t\t\tthis.$emit('success', userInfo);\n\n\t\t\t\t\t// 尝试多种方式调用登录\n\t\t\t\t\tlet loginSuccess = false;\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// 方式1：通过$vscode.get获取IUserStateService\n\t\t\t\t\t\tconst userStateService = this.$vscode?.get?.('IUserStateService');\n\t\t\t\t\t\tif (userStateService?.login) {\n\t\t\t\t\t\t\tconsole.log(\"[坑爹位置]:\", userInfo);\n\t\t\t\t\t\t\tawait userStateService.login(userInfo, data.accessToken);\n\t\t\t\t\t\t\tconsole.log('[AutoLogin] 方式1：UserStateService.login调用完成，应该触发面板切换');\n\t\t\t\t\t\t\tloginSuccess = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.warn('[AutoLogin] 方式1失败:', error);\n\t\t\t\t\t}\n\n\t\t\t\t\t// 方式2：直接调用vscodeServices.login\n\t\t\t\t\tif (!loginSuccess && this.vscodeServices?.login) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait this.vscodeServices.login(userInfo, data.accessToken);\n\t\t\t\t\t\t\tconsole.log('[AutoLogin] 方式2：vscodeServices.login调用完成');\n\t\t\t\t\t\t\tloginSuccess = true;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.warn('[AutoLogin] 方式2失败:', error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// 方式3：通过window.vscodeServices调用\n\t\t\t\t\tif (!loginSuccess && window.vscodeServices?.login) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait window.vscodeServices.login(userInfo, data.accessToken);\n\t\t\t\t\t\t\tconsole.log('[AutoLogin] 方式3：window.vscodeServices.login调用完成');\n\t\t\t\t\t\t\tloginSuccess = true;\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.warn('[AutoLogin] 方式3失败:', error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (loginSuccess) {\n\t\t\t\t\t\t// 在VSCode环境中也需要更新store中的用户信息\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\turl: '/user/self',\n\t\t\t\t\t\t\tmethod: 'GET'\n\t\t\t\t\t\t}).then((fullUserInfo) => {\n\t\t\t\t\t\t\tfullUserInfo.userId = fullUserInfo.id + \"\";\n\t\t\t\t\t\t\tfullUserInfo.username = fullUserInfo.nickName;\n\t\t\t\t\t\t\tfullUserInfo.accessToken = data.accessToken;\n\t\t\t\t\t\t\tfullUserInfo.apiKey = data.tokenKey;\n\t\t\t\t\t\t\tfullUserInfo.terminal = 2;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 保存用户信息到 store - 修复切换用户时 ChatBox 中 mine.id 不更新的问题\n\t\t\t\t\t\t\tthis.$store.commit('setUserInfo', fullUserInfo);\n\t\t\t\t\t\t\tthis.$store.dispatch('setIsLoggedIn', true);\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.vscodeServices.showInfo('自动登录成功！');\n\t\t\t\t\t\tconsole.log('[AutoLogin] VSCode notification sent successfully');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('[AutoLogin] 所有登录方式都失败');\n\t\t\t\t\t\tthis.vscodeServices.showError('登录通知失败');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('[AutoLogin] Not in VSCode environment or services not available, using router');\n\t\t\t\t\t// Web环境使用Vue Router\n\t\t\t\t\t// 根据URL是否包含phone参数决定跳转页面\n\t\t\t\t\tconst phoneParam = this.getUrlParam('phone');\n\t\t\t\t\tif (phoneParam) {\n\t\t\t\t\t\tconsole.log('[AutoLogin] URL contains phone parameter, redirecting to /plugin');\n\t\t\t\t\t\tthis.$router.push(\"/plugin\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('[AutoLogin] URL does not contain phone parameter, redirecting to /home/chat');\n\t\t\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"自动登录提交失败:\", error);\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\n\t\t// 验证手机号格式\n\t\tvalidatePhoneNumber(phone) {\n\t\t\tconst phoneRegex = /^1[3-9]\\d{9}$/;\n\t\t\treturn phoneRegex.test(phone);\n\t\t},\n\n\t\t// 发送验证码\n\t\tsendCode() {\n\t\t\t// 验证手机号是否输入\n\t\t\tif (!this.smsForm.userName) {\n\t\t\t\tthis.$message.error('请先输入手机号');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 验证手机号格式\n\t\t\tconst phoneRegex = /^1[3-9]\\d{9}$/;\n\t\t\tif (!phoneRegex.test(this.smsForm.userName)) {\n\t\t\t\tthis.$message.error('请输入正确的手机号格式');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 调用后端发送验证码API\n\t\t\tconsole.log('发送验证码到手机号:', this.smsForm.userName);\n\n\t\t\t// 使用原生axios调用外部接口，绕过项目的响应拦截器\n\t\t\taxios({\n\t\t\t\turl: \"https://shadan.web.service.thinkgs.cn/jeecg-boot/sys/sendsms\",\n\t\t\t\tmethod: 'post',\n\t\t\t\tdata: { mobile: this.smsForm.userName },\n\t\t\t\ttimeout: 10000\n\t\t\t}).then(response => {\n\t\t\t\tconsole.log('验证码发送响应:', response.data);\n\n\t\t\t\t// 适配外部接口的返回格式：success字段表示成功\n\t\t\t\tif (response.data && response.data.success === true) {\n\t\t\t\t\tthis.$message.success('验证码已发送');\n\t\t\t\t\tlocalStorage.setItem(\"sms\", response.data.result);\n\t\t\t\t\tthis.startCountdown();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('服务器返回错误:', response.data);\n\t\t\t\t\tthis.$message.error(response.data.message || '验证码发送失败');\n\t\t\t\t}\n\t\t\t}).catch(error => {\n\t\t\t\tconsole.error('验证码发送失败:', error);\n\n\t\t\t\t// 处理不同类型的错误\n\t\t\t\tlet errorMessage = '验证码发送失败，请稍后重试';\n\t\t\t\tif (error.response && error.response.data) {\n\t\t\t\t\t// 如果是HTTP错误响应\n\t\t\t\t\tconst data = error.response.data;\n\t\t\t\t\tif (data.success === false) {\n\t\t\t\t\t\terrorMessage = data.message || errorMessage;\n\t\t\t\t\t}\n\t\t\t\t} else if (error.message) {\n\t\t\t\t\terrorMessage = error.message;\n\t\t\t\t}\n\n\t\t\t\tthis.$message.error(errorMessage);\n\t\t\t});\n\t\t},\n\t\tGetWxTicket() {\n\t\t\tconsole.log('调用GetWxTicket方法，UUID:', this.UUID);\n\t\t\taxios({\n\t\t\t\turl: `https://shadan.web.service.thinkgs.cn/jeecg-boot/sys/getWxTicket?senceId=${this.UUID}`,\n\t\t\t\tmethod: 'get',\n\t\t\t\ttimeout: 10000\n\t\t\t}).then(response => {\n\t\t\t\tconsole.log(\"获取微信ticket成功:\", response.data);\n\t\t\t\tthis.wxTicket = response.data.result;\n\t\t\t}).catch(error => {\n\t\t\t\tconsole.error('获取微信ticket失败:', error);\n\t\t\t});\n\t\t},\n\t\t// 开始倒计时\n\t\tstartCountdown() {\n\t\t\tthis.countdown = 60;\n\t\t\tthis.timer = setInterval(() => {\n\t\t\t\tthis.countdown--;\n\t\t\t\tif (this.countdown <= 0) {\n\t\t\t\t\tclearInterval(this.timer);\n\t\t\t\t\tthis.timer = null;\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t},\n\t\tCheckLogin() {\n\t\t\taxios({\n\t\t\t\turl: `https://shadan.web.service.thinkgs.cn/jeecg-boot/sys/signInBySenceId?senceId=${this.UUID}`,\n\t\t\t\tmethod: 'get',\n\t\t\t\ttimeout: 10000\n\t\t\t}).then(response => {\n\t\t\t\tconsole.log(\"获取微信扫码登录:\", response.data);\n\t\t\t\tif (response.data.success) {\n\t\t\t\t\tthis.stopCheckLoginTimer();\n\t\t\t\t\tconsole.log(\"获取微信扫码登录:\", response.data.result.userInfo.openid);\n\t\t\t\t\tthis.currentOpenid = response.data.result.userInfo.openid; // 保存openid\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: \"/findUserByOpenid\",\n\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\tdata: { \n\t\t\t\t\t\t\topenid: response.data.result.userInfo.openid, \n\t\t\t\t\t\t\t// 注意：terminalNo必须为0（默认账号类型）\n\t\t\t\t\t\t\tterminalNo: 0 \n\t\t\t\t\t\t}\n\t\t\t\t\t}).then(async (data) => {\n\t\t\t\t\t\tconsole.log(\"通过openid查询用户\", data)\n\t\t\t\t\t\tthis.userInfo = data;\n\t\t\t\t\t\tif (data != null) {\n\t\t\t\t\t\t\tif (data.phone != null && data.phone != '') {\n\t\t\t\t\t\t\t\tthis.accountForm.userName = data.userName;\n\t\t\t\t\t\t\t\tthis.accountForm.password = data.password;\n\t\t\t\t\t\t\t\tthis.accountForm.phone = data.phone;\n\t\t\t\t\t\t\t\tthis.accountForm.tokenKey = data.tokenKey;\n\t\t\t\t\t\t\t\tthis.submitLogin2(this.accountForm);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tthis.bindPhone = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tthis.bindPhone = true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t})\n\n\t\t\t\t}\n\n\t\t\t}).catch(error => {\n\t\t\t\tconsole.error('获取微信扫码登录失败:', error);\n\t\t\t});\n\t\t},\n\t\t// 账号登录提交\n\t\tsubmitAccountForm() {\n\t\t\t// 根据环境选择正确的ref\n\t\t\tconst formRef = this.isInVSCodeEnvironment() ? this.$refs.accountForm : (this.$refs.accountFormWeb || this.$refs.accountForm);\n\t\t\tif (formRef) {\n\t\t\t\tformRef.validate(async (valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tthis.submitLogin(this.accountForm);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t// 短信登录提交\n\t\tsubmitSmsForm() {\n\t\t\t// 根据环境选择正确的ref\n\t\t\tconst formRef = this.isInVSCodeEnvironment() ? this.$refs.smsForm : (this.$refs.smsFormWeb || this.$refs.smsForm);\n\t\t\tif (formRef) {\n\t\t\t\tformRef.validate(async (valid) => {\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tthis.submitLogin(this.smsForm);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\t// 统一登录处理\n\t\tsubmitLogin(formData) {\n\t\t\tthis.$http({\n\t\t\t\turl: \"/login\",\n\t\t\t\tmethod: 'post',\n\t\t\t\tdata: formData\n\t\t\t})\n\t\t\t\t.then(async (data) => {\n\t\t\t\t\t// 保存密码到cookie(不安全)\n\t\t\t\t\tthis.setCookie('username', formData.userName);\n\t\t\t\t\tthis.setCookie('password', formData.password);\n\t\t\t\t\t// 保存token\n\t\t\t\t\tsessionStorage.setItem(\"accessToken\", data.accessToken);\n\t\t\t\t\tsessionStorage.setItem(\"refreshToken\", data.refreshToken);\n\t\t\t\t\tsessionStorage.setItem(\"tokenKey\", data.tokenKey);\n\t\t\t\t\n\t\t\t\t\tif (window.BoxIMComponents) {\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\turl: '/user/self',\n\t\t\t\t\t\t\tmethod: 'GET'\n\t\t\t\t\t\t}).then((userInfo) => {\n\n\t\t\t\t\t\t\tuserInfo.userId = userInfo.id + \"\";\n\t\t\t\t\t\t\tuserInfo.username = userInfo.nickName;\n\t\t\t\t\t\t\t// 兼容web模式和vscode集成模式，在vscode环境下才调用vscode服务\n\t\t\t\t\t\t\t// added by qinke. 从vue侧向vscode同步用户信息的唯一入口点，需要补充用户的accessToken用户vue侧的sessionStorage恢复\n\t\t\t\t\t\t\t// 集成原则：最小化的改动原来系统\n\t\t\t\t\t\t\tuserInfo.tokenKey = data.tokenKey;\n\t\t\t\t\t\t\tuserInfo.accessToken = data.accessToken;\n\t\t\t\t\t\t\tuserInfo.apiKey = data.tokenKey;\n\t\t\t\t\t\t\tuserInfo.terminal = 2;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 保存用户信息到 store - 修复切换用户时 ChatBox 中 mine.id 不更新的问题\n\t\t\t\t\t\t\tthis.$store.commit('setUserInfo', userInfo);\n\t\t\t\t\t\t\tconsole.log(\"[坑爹位置]:\", userInfo);\n\t\t\t\t\t\t\twindow.vscodeServices?.get('IUserStateService').login(userInfo, data.accessToken);\n\n\t\t\t\t\t\t\tthis.$store.dispatch('setIsLoggedIn', true)\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('[Login] Not in VSCode environment or services not available, using router');\n\t\t\t\t\t\t// Web环境使用Vue Router\n\t\t\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tsubmitLogin2(formData) {\n\t\t\tthis.$http({\n\t\t\t\turl: \"/loginByPhone\",\n\t\t\t\tmethod: 'post',\n\t\t\t\tdata: formData\n\t\t\t})\n\t\t\t\t.then(async (data) => {\n\t\t\t\t\tconsole.log(\"短信登录成功:\", data);\n\t\t\t\t\t// 保存密码到cookie(不安全)\n\t\t\t\t\tthis.setCookie('username', formData.userName);\n\t\t\t\t\t// this.setCookie('password', formData.password);\n\t\t\t\t\t// 保存token\n\t\t\t\t\tsessionStorage.setItem(\"accessToken\", data.accessToken);\n\t\t\t\t\tsessionStorage.setItem(\"refreshToken\", data.refreshToken);\n\t\t\t\t\tsessionStorage.setItem(\"tokenKey\", formData.tokenKey);\n\t\t\t\t\t// 清除验证码\n\t\t\t\t\tlocalStorage.removeItem(\"sms\");\n\n\t\t\t\t\t// vscode集成处理\n\t\t\t\t\tif (window.BoxIMComponents) {\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\turl: '/user/self',\n\t\t\t\t\t\t\tmethod: 'GET'\n\t\t\t\t\t\t}).then((userInfo) => {\n\n\t\t\t\t\t\t\tuserInfo.userId = userInfo.id + \"\";\n\t\t\t\t\t\t\tuserInfo.username = userInfo.nickName;\n\t\t\t\t\t\t\tuserInfo.accessToken = data.accessToken;\n\t\t\t\t\t\t\tuserInfo.apiKey = formData.tokenKey; // 傻逼设计，在上一个接口中有token\n\t\t\t\t\t\t\tuserInfo.terminal = 2;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 保存用户信息到 store - 修复切换用户时 ChatBox 中 mine.id 不更新的问题\n\t\t\t\t\t\t\tthis.$store.commit('setUserInfo', userInfo);\n\t\t\t\t\t\t\tconsole.log(\"[坑爹位置]:\", userInfo);\n\t\t\t\t\t\t\twindow.vscodeServices?.get('IUserStateService').login(userInfo, data.accessToken);\n\n\t\t\t\t\t\t\tthis.$store.dispatch('setIsLoggedIn', true)\n\t\t\t\t\t\t})\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('[Login] Not in VSCode environment or services not available, using router');\n\t\t\t\t\t\t// Web环境使用Vue Router\n\t\t\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t},\n\t\tphoneLogin() {\n\t\t\taxios({\n\t\t\t\turl: `https://shadan.web.service.thinkgs.cn/jeecg-boot/sys/getCodeByPhone?phone=${this.smsForm.userName}`,\n\t\t\t\tmethod: 'get',\n\t\t\t\ttimeout: 10000\n\t\t\t}).then(response => {\n\t\t\t\tconsole.log(\"短信登录响应:\", response.data);\n\n\t\t\t\tif (localStorage.getItem(\"sms\") == '' || localStorage.getItem(\"sms\") == null) {\n\t\t\t\t\tthis.$message.error(\"请重新发送验证码\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (this.smsForm.password == localStorage.getItem(\"sms\")) {\n\t\t\t\t\t// 验证手机号是否输入\n\t\t\t\t\tif (!this.smsForm.userName) {\n\t\t\t\t\t\tthis.$message.error('请先输入手机号');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 验证验证码是否输入\n\t\t\t\t\tif (!this.smsForm.password) {\n\t\t\t\t\t\tthis.$message.error('请输入验证码');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 验证手机号格式\n\t\t\t\t\tconst phoneRegex = /^1[3-9]\\d{9}$/;\n\t\t\t\t\tif (!phoneRegex.test(this.smsForm.userName)) {\n\t\t\t\t\t\tthis.$message.error('请输入正确的手机号格式');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 验证验证码是否正确\n\t\t\t\t\tconst storedCode = localStorage.getItem(\"sms\");\n\t\t\t\t\tif (!storedCode || storedCode === '') {\n\t\t\t\t\t\tthis.$message.error(\"请重新发送验证码\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log(\"验证码:\", this.smsForm.password, storedCode);\n\t\t\t\t\tif (this.smsForm.password !== storedCode) {\n\t\t\t\t\t\tthis.$message.error(\"验证码不正确\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 调用后端接口获取用户信息\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: \"/phoneLoginInfo\",\n\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\tdata: { \n\t\t\t\t\t\t\tphone: this.smsForm.userName, \n\t\t\t\t\t\t\t// 重要：区分terminal和terminalNo\n\t\t\t\t\t\t\tterminal: this.currentTerminalType, // 根据实际环境设置\n\t\t\t\t\t\t\tterminalNo: 0  // 必须为0，默认账号类型\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttimeout: 10000\n\t\t\t\t\t}).then(userInfo => {\n\t\t\t\t\t\tconsole.log(\"用户信息查询成功:\", userInfo);\n\t\t\t\t\t\tthis.accountForm.userName = userInfo.userName;\n\t\t\t\t\t\tthis.accountForm.password = userInfo.password;\n\t\t\t\t\t\tthis.accountForm.phone = userInfo.phone;\n\t\t\t\t\t\tthis.accountForm.tokenKey = userInfo.tokenKey;\n\t\t\t\t\t\tthis.submitLogin2(this.accountForm);\n\n\n\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\tconsole.error(\"用户信息查询失败:\", error);\n\t\t\t\t\t\tthis.$message.error(error.message || \"用户信息查询失败\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.$message.error(\"验证码错误\");\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\n\t\t// 兼容方法：根据当前活动tab调用相应的提交方法\n\t\tsubmitForm(formName) {\n\t\t\tif (this.activeTab === 'account') {\n\t\t\t\tthis.submitAccountForm();\n\t\t\t} else if (this.activeTab === 'sms') {\n\t\t\t\tthis.submitSmsForm();\n\t\t\t}\n\t\t},\n\n\t\t// 开始二维码过期定时器\n\t\tstartQrcodeTimer() {\n\t\t\tif (this.qrcodeTimer) {\n\t\t\t\tclearTimeout(this.qrcodeTimer);\n\t\t\t}\n\t\t\t// 2分钟后过期\n\t\t\tthis.qrcodeTimer = setTimeout(() => {\n\t\t\t\tif (this.qrcodeStatus === 'active') {\n\t\t\t\t\tthis.qrcodeStatus = 'expired';\n\t\t\t\t\tconsole.log('二维码已过期，3秒后自动刷新');\n\t\t\t\t\t// 3秒后自动刷新二维码\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.refreshQrcode();\n\t\t\t\t\t}, 3000);\n\t\t\t\t}\n\t\t\t}, 120000);\n\t\t},\n\n\t\t// 刷新二维码\n\t\trefreshQrcode() {\n\t\t\tconsole.log('开始刷新二维码');\n\t\t\t// 重新生成UUID\n\t\t\tthis.UUID = uuidv4();\n\t\t\t// 重置二维码状态为加载中\n\t\t\tthis.qrcodeStatus = 'loading';\n\t\t\t// 清空旧的ticket\n\t\t\tthis.wxTicket = '';\n\n\t\t\t// 停止旧的定时器\n\t\t\tthis.stopWxTicketTimer();\n\t\t\tthis.stopCheckLoginTimer();\n\n\t\t\t// 延迟500ms后开始新的流程，给用户一个加载的感觉\n\t\t\tsetTimeout(() => {\n\t\t\t\t// 重新设置状态为active\n\t\t\t\tthis.qrcodeStatus = 'active';\n\t\t\t\t// 重新启动相关定时器\n\t\t\t\tthis.startWxTicketTimer();\n\t\t\t\tthis.startCheckLoginTimer();\n\t\t\t\tthis.startQrcodeTimer();\n\t\t\t\tconsole.log('二维码刷新完成');\n\t\t\t}, 500);\n\t\t},\n\n\t\tresetForm(formName) {\n\t\t\tif (this.$refs[formName]) {\n\t\t\t\tthis.$refs[formName].resetFields();\n\t\t\t}\n\t\t},\n\n\t\tgetCookie(name) {\n\t\t\tlet reg = new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\");\n\t\t\tlet arr = document.cookie.match(reg)\n\t\t\tif (arr) {\n\t\t\t\treturn unescape(arr[2]);\n\t\t\t}\n\t\t\treturn '';\n\t\t},\n\n\t\tsetCookie(name, value) {\n\t\t\tdocument.cookie = name + \"=\" + escape(value);\n\t\t},\n\n\t\t// 启动CheckLogin定时器\n\t\tstartCheckLoginTimer() {\n\t\t\tconsole.log('启动CheckLogin定时器');\n\t\t\t// 先清除可能存在的定时器\n\t\t\tthis.stopCheckLoginTimer();\n\n\t\t\t// 立即调用一次\n\t\t\tthis.CheckLogin();\n\n\t\t\t// 设置每1秒调用一次\n\t\t\tthis.checkLoginTimer = setInterval(() => {\n\t\t\t\tthis.CheckLogin();\n\t\t\t}, 1000); // 1000毫秒 = 1秒\n\t\t},\n\n\t\t// 停止CheckLogin定时器\n\t\tstopCheckLoginTimer() {\n\t\t\tif (this.checkLoginTimer) {\n\t\t\t\tconsole.log('停止CheckLogin定时器');\n\t\t\t\tclearInterval(this.checkLoginTimer);\n\t\t\t\tthis.checkLoginTimer = null;\n\t\t\t}\n\t\t},\n\n\t\t// 启动微信ticket定时器\n\t\tstartWxTicketTimer() {\n\t\t\tconsole.log('启动微信ticket定时器');\n\t\t\t// 先清除可能存在的定时器\n\t\t\tthis.stopWxTicketTimer();\n\n\t\t\t// 立即调用一次\n\t\t\tthis.GetWxTicket();\n\n\t\t\t// 设置每1分钟调用一次\n\t\t\tthis.wxTicketTimer = setInterval(() => {\n\t\t\t\tthis.GetWxTicket();\n\t\t\t}, 60000); // 60000毫秒 = 1分钟\n\t\t},\n\n\t\t// 停止微信ticket定时器\n\t\tstopWxTicketTimer() {\n\t\t\tif (this.wxTicketTimer) {\n\t\t\t\tconsole.log('停止微信ticket定时器');\n\t\t\t\tclearInterval(this.wxTicketTimer);\n\t\t\t\tthis.wxTicketTimer = null;\n\t\t\t}\n\t\t},\n\t\tsendBindPhoneCode() {\n\t\t\t// 验证手机号是否输入\n\t\t\tif (!this.bindPhoneForm.phone) {\n\t\t\t\tthis.$message.error('请先输入手机号');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 验证手机号格式\n\t\t\tconst phoneRegex = /^1[3-9]\\d{9}$/;\n\t\t\tif (!phoneRegex.test(this.bindPhoneForm.phone)) {\n\t\t\t\tthis.$message.error('请输入正确的手机号格式');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 调用后端发送验证码API\n\t\t\tconsole.log('发送绑定手机号验证码到:', this.bindPhoneForm.phone);\n\n\t\t\t// 使用原生axios调用外部接口，绕过项目的响应拦截器\n\t\t\taxios({\n\t\t\t\turl: \"https://shadan.web.service.thinkgs.cn/jeecg-boot/sys/sendsms\",\n\t\t\t\tmethod: 'post',\n\t\t\t\tdata: { mobile: this.bindPhoneForm.phone },\n\t\t\t\ttimeout: 10000\n\t\t\t}).then(response => {\n\t\t\t\tconsole.log('绑定手机号验证码发送响应:', response.data);\n\n\t\t\t\t// 适配外部接口的返回格式：success字段表示成功\n\t\t\t\tif (response.data && response.data.success === true) {\n\t\t\t\t\tthis.$message.success('验证码已发送');\n\t\t\t\t\tlocalStorage.setItem(\"bindPhoneSms\", response.data.result);\n\t\t\t\t\tthis.startBindPhoneCountdown();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('服务器返回错误:', response.data);\n\t\t\t\t\tthis.$message.error(response.data.message || '验证码发送失败');\n\t\t\t\t}\n\t\t\t}).catch(error => {\n\t\t\t\tconsole.error('绑定手机号验证码发送失败:', error);\n\n\t\t\t\t// 处理不同类型的错误\n\t\t\t\tlet errorMessage = '验证码发送失败，请稍后重试';\n\t\t\t\tif (error.response && error.response.data) {\n\t\t\t\t\t// 如果是HTTP错误响应\n\t\t\t\t\tconst data = error.response.data;\n\t\t\t\t\tif (data.success === false) {\n\t\t\t\t\t\terrorMessage = data.message || errorMessage;\n\t\t\t\t\t}\n\t\t\t\t} else if (error.message) {\n\t\t\t\t\terrorMessage = error.message;\n\t\t\t\t}\n\n\t\t\t\tthis.$message.error(errorMessage);\n\t\t\t});\n\t\t},\n\n\t\t// 开始绑定手机号验证码倒计时\n\t\tstartBindPhoneCountdown() {\n\t\t\tthis.bindPhoneCountdown = 60;\n\t\t\tthis.bindPhoneTimer = setInterval(() => {\n\t\t\t\tthis.bindPhoneCountdown--;\n\t\t\t\tif (this.bindPhoneCountdown <= 0) {\n\t\t\t\t\tclearInterval(this.bindPhoneTimer);\n\t\t\t\t\tthis.bindPhoneTimer = null;\n\t\t\t\t}\n\t\t\t}, 1000);\n\t\t},\n\n\t\tsubmitBindPhone() {\n\t\t\tthis.$refs.bindPhoneForm.validate(async (valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\t// 验证验证码是否正确\n\t\t\t\t\tconst storedCode = localStorage.getItem(\"bindPhoneSms\");\n\t\t\t\t\tif (!storedCode || storedCode === '') {\n\t\t\t\t\t\tthis.$message.error(\"请重新发送验证码\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.bindPhoneForm.code !== storedCode) {\n\t\t\t\t\t\tthis.$message.error(\"验证码不正确\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// TODO: 调用后端接口绑定手机号和openid\n\t\t\t\t\t// 这里需要调用一个新的接口来绑定手机号和openid\n\t\t\t\t\tconsole.log('绑定手机号:', this.bindPhoneForm.phone, 'openid:', this.currentOpenid);\n\n\t\t\t\t\t// 绑定成功后，重新查询用户信息并登录\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: \"/phoneLoginInfo\",\n\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\tdata: { \n\t\t\t\t\t\t\tphone: this.bindPhoneForm.phone, \n\t\t\t\t\t\t\t// 重要：区分terminal和terminalNo\n\t\t\t\t\t\t\tterminal: this.currentTerminalType, // 根据实际环境设置\n\t\t\t\t\t\t\tterminalNo: 0  // 必须为0，默认账号类型\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttimeout: 10000\n\t\t\t\t\t}).then(userInfo => {\n\t\t\t\t\t\tconsole.log(\"绑定后用户信息查询成功:\", userInfo);\n\t\t\t\t\t\tthis.accountForm.userName = userInfo.userName;\n\t\t\t\t\t\tthis.accountForm.password = userInfo.password;\n\t\t\t\t\t\tthis.accountForm.phone = userInfo.phone;\n\t\t\t\t\t\tthis.accountForm.tokenKey = userInfo.tokenKey;\n\n\t\t\t\t\t\tthis.$http({\n\t\t\t\t\t\t\turl: \"/user/update2\",\n\t\t\t\t\t\t\tmethod: \"put\",\n\t\t\t\t\t\t\tdata: { id: userInfo.id, userName: userInfo.userName, phone: this.bindPhoneForm.phone, openid: this.currentOpenid, nickName: userInfo.nickName }\n\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\tthis.submitLogin2(this.accountForm);\n\t\t\t\t\t\t\t// 清除验证码\n\t\t\t\t\t\t\tlocalStorage.removeItem(\"bindPhoneSms\");\n\t\t\t\t\t\t})\n\n\t\t\t\t\t\t// 重置绑定状态\n\t\t\t\t\t\tthis.bindPhone = false;\n\t\t\t\t\t\tthis.bindPhoneForm.phone = '';\n\t\t\t\t\t\tthis.bindPhoneForm.code = '';\n\n\t\t\t\t\t}).catch(error => {\n\t\t\t\t\t\tconsole.error(\"绑定后用户信息查询失败:\", error);\n\t\t\t\t\t\tthis.$message.error(error.message || \"绑定失败\");\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tcancelBindPhone() {\n\t\t\t// 重置绑定状态\n\t\t\tthis.bindPhone = false;\n\t\t\tthis.bindPhoneForm.phone = '';\n\t\t\tthis.bindPhoneForm.code = '';\n\t\t\tthis.currentOpenid = '';\n\n\t\t\t// 清除验证码\n\t\t\tlocalStorage.removeItem(\"bindPhoneSms\");\n\n\t\t\t// 清除倒计时\n\t\t\tif (this.bindPhoneTimer) {\n\t\t\t\tclearInterval(this.bindPhoneTimer);\n\t\t\t\tthis.bindPhoneTimer = null;\n\t\t\t\tthis.bindPhoneCountdown = 0;\n\t\t\t}\n\n\t\t\t// 重新启动扫码登录\n\t\t\tthis.startWxTicketTimer();\n\t\t\tthis.startCheckLoginTimer();\n\n\t\t\tthis.$message.info('已取消绑定');\n\t\t},\n\n\t\t// 在VSCode环境中通过浏览器打开注册页面\n\t\topenRegisterInBrowser() {\n\t\t\tconsole.log('[Register] Opening register page in browser from VSCode environment');\n\t\t\t\n\t\t\t// 使用固定的注册页面URL\n\t\t\tconst registerUrl = 'https://aiim.service.thinkgs.cn/#/register';\n\t\t\t\n\t\t\tconsole.log('[Register] Register URL:', registerUrl);\n\t\t\t\n\t\t\t// 尝试使用VSCode服务打开外部链接\n\t\t\tif (window.vscodeServices && window.vscodeServices.openExternal) {\n\t\t\t\twindow.vscodeServices.openExternal(registerUrl);\n\t\t\t\tconsole.log('[Register] Opened register page using vscodeServices.openExternal');\n\t\t\t} else if (window.vscodeServices && window.vscodeServices.showInfo) {\n\t\t\t\t// 如果没有openExternal方法，提示用户手动打开\n\t\t\t\twindow.vscodeServices.showInfo(`请在浏览器中打开: ${registerUrl}`);\n\t\t\t\tconsole.log('[Register] Showed info message with register URL');\n\t\t\t} else {\n\t\t\t\t// 降级方案：使用window.open\n\t\t\t\twindow.open(registerUrl, '_blank');\n\t\t\t\tconsole.log('[Register] Opened register page using window.open');\n\t\t\t}\n\t\t}\n\t},\n\n\tmounted() {\n\t\t// 首先检查是否需要自动登录\n\t\tthis.handleAutoLogin();\n\n\t\t// 根据环境设置正确的终端类型\n\t\t// 重要：terminal根据环境动态设置，terminalNo始终为0\n\t\tthis.accountForm.terminal = this.currentTerminalType;\n\t\tthis.accountForm.terminalNo = 0; // 必须为0，默认账号类型\n\t\tthis.smsForm.terminal = this.currentTerminalType;\n\t\tthis.smsForm.terminalNo = 0; // 必须为0，默认账号类型\n\n\t\t// 初始化账号登录表单数据\n\t\tthis.accountForm.userName = this.getCookie(\"username\");\n\t\tthis.accountForm.password = this.getCookie(\"password\");\n\n\t\t// 调试VSCode环境检测\n\t\tconsole.log('[Login] Component mounted with props:', {\n\t\t\tisVSCodeEnvironment: this.isVSCodeEnvironment,\n\t\t\tvscodeServices: this.vscodeServices,\n\t\t\thasVscodeServices: !!this.vscodeServices\n\t\t});\n\n\t\t// 调试Store状态\n\t\tconsole.log('[Login] Store状态检查:', {\n\t\t\thasStore: !!this.$store,\n\t\t\thasState: !!this.$store?.state,\n\t\t\thasUserStore: !!this.$store?.state?.userStore,\n\t\t\tcurrentIsLoggedIn: this.$store?.state?.userStore?.isLoggedIn,\n\t\t\thasSetIsLoggedInAction: !!this.$store?._actions?.setIsLoggedIn,\n\t\t\tstoreModules: this.$store?.state ? Object.keys(this.$store.state) : 'no state'\n\t\t});\n\n\t\t// 初始化二维码和微信ticket定时器\n\t\tif (this.activeTab === 'qrcode') {\n\t\t\tthis.startQrcodeTimer();\n\t\t\tthis.startWxTicketTimer();\n\t\t\tthis.startCheckLoginTimer();\n\t\t}\n\t},\n\n\twatch: {\n\t\t// 监听tab切换\n\t\tactiveTab(newTab, oldTab) {\n\t\t\tconsole.log('[Login] Tab switching:', oldTab, '->', newTab);\n\t\t\t\n\t\t\t// 在VSCode环境下，确保表单引用正确更新\n\t\t\tif (this.isInVSCodeEnvironment()) {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t// 重置对应的表单\n\t\t\t\t\tif (newTab === 'account' && this.$refs.accountForm) {\n\t\t\t\t\t\tconsole.log('[Login] Resetting account form for VSCode');\n\t\t\t\t\t\t// 不重置字段，保留用户输入\n\t\t\t\t\t} else if (newTab === 'sms' && this.$refs.smsForm) {\n\t\t\t\t\t\tconsole.log('[Login] Resetting SMS form for VSCode');\n\t\t\t\t\t\t// 不重置字段，保留用户输入\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (newTab === 'qrcode') {\n\t\t\t\t// 切换到扫码登录\n\t\t\t\tif (this.qrcodeStatus === 'active') {\n\t\t\t\t\tthis.startQrcodeTimer();\n\t\t\t\t}\n\t\t\t\t// 启动微信ticket定时器\n\t\t\t\tthis.startWxTicketTimer();\n\t\t\t\t// 启动CheckLogin定时器\n\t\t\t\tthis.startCheckLoginTimer();\n\t\t\t} else {\n\t\t\t\t// 切换到其他标签，停止相关定时器\n\t\t\t\tthis.stopWxTicketTimer();\n\t\t\t\tthis.stopCheckLoginTimer();\n\t\t\t}\n\t\t}\n\t},\n\n\t// 组件销毁时清理定时器\n\tbeforeDestroy() {\n\t\tif (this.timer) {\n\t\t\tclearInterval(this.timer);\n\t\t}\n\t\tif (this.qrcodeTimer) {\n\t\t\tclearTimeout(this.qrcodeTimer);\n\t\t}\n\t\t// 清理微信ticket定时器\n\t\tthis.stopWxTicketTimer();\n\t\t// 清理CheckLogin定时器\n\t\tthis.stopCheckLoginTimer();\n\t\t// 清理绑定手机号定时器\n\t\tif (this.bindPhoneTimer) {\n\t\t\tclearInterval(this.bindPhoneTimer);\n\t\t\tthis.bindPhoneTimer = null;\n\t\t}\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n.login-view {\n\twidth: 100%;\n\theight: 100%;\n\tbackground: #E8F2FF;\n\tbackground-size: cover;\n\tbox-sizing: border-box;\n\n\t// 自动登录加载状态样式\n\t.auto-login-loading {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: #E8F2FF;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tz-index: 9999;\n\n\t\t.loading-content {\n\t\t\tbackground: white;\n\t\t\tpadding: 40px;\n\t\t\tborder-radius: 10px;\n\t\t\tbox-shadow: 0px 0px 20px rgba(0, 0, 0, 0.1);\n\t\t\ttext-align: center;\n\t\t\tmin-width: 300px;\n\n\t\t\t.loading-spinner {\n\t\t\t\tmargin-bottom: 20px;\n\n\t\t\t\ti {\n\t\t\t\t\tfont-size: 48px;\n\t\t\t\t\tcolor: #409EFF;\n\t\t\t\t\tanimation: rotating 2s linear infinite;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.loading-text {\n\t\t\t\tfont-size: 18px;\n\t\t\t\tfont-weight: 600;\n\t\t\t\tcolor: #333;\n\t\t\t\tmargin-bottom: 10px;\n\t\t\t}\n\n\t\t\t.loading-phone {\n\t\t\t\tfont-size: 14px;\n\t\t\t\tcolor: #666;\n\t\t\t}\n\t\t}\n\t}\n\n\t// 旋转动画\n\t@keyframes rotating {\n\t\tfrom {\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\n\t\tto {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\n\t.login-content {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\tjustify-content: space-around;\n\t\talign-items: center;\n\t\tpadding: 10%;\n\n\t\t.login-form {\n\t\t\twidth: 450px;\n\t\t\tpadding: 30px;\n\t\t\tbackground: white;\n\t\t\topacity: 0.95;\n\t\t\tbox-shadow: 0px 0px 20px rgba(0, 0, 0, 0.1);\n\t\t\tborder-radius: 10px;\n\t\t\toverflow: hidden;\n\n\t\t\t.login-brand {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tline-height: 50px;\n\t\t\t\tmargin: 20px 0 30px 0;\n\t\t\t\tfont-size: 22px;\n\t\t\t\tfont-weight: 600;\n\t\t\t\tletter-spacing: 2px;\n\t\t\t\ttext-transform: uppercase;\n\t\t\t\ttext-align: center;\n\n\t\t\t\t.logo {\n\t\t\t\t\twidth: 30px;\n\t\t\t\t\theight: 30px;\n\t\t\t\t\tmargin-right: 10px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 自定义Tab样式 - VSCode环境专用\n\t\t\t.custom-tabs {\n\t\t\t\t.custom-tabs-header {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tborder-bottom: 2px solid #DCDFE6;\n\t\t\t\t\tmargin-bottom: 20px;\n\t\t\t\t\t\n\t\t\t\t\t.custom-tab-item {\n\t\t\t\t\t\tflex: 1;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tpadding: 12px 0;\n\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\tfont-weight: 500;\n\t\t\t\t\t\tcolor: #303133;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\ttransition: all 0.3s;\n\t\t\t\t\t\tuser-select: none;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\tcolor: #409EFF;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t&.active {\n\t\t\t\t\t\t\tcolor: #409EFF;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t&::after {\n\t\t\t\t\t\t\t\tcontent: '';\n\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\tbottom: -2px;\n\t\t\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\t\t\tright: 0;\n\t\t\t\t\t\t\t\theight: 2px;\n\t\t\t\t\t\t\t\tbackground-color: #409EFF;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.custom-tabs-content {\n\t\t\t\t\t.custom-tab-pane {\n\t\t\t\t\t\tanimation: fadeIn 0.3s;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 原有的el-tabs样式\n\t\t\t.login-tabs {\n\t\t\t\t.el-tabs__header {\n\t\t\t\t\tmargin: 0 0 20px 0;\n\t\t\t\t}\n\n\t\t\t\t.el-tabs__nav-wrap::after {\n\t\t\t\t\theight: 1px;\n\t\t\t\t}\n\n\t\t\t\t.el-tabs__item {\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\tfont-weight: 500;\n\t\t\t\t}\n\n\t\t\t\t.el-tabs__content {\n\t\t\t\t\tpadding-top: 10px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 验证码行样式\n\t\t\t.verification-code-row {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tgap: 10px;\n\n\t\t\t\t.code-input {\n\t\t\t\t\tflex: 1;\n\t\t\t\t}\n\n\t\t\t\t.send-code-btn {\n\t\t\t\t\tflex-shrink: 0;\n\t\t\t\t\tmin-width: 100px;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 登录按钮样式\n\t\t\t.login-btn {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 40px;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tfont-weight: 500;\n\t\t\t}\n\n\t\t\t// 二维码容器样式\n\t\t\t.qrcode-container {\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tmin-height: 300px;\n\n\t\t\t\t.qrcode-box {\n\t\t\t\t\ttext-align: center;\n\n\t\t\t\t\t.qrcode-loading,\n\t\t\t\t\t.qrcode-expired,\n\t\t\t\t\t.qrcode-scanned {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tgap: 15px;\n\n\t\t\t\t\t\ti {\n\t\t\t\t\t\t\tfont-size: 48px;\n\t\t\t\t\t\t\tcolor: #409EFF;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tp {\n\t\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.qrcode-active {\n\t\t\t\t\t\t.qrcode-image {\n\t\t\t\t\t\t\tmargin-bottom: 15px;\n\n\t\t\t\t\t\t\t.mock-qrcode {\n\t\t\t\t\t\t\t\twidth: 200px;\n\t\t\t\t\t\t\t\theight: 200px;\n\t\t\t\t\t\t\t\tborder: 2px dashed #ddd;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tbackground: #f9f9f9;\n\n\t\t\t\t\t\t\t\ti {\n\t\t\t\t\t\t\t\t\tfont-size: 48px;\n\t\t\t\t\t\t\t\t\tcolor: #999;\n\t\t\t\t\t\t\t\t\tmargin-bottom: 10px;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tp {\n\t\t\t\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\t\t\t\tcolor: #999;\n\t\t\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t.qrcode-real {\n\t\t\t\t\t\t\t\twidth: 200px;\n\t\t\t\t\t\t\t\theight: 200px;\n\t\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\t\tborder: 1px solid #ddd;\n\t\t\t\t\t\t\t\tborder-radius: 8px;\n\t\t\t\t\t\t\t\toverflow: hidden;\n\n\t\t\t\t\t\t\t\timg {\n\t\t\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\t\t\t\tobject-fit: contain;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.qrcode-tip {\n\t\t\t\t\t\t\tmargin: 0 0 10px 0;\n\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.qrcode-expired {\n\t\t\t\t\t\ti {\n\t\t\t\t\t\t\tcolor: #F56C6C;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.auto-refresh-tip {\n\t\t\t\t\t\t\tmargin: 10px 0;\n\t\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\t\tcolor: #909399;\n\t\t\t\t\t\t\tanimation: blink 1.5s infinite;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t.manual-refresh-btn {\n\t\t\t\t\t\t\tmargin-top: 15px;\n\t\t\t\t\t\t\tcolor: #409EFF;\n\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\tpadding: 8px 16px;\n\n\t\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\t\tcolor: #66B1FF;\n\t\t\t\t\t\t\t\tbackground-color: rgba(64, 158, 255, 0.1);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ti {\n\t\t\t\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.qrcode-scanned {\n\t\t\t\t\t\ti {\n\t\t\t\t\t\t\tcolor: #67C23A;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// 绑定手机号容器样式\n\t\t\t.bind-phone-container {\n\t\t\t\tmin-height: 300px;\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: column;\n\t\t\t\tjustify-content: center;\n\n\t\t\t\t.bind-phone-header {\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tmargin-bottom: 30px;\n\n\t\t\t\t\th3 {\n\t\t\t\t\t\tmargin: 0 0 10px 0;\n\t\t\t\t\t\tfont-size: 20px;\n\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t}\n\n\t\t\t\t\tp {\n\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.cancel-btn {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\tmargin-top: 10px;\n\t\t\t\t\tcolor: #999;\n\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\tcolor: #409EFF;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.register {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row-reverse;\n\t\t\t\tline-height: 40px;\n\t\t\t\ttext-align: left;\n\t\t\t\tpadding-left: 20px;\n\t\t\t\tmargin-top: 20px;\n\t\t\t}\n\t\t}\n\t}\n}\n\n// 响应式设计\n@media (max-width: 768px) {\n\t.login-view .login-content .login-form {\n\t\twidth: 90%;\n\t\tpadding: 20px;\n\t}\n\n\t// 自动登录加载状态的响应式设计\n\t.login-view .auto-login-loading .loading-content {\n\t\twidth: 90%;\n\t\tpadding: 30px 20px;\n\t\tmin-width: auto;\n\t}\n}\n\n// 闪烁动画\n@keyframes blink {\n\t0%,\n\t50% {\n\t\topacity: 1;\n\t}\n\n\t51%,\n\t100% {\n\t\topacity: 0.3;\n\t}\n}\n\n// 淡入动画\n@keyframes fadeIn {\n\tfrom {\n\t\topacity: 0;\n\t\ttransform: translateY(10px);\n\t}\n\tto {\n\t\topacity: 1;\n\t\ttransform: translateY(0);\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=f811964e&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=f811964e&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f811964e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"register-view\"},[_c('div',[_c('el-form',{ref:\"registerForm\",staticClass:\"web-ruleForm\",attrs:{\"model\":_vm.registerForm,\"status-icon\":\"\",\"rules\":_vm.rules,\"label-width\":\"80px\"}},[_c('div',{staticClass:\"register-brand\"},[_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"../../public/logo-128.png\")}}),_c('div',[_vm._v(\"登录傻蛋IM\")])]),_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"userName\"}},[_c('el-input',{attrs:{\"type\":\"userName\",\"autocomplete\":\"off\",\"placeholder\":\"用户名(登录使用)\"},model:{value:(_vm.registerForm.userName),callback:function ($$v) {_vm.$set(_vm.registerForm, \"userName\", $$v)},expression:\"registerForm.userName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"昵称\",\"prop\":\"nickName\"}},[_c('el-input',{attrs:{\"type\":\"nickName\",\"autocomplete\":\"off\",\"placeholder\":\"昵称\"},model:{value:(_vm.registerForm.nickName),callback:function ($$v) {_vm.$set(_vm.registerForm, \"nickName\", $$v)},expression:\"registerForm.nickName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\",\"placeholder\":\"密码\"},model:{value:(_vm.registerForm.password),callback:function ($$v) {_vm.$set(_vm.registerForm, \"password\", $$v)},expression:\"registerForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"确认密码\",\"prop\":\"confirmPassword\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"autocomplete\":\"off\",\"placeholder\":\"确认密码\"},model:{value:(_vm.registerForm.confirmPassword),callback:function ($$v) {_vm.$set(_vm.registerForm, \"confirmPassword\", $$v)},expression:\"registerForm.confirmPassword\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机号\",\"prop\":\"phone\"}},[_c('el-input',{attrs:{\"type\":\"phone\",\"autocomplete\":\"off\",\"placeholder\":\"手机号\"},model:{value:(_vm.registerForm.phone),callback:function ($$v) {_vm.$set(_vm.registerForm, \"phone\", $$v)},expression:\"registerForm.phone\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitForm('registerForm')}}},[_vm._v(\"注册\")]),_c('el-button',{on:{\"click\":function($event){return _vm.resetForm('registerForm')}}},[_vm._v(\"清空\")])],1),_c('div',{staticClass:\"to-login\"},[_c('router-link',{attrs:{\"to\":\"/login\"}},[_vm._v(\"已有账号,前往登录\")])],1)],1)],1),_c('icp')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-container class=\"register-view\">\n\t\t<div>\n\t\t\t<el-form :model=\"registerForm\" status-icon :rules=\"rules\" ref=\"registerForm\" label-width=\"80px\"\n\t\t\t\tclass=\"web-ruleForm\">\n\t\t\t\t<div class=\"register-brand\">\n\t\t\t\t\t<img class=\"logo\" src=\"../../public/logo-128.png\" />\n\t\t\t\t\t<div>登录傻蛋IM</div>\n\t\t\t\t</div>\n\t\t\t\t<el-form-item label=\"用户名\" prop=\"userName\">\n\t\t\t\t\t<el-input type=\"userName\" v-model=\"registerForm.userName\" autocomplete=\"off\"\n\t\t\t\t\t\tplaceholder=\"用户名(登录使用)\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"昵称\" prop=\"nickName\">\n\t\t\t\t\t<el-input type=\"nickName\" v-model=\"registerForm.nickName\" autocomplete=\"off\"\n\t\t\t\t\t\tplaceholder=\"昵称\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"密码\" prop=\"password\">\n\t\t\t\t\t<el-input type=\"password\" v-model=\"registerForm.password\" autocomplete=\"off\"\n\t\t\t\t\t\tplaceholder=\"密码\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"确认密码\" prop=\"confirmPassword\">\n\t\t\t\t\t<el-input type=\"password\" v-model=\"registerForm.confirmPassword\" autocomplete=\"off\"\n\t\t\t\t\t\tplaceholder=\"确认密码\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item label=\"手机号\" prop=\"phone\">\n\t\t\t\t\t<el-input type=\"phone\" v-model=\"registerForm.phone\" autocomplete=\"off\"\n\t\t\t\t\t\tplaceholder=\"手机号\"></el-input>\n\t\t\t\t</el-form-item>\n\t\t\t\t<el-form-item>\n\t\t\t\t\t<el-button type=\"primary\" @click=\"submitForm('registerForm')\">注册</el-button>\n\t\t\t\t\t<el-button @click=\"resetForm('registerForm')\">清空</el-button>\n\t\t\t\t</el-form-item>\n\t\t\t\t<div class=\"to-login\">\n\t\t\t\t\t<router-link to=\"/login\">已有账号,前往登录</router-link>\n\t\t\t\t</div>\n\t\t\t</el-form>\n\t\t</div>\n\t\t<icp></icp>\n\t</el-container>\n</template>\n\n<script>\nimport Icp from '../components/common/Icp.vue'\nexport default {\n\tname: \"login\",\n\tcomponents: {\n\t\tIcp\n\t},\n\tdata() {\n\t\tvar checkUserName = (rule, value, callback) => {\n\t\t\tif (!value) {\n\t\t\t\treturn callback(new Error('请输入用户名'));\n\t\t\t}\n\t\t\tcallback();\n\t\t};\n\t\tvar checkNickName = (rule, value, callback) => {\n\t\t\tif (!value) {\n\t\t\t\treturn callback(new Error('请输入昵称'));\n\t\t\t}\n\t\t\tcallback();\n\t\t};\n\t\tvar checkPassword = (rule, value, callback) => {\n\t\t\tif (value === '') {\n\t\t\t\treturn callback(new Error('请输入密码'));\n\t\t\t}\n\t\t\tcallback();\n\t\t};\n\n\t\tvar checkConfirmPassword = (rule, value, callback) => {\n\t\t\tif (value === '') {\n\t\t\t\treturn callback(new Error('请输入密码'));\n\t\t\t}\n\t\t\tif (value != this.registerForm.password) {\n\t\t\t\treturn callback(new Error('两次密码输入不一致'));\n\t\t\t}\n\t\t\tcallback();\n\t\t};\n\n\t\tvar checkPhone = (rule, value, callback) => {\n\t\t\tif (!value) {\n\t\t\t\treturn callback(new Error('请输入手机号'));\n\t\t\t}\n\t\t\tconst phoneRegex = /^1[3-9]\\d{9}$/;\n\t\t\tif (!phoneRegex.test(value)) {\n\t\t\t\treturn callback(new Error('请输入正确的手机号格式'));\n\t\t\t}\n\t\t\tcallback();\n\t\t};\n\n\t\treturn {\n\t\t\tregisterForm: {\n\t\t\t\tuserName: '',\n\t\t\t\tnickName: '',\n\t\t\t\tpassword: '',\n\t\t\t\tconfirmPassword: '',\n\t\t\t\tphone: '',\n\t\t\t\tterminalNo:0\n\t\t\t},\n\t\t\trules: {\n\t\t\t\tuserName: [{\n\t\t\t\t\tvalidator: checkUserName,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tnickName: [{\n\t\t\t\t\tvalidator: checkNickName,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tpassword: [{\n\t\t\t\t\tvalidator: checkPassword,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tconfirmPassword: [{\n\t\t\t\t\tvalidator: checkConfirmPassword,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}],\n\t\t\t\tphone: [{\n\t\t\t\t\tvalidator: checkPhone,\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}]\n\t\t\t}\n\t\t};\n\t},\n\tmethods: {\n\t\tsubmitForm(formName) {\n\t\t\tthis.$refs[formName].validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: \"/register\",\n\t\t\t\t\t\tmethod: 'post',\n\t\t\t\t\t\tdata: this.registerForm\n\t\t\t\t\t})\n\t\t\t\t\t\t.then((data) => {\n\t\t\t\t\t\t\tthis.$message.success(\"注册成功!\");\n\t\t\t\t\t\t\t// 注册成功后跳转到登录页面\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.$router.push('/login');\n\t\t\t\t\t\t\t}, 1500);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch((error) => {\n\t\t\t\t\t\t\tthis.$message.error(\"注册失败: \" + (error.response?.data?.message || error.message));\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tresetForm(formName) {\n\t\t\tthis.$refs[formName].resetFields();\n\t\t}\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n.register-view {\n\tposition: fixed;\n\tdisplay: flex;\n\tjustify-content: space-around;\n\talign-items: center;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: rgb(232, 242, 255);\n\n\t.web-ruleForm {\n\t\twidth: 500px;\n\t\theight: 450px;\n\t\tpadding: 20px;\n\t\tbackground: white;\n\t\topacity: 0.9;\n\t\tbox-shadow: 0px 0px 1px #ccc;\n\t\tborder-radius: 3px;\n\t\toverflow: hidden;\n\t\tborder-radius: 3%;\n\n\t\t.register-brand {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\tline-height: 50px;\n\t\t\tmargin: 20px 0 30px 0;\n\t\t\tfont-size: 22px;\n\t\t\tfont-weight: 600;\n\t\t\tletter-spacing: 2px;\n\t\t\ttext-align: center;\n\t\t\ttext-transform: uppercase;\n\n\t\t\t.logo {\n\t\t\t\twidth: 30px;\n\t\t\t\theight: 30px;\n\t\t\t\tmargin-right: 10px;\n\t\t\t}\n\t\t}\n\n\t\t.to-login {\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: row-reverse;\n\t\t\tline-height: 40px;\n\t\t\ttext-align: left;\n\t\t\tpadding-left: 20px;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Register.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Register.vue?vue&type=template&id=8363db98&scoped=true\"\nimport script from \"./Register.vue?vue&type=script&lang=js\"\nexport * from \"./Register.vue?vue&type=script&lang=js\"\nimport style0 from \"./Register.vue?vue&type=style&index=0&id=8363db98&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8363db98\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home-page\",on:{\"click\":function($event){return _vm.$store.commit('closeUserInfoBox')}}},[_c('div',{staticClass:\"app-container\",class:{ fullscreen: _vm.isFullscreen }},[_c('div',{staticClass:\"navi-bar\"},[_c('div',{staticClass:\"navi-bar-box\"},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"user-head-image\"},[_c('head-image',{attrs:{\"name\":_vm.$store.state.userStore.userInfo.nickName,\"size\":38,\"url\":_vm.$store.state.userStore.userInfo.headImageThumb},nativeOn:{\"click\":function($event){_vm.showSettingDialog = true}}})],1),_c('div',{staticClass:\"menu\"},[_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/home/chat'}},[_c('div',{staticClass:\"menu-item\"},[_c('span',{staticClass:\"icon iconfont icon-chat\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.unreadCount > 0),expression:\"unreadCount > 0\"}],staticClass:\"unread-text\"},[_vm._v(_vm._s(_vm.unreadCount))])])]),_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/home/friend'}},[_c('div',{staticClass:\"menu-item\"},[_c('span',{staticClass:\"icon iconfont icon-friend\"})])]),_c('router-link',{staticClass:\"link\",attrs:{\"to\":'/home/group'}},[_c('div',{staticClass:\"menu-item\"},[_c('span',{staticClass:\"icon iconfont icon-group\",staticStyle:{\"font-size\":\"28px\"}})])])],1)]),_c('div',{staticClass:\"botoom\"},[_c('div',{staticClass:\"botoom-item\",on:{\"click\":function($event){_vm.isFullscreen = !_vm.isFullscreen}}},[_c('i',{staticClass:\"el-icon-full-screen\"})]),_c('div',{staticClass:\"botoom-item\",on:{\"click\":_vm.showSetting}},[_c('span',{staticClass:\"icon iconfont icon-setting\",staticStyle:{\"font-size\":\"20px\"}})]),_c('div',{staticClass:\"botoom-item\",attrs:{\"title\":\"退出\"},on:{\"click\":function($event){return _vm.onExit()}}},[_c('span',{staticClass:\"icon iconfont icon-exit\"})])])])]),_c('div',{staticClass:\"content-box\"},[_c('router-view')],1),_c('setting',{attrs:{\"visible\":_vm.showSettingDialog},on:{\"close\":function($event){return _vm.closeSetting()}}}),_c('user-info',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.uiStore.userInfo.show),expression:\"uiStore.userInfo.show\"}],attrs:{\"pos\":_vm.uiStore.userInfo.pos,\"user\":_vm.uiStore.userInfo.user},on:{\"close\":function($event){return _vm.$store.commit('closeUserInfoBox')}}}),_c('full-image',{attrs:{\"visible\":_vm.uiStore.fullImage.show,\"url\":_vm.uiStore.fullImage.url},on:{\"close\":function($event){return _vm.$store.commit('closeFullImageBox')}}}),_c('rtc-private-video',{ref:\"rtcPrivateVideo\"}),_c('rtc-group-video',{ref:\"rtcGroupVideo\"})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{staticClass:\"setting\",attrs:{\"title\":\"设置\",\"visible\":_vm.visible,\"width\":\"420px\",\"before-close\":_vm.onClose},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('el-form',{ref:\"settingForm\",attrs:{\"model\":_vm.userInfo,\"label-width\":\"80px\",\"rules\":_vm.rules,\"size\":\"small\"}},[_c('el-form-item',{staticStyle:{\"margin-bottom\":\"0 !important\"},attrs:{\"label\":\"头像\"}},[_c('file-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.imageAction,\"showLoading\":true,\"maxSize\":_vm.maxSize,\"fileTypes\":['image/jpeg', 'image/png', 'image/jpg', 'image/webp']},on:{\"success\":_vm.onUploadSuccess}},[(_vm.userInfo.headImage)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.userInfo.headImage}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1),_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\",\"autocomplete\":\"off\",\"size\":\"small\"},model:{value:(_vm.userInfo.userName),callback:function ($$v) {_vm.$set(_vm.userInfo, \"userName\", $$v)},expression:\"userInfo.userName\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"nickName\",\"label\":\"昵称\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\",\"size\":\"small\"},model:{value:(_vm.userInfo.nickName),callback:function ($$v) {_vm.$set(_vm.userInfo, \"nickName\", $$v)},expression:\"userInfo.nickName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"性别\"}},[_c('el-radio-group',{model:{value:(_vm.userInfo.sex),callback:function ($$v) {_vm.$set(_vm.userInfo, \"sex\", $$v)},expression:\"userInfo.sex\"}},[_c('el-radio',{attrs:{\"label\":0}},[_vm._v(\"男\")]),_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"女\")])],1)],1),_c('el-form-item',{attrs:{\"label\":\"个性签名\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":3},model:{value:(_vm.userInfo.signature),callback:function ($$v) {_vm.$set(_vm.userInfo, \"signature\", $$v)},expression:\"userInfo.signature\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.onClose()}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSubmit()}}},[_vm._v(\"确 定\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog class=\"setting\" title=\"设置\" :visible.sync=\"visible\" width=\"420px\" :before-close=\"onClose\">\n    <el-form :model=\"userInfo\" label-width=\"80px\" :rules=\"rules\" ref=\"settingForm\" size=\"small\">\n      <el-form-item label=\"头像\" style=\"margin-bottom: 0 !important;\">\n        <file-upload class=\"avatar-uploader\" :action=\"imageAction\" :showLoading=\"true\" :maxSize=\"maxSize\"\n          @success=\"onUploadSuccess\" :fileTypes=\"['image/jpeg', 'image/png', 'image/jpg', 'image/webp']\">\n          <img v-if=\"userInfo.headImage\" :src=\"userInfo.headImage\" class=\"avatar\">\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n        </file-upload>\n      </el-form-item>\n      <el-form-item label=\"用户名\">\n        <el-input disabled v-model=\"userInfo.userName\" autocomplete=\"off\" size=\"small\"></el-input>\n      </el-form-item>\n      <el-form-item prop=\"nickName\" label=\"昵称\">\n        <el-input v-model=\"userInfo.nickName\" autocomplete=\"off\" size=\"small\"></el-input>\n      </el-form-item>\n      <el-form-item label=\"性别\">\n        <el-radio-group v-model=\"userInfo.sex\">\n          <el-radio :label=\"0\">男</el-radio>\n          <el-radio :label=\"1\">女</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      <el-form-item label=\"个性签名\">\n        <el-input type=\"textarea\" v-model=\"userInfo.signature\" :rows=\"3\"></el-input>\n      </el-form-item>\n    </el-form>\n\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"onClose()\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"onSubmit()\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport FileUpload from \"../common/FileUpload.vue\";\n\nexport default {\n  name: \"setting\",\n  components: {\n    FileUpload\n  },\n  data() {\n    return {\n      userInfo: {},\n      maxSize: 5 * 1024 * 1024,\n      action: \"/image/upload\",\n      rules: {\n        nickName: [{\n          required: true,\n          message: '请输入昵称',\n          trigger: 'blur'\n        }]\n      }\n    }\n  },\n  methods: {\n\n    onClose() {\n      this.$emit(\"close\");\n    },\n    onSubmit() {\n      this.$refs['settingForm'].validate((valid) => {\n        if (!valid) {\n          return false;\n        }\n        this.$http({\n          url: \"/user/update\",\n          method: \"put\",\n          data: this.userInfo\n        }).then(() => {\n          this.$store.commit(\"setUserInfo\", this.userInfo);\n          this.$emit(\"close\");\n          this.$message.success(\"修改成功\");\n        })\n      });\n    },\n    onUploadSuccess(data, file) {\n      this.userInfo.headImage = data.originUrl;\n      this.userInfo.headImageThumb = data.thumbUrl;\n    }\n  },\n  props: {\n    visible: {\n      type: Boolean\n    }\n  },\n  computed: {\n    imageAction() {\n      return `/image/upload`;\n    }\n  },\n  watch: {\n    visible: function (newData, oldData) {\n      // 深拷贝\n      let mine = this.$store.state.userStore.userInfo;\n      this.userInfo = JSON.parse(JSON.stringify(mine));\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.setting {\n  .el-form {\n    padding: 10px 0 0 10px;\n  }\n\n  .avatar-uploader {\n    --width: 112px;\n\n    .el-upload {\n      border: 1px dashed #d9d9d9 !important;\n      border-radius: 6px;\n      cursor: pointer;\n      position: relative;\n      overflow: hidden;\n    }\n\n    .el-upload:hover {\n      border-color: #409EFF;\n    }\n\n    .avatar-uploader-icon {\n      font-size: 24px;\n      color: #8c939d;\n      width: var(--width);\n      height: var(--width);\n      line-height: var(--width);\n      text-align: center;\n    }\n\n    .avatar {\n      width: var(--width);\n      height: var(--width);\n      display: block;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Setting.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Setting.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Setting.vue?vue&type=template&id=8608c2fe\"\nimport script from \"./Setting.vue?vue&type=script&lang=js\"\nexport * from \"./Setting.vue?vue&type=script&lang=js\"\nimport style0 from \"./Setting.vue?vue&type=style&index=0&id=8608c2fe&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"user-info-mask\",on:{\"click\":function($event){return _vm.$emit('close')}}},[_c('div',{staticClass:\"user-info\",style:({ left: _vm.pos.x + 'px', top: _vm.pos.y + 'px' }),on:{\"click\":function($event){$event.stopPropagation();}}},[_c('div',{staticClass:\"user-info-box\"},[_c('div',{staticClass:\"avatar\"},[_c('head-image',{attrs:{\"name\":_vm.user.nickName,\"url\":_vm.user.headImageThumb,\"size\":70,\"online\":_vm.user.online,\"radius\":\"10%\"},nativeOn:{\"click\":function($event){return _vm.showFullImage()}}})],1),_c('div',[_c('el-descriptions',{staticClass:\"user-info-items\",attrs:{\"column\":1,\"title\":_vm.user.nickName}},[_c('el-descriptions-item',{attrs:{\"label\":\"用户名\"}},[_vm._v(_vm._s(_vm.user.userName)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"签名\"}},[_vm._v(_vm._s(_vm.user.signature)+\" \")])],1)],1)]),_c('el-divider',{attrs:{\"content-position\":\"center\"}}),_c('div',{staticClass:\"user-btn-group\"},[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isFriend),expression:\"isFriend\"}],attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSendMessage()}}},[_vm._v(\"发消息\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isFriend),expression:\"!isFriend\"}],attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onAddFriend()}}},[_vm._v(\"加为好友\")])],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"user-info-mask\" @click=\"$emit('close')\">\n\t\t<div class=\"user-info\" :style=\"{ left: pos.x + 'px', top: pos.y + 'px' }\" @click.stop>\n\t\t\t<div class=\"user-info-box\">\n\t\t\t\t<div class=\"avatar\">\n\t\t\t\t\t<head-image :name=\"user.nickName\" :url=\"user.headImageThumb\" :size=\"70\" :online=\"user.online\"\n\t\t\t\t\t\tradius=\"10%\" @click.native=\"showFullImage()\"> </head-image>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<el-descriptions :column=\"1\" :title=\"user.nickName\" class=\"user-info-items\">\n\t\t\t\t\t\t<el-descriptions-item label=\"用户名\">{{ user.userName }}\n\t\t\t\t\t\t</el-descriptions-item>\n\t\t\t\t\t\t<el-descriptions-item label=\"签名\">{{ user.signature }}\n\t\t\t\t\t\t</el-descriptions-item>\n\t\t\t\t\t</el-descriptions>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<el-divider content-position=\"center\"></el-divider>\n\t\t\t<div class=\"user-btn-group\">\n\t\t\t\t<el-button v-show=\"isFriend\" type=\"primary\" @click=\"onSendMessage()\">发消息</el-button>\n\t\t\t\t<el-button v-show=\"!isFriend\" type=\"primary\" @click=\"onAddFriend()\">加为好友</el-button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport HeadImage from './HeadImage.vue'\n\nexport default {\n\tname: \"userInfo\",\n\tcomponents: {\n\t\tHeadImage\n\t},\n\tdata() {\n\t\treturn {\n\n\t\t}\n\t},\n\tprops: {\n\t\tuser: {\n\t\t\ttype: Object\n\t\t},\n\t\tpos: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tmethods: {\n\t\tonSendMessage() {\n\t\t\tlet user = this.user;\n\t\t\tlet chat = {\n\t\t\t\ttype: 'PRIVATE',\n\t\t\t\ttargetId: user.id,\n\t\t\t\tshowName: user.nickName,\n\t\t\t\theadImage: user.headImage,\n\t\t\t};\n\t\t\tthis.$store.commit(\"openChat\", chat);\n\t\t\tthis.$store.commit(\"activeChat\", 0);\n\t\t\tif (this.$route.path != \"/home/chat\") {\n\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t}\n\t\t\tthis.$emit(\"close\");\n\t\t},\n\t\tonAddFriend() {\n\t\t\tthis.$http({\n\t\t\t\turl: \"/friend/add\",\n\t\t\t\tmethod: \"post\",\n\t\t\t\tparams: {\n\t\t\t\t\tfriendId: this.user.id\n\t\t\t\t}\n\t\t\t}).then(() => {\n\t\t\t\tthis.$message.success(\"添加成功，对方已成为您的好友\");\n\t\t\t\tlet friend = {\n\t\t\t\t\tid: this.user.id,\n\t\t\t\t\tnickName: this.user.nickName,\n\t\t\t\t\theadImage: this.user.headImageThumb,\n\t\t\t\t\tonline: this.user.online,\n\t\t\t\t\tdeleted: false\n\t\t\t\t}\n\t\t\t\tthis.$store.commit(\"addFriend\", friend);\n\t\t\t})\n\t\t},\n\t\tshowFullImage() {\n\t\t\tif (this.user.headImage) {\n\t\t\t\tthis.$store.commit(\"showFullImageBox\", this.user.headImage);\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tisFriend() {\n\t\t\treturn this.$store.getters.isFriend(this.user.id);\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.user-info-mask {\n\tbackground-color: rgba($color: #000000, $alpha: 0);\n\tposition: fixed;\n\tleft: 0;\n\ttop: 0;\n\tright: 0;\n\tbottom: 0;\n}\n\n.user-info {\n\tposition: absolute;\n\twidth: 300px;\n\tbackground-color: white;\n\tbox-shadow: var(--im-box-shadow);\n\tborder-radius: 4px;\n\tpadding: 15px;\n\n\t.user-info-box {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\n\t\t.user-info-items {\n\t\t\tmargin-left: 10px;\n\t\t\twhite-space: nowrap;\n\t\t\toverflow: hidden;\n\n\t\t\t.el-descriptions__header {\n\t\t\t\tmargin-bottom: 5px;\n\t\t\t}\n\n\t\t\t.el-descriptions__title {\n\t\t\t\tfont-size: 18px;\n\t\t\t}\n\n\t\t\t.el-descriptions-item__cell {\n\t\t\t\tpadding-bottom: 1px;\n\t\t\t}\n\t\t}\n\t}\n\n\t.el-divider--horizontal {\n\t\tmargin: 18px 0;\n\t}\n\n\t.user-btn-group {\n\t\ttext-align: center;\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UserInfo.vue?vue&type=template&id=34d33158\"\nimport script from \"./UserInfo.vue?vue&type=script&lang=js\"\nexport * from \"./UserInfo.vue?vue&type=script&lang=js\"\nimport style0 from \"./UserInfo.vue?vue&type=style&index=0&id=34d33158&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"full-image\",attrs:{\"before-close\":_vm.onClose,\"modal\":true}},[_c('div',{staticClass:\"mask\"}),_c('div',{staticClass:\"image-box\"},[_c('img',{attrs:{\"src\":_vm.url}})]),_c('div',{staticClass:\"close\",on:{\"click\":_vm.onClose}},[_c('i',{staticClass:\"el-icon-close\"})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"full-image\" v-show=\"visible\" :before-close=\"onClose\" :modal=\"true\">\n\t\t<div class=\"mask\"></div>\n\t\t<div class=\"image-box\">\n\t\t\t<img :src=\"url\" />\n\t\t</div>\n\t\t<div class=\"close\" @click=\"onClose\"><i class=\"el-icon-close\"></i></div>\n\t</div>\n</template>\n\n<script>\nexport default {\n\tname: \"fullImage\",\n\tdata() {\n\t\treturn {\n\t\t\tfit: 'contain'\n\t\t}\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit(\"close\");\n\t\t}\n\t},\n\tprops: {\n\t\tvisible: {\n\t\t\ttype: Boolean\n\t\t},\n\t\turl: {\n\t\t\ttype: String\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.full-image {\n\tposition: fixed;\n\twidth: 100%;\n\theight: 100%;\n\tleft: 0;\n\ttop: 0;\n\tbottom: 0;\n\tright: 0;\n\n\t.mask {\n\t\tposition: fixed;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground: black;\n\t\topacity: 0.5;\n\n\t}\n\n\t.image-box {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 100%;\n\n\t\timg {\n\t\t\tposition: absolute;\n\t\t\tleft: 50%;\n\t\t\ttop: 50%;\n\t\t\ttransform: translate(-50%, -50%);\n\t\t\tmax-height: 100%;\n\t\t\tmax-width: 100%;\n\t\t}\n\t}\n\n\t.close {\n\t\tposition: fixed;\n\t\ttop: 10px;\n\t\tright: 10px;\n\t\tcolor: white;\n\t\tfont-size: 25px;\n\t\tcursor: pointer;\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FullImage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FullImage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FullImage.vue?vue&type=template&id=4393d12e\"\nimport script from \"./FullImage.vue?vue&type=script&lang=js\"\nexport * from \"./FullImage.vue?vue&type=script&lang=js\"\nimport style0 from \"./FullImage.vue?vue&type=style&index=0&id=4393d12e&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('el-dialog',{directives:[{name:\"dialogDrag\",rawName:\"v-dialogDrag\"}],attrs:{\"top\":\"5vh\",\"custom-class\":\"rtc-private-video-dialog\",\"title\":_vm.title,\"width\":_vm.width,\"visible\":_vm.showRoom,\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"before-close\":_vm.onQuit},on:{\"update:visible\":function($event){_vm.showRoom=$event}}},[_c('div',{staticClass:\"rtc-private-video\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isVideo),expression:\"isVideo\"}],staticClass:\"rtc-video-box\"},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(!_vm.isChating),expression:\"!isChating\"}],staticClass:\"rtc-video-friend\",attrs:{\"element-loading-text\":\"等待对方接听...\",\"element-loading-background\":\"rgba(0, 0, 0, 0.1)\"}},[_c('head-image',{staticClass:\"friend-head-image\",attrs:{\"id\":_vm.friend.id,\"size\":80,\"name\":_vm.friend.nickName,\"url\":_vm.friend.headImage,\"isShowUserInfo\":false,\"radius\":\"0\"}}),_c('video',{ref:\"remoteVideo\",attrs:{\"autoplay\":\"\"}})],1),_c('div',{staticClass:\"rtc-video-mine\"},[_c('video',{ref:\"localVideo\",attrs:{\"autoplay\":\"\"}})])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isVideo),expression:\"!isVideo\"},{name:\"loading\",rawName:\"v-loading\",value:(!_vm.isChating),expression:\"!isChating\"}],staticClass:\"rtc-voice-box\",attrs:{\"element-loading-text\":\"等待对方接听...\",\"element-loading-background\":\"rgba(0, 0, 0, 0.1)\"}},[_c('head-image',{staticClass:\"friend-head-image\",attrs:{\"id\":_vm.friend.id,\"size\":200,\"name\":_vm.friend.nickName,\"url\":_vm.friend.headImage,\"isShowUserInfo\":false}},[_c('div',{staticClass:\"rtc-voice-name\"},[_vm._v(_vm._s(_vm.friend.nickName))])])],1),_c('div',{staticClass:\"rtc-control-bar\"},[_c('div',{staticClass:\"icon iconfont icon-phone-reject reject\",staticStyle:{\"color\":\"red\"},attrs:{\"title\":\"取消\"},on:{\"click\":function($event){return _vm.onQuit()}}})])])]),(!_vm.isHost && _vm.isWaiting)?_c('rtc-private-acceptor',{ref:\"acceptor\",attrs:{\"friend\":_vm.friend,\"mode\":_vm.mode},on:{\"accept\":_vm.onAccept,\"reject\":_vm.onReject}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"rtc-private-acceptor\"},[_c('head-image',{attrs:{\"id\":_vm.friend.id,\"name\":_vm.friend.nickName,\"url\":_vm.friend.headImage,\"size\":100,\"isShowUserInfo\":false}}),_c('div',{staticClass:\"acceptor-text\"},[_vm._v(\" \"+_vm._s(_vm.tip)+\" \")]),_c('div',{staticClass:\"acceptor-btn-group\"},[_c('div',{staticClass:\"icon iconfont icon-phone-accept accept\",attrs:{\"title\":\"接受\"},on:{\"click\":function($event){return _vm.$emit('accept')}}}),_c('div',{staticClass:\"icon iconfont icon-phone-reject reject\",attrs:{\"title\":\"拒绝\"},on:{\"click\":function($event){return _vm.$emit('reject')}}})])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"rtc-private-acceptor\">\n\t\t<head-image :id=\"friend.id\" :name=\"friend.nickName\" :url=\"friend.headImage\" :size=\"100\"\n\t\t\t:isShowUserInfo=\"false\"></head-image>\n\t\t<div class=\"acceptor-text\">\n\t\t\t{{ tip }}\n\t\t</div>\n\t\t<div class=\"acceptor-btn-group\">\n\t\t\t<div class=\"icon iconfont icon-phone-accept accept\" @click=\"$emit('accept')\" title=\"接受\"></div>\n\t\t\t<div class=\"icon iconfont icon-phone-reject reject\" @click=\"$emit('reject')\" title=\"拒绝\"></div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport HeadImage from '../common/HeadImage.vue';\n\nexport default {\n\tname: \"rtcPrivateAcceptor\",\n\tcomponents: {\n\t\tHeadImage\n\t},\n\tdata() {\n\t\treturn {}\n\t},\n\tprops: {\n\t\tmode: {\n\t\t\ttype: String\n\t\t},\n\t\tfriend: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tcomputed: {\n\t\ttip() {\n\t\t\tlet modeText = this.mode == \"video\" ? \"视频\" : \"语音\"\n\t\t\treturn `${this.friend.nickName} 请求和您进行${modeText}通话...`\n\t\t}\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n.rtc-private-acceptor {\n\tposition: absolute;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tright: 5px;\n\tbottom: 5px;\n\twidth: 250px;\n\theight: 250px;\n\tpadding: 20px;\n\tbackground-color: #fff;\n\tbox-shadow: var(--im-box-shadow-dark);\n\tborder-radius: 4px;\n\n\t.acceptor-text {\n\t\tpadding: 10px;\n\t\ttext-align: center;\n\t\tfont-size: 16px;\n\t}\n\n\t.acceptor-btn-group {\n\t\tdisplay: flex;\n\t\tjustify-content: space-around;\n\t\tmargin-top: 20px;\n\t\twidth: 100%;\n\n\t\t.icon {\n\t\t\tfont-size: 60px;\n\t\t\tcursor: pointer;\n\t\t\tborder-radius: 50%;\n\n\t\t\t&.accept {\n\t\t\t\tcolor: green;\n\t\t\t\tanimation: anim 2s ease-in infinite, vibration 2s ease-in infinite;\n\n\t\t\t\t@keyframes anim {\n\t\t\t\t\t0% {\n\t\t\t\t\t\tbox-shadow: 0 1px 0 4px #ffffff;\n\t\t\t\t\t}\n\n\t\t\t\t\t10% {\n\t\t\t\t\t\tbox-shadow: 0 1px 0 8px rgba(255, 165, 0, 1);\n\t\t\t\t\t}\n\n\t\t\t\t\t25% {\n\t\t\t\t\t\tbox-shadow: 0 1px 0 12px rgba(255, 210, 128, 1), 0 1px 0 16px rgba(255, 201, 102, 1);\n\t\t\t\t\t}\n\n\t\t\t\t\t50% {\n\t\t\t\t\t\tbox-shadow: 0 2px 5px 10px rgba(255, 184, 51, 1), 0 2px 5px 23px rgba(248, 248, 255, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t@keyframes vibration {\n\t\t\t\t\t0% {\n\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t}\n\n\t\t\t\t\t25% {\n\t\t\t\t\t\ttransform: rotate(20deg);\n\t\t\t\t\t}\n\n\t\t\t\t\t50% {\n\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t}\n\n\t\t\t\t\t75% {\n\t\t\t\t\t\ttransform: rotate(-15deg);\n\t\t\t\t\t}\n\n\t\t\t\t\t100% {\n\t\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t&.reject {\n\t\t\t\tcolor: red;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcPrivateAcceptor.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcPrivateAcceptor.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RtcPrivateAcceptor.vue?vue&type=template&id=3908b535&scoped=true\"\nimport script from \"./RtcPrivateAcceptor.vue?vue&type=script&lang=js\"\nexport * from \"./RtcPrivateAcceptor.vue?vue&type=script&lang=js\"\nimport style0 from \"./RtcPrivateAcceptor.vue?vue&type=style&index=0&id=3908b535&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3908b535\",\n  null\n  \n)\n\nexport default component.exports","\nclass ImWebRtc {\n\tconstructor() {\n\t\tthis.configuration = {}\n\t\tthis.stream = null;\n\t}\n}\n\nImWebRtc.prototype.isEnable = function () {\n\twindow.RTCPeerConnection = window.RTCPeerConnection || window.webkitRTCPeerConnection || window\n\t\t.mozRTCPeerConnection;\n\twindow.RTCSessionDescription = window.RTCSessionDescription || window.webkitRTCSessionDescription || window\n\t\t.mozRTCSessionDescription;\n\twindow.RTCIceCandidate = window.RTCIceCandidate || window.webkitRTCIceCandidate || window\n\t\t.mozRTCIceCandidate;\n\treturn !!window.RTCPeerConnection;\n}\n\nImWebRtc.prototype.init = function (configuration) {\n\tthis.configuration = configuration;\n}\n\nImWebRtc.prototype.setupPeerConnection = function (callback) {\n\tthis.peerConnection = new RTCPeerConnection(this.configuration);\n\tthis.peerConnection.ontrack = (e) => {\n\t\t// 对方的视频流\n\t\tcallback(e.streams[0]);\n\t};\n}\n\n\nImWebRtc.prototype.setStream = function (stream) {\n\tif (this.stream) {\n\t\tthis.peerConnection.removeStream(this.stream)\n\t}\n\tif (stream) {\n\t\tstream.getTracks().forEach((track) => {\n\t\t\tthis.peerConnection.addTrack(track, stream);\n\t\t});\n\t}\n\tthis.stream = stream;\n}\n\n\nImWebRtc.prototype.onIcecandidate = function (callback) {\n\tthis.peerConnection.onicecandidate = (event) => {\n\t\t// 追踪到候选信息\n\t\tif (event.candidate) {\n\t\t\tcallback(event.candidate)\n\t\t}\n\t}\n}\n\nImWebRtc.prototype.onStateChange = function (callback) {\n\t// 监听连接状态\n\tthis.peerConnection.oniceconnectionstatechange = (event) => {\n\t\tlet state = event.target.iceConnectionState;\n\t\tconsole.log(\"ICE连接状态变化: : \" + state)\n\t\tcallback(state)\n\t};\n}\n\nImWebRtc.prototype.createOffer = function () {\n\treturn new Promise((resolve, reject) => {\n\t\tconst offerParam = {};\n\t\tofferParam.offerToRecieveAudio = 1;\n\t\tofferParam.offerToRecieveVideo = 1;\n\t\t// 创建本地sdp信息\n\t\tthis.peerConnection.createOffer(offerParam).then((offer) => {\n\t\t\t// 设置本地sdp信息\n\t\t\tthis.peerConnection.setLocalDescription(offer);\n\t\t\t// 发起呼叫请求\n\t\t\tresolve(offer)\n\t\t}).catch((e) => {\n\t\t\treject(e)\n\t\t})\n\t});\n}\n\n\nImWebRtc.prototype.createAnswer = function (offer) {\n\treturn new Promise((resolve, reject) => {\n\t\t// 设置远端的sdp\n\t\tthis.setRemoteDescription(offer);\n\t\t// 创建本地dsp\n\t\tconst offerParam = {};\n\t\tofferParam.offerToRecieveAudio = 1;\n\t\tofferParam.offerToRecieveVideo = 1;\n\t\tthis.peerConnection.createAnswer(offerParam).then((answer) => {\n\t\t\t// 设置本地sdp信息\n\t\t\tthis.peerConnection.setLocalDescription(answer);\n\t\t\t// 接受呼叫请求\n\t\t\tresolve(answer)\n\t\t}).catch((e) => {\n\t\t\treject(e)\n\t\t})\n\t});\n}\n\nImWebRtc.prototype.setRemoteDescription = function (offer) {\n\t// 设置对方的sdp信息\n\tthis.peerConnection.setRemoteDescription(new RTCSessionDescription(offer));\n}\n\nImWebRtc.prototype.addIceCandidate = function (candidate) {\n\t// 添加对方的候选人信息\n\tthis.peerConnection.addIceCandidate(new RTCIceCandidate(candidate));\n}\n\nImWebRtc.prototype.close = function (uid) {\n\t// 关闭RTC连接\n\tif (this.peerConnection) {\n\t\tthis.peerConnection.close();\n\t\tthis.peerConnection.onicecandidate = null;\n\t\tthis.peerConnection.onaddstream = null;\n\t\tthis.peerConnection = null;\n\t}\n}\n\nexport default ImWebRtc;","\nclass ImCamera {\n\tconstructor() {\n\t\tthis.stream = null;\n\t}\n}\n\nImCamera.prototype.isEnable = function () {\n\treturn !!navigator && !!navigator.mediaDevices && !!navigator.mediaDevices.getUserMedia;\n}\n\nImCamera.prototype.openVideo = function () {\n\treturn new Promise((resolve, reject) => {\n\t\tif (this.stream) {\n\t\t\tthis.close()\n\t\t}\n\t\tlet constraints = {\n\t\t\tvideo: true,\n\t\t\taudio: {\n\t\t\t\techoCancellation: true, //音频开启回音消除\n\t\t\t\tnoiseSuppression: true // 开启降噪\n\t\t\t}\n\t\t}\n\t\tconsole.log(\"getUserMedia\")\n\t\tnavigator.mediaDevices.getUserMedia(constraints).then((stream) => {\n\t\t\tconsole.log(\"摄像头打开\")\n\t\t\tthis.stream = stream;\n\t\t\tresolve(stream);\n\t\t}).catch((e) => {\n\t\t\tconsole.log(e)\n\t\t\tconsole.log(\"摄像头未能正常打开\")\n\t\t\treject({\n\t\t\t\tcode: 0,\n\t\t\t\tmessage: \"摄像头未能正常打开\"\n\t\t\t})\n\t\t})\n\t})\n}\n\n\nImCamera.prototype.openAudio = function () {\n\treturn new Promise((resolve, reject) => {\n\t\tlet constraints = {\n\t\t\tvideo: false,\n\t\t\taudio: {\n\t\t\t\techoCancellation: true, //音频开启回音消除\n\t\t\t\tnoiseSuppression: true // 开启降噪\n\t\t\t}\n\t\t}\n\t\tnavigator.mediaDevices.getUserMedia(constraints).then((stream) => {\n\t\t\tthis.stream = stream;\n\t\t\tresolve(stream);\n\t\t}).catch(() => {\n\t\t\tconsole.log(\"麦克风未能正常打开\")\n\t\t\treject({\n\t\t\t\tcode: 0,\n\t\t\t\tmessage: \"麦克风未能正常打开\"\n\t\t\t})\n\t\t})\n\n\t})\n}\n\nImCamera.prototype.close = function () {\n\t// 停止流\n\tif (this.stream) {\n\t\tthis.stream.getTracks().forEach((track) => {\n\t\t\ttrack.stop();\n\t\t});\n\t}\n}\n\nexport default ImCamera;","import axios from 'axios'\n\nimport { Message } from 'element-ui'\n\nconst http = axios.create({\n\tbaseURL: process.env.VUE_APP_BASE_API,\n\ttimeout: 1000 * 30,\n\twithCredentials: true\n})\n\n// 用于存储正在进行的刷新token请求\nlet refreshTokenPromise = null\n\n/**\n * 安全获取token的函数 - 兼容VSCode webview环境\n */\nfunction getToken(key) {\n\ttry {\n\t\t// 首先尝试从sessionStorage获取\n\t\tlet token = sessionStorage.getItem(key);\n\t\tif (token) {\n\t\t\treturn token;\n\t\t}\n\t\t\n\t\t// 如果在VSCode环境中，尝试从VSCode服务获取\n\t\tif (window.vscodeServices && window.vscodeServices.get) {\n\t\t\ttry {\n\t\t\t\tconst userStateService = window.vscodeServices.get('IUserStateService');\n\t\t\t\tif (userStateService && userStateService.currentUser) {\n\t\t\t\t\tconst user = userStateService.currentUser;\n\t\t\t\t\tif (key === 'accessToken' && user.accessToken) {\n\t\t\t\t\t\treturn user.accessToken;\n\t\t\t\t\t}\n\t\t\t\t\tif (key === 'refreshToken' && user.refreshToken) {\n\t\t\t\t\t\treturn user.refreshToken;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (vscodeError) {\n\t\t\t\tconsole.warn('[HttpRequest] Failed to get token from VSCode services:', vscodeError);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn null;\n\t} catch (error) {\n\t\tconsole.warn('[HttpRequest] Failed to get token:', error);\n\t\treturn null;\n\t}\n}\n\n/**\n * 安全设置token的函数 - 兼容VSCode webview环境\n */\nfunction setToken(key, value) {\n\ttry {\n\t\t// 设置到sessionStorage\n\t\tsessionStorage.setItem(key, value);\n\t\t\n\t\t// 如果在VSCode环境中，同步到VSCode服务\n\t\tif (window.vscodeServices && window.vscodeServices.get) {\n\t\t\ttry {\n\t\t\t\tconst userStateService = window.vscodeServices.get('IUserStateService');\n\t\t\t\tif (userStateService && userStateService.currentUser) {\n\t\t\t\t\tconst user = userStateService.currentUser;\n\t\t\t\t\tif (key === 'accessToken') {\n\t\t\t\t\t\tuser.accessToken = value;\n\t\t\t\t\t}\n\t\t\t\t\tif (key === 'refreshToken') {\n\t\t\t\t\t\tuser.refreshToken = value;\n\t\t\t\t\t}\n\t\t\t\t\tconsole.log('[HttpRequest] Token synced to VSCode services');\n\t\t\t\t}\n\t\t\t} catch (vscodeError) {\n\t\t\t\tconsole.warn('[HttpRequest] Failed to sync token to VSCode services:', vscodeError);\n\t\t\t}\n\t\t}\n\t} catch (error) {\n\t\tconsole.error('[HttpRequest] Failed to set token:', error);\n\t}\n}\n\n/**\n * 请求拦截\n */\nhttp.interceptors.request.use(config => {\n\tlet accessToken = getToken(\"accessToken\");\n\tif (accessToken) {\n\t\tconfig.headers.accessToken = encodeURIComponent(accessToken);\n\t}\n\treturn config\n}, error => {\n\treturn Promise.reject(error)\n})\n\n/**\n * 响应拦截\n */\nhttp.interceptors.response.use(async response => {\n\tif (response.data.code == 200) {\n\t\treturn response.data.data;\n\t} else if (response.data.code == 400) {\n\t\tlocation.href = \"/\";\n\t} else if (response.data.code == 401) {\n\t\tconsole.log(\"token失效，尝试重新获取\")\n\t\tlet refreshToken = getToken(\"refreshToken\");\n\t\tif (!refreshToken) {\n\t\t\tlocation.href = \"/\";\n\t\t\treturn Promise.reject(response.data);\n\t\t}\n\t\t\n\t\t// 如果已经有一个正在进行的刷新token请求，等待它完成\n\t\tif (refreshTokenPromise) {\n\t\t\tconsole.log(\"等待已有的刷新token请求完成\");\n\t\t\ttry {\n\t\t\t\tawait refreshTokenPromise;\n\t\t\t\t// 刷新完成后，使用新的token重试请求\n\t\t\t\tconst newAccessToken = getToken(\"accessToken\");\n\t\t\t\tresponse.config.headers.accessToken = encodeURIComponent(newAccessToken);\n\t\t\t\treturn http(response.config);\n\t\t\t} catch (error) {\n\t\t\t\t// 刷新失败，跳转到登录页\n\t\t\t\tlocation.href = \"/\";\n\t\t\t\treturn Promise.reject(error);\n\t\t\t}\n\t\t}\n\t\t\n\t\t// 创建新的刷新token请求\n\t\trefreshTokenPromise = (async () => {\n\t\t\ttry {\n\t\t\t\tconst data = await http({\n\t\t\t\t\tmethod: 'put',\n\t\t\t\t\turl: '/refreshToken',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\trefreshToken: refreshToken\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 保存新的token\n\t\t\t\tsetToken(\"accessToken\", data.accessToken);\n\t\t\t\tsetToken(\"refreshToken\", data.refreshToken);\n\t\t\t\tconsole.log(\"token刷新成功\");\n\t\t\t\t\n\t\t\t\t/* // 同步更新 VSCode 的 token\n\t\t\t\tif (window.vscodeServices) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst userStateService = window.vscodeServices.get('IUserStateService');\n\t\t\t\t\t\tconst currentUser = userStateService.currentUser;\n\t\t\t\t\t\tif (currentUser) {\n\t\t\t\t\t\t\t// 更新用户信息中的 token\n\t\t\t\t\t\t\tcurrentUser.accessToken = data.accessToken;\n\t\t\t\t\t\t\t// 通知 VSCode 更新用户状态\n\t\t\t\t\t\t\tawait userStateService.login(currentUser, data.accessToken, data.refreshToken);\n\t\t\t\t\t\t\tconsole.log(\"VSCode token 同步更新成功\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error(\"VSCode token 同步更新失败:\", error);\n\t\t\t\t\t\t// 即使同步失败，也不影响正常的请求重试\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 重新初始化 IM 组件\n\t\t\t\t// 触发事件让 Inbox 组件重新初始化\n\t\t\t\tconst tokenRefreshEvent = new CustomEvent('im:token:refreshed', {\n\t\t\t\t\tdetail: {\n\t\t\t\t\t\taccessToken: data.accessToken,\n\t\t\t\t\t\trefreshToken: data.refreshToken\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\twindow.dispatchEvent(tokenRefreshEvent);\n\t\t\t\tconsole.log(\"触发 IM 重新初始化事件\"); */\n\t\t\t\t\n\t\t\t\treturn data;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(\"刷新token失败，token已失效，需要重新登录\");\n\t\t\t\t/* // 调用 VSCode 的 logout\n\t\t\t\tif (window.vscodeServices) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst userStateService = window.vscodeServices.get('IUserStateService');\n\t\t\t\t\t\tawait userStateService.logout();\n\t\t\t\t\t\tconsole.log(\"VSCode logout 调用成功\");\n\t\t\t\t\t} catch (logoutError) {\n\t\t\t\t\t\tconsole.error(\"VSCode logout 调用失败:\", logoutError);\n\t\t\t\t\t}\n\t\t\t\t} */\n\t\t\t\tthrow error;\n\t\t\t} finally {\n\t\t\t\t// 清除promise缓存\n\t\t\t\trefreshTokenPromise = null;\n\t\t\t}\n\t\t})();\n\t\t\n\t\t// 等待刷新完成\n\t\ttry {\n\t\t\tawait refreshTokenPromise;\n\t\t\t// 使用新的token重试请求\n\t\t\tconst newAccessToken = getToken(\"accessToken\");\n\t\t\tresponse.config.headers.accessToken = encodeURIComponent(newAccessToken);\n\t\t\treturn http(response.config);\n\t\t} catch (error) {\n\t\t\t// 刷新失败，跳转到登录页\n\t\t\tlocation.href = \"/\";\n\t\t\treturn Promise.reject(error);\n\t\t}\n\t} else {\n\t\tMessage({\n\t\t\tmessage: response.data.message,\n\t\t\ttype: 'error',\n\t\t\tduration: 1500,\n\t\t\tcustomClass: 'element-error-message-zindex'\n\t\t})\n\t\treturn Promise.reject(response.data)\n\t}\n}, async error => {\n\t// 处理网络错误或无响应的情况\n\tif (!error.response) {\n\t\tMessage({\n\t\t\tmessage: '网络连接失败',\n\t\t\ttype: 'error',\n\t\t\tduration: 1500,\n\t\t\tcustomClass: 'element-error-message-zindex'\n\t\t})\n\t\treturn Promise.reject(error)\n\t}\n\t\n\tswitch (error.response.status) {\n\t\tcase 400:\n\t\t\tMessage({\n\t\t\t\tmessage: error.response.data,\n\t\t\t\ttype: 'error',\n\t\t\t\tduration: 1500,\n\t\t\t\tcustomClass: 'element-error-message-zindex'\n\t\t\t})\n\t\t\tbreak\n\t\tcase 401: {\n\t\t\tconsole.log(\"HTTP 401错误，尝试刷新token\")\n\t\t\tconst refreshToken = getToken(\"refreshToken\");\n\t\t\tif (!refreshToken) {\n\t\t\t\tlocation.href = \"/\";\n\t\t\t\treturn Promise.reject(error);\n\t\t\t}\n\t\t\t\n\t\t\t// 如果已经有一个正在进行的刷新token请求，等待它完成\n\t\t\tif (refreshTokenPromise) {\n\t\t\t\tconsole.log(\"等待已有的刷新token请求完成\");\n\t\t\t\ttry {\n\t\t\t\t\tawait refreshTokenPromise;\n\t\t\t\t\t// 刷新完成后，使用新的token重试请求\n\t\t\t\t\tconst newAccessToken = getToken(\"accessToken\");\n\t\t\t\t\terror.config.headers.accessToken = encodeURIComponent(newAccessToken);\n\t\t\t\t\treturn http(error.config);\n\t\t\t\t} catch (refreshError) {\n\t\t\t\t\t// 刷新失败，跳转到登录页\n\t\t\t\t\tlocation.href = \"/\";\n\t\t\t\t\treturn Promise.reject(refreshError);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 创建新的刷新token请求\n\t\t\trefreshTokenPromise = (async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst data = await http({\n\t\t\t\t\t\tmethod: 'put',\n\t\t\t\t\t\turl: '/refreshToken',\n\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\trefreshToken: refreshToken\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// 保存新的token\n\t\t\t\t\tsetToken(\"accessToken\", data.accessToken);\n\t\t\t\t\tsetToken(\"refreshToken\", data.refreshToken);\n\t\t\t\t\tconsole.log(\"token刷新成功\");\n\t\t\t\t\t\n\t\t\t\t\treturn data;\n\t\t\t\t} catch (refreshError) {\n\t\t\t\t\tconsole.log(\"刷新token失败，token已失效，需要重新登录\");\n\t\t\t\t\tthrow refreshError;\n\t\t\t\t} finally {\n\t\t\t\t\t// 清除promise缓存\n\t\t\t\t\trefreshTokenPromise = null;\n\t\t\t\t}\n\t\t\t})();\n\t\t\t\n\t\t\t// 等待刷新完成\n\t\t\ttry {\n\t\t\t\tawait refreshTokenPromise;\n\t\t\t\t// 使用新的token重试请求\n\t\t\t\tconst newAccessToken = getToken(\"accessToken\");\n\t\t\t\terror.config.headers.accessToken = encodeURIComponent(newAccessToken);\n\t\t\t\treturn http(error.config);\n\t\t\t} catch (refreshError) {\n\t\t\t\t// 刷新失败，跳转到登录页\n\t\t\t\tlocation.href = \"/\";\n\t\t\t\treturn Promise.reject(refreshError);\n\t\t\t}\n\t\t}\n\t\t// 401处理中已经return，不需要break\n\t\tcase 405:\n\t\t\tMessage({\n\t\t\t\tmessage: 'http请求方式有误',\n\t\t\t\ttype: 'error',\n\t\t\t\tduration: 1500,\n\t\t\t\tcustomClass: 'element-error-message-zindex'\n\t\t\t})\n\t\t\tbreak\n\t\tcase 404:\n\t\tcase 500:\n\t\t\tMessage({\n\t\t\t\tmessage: '服务器出了点小差，请稍后再试',\n\t\t\t\ttype: 'error',\n\t\t\t\tduration: 1500,\n\t\t\t\tcustomClass: 'element-error-message-zindex'\n\t\t\t})\n\t\t\tbreak\n\t\tcase 501:\n\t\t\tMessage({\n\t\t\t\tmessage: '服务器不支持当前请求所需要的某个功能',\n\t\t\t\ttype: 'error',\n\t\t\t\tduration: 1500,\n\t\t\t\tcustomClass: 'element-error-message-zindex'\n\t\t\t})\n\t\t\tbreak\n\t}\n\n\treturn Promise.reject(error)\n})\n\n\nexport default http\n","import http from './httpRequest.js'\n\nclass RtcPrivateApi {\n}\n\nRtcPrivateApi.prototype.call = function (uid, mode, offer) {\n\treturn http({\n\t\turl: `/webrtc/private/call?uid=${uid}&mode=${mode}`,\n\t\tmethod: 'post',\n\t\tdata: JSON.stringify(offer),\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json; charset=utf-8'\n\t\t}\n\t})\n}\n\nRtcPrivateApi.prototype.accept = function (uid, answer) {\n\treturn http({\n\t\turl: `/webrtc/private/accept?uid=${uid}`,\n\t\tmethod: 'post',\n\t\tdata: JSON.stringify(answer),\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json; charset=utf-8'\n\t\t}\n\t})\n}\n\n\nRtcPrivateApi.prototype.handup = function (uid) {\n\treturn http({\n\t\turl: `/webrtc/private/handup?uid=${uid}`,\n\t\tmethod: 'post'\n\t})\n}\n\nRtcPrivateApi.prototype.cancel = function (uid) {\n\treturn http({\n\t\turl: `/webrtc/private/cancel?uid=${uid}`,\n\t\tmethod: 'post'\n\t})\n}\n\nRtcPrivateApi.prototype.reject = function (uid) {\n\treturn http({\n\t\turl: `/webrtc/private/reject?uid=${uid}`,\n\t\tmethod: 'post'\n\t})\n}\n\nRtcPrivateApi.prototype.failed = function (uid, reason) {\n\treturn http({\n\t\turl: `/webrtc/private/failed?uid=${uid}&reason=${reason}`,\n\t\tmethod: 'post'\n\t})\n}\n\nRtcPrivateApi.prototype.sendCandidate = function (uid, candidate) {\n\treturn http({\n\t\turl: `/webrtc/private/candidate?uid=${uid}`,\n\t\tmethod: 'post',\n\t\tdata: JSON.stringify(candidate),\n\t\theaders: {\n\t\t\t'Content-Type': 'application/json; charset=utf-8'\n\t\t}\n\t});\n}\n\nRtcPrivateApi.prototype.heartbeat = function (uid) {\n\treturn http({\n\t\turl: `/webrtc/private/heartbeat?uid=${uid}`,\n\t\tmethod: 'post'\n\t})\n}\n\nexport default RtcPrivateApi;","<template>\n  <div>\n    <el-dialog v-dialogDrag top=\"5vh\" custom-class=\"rtc-private-video-dialog\" :title=\"title\" :width=\"width\"\n      :visible.sync=\"showRoom\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\" :before-close=\"onQuit\">\n      <div class=\"rtc-private-video\">\n        <div v-show=\"isVideo\" class=\"rtc-video-box\">\n          <div class=\"rtc-video-friend\" v-loading=\"!isChating\" element-loading-text=\"等待对方接听...\"\n            element-loading-background=\"rgba(0, 0, 0, 0.1)\">\n            <head-image class=\"friend-head-image\" :id=\"friend.id\" :size=\"80\" :name=\"friend.nickName\"\n              :url=\"friend.headImage\" :isShowUserInfo=\"false\" radius=\"0\">\n            </head-image>\n            <video ref=\"remoteVideo\" autoplay=\"\"></video>\n          </div>\n          <div class=\"rtc-video-mine\">\n            <video ref=\"localVideo\" autoplay=\"\"></video>\n          </div>\n        </div>\n        <div v-show=\"!isVideo\" class=\"rtc-voice-box\" v-loading=\"!isChating\" element-loading-text=\"等待对方接听...\"\n          element-loading-background=\"rgba(0, 0, 0, 0.1)\">\n          <head-image class=\"friend-head-image\" :id=\"friend.id\" :size=\"200\" :name=\"friend.nickName\"\n            :url=\"friend.headImage\" :isShowUserInfo=\"false\">\n            <div class=\"rtc-voice-name\">{{ friend.nickName }}</div>\n          </head-image>\n        </div>\n        <div class=\"rtc-control-bar\">\n          <div title=\"取消\" class=\"icon iconfont icon-phone-reject reject\" style=\"color: red;\" @click=\"onQuit()\"></div>\n        </div>\n      </div>\n    </el-dialog>\n    <rtc-private-acceptor v-if=\"!isHost && isWaiting\" ref=\"acceptor\" :friend=\"friend\" :mode=\"mode\" @accept=\"onAccept\"\n      @reject=\"onReject\"></rtc-private-acceptor>\n  </div>\n</template>\n\n<script>\nimport HeadImage from '../common/HeadImage.vue';\nimport RtcPrivateAcceptor from './RtcPrivateAcceptor.vue';\nimport ImWebRtc from '@/api/webrtc';\nimport ImCamera from '@/api/camera';\nimport RtcPrivateApi from '@/api/rtcPrivateApi'\n\nexport default {\n  name: 'rtcPrivateVideo',\n  components: {\n    HeadImage,\n    RtcPrivateAcceptor\n  },\n  data() {\n    return {\n      camera: new ImCamera(), // 摄像头和麦克风\n      webrtc: new ImWebRtc(), // webrtc相关\n      API: new RtcPrivateApi(), // API\n      audio: new Audio(), // 呼叫音频\n      showRoom: false,\n      friend: {},\n      isHost: false, // 是否发起人\n      state: \"CLOSE\", // CLOSE:关闭  WAITING:等待呼叫或接听 CHATING:聊天中  ERROR:出现异常\n      mode: 'video', // 模式 video:视频聊 voice:语音聊天\n      localStream: null, // 本地视频流\n      remoteStream: null, // 对方视频流\n      videoTime: 0,\n      videoTimer: null,\n      heartbeatTimer: null,\n      candidates: [],\n    }\n  },\n  methods: {\n    open(rtcInfo) {\n      this.showRoom = true;\n      this.mode = rtcInfo.mode;\n      this.isHost = rtcInfo.isHost;\n      this.friend = rtcInfo.friend;\n      if (this.isHost) {\n        this.onCall();\n      }\n    },\n    initAudio() {\n      let url = require(`@/assets/audio/call.wav`);\n      this.audio.src = url;\n      this.audio.loop = true;\n    },\n    initRtc() {\n      this.webrtc.init(this.configuration)\n      this.webrtc.setupPeerConnection((stream) => {\n        this.$refs.remoteVideo.srcObject = stream;\n        this.remoteStream = stream;\n      })\n      // 监听候选信息\n      this.webrtc.onIcecandidate((candidate) => {\n        if (this.state == \"CHATING\") {\n          // 连接已就绪,直接发送\n          this.API.sendCandidate(this.friend.id, candidate);\n        } else {\n          // 连接未就绪,缓存起来，连接后再发送\n          this.candidates.push(candidate)\n        }\n      })\n      // 监听连接成功状态\n      this.webrtc.onStateChange((state) => {\n        if (state == \"connected\") {\n          console.log(\"webrtc连接成功\")\n        } else if (state == \"disconnected\") {\n          console.log(\"webrtc连接断开\")\n        }\n      })\n    },\n    onCall() {\n      if (!this.checkDevEnable()) {\n        this.close();\n      }\n      // 初始化webrtc\n      this.initRtc();\n      // 启动心跳\n      this.startHeartBeat();\n      // 打开摄像头\n      this.openStream().then(() => {\n        this.webrtc.setStream(this.localStream);\n        this.webrtc.createOffer().then((offer) => {\n          // 发起呼叫\n          this.API.call(this.friend.id, this.mode, offer).then(() => {\n            // 直接进入聊天状态\n            this.state = \"WAITING\";\n            // 播放呼叫铃声\n            this.audio.play();\n          }).catch(() => {\n            this.close();\n          })\n        })\n      }).catch(() => {\n        // 呼叫方必须能打开摄像头，否则无法正常建立连接\n        this.close();\n      })\n    },\n    onAccept() {\n      if (!this.checkDevEnable()) {\n        this.API.failed(this.friend.id, \"对方设备不支持通话\")\n        this.close();\n        return;\n      }\n      // 进入房间\n      this.showRoom = true;\n      this.state = \"CHATING\";\n      // 停止呼叫铃声\n      this.audio.pause();\n      // 初始化webrtc\n      this.initRtc();\n      // 打开摄像头\n      this.openStream().finally(() => {\n        this.webrtc.setStream(this.localStream);\n        this.webrtc.createAnswer(this.offer).then((answer) => {\n          this.API.accept(this.friend.id, answer);\n          // 记录时长\n          this.startChatTime();\n          // 清理定时器\n          this.waitTimer && clearTimeout(this.waitTimer);\n        })\n      })\n    },\n    onReject() {\n      console.log(\"onReject\")\n      // 退出通话\n      this.API.reject(this.friend.id);\n      // 退出\n      this.close();\n    },\n    onHandup() {\n      this.API.handup(this.friend.id)\n      this.$message.success(\"您已挂断,通话结束\")\n      this.close();\n    },\n    onCancel() {\n      this.API.cancel(this.friend.id)\n      this.$message.success(\"已取消呼叫,通话结束\")\n      this.close();\n    },\n    onRTCMessage(msg) {\n      // 除了发起通话，如果在关闭状态就无需处理\n      if (msg.type != this.$enums.MESSAGE_TYPE.RTC_CALL_VOICE &&\n        msg.type != this.$enums.MESSAGE_TYPE.RTC_CALL_VIDEO &&\n        this.isClose) {\n        return;\n      }\n      // RTC信令处理\n      switch (msg.type) {\n        case this.$enums.MESSAGE_TYPE.RTC_CALL_VOICE:\n          this.onRTCCall(msg, 'voice')\n          break;\n        case this.$enums.MESSAGE_TYPE.RTC_CALL_VIDEO:\n          this.onRTCCall(msg, 'video')\n          break;\n        case this.$enums.MESSAGE_TYPE.RTC_ACCEPT:\n          this.onRTCAccept(msg)\n          break;\n        case this.$enums.MESSAGE_TYPE.RTC_REJECT:\n          this.onRTCReject(msg)\n          break;\n        case this.$enums.MESSAGE_TYPE.RTC_CANCEL:\n          this.onRTCCancel(msg)\n          break;\n        case this.$enums.MESSAGE_TYPE.RTC_FAILED:\n          this.onRTCFailed(msg)\n          break;\n        case this.$enums.MESSAGE_TYPE.RTC_HANDUP:\n          this.onRTCHandup(msg)\n          break;\n        case this.$enums.MESSAGE_TYPE.RTC_CANDIDATE:\n          this.onRTCCandidate(msg)\n          break;\n      }\n    },\n    onRTCCall(msg, mode) {\n      this.offer = JSON.parse(msg.content);\n      this.isHost = false;\n      this.mode = mode;\n      this.$http({\n        url: `/friend/find/${msg.sendId}`,\n        method: 'get'\n      }).then((friend) => {\n        this.friend = friend;\n        this.state = \"WAITING\";\n        this.audio.play();\n        this.startHeartBeat();\n        // 30s未接听自动挂掉\n        this.waitTimer = setTimeout(() => {\n          this.API.failed(this.friend.id, \"对方无应答\");\n          this.$message.error(\"您未接听\");\n          this.close();\n        }, 30000)\n      })\n    },\n    onRTCAccept(msg) {\n      if (msg.selfSend) {\n        // 在其他设备接听\n        this.$message.success(\"已在其他设备接听\");\n        this.close();\n      } else {\n        // 对方接受了的通话\n        let offer = JSON.parse(msg.content);\n        this.webrtc.setRemoteDescription(offer);\n        // 状态为聊天中\n        this.state = 'CHATING'\n        // 停止播放语音\n        this.audio.pause();\n        // 发送candidate\n        this.candidates.forEach((candidate) => {\n          this.API.sendCandidate(this.friend.id, candidate);\n        })\n        // 开始计时\n        this.startChatTime()\n      }\n    },\n    onRTCReject(msg) {\n      if (msg.selfSend) {\n        this.$message.success(\"已在其他设备拒绝\");\n        this.close();\n      } else {\n        this.$message.error(\"对方拒绝了您的通话请求\");\n        this.close();\n      }\n    },\n    onRTCFailed(msg) {\n      // 呼叫失败\n      this.$message.error(msg.content)\n      this.close();\n    },\n    onRTCCancel() {\n      // 对方取消通话\n      this.$message.success(\"对方取消了呼叫\");\n      this.close();\n    },\n    onRTCHandup() {\n      // 对方挂断\n      this.$message.success(\"对方已挂断\");\n      this.close();\n    },\n    onRTCCandidate(msg) {\n      let candidate = JSON.parse(msg.content);\n      this.webrtc.addIceCandidate(candidate);\n    },\n\n    openStream() {\n      return new Promise((resolve, reject) => {\n        if (this.isVideo) {\n          // 打开摄像头+麦克风\n          this.camera.openVideo().then((stream) => {\n            this.localStream = stream;\n            this.$nextTick(() => {\n              this.$refs.localVideo.srcObject = stream;\n              this.$refs.localVideo.muted = true;\n            })\n            resolve(stream);\n          }).catch((e) => {\n            this.$message.error(\"打开摄像头失败\")\n            console.log(\"本摄像头打开失败:\" + e.message)\n            reject(e);\n          })\n        } else {\n          // 打开麦克风\n          this.camera.openAudio().then((stream) => {\n            this.localStream = stream;\n            this.$refs.localVideo.srcObject = stream;\n            resolve(stream);\n          }).catch((e) => {\n            this.$message.error(\"打开麦克风失败\")\n            console.log(\"打开麦克风失败:\" + e.message)\n            reject(e);\n          })\n        }\n      })\n    },\n    startChatTime() {\n      this.videoTime = 0;\n      this.videoTimer && clearInterval(this.videoTimer);\n      this.videoTimer = setInterval(() => {\n        this.videoTime++;\n      }, 1000)\n    },\n    checkDevEnable() {\n      // 检测摄像头\n      if (!this.camera.isEnable()) {\n        this.message.error(\"访问摄像头失败\");\n        return false;\n      }\n      // 检测webrtc\n      if (!this.webrtc.isEnable()) {\n        this.message.error(\"初始化RTC失败，原因可能是: 1.服务器缺少ssl证书 2.您的设备不支持WebRTC\");\n        return false;\n      }\n      return true;\n    },\n    startHeartBeat() {\n      // 每15s推送一次心跳\n      this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n      this.heartbeatTimer = setInterval(() => {\n        this.API.heartbeat(this.friend.id);\n      }, 15000)\n    },\n    close() {\n      this.showRoom = false;\n      this.camera.close();\n      this.webrtc.close();\n      this.audio.pause();\n      this.videoTime = 0;\n      this.videoTimer && clearInterval(this.videoTimer);\n      this.heartbeatTimer && clearInterval(this.heartbeatTimer);\n      this.waitTimer && clearTimeout(this.waitTimer);\n      this.videoTimer = null;\n      this.heartbeatTimer = null;\n      this.waitTimer = null;\n      this.state = 'CLOSE';\n      this.candidates = [];\n    },\n    onQuit() {\n      if (this.isChating) {\n        this.onHandup()\n      } else if (this.isWaiting) {\n        this.onCancel();\n      } else {\n        this.close();\n      }\n    }\n  },\n  computed: {\n    width() {\n      return this.isVideo ? '960px' : '360px'\n    },\n    title() {\n      let strTitle = `${this.modeText}通话-${this.friend.nickName}`;\n      if (this.isChating) {\n        strTitle += `(${this.currentTime})`;\n      } else if (this.isWaiting) {\n        strTitle += `(呼叫中)`;\n      }\n      return strTitle;\n    },\n    currentTime() {\n      let min = Math.floor(this.videoTime / 60);\n      let sec = this.videoTime % 60;\n      let strTime = min < 10 ? \"0\" : \"\";\n      strTime += min;\n      strTime += \":\"\n      strTime += sec < 10 ? \"0\" : \"\";\n      strTime += sec;\n      return strTime;\n    },\n    configuration() {\n      const iceServers = this.$store.state.configStore.webrtc.iceServers;\n      return {\n        iceServers: iceServers\n      }\n    },\n    isVideo() {\n      return this.mode == \"video\"\n    },\n    modeText() {\n      return this.isVideo ? \"视频\" : \"语音\";\n    },\n    isChating() {\n      return this.state == \"CHATING\";\n    },\n    isWaiting() {\n      return this.state == \"WAITING\";\n    },\n    isClose() {\n      return this.state == \"CLOSE\";\n    }\n  },\n  mounted() {\n    // 初始化音频文件\n    this.initAudio();\n  },\n  created() {\n    // 监听页面刷新事件\n    window.addEventListener('beforeunload', () => {\n      this.onQuit();\n    });\n  },\n  beforeUnmount() {\n    this.onQuit();\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.rtc-private-video {\n  position: relative;\n\n  .el-loading-text {\n    color: white !important;\n    font-size: 16px !important;\n  }\n\n  .path {\n    stroke: white !important;\n  }\n\n  .rtc-video-box {\n    position: relative;\n    background-color: #eeeeee;\n\n    .rtc-video-friend {\n      height: 70vh;\n\n      .friend-head-image {\n        position: absolute;\n      }\n\n      video {\n        width: 100%;\n        height: 100%;\n        object-fit: cover;\n        transform: rotateY(180deg);\n      }\n    }\n\n    .rtc-video-mine {\n      position: absolute;\n      z-index: 99999;\n      width: 25vh;\n      right: 0;\n      bottom: -1px;\n\n      video {\n        width: 100%;\n        object-fit: cover;\n        transform: rotateY(180deg);\n      }\n    }\n  }\n\n  .rtc-voice-box {\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 300px;\n    background-color: var(--im-color-primary-light-9);\n\n    .rtc-voice-name {\n      text-align: center;\n      font-size: 20px;\n      font-weight: 600;\n    }\n  }\n\n  .rtc-control-bar {\n    display: flex;\n    justify-content: space-around;\n    padding: 10px;\n\n    .icon {\n      font-size: 50px;\n      cursor: pointer;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcPrivateVideo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcPrivateVideo.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RtcPrivateVideo.vue?vue&type=template&id=b2efff24\"\nimport script from \"./RtcPrivateVideo.vue?vue&type=script&lang=js\"\nexport * from \"./RtcPrivateVideo.vue?vue&type=script&lang=js\"\nimport style0 from \"./RtcPrivateVideo.vue?vue&type=style&index=0&id=b2efff24&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{directives:[{name:\"dialogDrag\",rawName:\"v-dialogDrag\"}],attrs:{\"top\":\"5vh\",\"title\":\"语音通话\",\"close-on-click-modal\":false,\"close-on-press-escape\":false,\"visible\":_vm.isShow,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.isShow=$event}}},[_c('div',{staticClass:\"rtc-group-video\"},[_c('div',{staticStyle:{\"padding-top\":\"30px\",\"font-weight\":\"600\",\"text-align\":\"center\",\"font-size\":\"16px\"}},[_vm._v(\" 多人音视频通话属于付费功能，如有需要请联系作者购买商业版源码... \")]),_c('div',{staticStyle:{\"padding-top\":\"50px\",\"text-align\":\"center\",\"font-size\":\"16px\"}},[_vm._v(\" 点击下方文档了解详细信息: \")]),_c('div',{staticStyle:{\"padding-top\":\"10px\",\"text-align\":\"center\",\"font-size\":\"16px\"}},[_c('a',{attrs:{\"href\":\"https://www.yuque.com/u1475064/imk5n2/qtezcg32q1d0dr29\",\"target\":\"_blank\"}},[_vm._v(\" 盒子IM商业版付费说明 \")])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-dialog v-dialogDrag top=\"5vh\" title=\"语音通话\" :close-on-click-modal=\"false\" :close-on-press-escape=\"false\"\n\t\t:visible.sync=\"isShow\" width=\"50%\">\n\t\t<div class='rtc-group-video'>\n\t\t\t<div style=\"padding-top:30px;font-weight: 600; text-align: center;font-size: 16px;\">\n\t\t\t\t多人音视频通话属于付费功能，如有需要请联系作者购买商业版源码...\n\t\t\t</div>\n\t\t\t<div style=\"padding-top:50px; text-align: center;font-size: 16px;\">\n\t\t\t\t点击下方文档了解详细信息:\n\t\t\t</div>\n\t\t\t<div style=\"padding-top:10px; text-align: center;font-size: 16px;\">\n\t\t\t\t<a href=\"https://www.yuque.com/u1475064/imk5n2/qtezcg32q1d0dr29\" target=\"_blank\">\n\t\t\t\t\t盒子IM商业版付费说明\n\t\t\t\t</a>\n\t\t\t</div>\n\n\t\t</div>\n\t</el-dialog>\n</template>\n\n<script>\nexport default {\n\tname: \"rtcGroupVideo\",\n\tdata() {\n\t\treturn {\n\t\t\tisShow: false\n\t\t}\n\t},\n\tmethods: {\n\t\topen() {\n\t\t\tthis.isShow = true;\n\t\t},\n\t\tonRTCMessage() {\n\t\t\t//this.isShow = true;\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.rtc-group-video {\n\theight: 300px;\n\tbackground-color: #E8F2FF;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcGroupVideo.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcGroupVideo.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RtcGroupVideo.vue?vue&type=template&id=1e429f56\"\nimport script from \"./RtcGroupVideo.vue?vue&type=script&lang=js\"\nexport * from \"./RtcGroupVideo.vue?vue&type=script&lang=js\"\nimport style0 from \"./RtcGroupVideo.vue?vue&type=style&index=0&id=1e429f56&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"home-page\" @click=\"$store.commit('closeUserInfoBox')\">\n\t\t<div class=\"app-container\" :class=\"{ fullscreen: isFullscreen }\">\n\t\t\t<div class=\"navi-bar\">\n\t\t\t\t<div class=\"navi-bar-box\">\n\t\t\t\t\t<div class=\"top\">\n\t\t\t\t\t\t<div class=\"user-head-image\">\n\t\t\t\t\t\t\t<head-image :name=\"$store.state.userStore.userInfo.nickName\" :size=\"38\"\n\t\t\t\t\t\t\t\t:url=\"$store.state.userStore.userInfo.headImageThumb\"\n\t\t\t\t\t\t\t\t@click.native=\"showSettingDialog = true\">\n\t\t\t\t\t\t\t</head-image>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"menu\">\n\t\t\t\t\t\t\t<router-link class=\"link\" v-bind:to=\"'/home/chat'\">\n\t\t\t\t\t\t\t\t<div class=\"menu-item\">\n\t\t\t\t\t\t\t\t\t<span class=\"icon iconfont icon-chat\"></span>\n\t\t\t\t\t\t\t\t\t<div v-show=\"unreadCount > 0\" class=\"unread-text\">{{ unreadCount }}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\t<router-link class=\"link\" v-bind:to=\"'/home/friend'\">\n\t\t\t\t\t\t\t\t<div class=\"menu-item\">\n\t\t\t\t\t\t\t\t\t<span class=\"icon iconfont icon-friend\"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t\t<router-link class=\"link\" v-bind:to=\"'/home/group'\">\n\t\t\t\t\t\t\t\t<div class=\"menu-item\">\n\t\t\t\t\t\t\t\t\t<span class=\"icon iconfont icon-group\" style=\"font-size: 28px\"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</router-link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<div class=\"botoom\">\n\t\t\t\t\t\t<div class=\"botoom-item\" @click=\"isFullscreen = !isFullscreen\">\n\t\t\t\t\t\t\t<i class=\"el-icon-full-screen\"></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"botoom-item\" @click=\"showSetting\">\n\t\t\t\t\t\t\t<span class=\"icon iconfont icon-setting\" style=\"font-size: 20px\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"botoom-item\" @click=\"onExit()\" title=\"退出\">\n\t\t\t\t\t\t\t<span class=\"icon iconfont icon-exit\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"content-box\">\n\t\t\t\t<router-view></router-view>\n\t\t\t</div>\n\t\t\t<setting :visible=\"showSettingDialog\" @close=\"closeSetting()\"></setting>\n\t\t\t<user-info v-show=\"uiStore.userInfo.show\" :pos=\"uiStore.userInfo.pos\" :user=\"uiStore.userInfo.user\"\n\t\t\t\t@close=\"$store.commit('closeUserInfoBox')\"></user-info>\n\t\t\t<full-image :visible=\"uiStore.fullImage.show\" :url=\"uiStore.fullImage.url\"\n\t\t\t\t@close=\"$store.commit('closeFullImageBox')\"></full-image>\n\t\t\t<rtc-private-video ref=\"rtcPrivateVideo\"></rtc-private-video>\n\t\t\t<rtc-group-video ref=\"rtcGroupVideo\"></rtc-group-video>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport HeadImage from '../components/common/HeadImage.vue';\nimport Setting from '../components/setting/Setting.vue';\nimport UserInfo from '../components/common/UserInfo.vue';\nimport FullImage from '../components/common/FullImage.vue';\nimport RtcPrivateVideo from '../components/rtc/RtcPrivateVideo.vue';\nimport RtcPrivateAcceptor from '../components/rtc/RtcPrivateAcceptor.vue';\nimport RtcGroupVideo from '../components/rtc/RtcGroupVideo.vue';\n\nexport default {\n\tcomponents: {\n\t\tHeadImage,\n\t\tSetting,\n\t\tUserInfo,\n\t\tFullImage,\n\t\tRtcPrivateVideo,\n\t\tRtcPrivateAcceptor,\n\t\tRtcGroupVideo\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tshowSettingDialog: false,\n\t\t\tlastPlayAudioTime: new Date().getTime() - 1000,\n\t\t\tisFullscreen: true,\n\t\t\treconnecting: false\n\t\t}\n\t},\n\tmethods: {\n\t\tinit() {\n\t\t\tthis.$eventBus.$on('openPrivateVideo', (rctInfo) => {\n\t\t\t\t// 进入单人视频通话\n\t\t\t\tthis.$refs.rtcPrivateVideo.open(rctInfo);\n\t\t\t});\n\t\t\tthis.$eventBus.$on('openGroupVideo', (rctInfo) => {\n\t\t\t\t// 进入多人视频通话\n\t\t\t\tthis.$refs.rtcGroupVideo.open(rctInfo);\n\t\t\t});\n\n\t\t\tthis.$store.dispatch(\"load\").then(() => {\n\t\t\t\t// ws初始化\n\t\t\t\tthis.$wsApi.connect(process.env.VUE_APP_WS_URL, sessionStorage.getItem(\"accessToken\"));\n\t\t\t\tthis.$wsApi.onConnect(() => {\n\t\t\t\t\tif (this.reconnecting) {\n\t\t\t\t\t\tthis.onReconnectWs();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 加载离线消息\n\t\t\t\t\t\tthis.pullPrivateOfflineMessage(this.$store.state.chatStore.privateMsgMaxId);\n\t\t\t\t\t\tthis.pullGroupOfflineMessage(this.$store.state.chatStore.groupMsgMaxId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.$wsApi.onMessage((cmd, msgInfo) => {\n\t\t\t\t\tif (cmd == 2) {\n\t\t\t\t\t\t// 关闭ws\n\t\t\t\t\t\tthis.$wsApi.close(3000)\n\t\t\t\t\t\t// 异地登录，强制下线\n\t\t\t\t\t\tthis.$alert(\"您已在其他地方登录，将被强制下线\", \"强制下线通知\", {\n\t\t\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\t\t\tcallback: action => {\n\t\t\t\t\t\t\t\tlocation.href = \"/\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else if (cmd == 3) {\n\t\t\t\t\t\t// 插入私聊消息\n\t\t\t\t\t\tthis.handlePrivateMessage(msgInfo);\n\t\t\t\t\t} else if (cmd == 4) {\n\t\t\t\t\t\t// 插入群聊消息\n\t\t\t\t\t\tthis.handleGroupMessage(msgInfo);\n\t\t\t\t\t} else if (cmd == 5) {\n\t\t\t\t\t\t// 处理系统消息\n\t\t\t\t\t\tthis.handleSystemMessage(msgInfo);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.$wsApi.onClose((e) => {\n\t\t\t\t\tif (e.code != 3000) {\n\t\t\t\t\t\t// 断线重连\n\t\t\t\t\t\tthis.reconnectWs();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).catch((e) => {\n\t\t\t\tconsole.log(\"初始化失败\", e);\n\t\t\t})\n\t\t},\n\t\treconnectWs() {\n\t\t\t// 记录标志\n\t\t\tthis.reconnecting = true;\n\t\t\t// 重新加载一次个人信息，目的是为了保证网络已经正常且token有效\n\t\t\tthis.$store.dispatch(\"loadUser\").then(() => {\n\t\t\t\tthis.$wsApi.reconnect(process.env.VUE_APP_WS_URL, sessionStorage.getItem(\n\t\t\t\t\t\"accessToken\"));\n\t\t\t}).catch(() => {\n\t\t\t\t// 10s后重试\n\t\t\t\tsetTimeout(() => this.reconnectWs(), 10000)\n\t\t\t})\n\t\t},\n\t\tonReconnectWs() {\n\t\t\t// 重连成功\n\t\t\tthis.reconnecting = false;\n\t\t\t// 重新加载群和好友\n\t\t\tconst promises = [];\n\t\t\tpromises.push(this.$store.dispatch(\"loadFriend\"));\n\t\t\tpromises.push(this.$store.dispatch(\"loadGroup\"));\n\t\t\tPromise.all(promises).then(() => {\n\t\t\t\t// 加载离线消息\n\t\t\t\tthis.pullPrivateOfflineMessage(this.$store.state.chatStore.privateMsgMaxId);\n\t\t\t\tthis.pullGroupOfflineMessage(this.$store.state.chatStore.groupMsgMaxId);\n\t\t\t}).catch(() => {\n\t\t\t\tthis.$message.error(\"初始化失败\");\n\t\t\t\tthis.onExit();\n\t\t\t})\n\t\t},\n\t\tpullPrivateOfflineMessage(minId) {\n\t\t\tthis.$store.commit(\"loadingPrivateMsg\", true)\n\t\t\tthis.$http({\n\t\t\t\turl: \"/message/private/pullOfflineMessage?minId=\" + minId,\n\t\t\t\tmethod: 'GET'\n\t\t\t}).catch(() => {\n\t\t\t\tthis.$store.commit(\"loadingPrivateMsg\", false)\n\t\t\t})\n\t\t},\n\t\tpullGroupOfflineMessage(minId) {\n\t\t\tthis.$store.commit(\"loadingGroupMsg\", true)\n\t\t\tthis.$http({\n\t\t\t\turl: \"/message/group/pullOfflineMessage?minId=\" + minId,\n\t\t\t\tmethod: 'GET'\n\t\t\t}).catch(() => {\n\t\t\t\tthis.$store.commit(\"loadingGroupMsg\", false)\n\t\t\t})\n\t\t},\n\t\thandlePrivateMessage(msg) {\n\t\t\t// 🔧 检查是否为终端间消息：只要有senderTerminal字段就是终端消息\n\t\t\tif (msg.senderTerminal !== undefined) {\n\t\t\t\tconsole.log(\"[Home] 🔧 接收到终端消息:\", msg);\n\t\t\t\t// 设置终端消息标识\n\t\t\t\tmsg.isTerminalChat = true;\n\t\t\t\tif (msg.targetTerminal === this.getCurrentTerminal()) {\n\t\t\t\t\tthis.insertTerminalMessage(msg);\n\t\t\t\t}\n\t\t\t\t// 🔧 修复：终端消息也需要更新privateMsgMaxId\n\t\t\t\tif (msg.id && msg.id > this.$store.state.chatStore.privateMsgMaxId) {\n\t\t\t\t\tthis.$store.commit('updatePrivateMsgMaxId', msg.id);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 原有的普通私聊消息处理逻辑\n\t\t\t// 标记这条消息是不是自己发的\n\t\t\tmsg.selfSend = msg.sendId == this.$store.state.userStore.userInfo.id;\n\t\t\t// 好友id\n\t\t\tlet friendId = msg.selfSend ? msg.recvId : msg.sendId;\n\t\t\t// 会话信息\n\t\t\tlet chatInfo = {\n\t\t\t\ttype: \"PRIVATE\",\n\t\t\t\ttargetId: friendId\n\t\t\t}\n\t\t\t// 消息加载标志\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.LOADING) {\n\t\t\t\tthis.$store.commit(\"loadingPrivateMsg\", JSON.parse(msg.content))\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 消息已读处理，清空已读数量\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.READED) {\n\t\t\t\tthis.$store.commit(\"resetUnreadCount\", chatInfo)\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 消息回执处理,改消息状态为已读\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.RECEIPT) {\n\t\t\t\tthis.$store.commit(\"readedMessage\", {\n\t\t\t\t\tfriendId: msg.sendId\n\t\t\t\t})\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 消息撤回\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.RECALL) {\n\t\t\t\tthis.$store.commit(\"recallMessage\", [msg, chatInfo])\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 新增好友\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.FRIEND_NEW) {\n\t\t\t\tthis.$store.commit(\"addFriend\", JSON.parse(msg.content));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 删除好友\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.FRIEND_DEL) {\n\t\t\t\tthis.$store.commit(\"removeFriend\", friendId);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 单人webrtc 信令\n\t\t\tif (this.$msgType.isRtcPrivate(msg.type)) {\n\t\t\t\tthis.$refs.rtcPrivateVideo.onRTCMessage(msg)\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 插入消息\n\t\t\tif (this.$msgType.isNormal(msg.type) || this.$msgType.isTip(msg.type) || this.$msgType.isAction(msg.type)) {\n\t\t\t\tlet friend = this.loadFriendInfo(friendId);\n\t\t\t\tthis.insertPrivateMessage(friend, msg);\n\t\t\t}\n\t\t}, insertPrivateMessage(friend, msg) {\n\t\t\tlet chatInfo = {\n\t\t\t\ttype: 'PRIVATE',\n\t\t\t\ttargetId: friend.id,\n\t\t\t\tshowName: friend.nickName,\n\t\t\t\theadImage: friend.headImage,\n\t\t\t};\n\t\t\t// 打开会话\n\t\t\tthis.$store.commit(\"openChat\", chatInfo);\n\t\t\t// 插入消息\n\t\t\tthis.$store.commit(\"insertMessage\", [msg, chatInfo]);\n\t\t\t// 播放提示音\n\t\t\tif (!msg.selfSend && this.$msgType.isNormal(msg.type) &&\n\t\t\t\tmsg.status != this.$enums.MESSAGE_STATUS.READED) {\n\t\t\t\tthis.playAudioTip();\n\t\t\t}\n\t\t},\n\n\t\t// 🔧 修正：终端消息插入方法（目标终端模式）\n\t\tinsertTerminalMessage(msg) {\n\t\t\ttry {\n\t\t\t\tconst userInfo = this.$store.state.userStore.userInfo;\n\t\t\t\tif (!userInfo || !userInfo.id) {\n\t\t\t\t\tconsole.error(\"[Home] 用户信息未加载，无法处理终端消息\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// 🔧 修正：使用发送端作为会话标识（目标终端模式）\n\t\t\t\tconst senderTerminal = msg.senderTerminal;\n\t\t\t\tconst targetTerminal = msg.targetTerminal || this.getCurrentTerminal(); // 如果没有targetTerminal，使用当前终端\n\t\t\t\tconst currentTerminal = this.getCurrentTerminal();\n\n\t\t\t\t// 🔧 关键修复：确保终端消息的selfSend字段正确设置\n\t\t\t\tmsg.selfSend = msg.senderTerminal === currentTerminal;\n\n\t\t\t\t// 🔧 补充缺失的targetTerminal字段\n\t\t\t\tif (!msg.targetTerminal) {\n\t\t\t\t\tmsg.targetTerminal = currentTerminal;\n\t\t\t\t}\n\n\t\t\t\tconsole.log(`🔧 [Home] 终端消息: ${this.getTerminalName(senderTerminal)}端→${this.getTerminalName(targetTerminal)}端, selfSend=${msg.selfSend}`);\n\n\t\t\t\t// 🔧 修正：创建发送端会话信息（在目标端显示为\"发送端会话\"）\n\t\t\t\tconst chatInfo = {\n\t\t\t\t\ttype: \"PRIVATE\",\n\t\t\t\t\ttargetId: `${userInfo.id}_${senderTerminal}`,  // 使用发送端标识\n\t\t\t\t\tshowName: `${this.getTerminalName(senderTerminal)}端`,\n\t\t\t\t\theadImage: this.getTerminalIcon(senderTerminal),\n\t\t\t\t\tisTerminalChat: true,  // 使用新的标识\n\t\t\t\t\tsenderTerminal: senderTerminal  // 记录发送端\n\t\t\t\t};\n\n\t\t\t\t// 🔧 修正：设置消息的发送者昵称（显示发送端信息）\n\t\t\t\tmsg.sendNickName = `${userInfo.nickName}(${this.getTerminalName(senderTerminal)}端)`;\n\n\t\t\t\t// 使用统一的会话管理流程\n\t\t\t\tthis.$store.commit(\"openChat\", chatInfo);\n\t\t\t\tthis.$store.commit(\"insertMessage\", [msg, chatInfo]);\n\n\t\t\t\tconsole.log(`✅ [Home] 终端消息已插入到 ${this.getTerminalName(senderTerminal)}端 会话`);\n\n\t\t\t\t// 播放提示音（接收到其他终端的消息时）\n\t\t\t\tif (!msg.selfSend && this.$msgType.isNormal(msg.type) &&\n\t\t\t\t\tmsg.status != this.$enums.MESSAGE_STATUS.READED) {\n\t\t\t\t\tthis.playAudioTip();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"[Home] 处理终端消息失败:\", error, msg);\n\t\t\t}\n\t\t},\n\n\t\t// 🔧 新增：获取终端名称的工具方法\n\t\tgetTerminalName(terminal) {\n\t\t\tconst terminalNames = {\n\t\t\t\t0: \"傻蛋网页\",\n\t\t\t\t1: \"傻蛋精灵App\",\n\t\t\t\t2: \"我的电脑\",\n\t\t\t\t3: \"我的云电脑\",\n\t\t\t\t4: \"傻蛋浏览器\",\n\t\t\t\t5: \"MCP\"\n\t\t\t};\n\t\t\treturn terminalNames[terminal] || \"未知\";\n\t\t},\n\n\t\t// 🔧 新增：获取终端图标的工具方法\n\t\tgetTerminalIcon(terminal) {\n\t\t\tconst terminalIcons = {\n\t\t\t\t0: \"🌐\",\n\t\t\t\t1: \"📱\",\n\t\t\t\t2: \"💻\",\n\t\t\t\t3: \"🖥️\",\n\t\t\t\t4: \"🔌\",\n\t\t\t\t5: \"🤖\"\n\t\t\t};\n\t\t\treturn terminalIcons[terminal] || \"❓\";\n\t\t},\n\n\t\t// 🔧 新增：获取当前终端类型\n\t\tgetCurrentTerminal() {\n\t\t\t// 根据环境判断当前终端类型\n\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t// 检测VSCode环境 - 多种方式检测\n\t\t\t\tif (window.parent !== window || // 在iframe中\n\t\t\t\t\twindow.acquireVsCodeApi || // VSCode WebView API\n\t\t\t\t\twindow.SharedServicesAccessor || // 我们的VSCode服务\n\t\t\t\t\tnavigator.userAgent.includes('VSCode') || // User Agent\n\t\t\t\t\twindow.location.protocol === 'vscode-webview:') { // VSCode WebView协议\n\t\t\t\t\treturn 2; // VSCode\n\t\t\t\t}\n\n\t\t\t\t// 检测Electron环境\n\t\t\t\tif (window.require ||\n\t\t\t\t\twindow.process?.type ||\n\t\t\t\t\twindow.isElectron ||\n\t\t\t\t\tnavigator.userAgent.includes('Electron')) {\n\t\t\t\t\treturn 3; // PC客户端\n\t\t\t\t}\n\n\t\t\t\t// 检测移动端App环境\n\t\t\t\tif (window.cordova ||\n\t\t\t\t\twindow.PhoneGap ||\n\t\t\t\t\twindow.phonegap ||\n\t\t\t\t\tnavigator.userAgent.includes('wv') || // WebView\n\t\t\t\t\tnavigator.userAgent.includes('Mobile')) {\n\t\t\t\t\treturn 1; // App\n\t\t\t\t}\n\n\t\t\t\treturn 0; // Web\n\t\t\t}\n\t\t\treturn 0; // 默认Web\n\t\t},\n\n\t\thandleGroupMessage(msg) {\n\t\t\t// 标记这条消息是不是自己发的\n\t\t\tmsg.selfSend = msg.sendId == this.$store.state.userStore.userInfo.id;\n\t\t\tlet chatInfo = {\n\t\t\t\ttype: 'GROUP',\n\t\t\t\ttargetId: msg.groupId\n\t\t\t}\n\t\t\t// 消息加载标志\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.LOADING) {\n\t\t\t\tthis.$store.commit(\"loadingGroupMsg\", JSON.parse(msg.content))\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 消息已读处理\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.READED) {\n\t\t\t\t// 我已读对方的消息，清空已读数量\n\t\t\t\tthis.$store.commit(\"resetUnreadCount\", chatInfo)\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 消息回执处理\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.RECEIPT) {\n\t\t\t\t// 更新消息已读人数\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tid: msg.id,\n\t\t\t\t\tgroupId: msg.groupId,\n\t\t\t\t\treadedCount: msg.readedCount,\n\t\t\t\t\treceiptOk: msg.receiptOk\n\t\t\t\t};\n\t\t\t\tthis.$store.commit(\"updateMessage\", [msgInfo, chatInfo])\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 消息撤回\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.RECALL) {\n\t\t\t\tthis.$store.commit(\"recallMessage\", [msg, chatInfo])\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 新增群\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.GROUP_NEW) {\n\t\t\t\tthis.$store.commit(\"addGroup\", JSON.parse(msg.content));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 删除群\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.GROUP_DEL) {\n\t\t\t\tthis.$store.commit(\"removeGroup\", msg.groupId);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 群视频信令\n\t\t\tif (this.$msgType.isRtcGroup(msg.type)) {\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.$refs.rtcGroupVideo.onRTCMessage(msg);\n\t\t\t\t})\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 插入群聊消息\n\t\t\tif (this.$msgType.isNormal(msg.type) || this.$msgType.isTip(msg.type) || this.$msgType.isAction(msg.type)) {\n\t\t\t\tlet group = this.loadGroupInfo(msg.groupId);\n\t\t\t\tthis.insertGroupMessage(group, msg);\n\t\t\t}\n\t\t},\n\t\tinsertGroupMessage(group, msg) {\n\t\t\tlet chatInfo = {\n\t\t\t\ttype: 'GROUP',\n\t\t\t\ttargetId: group.id,\n\t\t\t\tshowName: group.showGroupName,\n\t\t\t\theadImage: group.headImageThumb\n\t\t\t};\n\t\t\t// 打开会话\n\t\t\tthis.$store.commit(\"openChat\", chatInfo);\n\t\t\t// 插入消息\n\t\t\tthis.$store.commit(\"insertMessage\", [msg, chatInfo]);\n\t\t\t// 播放提示音\n\t\t\tif (!msg.selfSend && msg.type <= this.$enums.MESSAGE_TYPE.VIDEO &&\n\t\t\t\tmsg.status != this.$enums.MESSAGE_STATUS.READED) {\n\t\t\t\tthis.playAudioTip();\n\t\t\t}\n\t\t},\n\t\thandleSystemMessage(msg) {\n\t\t\t// 用户被封禁\n\t\t\tif (msg.type == this.$enums.MESSAGE_TYPE.USER_BANNED) {\n\t\t\t\tthis.$wsApi.close(3000);\n\t\t\t\tthis.$alert(\"您的账号已被管理员封禁,原因:\" + msg.content, \"账号被封禁\", {\n\t\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\t\tcallback: action => {\n\t\t\t\t\t\tthis.onExit();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t},\n\t\tonExit() {\n\t\t\tthis.$wsApi.close(3000);\n\t\t\tsessionStorage.removeItem(\"accessToken\");\n\t\t\tlocation.href = \"/\";\n\t\t},\n\t\tplayAudioTip() {\n\t\t\t// 离线消息不播放铃声\n\t\t\tif (this.$store.getters.isLoading()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 防止过于密集播放\n\t\t\tif (new Date().getTime() - this.lastPlayAudioTime > 1000) {\n\t\t\t\tthis.lastPlayAudioTime = new Date().getTime();\n\t\t\t\tlet audio = new Audio();\n\t\t\t\tlet url = require(`@/assets/audio/tip.wav`);\n\t\t\t\taudio.src = url;\n\t\t\t\taudio.play();\n\t\t\t}\n\n\t\t},\n\t\tshowSetting() {\n\t\t\tthis.showSettingDialog = true;\n\t\t},\n\t\tcloseSetting() {\n\t\t\tthis.showSettingDialog = false;\n\t\t},\n\t\tloadFriendInfo(id) {\n\t\t\tif (String(id).includes('_')) {\n\t\t\t\tid = String(id).split('_')[0];\n\t\t\t}\n\t\t\tlet friend = this.$store.getters.findFriend(id);\n\t\t\tif (!friend) {\n\t\t\t\t// 🔧 修复：如果是当前用户自己，返回用户自己的信息\n\t\t\t\tconst currentUser = this.$store.state.userStore.userInfo;\n\t\t\t\tif (currentUser && currentUser.id == id) {\n\t\t\t\t\tfriend = {\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\tnickName: currentUser.nickName || \"我\",\n\t\t\t\t\t\tshowNickName: currentUser.nickName || \"我\",\n\t\t\t\t\t\theadImage: currentUser.headImageThumb || currentUser.headImage || \"\",\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\t// 其他未知用户\n\t\t\t\t\tfriend = {\n\t\t\t\t\t\tid: id,\n\t\t\t\t\t\tnickName: \"未知用户\",\n\t\t\t\t\t\tshowNickName: \"未知用户\",\n\t\t\t\t\t\theadImage: \"\"\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn friend;\n\t\t},\n\t\tloadGroupInfo(id) {\n\t\t\tlet group = this.$store.getters.findGroup(id);\n\t\t\tif (!group) {\n\t\t\t\tgroup = {\n\t\t\t\t\tid: id,\n\t\t\t\t\tshowGroupName: \"未知群聊\",\n\t\t\t\t\theadImageThumb: \"\"\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn group;\n\t\t}\n\t},\n\tcomputed: {\n\t\tuiStore() {\n\t\t\treturn this.$store.state.uiStore;\n\t\t},\n\t\tunreadCount() {\n\t\t\tlet unreadCount = 0;\n\t\t\tlet chats = this.$store.state.chatStore.chats;\n\t\t\tchats.forEach((chat) => {\n\t\t\t\tif (!chat.delete) {\n\t\t\t\t\tunreadCount += chat.unreadCount\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn unreadCount;\n\t\t}\n\t},\n\twatch: {\n\t\tunreadCount: {\n\t\t\thandler(newCount, oldCount) {\n\t\t\t\tlet tip = newCount > 0 ? `${newCount}条未读` : \"\";\n\t\t\t\tthis.$elm.setTitleTip(tip);\n\t\t\t},\n\t\t\timmediate: true\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.init();\n\t},\n\tunmounted() {\n\t\tthis.$wsApi.close();\n\t}\n}\n</script>\n\n<style scoped lang=\"scss\">\n.home-page {\n\theight: 100vh;\n\twidth: 100vw;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tborder-radius: 4px;\n\toverflow: hidden;\n\tbackground: var(--im-color-primary-light-9);\n\t//background-image: url('../assets/image/background.jpg');\n\n\t.app-container {\n\t\twidth: 62vw;\n\t\theight: 80vh;\n\t\tdisplay: flex;\n\t\tmin-height: 600px;\n\t\tmin-width: 970px;\n\t\tposition: absolute;\n\t\tborder-radius: 4px;\n\t\toverflow: hidden;\n\t\tbox-shadow: var(--im-box-shadow-dark);\n\t\ttransition: 0.2s;\n\n\t\t&.fullscreen {\n\t\t\ttransition: 0.2s;\n\t\t\twidth: 100vw;\n\t\t\theight: 100vh;\n\t\t}\n\t}\n\n\t.navi-bar {\n\t\t--icon-font-size: 22px;\n\t\t--width: 60px;\n\t\twidth: var(--width);\n\t\tbackground: var(--im-color-primary-light-1);\n\t\tpadding-top: 20px;\n\n\t\t.navi-bar-box {\n\t\t\theight: 100%;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: space-between;\n\n\t\t\t.botoom {\n\t\t\t\tmargin-bottom: 30px;\n\t\t\t}\n\t\t}\n\n\t\t.user-head-image {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t}\n\n\t\t.menu {\n\t\t\theight: 200px;\n\t\t\t//margin-top: 10px;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tjustify-content: center;\n\t\t\talign-content: center;\n\n\t\t\t.link {\n\t\t\t\ttext-decoration: none;\n\t\t\t}\n\n\t\t\t.router-link-active .menu-item {\n\t\t\t\tcolor: #fff;\n\t\t\t\tbackground: var(--im-color-primary-light-2);\n\t\t\t}\n\n\t\t\t.link:not(.router-link-active) .menu-item:hover {\n\t\t\t\tcolor: var(--im-color-primary-light-7);\n\t\t\t}\n\n\t\t\t.menu-item {\n\t\t\t\tposition: relative;\n\t\t\t\tcolor: var(--im-color-primary-light-4);\n\t\t\t\twidth: var(--width);\n\t\t\t\theight: 46px;\n\t\t\t\tdisplay: flex;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\t\t\t\tmargin-bottom: 12px;\n\n\t\t\t\t.icon {\n\t\t\t\t\tfont-size: var(--icon-font-size)\n\t\t\t\t}\n\n\t\t\t\t.unread-text {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tbackground-color: var(--im-color-danger);\n\t\t\t\t\tleft: 28px;\n\t\t\t\t\ttop: 8px;\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tborder-radius: 30px;\n\t\t\t\t\tpadding: 0 5px;\n\t\t\t\t\tfont-size: var(--im-font-size-smaller);\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\tborder: 1px solid #f1e5e5;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.botoom-item {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: center;\n\t\t\talign-items: center;\n\t\t\theight: 50px;\n\t\t\twidth: 100%;\n\t\t\tcursor: pointer;\n\t\t\tcolor: var(--im-color-primary-light-4);\n\t\t\tfont-size: var(--icon-font-size);\n\n\t\t\t.icon {\n\t\t\t\tfont-size: var(--icon-font-size)\n\t\t\t}\n\n\t\t\t&:hover {\n\t\t\t\tfont-weight: 600;\n\t\t\t\tcolor: var(--im-color-primary-light-7);\n\t\t\t}\n\t\t}\n\t}\n\n\t.content-box {\n\t\tflex: 1;\n\t\tpadding: 0;\n\t\tbackground-color: #fff;\n\t\ttext-align: center;\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Home.vue?vue&type=template&id=e8d6c224&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=js\"\nexport * from \"./Home.vue?vue&type=script&lang=js\"\nimport style0 from \"./Home.vue?vue&type=style&index=0&id=e8d6c224&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e8d6c224\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"vscode-container\"},[_c('div',{staticClass:\"left-panel\"},[_c('Inbox',{on:{\"chatItemClick\":_vm.handleChatItemClick}})],1),_c('div',{staticClass:\"right-panel\"},[_c('shadan-chat',{attrs:{\"chatData\":_vm.selectedChatData}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home-page\"},[_c('div',{staticClass:\"navi-bar\"},[_c('div',{staticClass:\"navi-bar-box\"},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"menu\"},[_c('div',{staticClass:\"botoom-item\",on:{\"click\":function($event){return _vm.switchUi(1)}}},[_c('span',{staticClass:\"icon iconfont icon-chat\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.unreadCount > 0),expression:\"unreadCount > 0\"}],staticClass:\"unread-text\"},[_vm._v(\" \"+_vm._s(_vm.unreadCount)+\" \")])]),_c('div',{staticClass:\"botoom-item\",on:{\"click\":function($event){return _vm.switchUi(2)}}},[_c('span',{staticClass:\"icon iconfont icon-friend\"})]),_c('div',{staticClass:\"botoom-item\",on:{\"click\":function($event){return _vm.switchUi(3)}}},[_c('span',{staticClass:\"icon iconfont icon-group\",staticStyle:{\"font-size\":\"28px\"}})]),_c('div',{staticClass:\"botoom-item\",on:{\"click\":_vm.showSetting}},[_c('span',{staticClass:\"icon iconfont icon-setting\",staticStyle:{\"font-size\":\"20px\"}})])])])])]),_c('div',{staticClass:\"content-box\"},[_c('keep-alive',[(_vm.uiStore.viewCode === 1)?_c('inbox-session'):_vm._e(),(_vm.uiStore.viewCode === 2)?_c('inbox-friend'):_vm._e(),(_vm.uiStore.viewCode === 3)?_c('inbox-group'):_vm._e()],1)],1),_c('setting',{attrs:{\"visible\":_vm.showSettingDialog},on:{\"close\":function($event){return _vm.closeSetting()}}}),_c('user-info',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.uiStore.userInfo.show),expression:\"uiStore.userInfo.show\"}],attrs:{\"pos\":_vm.uiStore.userInfo.pos,\"user\":_vm.uiStore.userInfo.user},on:{\"close\":function($event){return _vm.$store.commit('closeUserInfoBox')}}}),_c('full-image',{attrs:{\"visible\":_vm.uiStore.fullImage.show,\"url\":_vm.uiStore.fullImage.url},on:{\"close\":function($event){return _vm.$store.commit('closeFullImageBox')}}}),_c('rtc-private-video',{ref:\"rtcPrivateVideo\"}),_c('rtc-group-video',{ref:\"rtcGroupVideo\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"chat-page\"},[_c('el-header',{staticClass:\"search-container\",attrs:{\"height\":\"60px\"}},[_c('el-input',{staticClass:\"search-input\",attrs:{\"placeholder\":\"搜索聊天记录...\",\"prefix-icon\":\"el-icon-search\",\"clearable\":\"\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1),_c('el-scrollbar',{staticClass:\"chat-list-container\",staticStyle:{\"height\":\"100%\"}},[_c('div',{staticClass:\"chat-group\"},[_c('div',{staticClass:\"group-header collapsible-header\",on:{\"click\":function($event){_vm.aiSessionsCollapsed = !_vm.aiSessionsCollapsed}}},[_c('div',{staticClass:\"header-left\"},[_c('i',{staticClass:\"el-icon-arrow-right collapse-icon\",class:{ expanded: !_vm.aiSessionsCollapsed }}),_c('span',{staticClass:\"group-title\"},[_vm._v(\"🤖 AI对话\")])]),_c('span',{staticClass:\"group-count\"},[_vm._v(\"(\"+_vm._s(_vm.aiSessions.length)+\")\")])]),_c('el-collapse-transition',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.aiSessionsCollapsed),expression:\"!aiSessionsCollapsed\"}],staticClass:\"chat-list\"},[(_vm.loadingAI && _vm.aiSessions.length === 0)?_c('div',{staticClass:\"loading-placeholder\"},[_c('i',{staticClass:\"el-icon-loading\"}),_c('span',[_vm._v(\"正在加载AI会话...\")])]):[_vm._l((_vm.aiSessions),function(session,index){return [(session && session.headImage && session.showName)?_c('chat-item',{key:`ai-session-${session.id}-${index}`,staticClass:\"ai-chat-item\",class:{\n                  active: _vm.activeAISession?.id === session.id,\n                  'has-complex-tools': session.hasComplexTools,\n                  thinking: session.isThinking,\n                  'roocode-task': session.isRooCodeTask,\n                },attrs:{\"chat\":session,\"index\":index,\"loading\":_vm.loading,\"disableDoubleClick\":true},on:{\"active\":_vm.onActiveAIItem,\"del\":_vm.onDelAIItem,\"top\":_vm.onTopAIItem}}):_vm._e()]}),(!_vm.loadingAI && _vm.aiSessions.length === 0)?_c('div',{staticClass:\"empty-placeholder\"},[_c('i',{staticClass:\"el-icon-chat-dot-round\"}),_c('span',[_vm._v(\"暂无AI对话记录\")]),_c('div',{staticClass:\"empty-hint\"},[_vm._v(\"使用 Roo Code 创建AI对话后，将在此处显示\")])]):_vm._e()]],2)])],1),_c('div',{staticClass:\"chat-group\"},[_c('div',{staticClass:\"group-header\"},[_c('div',{staticClass:\"header-left\"},[_c('i',{staticClass:\"spacer-icon\"}),_c('span',{staticClass:\"group-title\"},[_vm._v(\"💬 聊天消息\")])]),_c('span',{staticClass:\"group-count\"},[_vm._v(\"(\"+_vm._s(_vm.filteredHumanSessions.length)+\")\")])]),_c('div',{staticClass:\"chat-list\"},_vm._l((_vm.filteredHumanSessions),function(chat,index){return _c('div',{key:_vm.generateChatKey(chat)},[_c('chat-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!chat.delete && chat.showName),expression:\"!chat.delete && chat.showName\"}],class:{\n              'terminal-inbox': chat.isTerminalInbox,\n              'normal-chat': !chat.isTerminalInbox\n            },attrs:{\"chat\":_vm.enrichChatDisplay(chat),\"index\":index,\"active\":_vm.isHumanChatActive(chat)},on:{\"delete\":function($event){return _vm.onDelHumanItem(chat, index)},\"top\":function($event){return _vm.onTopHumanItem(chat, index)}},nativeOn:{\"click\":function($event){return _vm.onActiveHumanItem(chat, index)}}})],1)}),0)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"terminal-selector\"},[_c('el-dialog',{attrs:{\"title\":\"选择接收终端\",\"visible\":_vm.dialogVisible,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.handleClose}},[_c('div',{staticClass:\"terminal-list\"},_vm._l((_vm.availableTerminals),function(terminal){return _c('div',{key:terminal.type,staticClass:\"terminal-item\",class:{ \n          disabled: !terminal.online || terminal.type === _vm.currentTerminal,\n          current: terminal.type === _vm.currentTerminal \n        },on:{\"click\":function($event){return _vm.selectTerminal(terminal)}}},[_c('div',{staticClass:\"terminal-icon\"},[_vm._v(_vm._s(terminal.icon))]),_c('div',{staticClass:\"terminal-info\"},[_c('div',{staticClass:\"terminal-name\"},[_vm._v(_vm._s(terminal.name))]),_c('div',{staticClass:\"terminal-status\",class:_vm.getStatusClass(terminal)},[_vm._v(\" \"+_vm._s(_vm.getStatusText(terminal))+\" \")])]),(terminal.type === _vm.currentTerminal)?_c('div',{staticClass:\"current-badge\"},[_vm._v(\"当前\")]):_vm._e()])}),0),(_vm.onlineTerminals.length === 0)?_c('div',{staticClass:\"empty-state\"},[_c('div',{staticClass:\"empty-icon\"},[_vm._v(\"📱\")]),_c('div',{staticClass:\"empty-text\"},[_vm._v(\"暂无其他在线终端\")]),_c('div',{staticClass:\"empty-hint\"},[_vm._v(\"请在其他设备上登录后再试\")])]):_vm._e(),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.handleClose}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.onlineTerminals.length === 0},on:{\"click\":_vm.openQuickSend}},[_vm._v(\" 快速发送消息 \")])],1)]),_c('el-dialog',{attrs:{\"title\":\"发送消息到终端\",\"visible\":_vm.showQuickSend,\"width\":\"500px\"},on:{\"update:visible\":function($event){_vm.showQuickSend=$event},\"close\":_vm.resetQuickSend}},[(_vm.selectedTerminal)?_c('div',{staticClass:\"quick-send-header\"},[_c('span',{staticClass:\"target-terminal\"},[_vm._v(\" \"+_vm._s(_vm.selectedTerminal.icon)+\" \"+_vm._s(_vm.selectedTerminal.name)+\" \")])]):_vm._e(),_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"输入要发送的消息...\",\"maxlength\":\"500\",\"show-word-limit\":\"\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;if(!$event.ctrlKey)return null;return _vm.sendQuickMessage.apply(null, arguments)}},model:{value:(_vm.quickMessage),callback:function ($$v) {_vm.quickMessage=$$v},expression:\"quickMessage\"}}),_c('div',{staticClass:\"quick-send-tips\"},[_c('span',{staticClass:\"tip\"},[_vm._v(\"💡 按 Ctrl+Enter 快速发送\")])]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.resetQuickSend}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.sending,\"disabled\":!_vm.quickMessage.trim()},on:{\"click\":_vm.sendQuickMessage}},[_vm._v(\" 发送 \")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"terminal-selector\">\n    <el-dialog\n      title=\"选择接收终端\"\n      :visible.sync=\"dialogVisible\"\n      width=\"400px\"\n      @close=\"handleClose\"\n    >\n      <div class=\"terminal-list\">\n        <div\n          v-for=\"terminal in availableTerminals\"\n          :key=\"terminal.type\"\n          class=\"terminal-item\"\n          :class=\"{ \n            disabled: !terminal.online || terminal.type === currentTerminal,\n            current: terminal.type === currentTerminal \n          }\"\n          @click=\"selectTerminal(terminal)\"\n        >\n          <div class=\"terminal-icon\">{{ terminal.icon }}</div>\n          <div class=\"terminal-info\">\n            <div class=\"terminal-name\">{{ terminal.name }}</div>\n            <div class=\"terminal-status\" :class=\"getStatusClass(terminal)\">\n              {{ getStatusText(terminal) }}\n            </div>\n          </div>\n          <div v-if=\"terminal.type === currentTerminal\" class=\"current-badge\">当前</div>\n        </div>\n      </div>\n\n      <div v-if=\"onlineTerminals.length === 0\" class=\"empty-state\">\n        <div class=\"empty-icon\">📱</div>\n        <div class=\"empty-text\">暂无其他在线终端</div>\n        <div class=\"empty-hint\">请在其他设备上登录后再试</div>\n      </div>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"handleClose\">取消</el-button>\n        <el-button type=\"primary\" @click=\"openQuickSend\" :disabled=\"onlineTerminals.length === 0\">\n          快速发送消息\n        </el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 快速发送消息对话框 -->\n    <el-dialog\n      title=\"发送消息到终端\"\n      :visible.sync=\"showQuickSend\"\n      width=\"500px\"\n      @close=\"resetQuickSend\"\n    >\n      <div v-if=\"selectedTerminal\" class=\"quick-send-header\">\n        <span class=\"target-terminal\">\n          {{ selectedTerminal.icon }} {{ selectedTerminal.name }}\n        </span>\n      </div>\n      \n      <el-input\n        v-model=\"quickMessage\"\n        type=\"textarea\"\n        :rows=\"4\"\n        placeholder=\"输入要发送的消息...\"\n        maxlength=\"500\"\n        show-word-limit\n        @keydown.ctrl.enter=\"sendQuickMessage\"\n      />\n      \n      <div class=\"quick-send-tips\">\n        <span class=\"tip\">💡 按 Ctrl+Enter 快速发送</span>\n      </div>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"resetQuickSend\">取消</el-button>\n        <el-button \n          type=\"primary\" \n          @click=\"sendQuickMessage\"\n          :loading=\"sending\"\n          :disabled=\"!quickMessage.trim()\"\n        >\n          发送\n        </el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'TerminalSelector',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      dialogVisible: this.visible,\n      currentTerminal: this.getCurrentTerminal(),\n      availableTerminals: [\n        { type: 0, name: '傻蛋网页端', icon: '🌐', online: false },\n        { type: 1, name: '傻蛋精灵App', icon: '📱', online: false },\n        { type: 2, name: '我的电脑', icon: '💻', online: false },\n        { type: 3, name: '我的云电脑', icon: '🖥', online: false },\n        { type: 4, name: '傻蛋浏览器', icon: '🔌', online: false },\n        { type: 5, name: 'MCP端', icon: '🤖', online: false }\n      ],\n      onlineTerminals: [],\n      \n      // 快速发送相关\n      showQuickSend: false,\n      selectedTerminal: null,\n      quickMessage: '',\n      sending: false\n    };\n  },\n  watch: {\n    visible(val) {\n      this.dialogVisible = val;\n      if (val) {\n        this.loadTerminalStatus();\n      }\n    },\n    dialogVisible(val) {\n      this.$emit('update:visible', val);\n    }\n  },\n  methods: {\n    async loadTerminalStatus() {\n      try {\n        const response = await this.$http.get('/message/private/terminal-status');\n        \n        // 前端HTTP库直接返回了data部分，所以从response中直接获取onlineTerminals\n        console.log('终端在线状态返回值:', response);\n        const onlineTerminals = response.otherOnlineTerminals || [];\n        \n        this.onlineTerminals = onlineTerminals;\n        \n        this.availableTerminals.forEach(terminal => {\n          terminal.online = onlineTerminals.includes(terminal.type);\n        });\n        \n        console.log('🔧 终端在线状态:', {\n          current: this.currentTerminal,\n          online: onlineTerminals,\n          available: this.availableTerminals\n        });\n      } catch (error) {\n        console.error('获取终端状态失败:', error);\n        this.$message.error('获取终端状态失败');\n      }\n    },\n\n    selectTerminal(terminal) {\n      if (!terminal.online) {\n        this.$message.warning('目标终端不在线');\n        return;\n      }\n\n      if (terminal.type === this.currentTerminal) {\n        this.$message.warning('无法选择当前终端');\n        return;\n      }\n\n      // 发出终端选择事件\n      this.$emit('terminal-selected', terminal.type);\n      this.handleClose();\n      \n      console.log('🎯 选择终端:', terminal);\n    },\n\n    openQuickSend() {\n      if (this.onlineTerminals.length === 0) {\n        this.$message.warning('暂无其他在线终端');\n        return;\n      }\n      \n      // 选择第一个在线的非当前终端\n      const firstOnlineTerminal = this.availableTerminals.find(\n        t => t.online && t.type !== this.currentTerminal\n      );\n      \n      if (firstOnlineTerminal) {\n        this.selectedTerminal = firstOnlineTerminal;\n        this.showQuickSend = true;\n        this.dialogVisible = false;\n      }\n    },\n\n    async sendQuickMessage() {\n      if (!this.quickMessage.trim()) {\n        this.$message.warning('请输入消息内容');\n        return;\n      }\n      \n      if (!this.selectedTerminal) {\n        this.$message.warning('请选择目标终端');\n        return;\n      }\n\n      this.sending = true;\n      \n      try {\n        const messageData = {\n          recvId: this.$store.getters.currentUser.id,\n          content: this.quickMessage.trim(),\n          type: 0, // 文本消息\n          targetTerminal: this.selectedTerminal.type,\n          senderTerminal: this.currentTerminal\n        };\n\n        const response = await this.$http.post('/message/private/send-to-terminal', messageData);\n        \n        this.createTargetTerminalChat(this.selectedTerminal.type);\n        \n        this.$message.success(`消息已发送到${this.selectedTerminal.name}`);\n        this.resetQuickSend();\n        \n        console.log('📤 终端间消息发送成功:', response.data);\n      } catch (error) {\n        console.error('发送终端间消息失败:', error);\n        this.$message.error('发送失败: ' + (error.response?.data?.message || error.message));\n      } finally {\n        this.sending = false;\n      }\n    },\n\n    createTargetTerminalChat(targetTerminal) {\n      const currentUserId = this.$store.getters.currentUser.id;\n      const chatInfo = {\n        type: 'PRIVATE',\n        targetId: `${currentUserId}_${targetTerminal}`,\n        senderTerminal: this.currentTerminal,\n        targetTerminal: targetTerminal,\n        showName: `${this.getTerminalName(targetTerminal)}端`,\n        headImage: this.getTerminalIcon(targetTerminal),\n        isTerminalChat: true\n      };\n\n      this.$store.commit('openChat', chatInfo);\n      \n      if (this.$route.name !== 'Chat') {\n        this.$router.push('/chat');\n      }\n    },\n\n    getCurrentTerminal() {\n      // 根据环境判断当前终端类型\n      if (typeof window !== 'undefined') {\n        // 检测VSCode环境 - 多种方式检测\n        if (window.parent !== window || // 在iframe中\n            window.acquireVsCodeApi || // VSCode WebView API\n            window.SharedServicesAccessor || // 我们的VSCode服务\n            navigator.userAgent.includes('VSCode') || // User Agent\n            window.location.protocol === 'vscode-webview:') { // VSCode WebView协议\n          return 2; // VSCode\n        }\n        \n        // 检测Electron环境\n        if (window.require || \n            window.process?.type || \n            window.isElectron ||\n            navigator.userAgent.includes('Electron')) {\n          return 3; // Server\n        }\n        \n        // 检测移动端App环境\n        if (window.cordova || \n            window.PhoneGap || \n            window.phonegap ||\n            navigator.userAgent.includes('wv') || // WebView\n            navigator.userAgent.includes('Mobile')) {\n          return 1; // App\n        }\n        \n        return 0; // Web\n      }\n      return 0; // 默认Web\n    },\n\n    getStatusClass(terminal) {\n      if (terminal.type === this.currentTerminal) return 'current';\n      return terminal.online ? 'online' : 'offline';\n    },\n\n    getStatusText(terminal) {\n      if (terminal.type === this.currentTerminal) return '当前终端';\n      return terminal.online ? '在线' : '离线';\n    },\n\n    getTerminalName(terminal) {\n      const terminalNames = {\n        0: '傻蛋网页端',\n        1: '傻蛋精灵App', \n        2: '我的电脑',\n        3: '我的云电脑',\n        4: '傻蛋浏览器',\n        5: 'MCP端'\n      };\n      return terminalNames[terminal] || '未知';\n    },\n\n    getTerminalIcon(terminal) {\n      const terminalIcons = {\n        0: '🌐',  // 傻蛋网页端\n        1: '📱',  // 傻蛋精灵App\n        2: '💻',  // 我的电脑  \n        3: '🖥',   // 我的云电脑\n        4: '🔌',  // 傻蛋浏览器\n        5: '🤖'   // MCP端\n      };\n      return terminalIcons[terminal] || '❓';\n    },\n\n    handleClose() {\n      this.dialogVisible = false;\n      this.resetQuickSend();\n    },\n\n    resetQuickSend() {\n      this.showQuickSend = false;\n      this.selectedTerminal = null;\n      this.quickMessage = '';\n      this.sending = false;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.terminal-list {\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.terminal-item {\n  display: flex;\n  align-items: center;\n  padding: 12px;\n  margin-bottom: 8px;\n  border: 1px solid #e1e6eb;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.3s;\n  position: relative;\n}\n\n.terminal-item:hover:not(.disabled) {\n  background-color: #f0f9ff;\n  border-color: #3b82f6;\n}\n\n.terminal-item.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.terminal-item.current {\n  background-color: #fff7ed;\n  border-color: #f59e0b;\n}\n\n.terminal-icon {\n  font-size: 24px;\n  margin-right: 12px;\n}\n\n.terminal-info {\n  flex: 1;\n}\n\n.terminal-name {\n  font-weight: 500;\n  color: #1f2937;\n}\n\n.terminal-status {\n  font-size: 12px;\n  margin-top: 2px;\n}\n\n.terminal-status.online {\n  color: #10b981;\n}\n\n.terminal-status.offline {\n  color: #ef4444;\n}\n\n.terminal-status.current {\n  color: #f59e0b;\n}\n\n.current-badge {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  padding: 2px 6px;\n  font-size: 10px;\n  background-color: #f59e0b;\n  color: white;\n  border-radius: 10px;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 40px 20px;\n  color: #909399;\n}\n\n.empty-icon {\n  font-size: 48px;\n  margin-bottom: 16px;\n}\n\n.empty-text {\n  font-size: 16px;\n  margin-bottom: 8px;\n}\n\n.empty-hint {\n  font-size: 12px;\n  color: #c0c4cc;\n}\n\n.quick-send-header {\n  margin-bottom: 16px;\n  padding: 12px;\n  background-color: #f5f7fa;\n  border-radius: 4px;\n}\n\n.target-terminal {\n  font-weight: 500;\n  color: #409eff;\n}\n\n.quick-send-tips {\n  margin-top: 8px;\n  font-size: 12px;\n  color: #909399;\n}\n\n.tip {\n  display: flex;\n  align-items: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TerminalSelector.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TerminalSelector.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./TerminalSelector.vue?vue&type=template&id=1eb388d6&scoped=true\"\nimport script from \"./TerminalSelector.vue?vue&type=script&lang=js\"\nexport * from \"./TerminalSelector.vue?vue&type=script&lang=js\"\nimport style0 from \"./TerminalSelector.vue?vue&type=style&index=0&id=1eb388d6&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1eb388d6\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <el-container class=\"chat-page\">\n    <!-- 搜索框 -->\n    <el-header height=\"60px\" class=\"search-container\">\n      <el-input v-model=\"searchText\" placeholder=\"搜索聊天记录...\" prefix-icon=\"el-icon-search\" clearable\n        class=\"search-input\" />\n    </el-header>\n\n    <!-- 会话列表 -->\n    <el-scrollbar class=\"chat-list-container\" style=\"height: 100%\">\n      <!-- AI对话分组 -->\n      <div class=\"chat-group\">\n        <div class=\"group-header collapsible-header\" @click=\"aiSessionsCollapsed = !aiSessionsCollapsed\">\n          <div class=\"header-left\">\n            <i class=\"el-icon-arrow-right collapse-icon\" :class=\"{ expanded: !aiSessionsCollapsed }\"></i>\n            <span class=\"group-title\">🤖 AI对话</span>\n          </div>\n          <span class=\"group-count\">({{ aiSessions.length }})</span>\n        </div>\n\n        <el-collapse-transition>\n          <div v-show=\"!aiSessionsCollapsed\" class=\"chat-list\">\n            <!-- 加载状态 -->\n            <div v-if=\"loadingAI && aiSessions.length === 0\" class=\"loading-placeholder\">\n              <i class=\"el-icon-loading\"></i>\n              <span>正在加载AI会话...</span>\n            </div>\n            \n            <!-- AI会话列表 -->\n            <template v-else>\n              <template v-for=\"(session, index) in aiSessions\">\n                <chat-item v-if=\"session && session.headImage && session.showName\" :key=\"`ai-session-${session.id}-${index}`\" :chat=\"session\"\n                  :index=\"index\" :loading=\"loading\" :disableDoubleClick=\"true\" @active=\"onActiveAIItem\" @del=\"onDelAIItem\"\n                  @top=\"onTopAIItem\" class=\"ai-chat-item\" :class=\"{\n                    active: activeAISession?.id === session.id,\n                    'has-complex-tools': session.hasComplexTools,\n                    thinking: session.isThinking,\n                    'roocode-task': session.isRooCodeTask,\n                  }\" />\n              </template>\n              \n              <!-- 空状态提示 -->\n              <div v-if=\"!loadingAI && aiSessions.length === 0\" class=\"empty-placeholder\">\n                <i class=\"el-icon-chat-dot-round\"></i>\n                <span>暂无AI对话记录</span>\n                <div class=\"empty-hint\">使用 Roo Code 创建AI对话后，将在此处显示</div>\n              </div>\n            </template>\n          </div>\n        </el-collapse-transition>\n      </div>\n\n      <!-- 人类IM会话分组 - 融合显示（私聊+群聊+终端收件箱） -->\n      <div class=\"chat-group\">\n        <div class=\"group-header\">\n          <div class=\"header-left\">\n            <i class=\"spacer-icon\"></i>\n            <span class=\"group-title\">💬 聊天消息</span>\n          </div>\n          <span class=\"group-count\">({{ filteredHumanSessions.length }})</span>\n        </div>\n\n        <div class=\"chat-list\">\n          <div v-for=\"(chat, index) in filteredHumanSessions\" :key=\"generateChatKey(chat)\">\n            <chat-item v-show=\"!chat.delete && chat.showName\" :chat=\"enrichChatDisplay(chat)\" :index=\"index\"\n              @click.native=\"onActiveHumanItem(chat, index)\" @delete=\"onDelHumanItem(chat, index)\"\n              @top=\"onTopHumanItem(chat, index)\" :active=\"isHumanChatActive(chat)\" :class=\"{\n                'terminal-inbox': chat.isTerminalInbox,\n                'normal-chat': !chat.isTerminalInbox\n              }\"></chat-item>\n          </div>\n        </div>\n      </div>\n    </el-scrollbar>\n\n  </el-container>\n</template>\n\n<script>\nimport ChatItem from \"../components/chat/ChatItem.vue\";\nimport TerminalSelector from \"../components/chat/TerminalSelector.vue\";\nimport { log } from \"@/utils/logManager.js\";\n\nexport default {\n  name: \"chat\",\n  components: {\n    ChatItem,\n    TerminalSelector,\n  },\n  data() {\n    return {\n      searchText: \"\",\n      messageContent: \"\",\n      group: {},\n      groupMembers: [],\n\n      // AI对话相关\n      aiSessions: [],\n      activeAISession: null,\n      loadingAI: false,\n\n      // 统一会话管理器\n      sessionEventUnsubscribe: null,\n\n      // 加载状态和重试\n      retryCount: 0,\n      maxRetries: 3,\n      loadingErrors: [],\n\n      // 🔧 新增：防止循环激活的状态管理\n      isActivatingSession: false,           // 激活状态锁\n      lastActivatedSessionId: null,         // 最后激活的会话ID\n      activationDebounceTimer: null,        // 防抖计时器\n      activationCooldown: 300,              // 激活冷却时间（毫秒）\n\n      // 防重复加载状态\n      isLoadingAllSessions: false,          // 防止重复加载所有会话\n\n      // 调试模式开关，避免过多日志\n      debugMode: false,\n\n      // RooCode任务监听器\n      rooCodeTaskListener: null,            // RooCode任务历史变更监听器\n      rooCodeRefreshTimer: null,            // 定时刷新计时器\n      \n      // 折叠状态\n      aiSessionsCollapsed: false,           // AI对话列表折叠状态\n    };\n  },\n\n  watch: {\n    // 监听折叠状态变化，自动保存\n    aiSessionsCollapsed(newVal) {\n      this.saveCollapseState();\n    }\n  },\n  computed: {\n    chatStore() {\n      return this.$store.state.chatStore;\n    },\n    loading() {\n      return (\n        this.chatStore.loadingGroupMsg ||\n        this.chatStore.loadingPrivateMsg ||\n        this.loadingAI\n      );\n    },\n\n    // 过滤后的AI对话\n    filteredAiSessions() {\n      // 🔧 移除死循环：不在计算属性中触发数据加载\n      if (this.aiSessions.length === 0) {\n        return [];\n      }\n\n      log.debug(\n        \"InboxSession\",\n        \"过滤AI对话，原始数量:\",\n        this.aiSessions.length\n      );\n      log.debug(\"InboxSession\", \"搜索文本:\", this.searchText);\n\n      log.debug(\n        \"InboxSession\",\n        \"过滤AI对话，原始数量:\",\n        this.aiSessions.length\n      );\n      log.debug(\"InboxSession\", \"搜索文本:\", this.searchText);\n\n      const filtered = this.aiSessions\n        .filter((session) => {\n          if (!session) {\n            log.warn(\"InboxSession\", \"发现空的session对象\");\n            return false;\n          }\n\n          if (!session.showName) {\n            log.warn(\"InboxSession\", \"session缺少showName字段:\", session);\n            // 🔧 不要因为缺少showName就丢弃，尝试使用其他字段\n            session.showName = session.title || session.name || session.id || `AI对话 ${Date.now()}`;\n            console.log(\"[InboxSession] 🔧 已自动修复showName:\", session.showName);\n          }\n\n          const match = session.showName\n            .toLowerCase()\n            .includes(this.searchText.toLowerCase());\n          return match;\n        })\n        .map((session, index) => {\n          log.debug(\"InboxSession\", `验证AI会话 ${index}:`, session.showName);\n\n          // 优化：一次性生成AI会话摘要，避免重复调用\n          const aiSummary = session.lastContent || session.lastMessage || this.generateAISessionSummary(session);\n\n          // 最严格的字段确保\n          const verifiedSession = {\n            ...session,\n            // 核心必需字段 - 绝对不能为空\n            headImage: session.headImage || session.avatar || \"🤖\",\n            showName: session.showName || `AI对话 ${index + 1}`,\n            lastContent: aiSummary,\n            lastSendTime:\n              session.lastSendTime || session.lastMessageTime || Date.now(),\n            type: session.type || \"ai\",\n            targetId:\n              session.targetId || session.id || `ai_${Date.now()}_${index}`,\n\n            // 聊天相关必需字段\n            unreadCount: session.unreadCount || 0,\n            messages: session.messages || [],\n            sendNickName: session.sendNickName || \"\",\n            atMe: Boolean(session.atMe),\n            atAll: Boolean(session.atAll),\n\n            // AI特有字段\n            aiModel: session.aiModel || \"Claude-3.5-Sonnet\",\n            messageCount: session.messageCount || 0,\n            hasComplexTools: Boolean(session.hasComplexTools),\n            isActive: Boolean(session.isActive),\n            isThinking: Boolean(session.isThinking),\n\n            // 确保其他字段\n            id: session.id || `ai_${Date.now()}_${index}`,\n            aiThreadId: session.aiThreadId || session.id,\n            avatar: session.avatar || session.headImage || \"🤖\",\n            lastMessage: aiSummary, // 复用已生成的摘要\n            lastMessageTime:\n              session.lastMessageTime || session.lastSendTime || Date.now(),\n            lastModified: session.lastModified || new Date().toISOString(),\n            createdAt: session.createdAt || new Date().toISOString(),\n            delete: false,\n            stored: true,\n          };\n\n          // 最终强制验证 - 这些字段绝对不能为空或undefined\n          const criticalFields = [\n            \"headImage\",\n            \"showName\",\n            \"lastContent\",\n            \"lastSendTime\",\n            \"type\",\n            \"targetId\",\n          ];\n          criticalFields.forEach((field) => {\n            if (!verifiedSession[field]) {\n              log.error(\n                \"InboxSession\",\n                `严重错误：AI对话 ${index} 字段 ${field} 为空，强制设置默认值`\n              );\n              switch (field) {\n                case \"headImage\":\n                  verifiedSession.headImage = \"🤖\";\n                  break;\n                case \"showName\":\n                  verifiedSession.showName = `AI对话 ${index + 1}`;\n                  break;\n                case \"lastContent\":\n                  verifiedSession.lastContent = this.generateAISessionSummary(verifiedSession);\n                  break;\n                case \"lastSendTime\":\n                  verifiedSession.lastSendTime = Date.now();\n                  break;\n                case \"type\":\n                  verifiedSession.type = \"ai\";\n                  break;\n                case \"targetId\":\n                  verifiedSession.targetId = `ai_emergency_${Date.now()}_${index}`;\n                  break;\n              }\n            }\n          });\n\n          return verifiedSession;\n        });\n\n      log.debug(\"InboxSession\", \"过滤后AI会话数量:\", filtered.length);\n\n      // 最最终验证\n      filtered.forEach((session, index) => {\n        if (!session.headImage) {\n          log.error(\n            \"InboxSession\",\n            `致命错误：过滤后的AI对话 ${index} 仍然没有headImage!`,\n            session\n          );\n          // 紧急修复\n          session.headImage = \"🤖\";\n        }\n        if (!session.showName) {\n          log.error(\n            \"InboxSession\",\n            `致命错误：过滤后的AI对话 ${index} 仍然没有showName!`,\n            session\n          );\n          // 紧急修复\n          session.showName = `AI对话 ${index + 1}`;\n        }\n      });\n\n      // 🔧 按最后会话时间倒序排列（最新的在第一位）\n      const sortedFiltered = filtered.sort((a, b) => {\n        // 获取最后会话时间，优先使用 lastSendTime，其次 lastMessageTime，最后 lastModified\n        const getLastTime = (session) => {\n          const timeFields = [\n            session.lastSendTime,\n            session.lastMessageTime,\n            session.lastModified ? new Date(session.lastModified).getTime() : null,\n            session.createdAt ? new Date(session.createdAt).getTime() : null\n          ].filter(time => time != null);\n\n          return timeFields.length > 0 ? Math.max(...timeFields) : 0;\n        };\n\n        const timeA = getLastTime(a);\n        const timeB = getLastTime(b);\n\n        // 倒序排列：时间越大（越新）排在前面\n        return timeB - timeA;\n      });\n\n      log.debug(\"InboxSession\", \"AI会话按时间倒序排序完成，最新会话:\", sortedFiltered[0]?.showName);\n\n      return sortedFiltered;\n    },\n\n    // 🔧 修正：融合的人类IM会话（支持目标终端模式）\n    filteredHumanSessions() {\n      const searchTextLower = this.searchText.toLowerCase();\n\n      // 🔧 快速预过滤，避免复杂检查\n      const validChats = (this.chatStore.chats || []).filter(chat => {\n        if (!chat || chat.delete) return false;\n\n        // 🔧 修正：支持新的终端会话格式\n        if (chat.isTerminalChat || chat.isTerminalInbox) {\n          // 终端会话：检查显示名称\n          return chat.showName && chat.showName.toLowerCase().includes(searchTextLower);\n        }\n\n        // 普通会话：排除AI会话，检查显示名称\n        return chat.showName &&\n          chat.type !== 'AI' &&\n          chat.showName.toLowerCase().includes(searchTextLower);\n      });\n\n      // 🔧 简化去重逻辑，使用Map提高性能\n      const uniqueChatsMap = new Map();\n\n      validChats.forEach(chat => {\n        let key;\n\n        // 🔧 修正：根据会话类型生成不同的键\n        if (chat.isTerminalChat) {\n          key = `terminal-${chat.senderTerminal}-${chat.targetId}`;\n        } else if (chat.isTerminalInbox) {\n          key = `inbox-${chat.receivingTerminal}-${chat.targetId}`;\n        } else {\n          key = `normal-${chat.type}-${chat.targetId}`;\n        }\n\n        // 保留最新的会话（lastSendTime最大的）\n        if (!uniqueChatsMap.has(key) ||\n          (chat.lastSendTime > uniqueChatsMap.get(key).lastSendTime)) {\n          uniqueChatsMap.set(key, chat);\n        }\n      });\n\n      // 🔧 优化排序：减少复杂时间计算\n      const uniqueChats = Array.from(uniqueChatsMap.values());\n\n      uniqueChats.sort((a, b) => {\n        // 🔧 修正：优先显示终端会话\n        const aIsTerminal = a.isTerminalChat || a.isTerminalInbox;\n        const bIsTerminal = b.isTerminalChat || b.isTerminalInbox;\n\n        if (aIsTerminal && !bIsTerminal) return -1;\n        if (!aIsTerminal && bIsTerminal) return 1;\n\n        // 时间排序\n        return (b.lastSendTime || 0) - (a.lastSendTime || 0);\n      });\n\n      console.log(`🔧 [InboxSession] 过滤后的人类会话数量: ${uniqueChats.length}`);\n      console.log(`🔧 [InboxSession] 终端会话数量: ${uniqueChats.filter(c => c.isTerminalChat || c.isTerminalInbox).length}`);\n      console.log(`🔧 [InboxSession] 普通会话数量: ${uniqueChats.filter(c => !c.isTerminalChat && !c.isTerminalInbox).length}`);\n\n      return uniqueChats;\n    },\n  },\n\n  async mounted() {\n    console.log(\"[InboxSession] 组件挂载，开始初始化...\");\n\n    // 恢复折叠状态\n    this.loadCollapseState();\n\n    // 🔧 修复死循环：在mounted中初始化AI会话数据\n    try {\n      await this.loadAllSessions();\n      console.log(\"[InboxSession] 初始化完成\");\n    } catch (error) {\n      console.error(\"[InboxSession] 初始化失败:\", error);\n    }\n\n    // 监听RooCode任务历史变更事件\n    this.setupRooCodeTaskListener();\n  },\n\n  // ✅ 添加 activated 钩子处理 keep-alive 激活\n  async activated() {\n    console.log(\"[InboxSession] 组件被激活（从keep-alive中恢复）\");\n\n    // 🔧 修复：避免重复初始化，只在真正需要时才重新加载数据\n    const hasHumanChats = this.chatStore?.chats?.length > 0;\n    const hasAIChats = this.aiSessions?.length > 0;\n\n    // 🔧 只有在数据完全为空且没有正在加载时才重新加载\n    if (!hasHumanChats && !hasAIChats && !this.isLoadingAllSessions) {\n      console.log(\"[InboxSession] 检测到数据为空，重新加载数据...\");\n      await this.loadAllSessions();\n    } else {\n      console.log(\"[InboxSession] 数据已存在或正在加载中，跳过重新加载\");\n    }\n\n    console.log(\"[InboxSession] 组件激活处理完成\");\n  },\n\n  beforeDestroy() {\n    this.cleanupEventListeners();\n    \n    // 清理RooCode任务监听器\n    this.cleanupRooCodeTaskListener();\n\n    // 清理缓存，防止内存泄漏\n    if (this._aiSummaryCache) {\n      this._aiSummaryCache.clear();\n      this._aiSummaryCache = null;\n    }\n  },\n\n\n\n  methods: {\n    // 加载折叠状态\n    loadCollapseState() {\n      try {\n        const saved = localStorage.getItem('inboxSession_aiCollapsed');\n        if (saved !== null) {\n          this.aiSessionsCollapsed = JSON.parse(saved);\n          console.log(\"[InboxSession] 已恢复AI会话折叠状态:\", this.aiSessionsCollapsed);\n        }\n      } catch (error) {\n        console.warn(\"[InboxSession] 加载折叠状态失败:\", error);\n      }\n    },\n\n    // 保存折叠状态\n    saveCollapseState() {\n      try {\n        localStorage.setItem('inboxSession_aiCollapsed', JSON.stringify(this.aiSessionsCollapsed));\n        console.log(\"[InboxSession] 已保存AI会话折叠状态:\", this.aiSessionsCollapsed);\n      } catch (error) {\n        console.warn(\"[InboxSession] 保存折叠状态失败:\", error);\n      }\n    },\n\n    // 🔧 修正：组件初始化逻辑\n    async initializeComponent() {\n      console.log(\"[InboxSession] 🔧 开始初始化组件...\");\n\n      // 🔧 使用requestIdleCallback延迟初始化，避免阻塞主线程\n      requestIdleCallback(async () => {\n        try {\n          // 🔧 修正：调用正确的终端会话初始化方法\n          await this.loadAllSessions();\n\n          console.log(\"[InboxSession] ✅ 组件初始化完成\");\n        } catch (error) {\n          console.error(\"[InboxSession] ❌ 组件初始化失败:\", error);\n        }\n      });\n    },\n\n    // 🔧 修正：加载所有会话数据（防重复加载）\n    async loadAllSessions() {\n      // 🔧 防重复加载检查\n      if (this.isLoadingAllSessions) {\n        console.log(\"[InboxSession] 🔧 正在加载中，跳过重复请求\");\n        return;\n      }\n\n      this.isLoadingAllSessions = true;\n      console.log(\"[InboxSession] 🔧 开始加载所有会话数据...\");\n\n      try {\n        // 🔧 并行加载人类聊天和AI对话数据\n        const [humanChatsPromise, aiChatsPromise] = await Promise.allSettled([\n          this.loadHumanChats(),\n          this.loadAISessionsFromUnified()\n        ]);\n\n        if (humanChatsPromise.status === 'fulfilled') {\n          console.log(\"[InboxSession] ✅ 人类聊天数据加载完成\");\n        } else {\n          console.error(\"[InboxSession] ❌ 人类聊天数据加载失败:\", humanChatsPromise.reason);\n        }\n\n        if (aiChatsPromise.status === 'fulfilled') {\n          console.log(\"[InboxSession] ✅ AI对话数据加载完成\");\n        } else {\n          console.error(\"[InboxSession] ❌ AI对话数据加载失败:\", aiChatsPromise.reason);\n        }\n\n        console.log(\"[InboxSession] 🔧 所有会话数据加载完成\");\n      } catch (error) {\n        console.error(\"[InboxSession] ❌ 加载会话数据失败:\", error);\n      } finally {\n        this.isLoadingAllSessions = false;\n      }\n    },\n\n    // 统一处理：加载人类聊天数据（移除特殊终端处理）\n    async loadHumanChats() {\n      console.log(\"[InboxSession] 🔧 开始加载人类聊天数据...\");\n\n      try {\n        // 统一处理：所有会话数据都已存在于chatStore中，无需特殊初始化\n        console.log(\"[InboxSession] ✅ 人类聊天数据加载完成，会话数量:\", this.chatStore.chats?.length || 0);\n      } catch (error) {\n        console.error(\"[InboxSession] ❌ 加载人类聊天数据失败:\", error);\n        throw error;\n      }\n    },\n\n    // 获取默认头像\n    getDefaultAvatar(type) {\n      switch (type) {\n        case \"GROUP\":\n          return \"👥\";\n        case \"PRIVATE\":\n          return \"👤\";\n        case \"ai\":\n          return \"🤖\";\n        default:\n          return \"💬\";\n      }\n    },\n\n    // 🌟 IM会话激活 - 只调用统一服务（带防抖和循环保护）\n    async onActiveItem(index) {\n      console.log(\"[InboxSession] 🔧 激活IM会话 - 原始索引:\", index);\n\n      // 🔧 注意：这里的index应该是chatStore.chats原始数组的索引，不是过滤后的索引\n      const session = this.chatStore.chats[index];\n      if (!session) {\n        console.error(\"[InboxSession] IM会话不存在，原始索引:\", index);\n        console.log(\"[InboxSession] 🔧 当前chats数量:\", this.chatStore.chats?.length || 0);\n        return;\n      }\n\n      console.log(\"[InboxSession] 🔧 找到会话:\", session.showName, \"targetId:\", session.targetId);\n\n      // 🔧 生成统一会话ID - 统一使用vue-im前缀\n      const sessionRef = session.targetId || session.id;\n      const unifiedSessionId = `vue-im-${sessionRef}`;\n\n      // 🔧 防循环检查：如果正在激活相同会话，直接返回\n      if (this.isActivatingSession && this.lastActivatedSessionId === unifiedSessionId) {\n        console.log(\"[Vue] 🛡️ 检测到重复激活，忽略:\", unifiedSessionId);\n        return;\n      }\n\n      // 🔧 清除之前的防抖计时器\n      if (this.activationDebounceTimer) {\n        clearTimeout(this.activationDebounceTimer);\n      }\n\n      // 🔧 设置防抖计时器\n      this.activationDebounceTimer = setTimeout(async () => {\n        try {\n          // 🔧 设置激活状态锁\n          this.isActivatingSession = true;\n          this.lastActivatedSessionId = unifiedSessionId;\n\n          console.log(\"[Vue] 🎯 用户选择IM会话:\", session.showName, \"ID:\", unifiedSessionId);\n\n          // 🔧 立即更新本地高亮状态，使用原始索引确保UI响应\n          console.log(\"[Vue] 🔧 设置activeChat索引:\", index, \"会话名:\", session.showName);\n          this.$store.commit(\"activeChat\", index);\n\n          if (window.vscodeServices) {\n            const unifiedSessionService = window.vscodeServices.get('IUnifiedSessionService');\n            if (unifiedSessionService && unifiedSessionService.setActiveSession) {\n\n              // 修复：不再每次都完整同步，只在初始化时同步一次\n              // 如果会话不存在，才进行单个会话的增量同步\n              const allSessions = unifiedSessionService.getAllSessions?.() || [];\n              const sessionExists = allSessions.some(s => s.id === unifiedSessionId);\n\n              if (!sessionExists) {\n                console.log(\"[Vue] 🔄 会话不存在，进行增量同步...\");\n                this.syncSingleSessionToUnified(session, unifiedSessionId);\n                await new Promise(resolve => setTimeout(resolve, 50)); // 减少延迟\n              } else {\n                console.log(\"[Vue] ✅ 会话已存在，直接激活\");\n              }\n\n              unifiedSessionService.setActiveSession(unifiedSessionId);\n              console.log(\"[Vue] ✅ 已调用统一会话激活:\", unifiedSessionId);\n\n              // 🔧 核心修复：确保IM聊天编辑器面板打开\n              if (window.vscodeServices) {\n                try {\n                  // 使用统一服务访问机制获取面板管理服务\n                  const panelManagerService = window.vscodeServices.get('panelManagerService');\n                  if (panelManagerService && panelManagerService.openChatEditor) {\n                    const chatUser = {\n                      id: session.targetId || session.id,\n                      nickName: session.showName || session.name,\n                      name: session.showName || session.name,\n                      headImage: session.headImage || session.avatar,\n                      headImageThumb: session.headImageThumb || session.avatar,\n                      avatar: session.headImage || session.avatar,\n                    };\n\n                    panelManagerService.openChatEditor(chatUser);\n                    console.log(\"[Vue] ✅ IM聊天编辑器面板已打开:\", session.showName);\n                  } else {\n                    console.warn(\"[Vue] ⚠️ PanelManagerService或openChatEditor方法不可用\");\n                  }\n                } catch (error) {\n                  console.error(\"[Vue] ❌ 打开IM聊天编辑器面板失败:\", error);\n                }\n              }\n\n\n            } else {\n              console.warn(\"[Vue] ⚠️ UnifiedSessionService不可用\");\n            }\n          } else {\n            console.warn(\"[Vue] ⚠️ VSCode环境不可用\");\n          }\n\n        } catch (error) {\n          console.error(\"[Vue] ❌ IM会话激活失败:\", error);\n        } finally {\n          // 🔧 延迟释放激活锁，防止快速重复点击\n          setTimeout(() => {\n            this.isActivatingSession = false;\n          }, this.activationCooldown);\n        }\n      }, 10); // 50ms防抖延迟\n    },\n\n    onDelItem(index) {\n      this.$store.commit(\"removeChat\", index);\n    },\n\n    onTop(chatIdx) {\n      this.$store.commit(\"moveTop\", chatIdx);\n    },\n\n    // 终端间通信相关方法\n\n    // 🔧 修正：处理融合人类会话的激活（目标终端模式）\n    async onActiveHumanItem(chat, index) {\n      console.log(\"🔧 [InboxSession] 激活人类会话 - 过滤后索引:\", index, \"会话:\", chat);\n\n      // 🔧 关键修复：将过滤后的索引转换为原始chats数组的索引\n      const realChatIndex = this.chatStore.chats.findIndex(c => {\n        // 使用多个字段进行匹配，确保找到正确的会话\n        const targetIdMatch = (c.targetId || c.id) === (chat.targetId || chat.id);\n        const nameMatch = c.showName === chat.showName;\n        const typeMatch = c.type === chat.type;\n\n        // 🔧 修正：对于终端会话，需要额外检查终端字段\n        if (chat.isTerminalChat) {\n          const terminalMatch = c.isTerminalChat === chat.isTerminalChat &&\n            c.senderTerminal === chat.senderTerminal;\n          return targetIdMatch && nameMatch && terminalMatch;\n        }\n\n        // 🔧 兼容性：支持旧的终端收件箱会话\n        if (chat.isTerminalInbox) {\n          const terminalMatch = c.isTerminalInbox === chat.isTerminalInbox &&\n            c.receivingTerminal === chat.receivingTerminal;\n          return targetIdMatch && nameMatch && terminalMatch;\n        }\n\n        return targetIdMatch && nameMatch && typeMatch;\n      });\n\n      if (realChatIndex === -1) {\n        console.error(\"🔧 [InboxSession] 未找到匹配的会话:\", chat);\n        return;\n      }\n\n      console.log(\"🔧 [InboxSession] 找到原始索引:\", realChatIndex, \"会话:\", chat.showName);\n\n      // 🔧 修正：根据会话类型进行不同的处理\n      if (chat.isTerminalChat || chat.isTerminalInbox) {\n        // 终端会话激活\n        // await this.onActiveTerminalChatItem(chat, realChatIndex);\n        // 终端会话、普通会话使用相同的处理,如果后期有问题，将以上方法的终端会话信息补全即可\n        await this.onActiveItem(realChatIndex);\n      } else {\n        // 普通私聊/群聊激活\n        await this.onActiveItem(realChatIndex);\n      }\n    },\n\n    // 处理融合人类会话的删除\n    onDelHumanItem(chat, index) {\n      if (chat.isTerminalInbox) {\n        this.onDelTerminalInboxItem(chat, index);\n      } else {\n        this.onDelItem(index);\n      }\n    },\n\n    // 处理融合人类会话的置顶\n    onTopHumanItem(chat, index) {\n      if (chat.isTerminalInbox) {\n        this.onTopTerminalInboxItem(chat, index);\n      } else {\n        this.onTop(index);\n      }\n    },\n\n    // 激活终端收件箱会话\n    async onActiveTerminalInboxItem(chat, index) {\n      console.log('[InboxSession] 🔧 激活终端收件箱会话 - 原始索引:', index, '会话:', chat.showName, '终端:', chat.receivingTerminal);\n\n      // 🔧 验证索引的正确性\n      const actualChat = this.chatStore.chats[index];\n      if (actualChat?.targetId !== chat.targetId) {\n        console.warn('[InboxSession] ⚠️ 索引验证失败！传入索引对应的会话不匹配');\n        console.log('[InboxSession] 期望会话:', chat.showName, chat.targetId);\n        console.log('[InboxSession] 实际会话:', actualChat?.showName, actualChat?.targetId);\n\n        // 重新查找正确的索引\n        const correctIndex = this.chatStore.chats.findIndex(c =>\n          (c.targetId || c.id) === (chat.targetId || chat.id) &&\n          c.isTerminalInbox === chat.isTerminalInbox &&\n          c.receivingTerminal === chat.receivingTerminal\n        );\n\n        if (correctIndex !== -1) {\n          console.log('[InboxSession] 🔧 使用修正后的索引:', correctIndex);\n          index = correctIndex;\n        } else {\n          console.error('[InboxSession] ❌ 无法找到匹配的会话索引');\n          return;\n        }\n      }\n\n      try {\n        // 🔧 使用store的智能切换方法，自动处理消息加载\n        await this.$store.dispatch(\"switchToChat\", index);\n\n        // 如果在VSCode环境，先同步会话再激活\n        if (window.vscodeServices) {\n          const unifiedSessionService = window.vscodeServices.get('IUnifiedSessionService');\n          if (unifiedSessionService) {\n\n            // 🔧 先同步终端收件箱会话到统一服务\n            console.log('[InboxSession] 🔧 先同步终端收件箱会话到统一服务');\n            const sessionId = `vue-im-${chat.targetId}`;\n            this.syncSingleSessionToUnified(chat, sessionId);\n\n            // 然后激活会话\n            if (unifiedSessionService.setActiveSession) {\n              console.log('[InboxSession] 🔧 终端收件箱会话ID:', sessionId);\n              unifiedSessionService.setActiveSession(sessionId);\n            }\n          }\n        }\n\n        console.log('[InboxSession] ✅ 终端收件箱会话激活完成');\n      } catch (error) {\n        console.error('[InboxSession] 激活终端收件箱会话失败:', error);\n        this.$message.error('加载终端会话失败');\n      }\n    },\n\n    // 删除终端收件箱会话\n    onDelTerminalInboxItem(chat, index) {\n      this.$confirm(`确定要删除${chat.showName}的会话记录吗？`, '确认删除', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$store.commit(\"removeChat\", index);\n        this.$message.success('终端会话已删除');\n      }).catch(() => {\n        // 用户取消\n      });\n    },\n\n    // 置顶终端收件箱会话\n    onTopTerminalInboxItem(chat, index) {\n      this.$store.commit(\"moveTop\", index);\n      this.$message.success(`${chat.showName}已置顶`);\n    },\n\n    // 加载终端收件箱消息\n    async loadTerminalInboxMessages(chat) {\n      try {\n        console.log(`[InboxSession] 开始加载${chat.showName}历史消息...`);\n\n        const messages = await this.$store.dispatch('loadTerminalInboxHistory', {\n          receivingTerminal: chat.receivingTerminal,\n          page: 1,\n          size: 50\n        });\n\n        console.log(`[InboxSession] 从服务器获取到${messages.length}条消息`);\n\n        // 🔧 修复：通过store mutation更新消息，确保响应式更新\n        if (messages && messages.length > 0) {\n          // 处理消息格式，确保字段完整\n          const processedMessages = messages.map(msg => {\n            // 确保时间字段是数字格式\n            const sendTime = typeof msg.sendTime === 'string' ?\n              new Date(msg.sendTime).getTime() :\n              (msg.sendTime || Date.now());\n\n            return {\n              ...msg,\n              sendTime: sendTime,\n              // 确保必要字段存在\n              id: msg.id || msg.tmpId || `terminal_${Date.now()}_${Math.random()}`,\n              selfSend: msg.selfSend !== undefined ? msg.selfSend : false,\n              sendNickName: msg.sendNickName || this.generateTerminalSenderName(msg),\n              type: msg.type || 0, // 默认文本消息\n              status: msg.status || 1 // 已发送状态\n            };\n          });\n\n          // 🔧 使用批量插入方法，避免频繁保存\n          this.$store.commit(\"batchInsertMessages\", {\n            messages: processedMessages,\n            chatInfo: chat\n          });\n\n          // 更新会话最后消息信息\n          const latestMessage = processedMessages[processedMessages.length - 1];\n          chat.lastContent = latestMessage.content;\n          chat.lastSendTime = latestMessage.sendTime;\n\n          console.log(`[InboxSession] ✅ 成功加载并插入${processedMessages.length}条终端消息`);\n        } else {\n          console.log(`[InboxSession] 📭 ${chat.showName}无历史消息`);\n        }\n\n      } catch (error) {\n        console.error('[InboxSession] 加载终端收件箱消息失败:', error);\n        this.$message.error('加载终端消息失败');\n      }\n    },\n\n    // 生成终端发送者名称\n    generateTerminalSenderName(msg) {\n      const userInfo = this.$store.state.userStore.userInfo;\n      const userName = userInfo?.nickName || '用户';\n\n      if (msg.senderTerminal !== undefined) {\n        const terminalName = this.getTerminalName(msg.senderTerminal);\n        return `${userName}(${terminalName}端)`;\n      }\n\n      return userName;\n    },\n\n    // 生成会话显示Key（用于Vue的key属性）\n    generateChatKey(chat) {\n      if (chat.isTerminalInbox) {\n        return `terminal-${chat.receivingTerminal}`;\n      } else {\n        return `${chat.type}-${chat.targetId}`;\n      }\n    },\n\n    // 🔧 修正：增强聊天显示信息（支持目标终端模式）\n    enrichChatDisplay(chat) {\n      const enriched = { ...chat };\n\n      // 🔧 修正：处理终端会话显示\n      if (chat.isTerminalChat || chat.isTerminalInbox) {\n        // 确保终端会话有正确的显示信息\n        if (!enriched.showName) {\n          let terminalType;\n          if (chat.isTerminalChat) {\n            terminalType = chat.senderTerminal;\n          } else if (chat.isTerminalInbox) {\n            terminalType = chat.receivingTerminal;\n          }\n\n          enriched.showName = this.getTerminalName(terminalType) + '端';\n        }\n\n        if (!enriched.headImage) {\n          let terminalType;\n          if (chat.isTerminalChat) {\n            terminalType = chat.senderTerminal;\n          } else if (chat.isTerminalInbox) {\n            terminalType = chat.receivingTerminal;\n          }\n\n          enriched.headImage = this.getTerminalIcon(terminalType);\n        }\n\n        // 🔧 修正：设置终端会话的特殊样式标识\n        enriched.chatType = chat.isTerminalChat ? 'terminal-chat' : 'terminal-inbox';\n\n        console.log(`🔧 [InboxSession] 丰富终端会话显示: ${enriched.showName}`);\n      }\n\n      return enriched;\n    },\n\n    // 🔧 新增：获取终端名称\n    getTerminalName(terminalType) {\n      const terminalNames = {\n        0: 'Web',\n        1: 'App',\n        2: 'VSCode',\n        3: 'PC'\n      };\n      return terminalNames[terminalType] || '未知';\n    },\n\n    // 🔧 新增：获取终端图标\n    getTerminalIcon(terminalType) {\n      const terminalIcons = {\n        0: '🌐',  // Web\n        1: '📱',  // App\n        2: '💻',  // VSCode\n        3: '🖥️'   // PC\n      };\n      return terminalIcons[terminalType] || '❓';\n    },\n\n    // 初始化统一会话服务\n    initializeUnifiedSessionService() {\n      console.log(\"[InboxSession] 初始化统一会话服务\");\n\n      // 获取vscodeServices实例\n      if (window.vscodeServices) {\n        // ✅ 避免将VSCode服务对象赋值给Vue响应式数据\n        // this.unifiedSessionService = window.vscodeServices;\n        console.log(\"[InboxSession] 统一会话服务初始化完成\");\n      } else {\n        console.error(\"[InboxSession] vscodeServices不可用\");\n      }\n    },\n\n\n\n    // 从统一会话管理器加载AI对话\n    async loadAISessionsFromUnified() {\n      try {\n        this.loadingAI = true;\n\n\n        // 尝试从多个可能的服务获取AI对话\n        let aiSessions = [];\n        let rooCodeTasks = [];\n\n        // 获取RooCode任务历史\n        try {\n          console.log(\"[InboxSession] 🔧 开始获取RooCode任务历史...\");\n          \n          if (window.vscodeServices && window.vscodeServices.get) {\n            console.log(\"[InboxSession] 🔧 尝试获取IRooCodeTaskHistoryService...\");\n            const rooCodeService = window.vscodeServices.get('IRooCodeTaskHistoryService');\n            console.log(\"[InboxSession] 🔧 IRooCodeTaskHistoryService:\", !!rooCodeService);\n            \n            if (rooCodeService) {\n              console.log(\"[InboxSession] 🔧 调用getTaskHistory方法...\");\n              const taskData = await rooCodeService.getTaskHistory();\n              console.log(\"[InboxSession] 🔧 获取到RooCode任务:\", taskData);\n              \n              if (taskData && taskData.tasks && taskData.tasks.length > 0) {\n                console.log(\"[InboxSession] 🔧 开始转换RooCode任务为AI会话格式...\");\n                // 将RooCode任务转换为AI会话格式\n                rooCodeTasks = taskData.tasks.map(task => {\n                  console.log(\"[InboxSession] 🔧 转换任务:\", task);\n                  const taskSession = rooCodeService.convertToAISession(task);\n                  return {\n                    ...taskSession,\n                    isRooCodeTask: true,\n                    originalTask: task\n                  };\n                });\n                console.log(\"[InboxSession] 🔧 转换后的RooCode任务数:\", rooCodeTasks.length);\n              } else {\n                console.log(\"[InboxSession] 🔧 没有获取到RooCode任务或任务数组为空\");\n              }\n            } else {\n              console.warn(\"[InboxSession] 🔧 IRooCodeTaskHistoryService服务不可用\");\n            }\n          } else {\n            console.warn(\"[InboxSession] 🔧 window.vscodeServices不可用\");\n          }\n        } catch (error) {\n          console.error(\"[InboxSession] 获取RooCode任务历史失败:\", error);\n        }\n        // 合并RooCode任务到AI会话列表\n        if (rooCodeTasks.length > 0) {\n          console.log(\"[InboxSession] 🔧 合并RooCode任务到AI会话列表...\");\n          aiSessions = [...rooCodeTasks, ...aiSessions];\n        }\n\n        console.log(\"[InboxSession] 🔧 === AI对话获取总结 ===\");\n        console.log(\"[InboxSession] 🔧 最终获取到AI对话:\", aiSessions.length, \"个\");\n        console.log(\"[InboxSession] 🔧 其中RooCode任务:\", rooCodeTasks.length, \"个\");\n        console.log(\"[InboxSession] 🔧 原始AI对话数据:\", aiSessions);\n\n\n\n\n        console.log(\"[InboxSession] AI对话数据处理完成:\", this.aiSessions.length, \"个\");\n\n      } catch (error) {\n        console.error(\"[InboxSession] 从统一会话管理器加载AI对话失败:\", error);\n        this.aiSessions = [];\n        throw error;\n      } finally {\n        this.loadingAI = false;\n      }\n    },\n\n    // 生成AI会话摘要（简洁版，只显示消息条数） - 带缓存优化\n    generateAISessionSummary(session) {\n      // 使用缓存key避免重复计算\n      const cacheKey = `${session.id}_${session.metadata?.messageCount || session.messageCount || 0}`;\n      if (!this._aiSummaryCache) {\n        this._aiSummaryCache = new Map();\n      }\n\n      // 检查缓存\n      if (this._aiSummaryCache.has(cacheKey)) {\n        return this._aiSummaryCache.get(cacheKey);\n      }\n\n      // 适应统一会话管理器的数据结构\n      const messageCount = session.metadata?.messageCount || session.messageCount || 0;\n\n      // 减少日志输出，避免重复调用时产生大量日志\n      if (this.debugMode) {\n        console.log(\"[InboxSession] generateAISessionSummary调用，会话ID:\", session.id, \"消息数量:\", messageCount);\n        console.log(\"[InboxSession] 会话数据结构:\", {\n          metadataMessageCount: session.metadata?.messageCount,\n          sessionMessageCount: session.messageCount,\n          finalMessageCount: messageCount\n        });\n      }\n\n      let summary;\n      if (messageCount === 0) {\n        if (this.debugMode) console.log(\"[InboxSession] AI对话无消息，返回默认值\");\n        summary = \"新建的AI对话\";\n      } else if (messageCount === 1) {\n        summary = \"1 条对话\";\n      } else {\n        summary = `${messageCount} 条对话`;\n      }\n\n      // 缓存结果\n      this._aiSummaryCache.set(cacheKey, summary);\n\n      // 限制缓存大小，避免内存泄漏\n      if (this._aiSummaryCache.size > 100) {\n        const firstKey = this._aiSummaryCache.keys().next().value;\n        this._aiSummaryCache.delete(firstKey);\n      }\n\n      return summary;\n    },\n\n    // 获取AI头像\n    getAIAvatar(model) {\n      const avatars = {\n        \"Claude-3.5-Sonnet\": \"🤖\",\n        \"GPT-4\": \"🧠\",\n        Gemini: \"💎\",\n        default: \"🤖\",\n      };\n      return avatars[model] || avatars.default;\n    },\n\n    // 🌟 AI对话激活 - 只调用统一服务（带防抖和循环保护）\n    onActiveAIItem(sessionIndex) {\n      const aiSession = this.aiSessions[sessionIndex];\n      if (!aiSession) {\n        console.error(\"[InboxSession] AI对话不存在，索引:\", sessionIndex);\n        return;\n      }\n\n      // 检查是否是RooCode任务\n      if (aiSession.isRooCodeTask) {\n        console.log(\"[InboxSession] 激活RooCode任务:\", aiSession.showName);\n        this.onActiveRooCodeTask(aiSession);\n        return;\n      }\n\n      // 🔧 生成统一会话ID\n      const unifiedSessionId = `react-${aiSession.aiThreadId || aiSession.targetId || aiSession.id}`;\n\n      // 🔧 防循环检查：如果正在激活相同会话，直接返回\n      if (this.isActivatingSession && this.lastActivatedSessionId === unifiedSessionId) {\n        console.log(\"[Vue] 🛡️ 检测到重复激活AI会话，忽略:\", unifiedSessionId);\n        return;\n      }\n\n      // 🔧 清除之前的防抖计时器\n      if (this.activationDebounceTimer) {\n        clearTimeout(this.activationDebounceTimer);\n      }\n\n      // 🔧 设置防抖计时器\n      this.activationDebounceTimer = setTimeout(async () => {\n        try {\n          // 🔧 设置激活状态锁\n          this.isActivatingSession = true;\n          this.lastActivatedSessionId = unifiedSessionId;\n\n          console.log(\"[Vue] 🎯 用户选择AI对话:\", aiSession.showName, \"ID:\", unifiedSessionId);\n\n          if (window.vscodeServices) {\n            const unifiedSessionService = window.vscodeServices.get('IUnifiedSessionService');\n            if (unifiedSessionService && unifiedSessionService.setActiveSession) {\n              unifiedSessionService.setActiveSession(unifiedSessionId);\n              console.log(\"[Vue] ✅ 已调用统一AI会话激活:\", unifiedSessionId);\n\n              // 🔧 核心修复：确保AI聊天编辑器面板打开\n              if (window.vscodeServices.openAIChatEditor) {\n                try {\n                  window.vscodeServices.openAIChatEditor(aiSession);\n                  console.log(\"[Vue] ✅ AI聊天编辑器面板已打开:\", aiSession.showName);\n                } catch (error) {\n                  console.error(\"[Vue] ❌ 打开AI聊天编辑器面板失败:\", error);\n                }\n              }\n\n\n            } else {\n              console.warn(\"[Vue] ⚠️ UnifiedSessionService不可用\");\n            }\n          } else {\n            console.warn(\"[Vue] ⚠️ VSCode环境不可用\");\n          }\n\n        } catch (error) {\n          console.error(\"[Vue] ❌ AI会话激活失败:\", error);\n        } finally {\n          // 🔧 延迟释放激活锁，防止快速重复点击\n          setTimeout(() => {\n            this.isActivatingSession = false;\n          }, this.activationCooldown);\n        }\n      }, 50); // 50ms防抖延迟\n    },\n\n    // 激活RooCode任务\n    async onActiveRooCodeTask(aiSession) {\n      try {\n        console.log(\"[InboxSession] 激活RooCode任务:\", aiSession);\n        console.log(\"[InboxSession] 原始任务对象:\", aiSession.originalTask);\n        \n        if (window.vscodeServices) {\n          const rooCodeService = window.vscodeServices.get('IRooCodeTaskHistoryService');\n          if (rooCodeService && rooCodeService.activateTask) {\n            // 使用原始任务的ID，不要使用加了前缀的ID\n            const taskId = aiSession.originalTask.id;\n            console.log(\"[InboxSession] 准备激活任务ID:\", taskId);\n            const success = await rooCodeService.activateTask(taskId);\n            \n            if (success) {\n              console.log(\"[InboxSession] RooCode任务激活成功:\", taskId);\n              this.activeAISession = aiSession;\n              \n              // 打开RooCode面板\n              if (window.vscodeServices.get('ICommandService')) {\n                await window.vscodeServices.get('ICommandService').executeCommand('roo-cline.SidebarProvider.focus');\n              }\n            } else {\n              console.error(\"[InboxSession] RooCode任务激活失败:\", taskId);\n              this.$message?.error(\"激活任务失败\");\n            }\n          }\n        }\n      } catch (error) {\n        console.error(\"[InboxSession] 激活RooCode任务失败:\", error);\n        this.$message?.error(\"激活任务失败\");\n      }\n    },\n\n    // 删除AI对话\n    async onDelAIItem(sessionIndex) {\n      const aiSession = this.aiSessions[sessionIndex];\n      if (!aiSession) return;\n      \n      // 检查是否是RooCode任务\n      if (aiSession.isRooCodeTask) {\n        console.log(\"[InboxSession] 删除RooCode任务:\", aiSession.showName);\n        this.onDelRooCodeTask(aiSession);\n        return;\n      }\n\n      try {\n        console.log(\"[Vue] 删除AI对话:\", aiSession.showName);\n\n        // 🔔 通过统一会话管理器删除AI对话\n        const threadId = aiSession.aiThreadId || aiSession.targetId || aiSession.id;\n\n        if (window.SharedServicesAccessor) {\n          // 1. 获取统一会话服务\n          const unifiedSessionService = window.SharedServicesAccessor.get('IUnifiedSessionService');\n\n          // 2. 获取ChatThreadService来执行实际删除\n          const chatThreadService = window.SharedServicesAccessor.get('IChatThreadService');\n\n          if (chatThreadService && chatThreadService.deleteThread) {\n            console.log(\"[Vue] 通过ChatThreadService删除AI线程:\", threadId);\n\n            // 调用ChatThreadService的deleteThread方法，它会自动触发统一会话管理器的删除事件\n            chatThreadService.deleteThread(threadId);\n\n            // 删除FTS索引\n            if (unifiedSessionService && unifiedSessionService.deleteSessionIndex) {\n              try {\n                await unifiedSessionService.deleteSessionIndex(threadId, 'react-ai');\n                console.log(\"[Vue] AI对话FTS索引已删除\");\n              } catch (error) {\n                console.warn(\"[Vue] 删除AI对话FTS索引失败:\", error);\n              }\n            }\n\n            console.log(\"[Vue] AI对话删除完成:\", threadId);\n            this.$message?.success(\"AI对话已删除\");\n\n          } else {\n            console.warn(\"[Vue] ChatThreadService不可用\");\n            this.$message?.error(\"删除服务不可用\");\n            return;\n          }\n        } else {\n          console.warn(\"[Vue] VSCode环境不可用\");\n          this.$message?.error(\"VSCode环境不可用\");\n          return;\n        }\n\n        // 3. 从本地列表移除（通常会被统一会话服务的事件自动更新，但为了立即响应也手动移除）\n        const realIndex = this.aiSessions.findIndex(\n          (s) => s.id === aiSession.id\n        );\n        if (realIndex >= 0) {\n          this.aiSessions.splice(realIndex, 1);\n        }\n\n        // 4. 如果删除的是当前活跃会话，清除选择\n        if (this.activeAISession?.id === aiSession.id) {\n          this.activeAISession = null;\n          this.$bus.$emit(\"ai:chat:cleared\");\n        }\n\n      } catch (error) {\n        console.error(\"[Vue] 删除AI对话失败:\", error);\n        this.$message?.error(\"删除失败\");\n      }\n    },\n\n    // 删除RooCode任务\n    async onDelRooCodeTask(aiSession) {\n      try {\n        if (!confirm(\"确定要删除这个RooCode任务吗？\")) {\n          return;\n        }\n        \n        console.log(\"[InboxSession] 删除RooCode任务:\", aiSession.originalTask);\n        \n        if (window.vscodeServices) {\n          const rooCodeService = window.vscodeServices.get('IRooCodeTaskHistoryService');\n          if (rooCodeService && rooCodeService.deleteTask) {\n            const taskId = aiSession.originalTask.id;\n            const success = await rooCodeService.deleteTask(taskId);\n            \n            if (success) {\n              console.log(\"[InboxSession] RooCode任务删除成功:\", taskId);\n              \n              // 从列表中移除\n              const index = this.aiSessions.findIndex(s => s.id === aiSession.id);\n              if (index !== -1) {\n                this.aiSessions.splice(index, 1);\n              }\n              \n              this.$message?.success(\"任务已删除\");\n            } else {\n              console.error(\"[InboxSession] RooCode任务删除失败:\", taskId);\n              this.$message?.error(\"删除任务失败\");\n            }\n          }\n        }\n      } catch (error) {\n        console.error(\"[InboxSession] 删除RooCode任务失败:\", error);\n        this.$message?.error(\"删除任务失败\");\n      }\n    },\n\n    // 置顶AI对话\n    onTopAIItem(sessionIndex) {\n      const aiSession = this.aiSessions[sessionIndex];\n      if (!aiSession) return;\n\n      console.log(\"🔝 置顶AI对话:\", aiSession.showName);\n\n      // 找到原始数组中的会话并更新时间戳\n      const realIndex = this.aiSessions.findIndex((s) => s.id === aiSession.id);\n      if (realIndex >= 0) {\n        const session = this.aiSessions[realIndex];\n        const currentTime = Date.now();\n\n        // 🔧 更新所有时间字段，确保排序时该会话排在最前面\n        session.lastSendTime = currentTime;\n        session.lastMessageTime = currentTime;\n        session.lastModified = new Date(currentTime).toISOString();\n\n        console.log(\"🔝 AI会话置顶完成，新时间戳:\", currentTime);\n\n        // 不需要手动移动，因为 filteredAiSessions 计算属性会自动重新排序\n        // Vue 的响应式系统会检测到时间字段的变化并重新计算排序\n      } else {\n        console.warn(\"🔝 未找到要置顶的AI会话:\", aiSession.showName);\n      }\n    },\n\n    // 截断文本\n    truncateText(text, maxLength) {\n      if (!text || text.length <= maxLength) return text;\n      return text.substring(0, maxLength) + \"...\";\n    },\n\n    // 设置事件监听\n    setupEventListeners() {\n      console.log(\"[InboxSession] 设置事件监听器\");\n\n      try {\n        // 订阅统一会话管理器的事件\n        const unifiedSessionService = this.$vscode.get('IUnifiedSessionService');\n        if (unifiedSessionService && unifiedSessionService.onSessionChanged) {\n          // VSCode Event返回的是IDisposable对象，有dispose方法\n          const disposable = unifiedSessionService.onSessionChanged(\n            this.handleSessionEvent.bind(this)\n          );\n\n          if (disposable && typeof disposable.dispose === 'function') {\n            this.sessionEventUnsubscribe = () => disposable.dispose();\n            console.log(\"[InboxSession] 已订阅统一会话事件\");\n          } else {\n            console.warn(\"[InboxSession] 事件订阅返回的不是有效的disposable对象\");\n            this.sessionEventUnsubscribe = null;\n          }\n        } else {\n          console.warn(\"[InboxSession] 统一会话服务或onSessionChanged事件不可用\");\n          this.sessionEventUnsubscribe = null;\n        }\n\n        // 添加DOM事件监听器（用于跨端事件通信的备用方案）\n        window.addEventListener('unified-session-created', this.handleSessionCreated);\n\n        console.log(\"[InboxSession] 事件监听器设置完成\");\n      } catch (error) {\n        console.error(\"[InboxSession] 设置事件监听器失败:\", error);\n        this.sessionEventUnsubscribe = null;\n      }\n    },\n\n    // 🌟 事件响应 - 只处理UI和业务逻辑，绝不回调（带循环保护）\n    handleSessionEvent(event) {\n      console.log(\"[Vue] 收到会话事件:\", event?.type, event?.sessionId);\n\n      if (!event || !event.type) {\n        return;\n      }\n\n      // 🔧 防循环保护：如果当前正在激活会话，且事件来自刚激活的会话，则跳过处理\n      if (event.type === 'unified-session-activated' &&\n        this.isActivatingSession &&\n        event.sessionId === this.lastActivatedSessionId) {\n        console.log(\"[Vue] 🛡️ 检测到自己激活产生的事件，跳过处理:\", event.sessionId);\n        return;\n      }\n\n      // 根据事件类型处理不同的逻辑\n      switch (event.type) {\n        case 'unified-session-activated':\n          if (event.sessionType === 'vue-im') {\n            this.handleImSessionActivated(event);\n          } else if (event.sessionType === 'react-ai') {\n            this.handleAiSessionActivated(event);\n          }\n          break;\n        case 'unified-session-deleted':\n          this.handleSessionDeleted(event);\n          break;\n        case 'unified-session-added':\n        case 'unified-session-created':\n          console.log('[Vue] 会话已创建/添加，处理新建会话');\n          this.handleSessionCreated(event);\n          break;\n        case 'unified-session-updated':\n          console.log('[Vue] 会话已更新');\n          break;\n        default:\n          console.log('[Vue] 未处理的会话事件类型:', event.type);\n      }\n\n      // 🚫 绝对不能调用 setActiveSession！\n    },\n\n    // 处理会话删除事件\n    handleSessionDeleted(event) {\n      if (!event.sessionId || !event.sessionType) {\n        console.warn('[Vue] 会话删除事件缺少必要信息');\n        return;\n      }\n\n      console.log(`[Vue] 处理会话删除: ${event.sessionType}:${event.sessionId}`);\n\n      if (event.sessionType === 'react-ai') {\n        // 处理AI会话删除\n        const sessionIdToRemove = event.sessionId.replace('react-', ''); // 移除前缀\n\n        // 从AI会话列表中移除\n        const originalLength = this.aiSessions.length;\n        this.aiSessions = this.aiSessions.filter(session => {\n          const sessionThreadId = session.aiThreadId || session.targetId || session.id;\n          return sessionThreadId !== sessionIdToRemove;\n        });\n\n        const removedCount = originalLength - this.aiSessions.length;\n        if (removedCount > 0) {\n          console.log(`[Vue] 已从AI会话列表移除 ${removedCount} 个会话`);\n\n          // 如果删除的是当前活跃会话，清除选择\n          if (this.activeAISession &&\n            (this.activeAISession.aiThreadId === sessionIdToRemove ||\n              this.activeAISession.targetId === sessionIdToRemove ||\n              this.activeAISession.id === sessionIdToRemove)) {\n            console.log('[Vue] 清除当前活跃AI会话');\n            this.activeAISession = null;\n            this.$bus.$emit(\"ai:chat:cleared\");\n          }\n        } else {\n          console.log('[Vue] 未找到要删除的AI会话:', sessionIdToRemove);\n        }\n\n      } else if (event.sessionType === 'vue-im') {\n        // 处理IM会话删除（如果需要的话）\n        console.log('[Vue] 收到Vue IM会话删除事件:', event.sessionId);\n        // 这里可以添加处理逻辑，如果Vue侧也需要响应IM会话的删除\n      }\n    },\n\n    // 处理会话创建事件\n    handleSessionCreated(event) {\n      console.log(\"[InboxSession] 收到会话创建事件:\", event.detail || event);\n\n      try {\n        const eventData = event.detail || event;\n        const { sessionType, sessionId, sessionData } = eventData;\n\n        // 只处理React AI会话创建\n        if (sessionType === 'react-ai') {\n          console.log(\"[InboxSession] React侧创建了新AI对话:\", sessionId);\n\n          // 重新加载AI会话列表\n          this.loadAllSessions();\n\n          // 自动激活新创建的会话\n          setTimeout(() => {\n            const newSession = this.aiSessions.find(session =>\n              session.id === sessionId || session.aiThreadId === sessionId\n            );\n            if (newSession) {\n              console.log(\"[InboxSession] 自动激活新创建的AI会话:\", newSession.showName);\n              this.activeAISession = newSession;\n            }\n          }, 500); // 等待加载完成\n        }\n      } catch (error) {\n        console.error(\"[InboxSession] 处理会话创建事件失败:\", error);\n      }\n    },\n\n    // 处理IM会话激活\n    async handleImSessionActivated(event) {\n      console.log(\"[Vue] 🔧 处理IM会话激活:\", event.session?.title);\n      console.log(\"[Vue] 🔧 事件数据:\", event);\n\n      // 找到对应的本地会话并激活\n      const sessionData = event.session;\n      if (!sessionData) {\n        console.warn(\"[Vue] 🔧 事件中没有会话数据\");\n        return;\n      }\n\n      // 🔧 修复：更灵活的targetId获取\n      const targetId = sessionData.targetId || sessionData.sessionId || sessionData.realSessionRef;\n      if (!targetId) {\n        console.warn(\"[Vue] 🔧 事件中没有有效的targetId:\", sessionData);\n        return;\n      }\n\n      console.log(\"[Vue] 🔧 查找targetId:\", targetId, \"类型:\", typeof targetId);\n      console.log(\"[Vue] 🔧 当前聊天列表:\", this.chatStore.chats?.map(c => ({\n        targetId: c.targetId,\n        id: c.id,\n        showName: c.showName\n      })));\n\n      // 🔧 关键修复：如果chatStore.chats为空或找不到会话，先重新加载数据\n      if (!this.chatStore.chats || this.chatStore.chats.length === 0) {\n        console.log(\"[Vue] 🔄 聊天数据为空，重新加载...\");\n        await this.loadHumanChats();\n        console.log(\"[Vue] 🔄 重新加载后的聊天列表:\", this.chatStore.chats?.map(c => ({\n          targetId: c.targetId,\n          id: c.id,\n          showName: c.showName\n        })));\n      }\n\n      const targetIdStr = targetId.toString();\n      let matchingSession = this.chatStore.chats?.find(\n        chat => {\n          const chatTargetId = (chat.targetId || chat.id)?.toString();\n          const match = chatTargetId === targetIdStr;\n          if (match) {\n            console.log(\"[Vue] 🔧 找到匹配会话:\", chat.showName);\n          }\n          return match;\n        }\n      );\n\n      // 🔧 如果第一次没找到，再尝试一次重新加载并查找\n      if (!matchingSession && this.chatStore.chats && this.chatStore.chats.length > 0) {\n        console.log(\"[Vue] 🔄 首次匹配失败，重新加载数据再次尝试...\");\n        await this.loadHumanChats();\n        matchingSession = this.chatStore.chats?.find(\n          chat => {\n            const chatTargetId = (chat.targetId || chat.id)?.toString();\n            const match = chatTargetId === targetIdStr;\n            if (match) {\n              console.log(\"[Vue] 🔧 重新加载后找到匹配会话:\", chat.showName);\n            }\n            return match;\n          }\n        );\n      }\n\n      if (matchingSession) {\n        const actualIndex = this.chatStore.chats.indexOf(matchingSession);\n        console.log(\"[Vue] 🔧 激活会话索引:\", actualIndex, \"会话名:\", matchingSession.showName);\n\n        // 只做UI和业务逻辑，不回调setActiveSession\n        this.$store.commit(\"activeChat\", actualIndex);\n        this.activeAISession = null; // 清除AI会话选择\n\n        console.log(\"[Vue] 🔧 会话已在本地激活，EditorChat会通过统一事件接收\");\n\n        // VSCode环境中打开聊天编辑器\n        if (window.SharedServicesAccessor?.openChatEditor) {\n          const chatUser = {\n            id: matchingSession.targetId || matchingSession.id,\n            nickName: matchingSession.showName || matchingSession.name,\n            name: matchingSession.showName || matchingSession.name,\n            headImage: matchingSession.headImage || matchingSession.avatar,\n            headImageThumb: matchingSession.headImageThumb || matchingSession.avatar,\n            avatar: matchingSession.headImage || matchingSession.avatar,\n          };\n\n          try {\n            window.SharedServicesAccessor.openChatEditor(chatUser);\n            console.log(\"[Vue] 🔧 Chat editor opened successfully\");\n\n            // 🌟 确保聊天记录面板打开 - 通过事件总线通知EditorChat\n            if (this.$bus) {\n              this.$bus.$emit('chat:ensure-panel-visible', {\n                sessionType: 'IM',\n                sessionData: matchingSession,\n                reason: 'session-activated'\n              });\n              console.log(\"[Vue] 🔧 已发送面板可见确保事件\");\n            }\n          } catch (error) {\n            console.error(\"[Vue] ❌ Failed to open chat editor:\", error);\n          }\n        }\n      } else {\n        console.warn(\"[Vue] ❌ 未找到匹配的会话，targetId:\", targetId);\n        console.log(\"[Vue] 🔧 可用会话ID列表:\", this.chatStore.chats?.map(c => c.targetId || c.id));\n\n        // 🔧 如果找不到匹配会话，强制清除选择\n        console.log(\"[Vue] 🔧 强制清除会话选择\");\n        this.$store.commit(\"clearActiveChat\");\n        this.activeAISession = null;\n      }\n    },\n\n    // 处理AI会话激活\n    handleAiSessionActivated(event) {\n      console.log(\"[Vue] 处理AI会话激活:\", event.session?.title);\n\n      const sessionData = event.session;\n      if (!sessionData) return;\n\n      // 找到对应的AI会话并激活\n      const matchingAISession = this.aiSessions?.find(\n        ai => ai.id === sessionData.sessionId || ai.aiThreadId === sessionData.sessionId\n      );\n\n      if (matchingAISession) {\n        // 只做UI和业务逻辑，不回调setActiveSession\n        this.activeAISession = matchingAISession;\n        this.$store.commit(\"clearActiveChat\"); // 清除人类聊天选择\n\n        // 通知EditorChat切换到AI模式\n        this.$bus.$emit(\"ai:chat:selected\", matchingAISession);\n\n        // VSCode环境中打开AI聊天编辑器\n        if (window.SharedServicesAccessor?.openAIChatEditor) {\n          try {\n            window.SharedServicesAccessor.openAIChatEditor(matchingAISession);\n            console.log(\"[Vue] AI chat editor opened successfully\");\n\n            // 🌟 确保聊天记录面板打开 - 通过事件总线通知EditorChat\n            if (this.$bus) {\n              this.$bus.$emit('chat:ensure-panel-visible', {\n                sessionType: 'AI',\n                sessionData: matchingAISession,\n                reason: 'session-activated'\n              });\n              console.log(\"[Vue] 🔧 已发送AI面板可见确保事件\");\n            }\n          } catch (error) {\n            console.error(\"[Vue] Failed to open AI chat editor:\", error);\n          }\n        }\n      }\n    },\n\n    // 打开AI聊天\n    openAIChat(aiSession) {\n      console.log(\"打开AI会话:\", aiSession.showName);\n\n      // 设置为活跃AI会话\n      this.activeAISession = aiSession;\n\n      // 清除人类聊天选择\n      this.$store.commit(\"clearActiveChat\");\n\n      // 通过事件总线通知切换到AI简化界面\n      if (this.$bus) {\n        this.$bus.$emit(\"ai:chat:selected\", aiSession);\n        console.log(\"[InboxSession] 已通过事件总线发送 ai:chat:selected 事件\");\n      }\n\n      // 同时发出组件事件（为了兼容性）\n      this.$emit(\"ai-chat-selected\", aiSession);\n\n      // VSCode环境中，同时打开编辑器中的AI聊天窗口\n      if (window.SharedServicesAccessor && window.SharedServicesAccessor.openAIChatEditor) {\n        try {\n          window.SharedServicesAccessor.openAIChatEditor(aiSession);\n          console.log(\"[InboxSession] AI chat editor opened successfully\");\n\n          // 🌟 确保聊天记录面板打开 - 通过事件总线通知EditorChat\n          if (this.$bus) {\n            this.$bus.$emit('chat:ensure-panel-visible', {\n              sessionType: 'AI',\n              sessionData: aiSession,\n              reason: 'direct-open'\n            });\n            console.log(\"[InboxSession] 🔧 已发送AI面板可见确保事件（直接打开）\");\n          }\n        } catch (error) {\n          console.error(\"[InboxSession] Failed to open AI chat editor:\", error);\n        }\n      } else {\n        console.log(\n          \"[InboxSession] VSCode环境中，同时打开编辑器中的AI聊天窗口，这个逻辑分支没有执行 - openAIChatEditor方法不存在\"\n        );\n      }\n    },\n\n    // 获取人类会话的实际索引\n    getHumanSessionIndex(filteredIndex) {\n      const filteredSessions = this.filteredHumanSessions;\n      if (filteredIndex >= 0 && filteredIndex < filteredSessions.length) {\n        const session = filteredSessions[filteredIndex];\n        return this.chatStore.chats.findIndex((chat) => chat === session);\n      }\n      return filteredIndex;\n    },\n\n    // 格式化时间\n    formatTime(timestamp) {\n      if (!timestamp) return \"\";\n\n      const date = new Date(timestamp);\n      const now = new Date();\n      const diff = now.getTime() - date.getTime();\n\n      if (diff < 60000) return \"刚刚\";\n      if (diff < 3600000) return `${Math.floor(diff / 60000)}分钟前`;\n      if (diff < 86400000) return `${Math.floor(diff / 3600000)}小时前`;\n\n      return date.toLocaleDateString(\"zh-CN\", {\n        month: \"short\",\n        day: \"numeric\",\n      });\n    },\n\n    // 刷新所有会话\n    async refreshSessions() {\n      try {\n        console.log(\"刷新会话列表\");\n\n        // 重新加载AI对话\n        await this.loadAllSessions();\n\n        this.$message?.success(\"对话列表已刷新\");\n      } catch (error) {\n        console.error(\"刷新对话失败:\", error);\n        this.$message?.error(\"刷新失败\");\n      }\n    },\n\n    // 格式化同步时间\n    formatSyncTime(timestamp) {\n      const now = Date.now();\n      const diff = now - timestamp;\n\n      if (diff < 60000) {\n        return \"刚刚\";\n      } else if (diff < 3600000) {\n        return `${Math.floor(diff / 60000)}分钟前`;\n      } else {\n        return new Date(timestamp).toLocaleTimeString(\"zh-CN\", {\n          hour: \"2-digit\",\n          minute: \"2-digit\",\n        });\n      }\n    },\n\n    // ========== VSCode聊天工作区同步功能 ==========\n\n    /**\n     * 🔧 通过UnifiedSessionService统一设置活跃会话\n     */\n    setActiveSessionInUnified(session) {\n      try {\n        console.log('🎯 [InboxSession] 通过统一服务设置活跃会话:', session.showName);\n\n        if (window.vscodeServices) {\n          // 获取UnifiedSessionService\n          const unifiedSessionService = window.vscodeServices.get('IUnifiedSessionService');\n          if (unifiedSessionService && unifiedSessionService.setActiveSession) {\n\n            // 🔧 构造统一的会话ID\n            let unifiedSessionId;\n            if (session.type === 'ai' || session.isAI) {\n              // AI会话：使用react-前缀\n              unifiedSessionId = `react-${session.aiThreadId || session.targetId || session.id}`;\n            } else {\n              // 🔧 修复：所有IM会话（包括终端收件箱）都使用vue-im-前缀\n              // 通过targetId中的格式（如1_0）来区分普通会话和终端收件箱\n              unifiedSessionId = `vue-im-${session.targetId || session.id}`;\n            }\n\n            console.log('🔧 [InboxSession] 设置统一活跃会话ID:', unifiedSessionId);\n\n            // 通过统一服务设置活跃会话\n            unifiedSessionService.setActiveSession(unifiedSessionId);\n            console.log('✅ [InboxSession] 统一活跃会话设置成功');\n\n          } else {\n            console.log('⚠️ [InboxSession] UnifiedSessionService不可用');\n          }\n        } else {\n          console.log('⚠️ [InboxSession] VSCode环境不可用');\n        }\n\n      } catch (error) {\n        console.error('❌ [InboxSession] 统一活跃会话设置失败:', error);\n      }\n    },\n\n    // 🔧 移除列表同步方法，改为按需单向同步\n\n    /**\n     * 转换会话数据为聊天工作区标准格式\n     */\n    transformSessionForWorkspace(session) {\n      if (!session) return null;\n\n      // 统一的会话数据格式\n      return {\n        id: session.targetId || session.id || `session_${Date.now()}`,\n        sessionId: session.targetId || session.id,\n        showName: session.showName || session.name || '未知会话',\n        type: session.type || (session.isAI ? 'ai' : 'PRIVATE'),\n        headImage: session.headImage || session.avatar || '💬',\n        avatar: session.headImage || session.avatar || '💬',\n        lastContent: session.lastContent || session.lastMessage || '',\n        lastMessage: session.lastContent || session.lastMessage || '',\n        lastSendTime: session.lastSendTime || session.lastMessageTime || Date.now(),\n        lastMessageTime: session.lastSendTime || session.lastMessageTime || Date.now(),\n        unreadCount: session.unreadCount || 0,\n        messageCount: session.messageCount || 0,\n\n        // AI相关字段\n        isAI: Boolean(session.type === 'ai' || session.isAI),\n        aiModel: session.aiModel,\n        aiThreadId: session.aiThreadId,\n        hasComplexTools: Boolean(session.hasComplexTools),\n        isThinking: Boolean(session.isThinking),\n\n        // 原始数据备份\n        originalData: session\n      };\n    },\n\n    /**\n     * 🔧 初始化VSCode工作区同步（单向，无回调）\n     */\n    initializeWorkspaceSync() {\n      try {\n        console.log('🔧 [InboxSession] 初始化工作区同步（单向模式）...');\n\n        if (window.SharedServicesAccessor) {\n          console.log('✅ [InboxSession] VSCode环境可用');\n          // 🔧 不再暴露回调处理器，避免循环调用\n          console.log('✅ [InboxSession] 单向同步模式已启用');\n        } else {\n          console.log('⚠️ [InboxSession] VSCode环境不可用');\n        }\n\n      } catch (error) {\n        console.error('❌ [InboxSession] 工作区同步初始化失败:', error);\n      }\n    },\n\n    // 🔧 移除VSCode回调处理方法，避免循环调用\n    // handleVSCodeActiveSessionChanged 方法已删除，改为单向同步模式\n\n    /**\n     * 🔧 同步Vue会话数据到UnifiedSessionService\n     */\n    syncSessionsToUnified() {\n      try {\n        console.log('🔄 [InboxSession] 同步会话到统一服务');\n\n        if (!window.SharedServicesAccessor) {\n          console.log('⚠️ [InboxSession] VSCode环境不可用');\n          return;\n        }\n\n        // 获取UnifiedSessionService\n        const unifiedSessionService = window.SharedServicesAccessor.get('IUnifiedSessionService');\n        if (!unifiedSessionService || !unifiedSessionService.syncVueSessionsFromWebView) {\n          console.log('⚠️ [InboxSession] UnifiedSessionService不可用');\n          return;\n        }\n\n        // 🔧 只同步人类会话，AI会话由UnifiedSessionService直接管理\n        const humanSessions = [];\n\n        // 添加人类会话（包括终端收件箱会话）\n        this.filteredHumanSessions.forEach((session, index) => {\n          const syncSession = {\n            id: session.targetId || session.id,\n            sessionId: session.targetId || session.id,\n            showName: session.showName || session.name || '未知会话',\n            // 🔧 修复：统一使用vue-im类型，通过ID前缀和额外字段区分\n            type: 'vue-im',\n            lastSendTime: session.lastSendTime || session.lastMessageTime || Date.now(),\n            lastMessageTime: session.lastSendTime || session.lastMessageTime || Date.now(),\n            messageCount: session.messages?.length || 0,\n            isActive: this.chatStore.activeChat === session,\n            // 🔧 为终端收件箱会话添加额外标识\n            isTerminalInbox: Boolean(session.isTerminalInbox),\n            receivingTerminal: session.receivingTerminal,\n            // 🔧 添加特殊标识帮助VSCode端识别\n            sessionType: session.isTerminalInbox ? 'terminal-inbox' : 'normal-chat'\n          };\n\n          const sessionType = session.isTerminalInbox ? '终端收件箱' : '普通IM';\n          console.log(`🔧 [InboxSession] 准备同步${sessionType}会话${index}:`, syncSession.showName, 'sessionType:', syncSession.sessionType);\n          humanSessions.push(syncSession);\n        });\n\n        // 🚫 不再同步AI会话，避免重复\n        // AI会话由UnifiedSessionService直接从React侧获取，避免重复和类型混乱\n        console.log(`📊 [InboxSession] 只同步${humanSessions.length}个人类会话到统一服务`);\n        console.log(`🔧 [InboxSession] AI会话数量: ${this.filteredAiSessions.length}个（不同步，由UnifiedSessionService直接管理）`);\n\n        // 调用统一服务的同步方法\n        unifiedSessionService.syncVueSessionsFromWebView(humanSessions);\n        console.log(`✅ [InboxSession] 同步${humanSessions.length}个人类会话到统一服务完成`);\n\n      } catch (error) {\n        console.error('❌ [InboxSession] 同步会话到统一服务失败:', error);\n        console.error('❌ [InboxSession] 错误堆栈:', error.stack);\n      }\n    },\n\n    // 新增：单个会话增量同步方法\n    syncSingleSessionToUnified(session, unifiedSessionId) {\n      try {\n        console.log('🔧 [InboxSession] 增量同步单个会话:', session.showName);\n\n        if (!window.vscodeServices) {\n          console.log('⚠️ [InboxSession] VSCode环境不可用');\n          return;\n        }\n\n        const unifiedSessionService = window.vscodeServices.get('IUnifiedSessionService');\n        if (!unifiedSessionService || !unifiedSessionService.syncVueSessionsFromWebView) {\n          console.log('⚠️ [InboxSession] UnifiedSessionService不可用');\n          return;\n        }\n\n        // 只同步当前会话\n        const singleSession = {\n          id: session.targetId || session.id,\n          sessionId: session.targetId || session.id,\n          showName: session.showName || session.name || '未知会话',\n          // 🔧 修复：统一使用vue-im类型，通过ID前缀和额外字段区分\n          type: 'vue-im',\n          lastSendTime: session.lastSendTime || session.lastMessageTime || Date.now(),\n          lastMessageTime: session.lastSendTime || session.lastMessageTime || Date.now(),\n          messageCount: session.messages?.length || 0,\n          isActive: true, // 即将激活的会话\n          // 🔧 为终端收件箱会话添加额外标识\n          isTerminalInbox: Boolean(session.isTerminalInbox),\n          receivingTerminal: session.receivingTerminal,\n          // 🔧 添加特殊标识帮助VSCode端识别\n          sessionType: session.isTerminalInbox ? 'terminal-inbox' : 'normal-chat'\n        };\n\n        const sessionType = session.isTerminalInbox ? '终端收件箱' : '普通IM';\n        console.log(`🔧 [InboxSession] 同步单个${sessionType}会话:`, singleSession.showName);\n        unifiedSessionService.syncVueSessionsFromWebView([singleSession]);\n        console.log(`✅ [InboxSession] 单个${sessionType}会话同步完成`);\n\n      } catch (error) {\n        console.error('❌ [InboxSession] 单个会话同步失败:', error);\n      }\n    },\n\n    // 清理事件监听器\n    // 设置RooCode任务监听器\n    setupRooCodeTaskListener() {\n      console.log(\"[InboxSession] 设置RooCode任务监听器\");\n      \n      if (window.vscodeServices) {\n        const rooCodeService = window.vscodeServices.get('IRooCodeTaskHistoryService');\n        if (rooCodeService && rooCodeService.onTaskHistoryChanged) {\n          // 监听任务历史变更事件\n          this.rooCodeTaskListener = rooCodeService.onTaskHistoryChanged((data) => {\n            console.log(\"[InboxSession] RooCode任务历史变更:\", data);\n            this.handleRooCodeTaskUpdate(data);\n          });\n          \n          // 设置定时刷新（每30秒）\n/*           this.rooCodeRefreshTimer = setInterval(async () => {\n            try {\n              console.log(\"[InboxSession] 定时刷新RooCode任务列表\");\n              const taskData = await rooCodeService.getTaskHistory();\n              this.handleRooCodeTaskUpdate(taskData);\n            } catch (error) {\n              console.error(\"[InboxSession] 定时刷新RooCode任务失败:\", error);\n            }\n          }, 30000); */\n        }\n      }\n    },\n    \n    // 清理RooCode任务监听器\n    cleanupRooCodeTaskListener() {\n      console.log(\"[InboxSession] 清理RooCode任务监听器\");\n      \n      if (this.rooCodeTaskListener) {\n        this.rooCodeTaskListener.dispose();\n        this.rooCodeTaskListener = null;\n      }\n      \n      if (this.rooCodeRefreshTimer) {\n        clearInterval(this.rooCodeRefreshTimer);\n        this.rooCodeRefreshTimer = null;\n      }\n    },\n    \n    // 处理RooCode任务更新\n    async handleRooCodeTaskUpdate(taskData) {\n      if (!taskData || !taskData.tasks) {\n        console.log(\"[InboxSession] 无效的任务数据:\", taskData);\n        return;\n      }\n      \n      console.log(\"[InboxSession] 处理RooCode任务更新，任务数:\", taskData.tasks.length);\n      \n      // 保存非RooCode的AI会话\n      const nonRooCodeSessions = this.aiSessions.filter(session => !session.isRooCodeTask);\n      console.log(\"[InboxSession] 保留非RooCode会话数:\", nonRooCodeSessions.length);\n      \n      // 转换并添加新的任务\n      if (window.vscodeServices) {\n        const rooCodeService = window.vscodeServices.get('IRooCodeTaskHistoryService');\n        if (rooCodeService && rooCodeService.convertToAISession) {\n          const rooCodeTasks = taskData.tasks.map(task => {\n            const taskSession = rooCodeService.convertToAISession(task);\n            return {\n              ...taskSession,\n              isRooCodeTask: true,\n              originalTask: task\n            };\n          });\n          \n          console.log(\"[InboxSession] 转换后的RooCode任务数:\", rooCodeTasks.length);\n          \n          // 合并所有会话并按时间排序（最新的在前）\n          const allSessions = [...rooCodeTasks, ...nonRooCodeSessions];\n          const sortedSessions = allSessions.sort((a, b) => {\n            const timeA = a.lastMessageTime || a.lastSendTime || 0;\n            const timeB = b.lastMessageTime || b.lastSendTime || 0;\n            return timeB - timeA;  // 降序排序\n          });\n          \n          // 使用 Vue.set 来确保响应式更新\n          this.$set(this, 'aiSessions', sortedSessions);\n          \n          console.log(\"[InboxSession] RooCode任务已更新，当前会话总数:\", this.aiSessions.length);\n          \n          // 如果有激活的任务，更新激活状态\n          if (taskData.activeTaskId) {\n            const activeSession = this.aiSessions.find(\n              s => s.isRooCodeTask && s.originalTask?.id === taskData.activeTaskId\n            );\n            if (activeSession) {\n              this.activeAISession = activeSession;\n              console.log(\"[InboxSession] 更新激活任务:\", taskData.activeTaskId);\n            }\n          }\n          \n          // 使用 Vue.nextTick 确保 DOM 更新\n          this.$nextTick(() => {\n            console.log(\"[InboxSession] DOM更新完成\");\n            // 再次强制更新以确保生效\n            this.$forceUpdate();\n          });\n        } else {\n          console.error(\"[InboxSession] RooCodeService未找到或无convertToAISession方法\");\n        }\n      } else {\n        console.error(\"[InboxSession] window.vscodeServices未定义\");\n      }\n    },\n\n    cleanupEventListeners() {\n      console.log(\"[InboxSession] 清理事件监听器\");\n\n      try {\n        // 🔧 清理防抖计时器\n        if (this.activationDebounceTimer) {\n          clearTimeout(this.activationDebounceTimer);\n          this.activationDebounceTimer = null;\n          console.log(\"[InboxSession] 激活防抖计时器已清理\");\n        }\n\n        // 🔧 重置激活状态\n        this.isActivatingSession = false;\n        this.lastActivatedSessionId = null;\n\n        // 移除DOM事件监听器\n        window.removeEventListener('unified-session-created', this.handleSessionCreated);\n\n        // 清理统一会话服务的事件订阅\n        if (this.sessionEventUnsubscribe && typeof this.sessionEventUnsubscribe === 'function') {\n          this.sessionEventUnsubscribe();\n          this.sessionEventUnsubscribe = null;\n          console.log(\"[InboxSession] 统一会话事件监听器已清理\");\n        }\n\n        console.log(\"[InboxSession] 事件监听器清理完成\");\n      } catch (error) {\n        console.error(\"[InboxSession] 清理事件监听器失败:\", error);\n      }\n    },\n\n    // ✅ 强制重新加载所有数据（用于 keep-alive 激活后的数据恢复）\n    async forceReloadAllData() {\n      console.log(\"[InboxSession] 强制重新加载所有数据开始\");\n\n      try {\n        // 1. 检查和修复 store 状态\n        await this.checkAndFixStoreState();\n\n        // 2. 重新完整初始化\n        await this.initializeComponent();\n\n        console.log(\"[InboxSession] 强制重新加载完成\");\n      } catch (error) {\n        console.error(\"[InboxSession] 强制重新加载失败:\", error);\n      }\n    },\n\n    // ✅ 轻量级数据刷新（用于已有数据的情况）\n    async refreshData() {\n      console.log(\"[InboxSession] 🔄 轻量级数据刷新开始\");\n\n      try {\n        // 检查 store 状态\n        await this.checkAndFixStoreState();\n\n        // 只重新加载数据，不重新设置监听器\n        await this.loadAllSessions();\n\n        console.log(\"[InboxSession] 🔄 轻量级数据刷新完成\");\n      } catch (error) {\n        console.error(\"[InboxSession] 🔄 轻量级数据刷新失败:\", error);\n      }\n    },\n\n    // ✅ 检查和修复 store 状态\n    async checkAndFixStoreState() {\n      console.log(\"[InboxSession] 🔍 检查 store 状态开始\");\n\n      // 详细检查 store 状态\n      console.log(\"[InboxSession] 🔍 this.$store 存在:\", !!this.$store);\n      console.log(\"[InboxSession] 🔍 this.$store.state 存在:\", !!this.$store?.state);\n      console.log(\"[InboxSession] 🔍 chatStore 存在:\", !!this.$store?.state?.chatStore);\n      console.log(\"[InboxSession] 🔍 chatStore.chats 存在:\", !!this.$store?.state?.chatStore?.chats);\n\n      if (!this.$store) {\n        console.error(\"[InboxSession] ❌ this.$store 不存在！这是严重问题\");\n        return false;\n      }\n\n      if (!this.$store.state) {\n        console.error(\"[InboxSession] ❌ this.$store.state 不存在！\");\n        return false;\n      }\n\n      if (!this.$store.state.chatStore) {\n        console.error(\"[InboxSession] ❌ chatStore 模块不存在！\");\n        console.log(\"[InboxSession] 🔍 可用的 store 模块:\", Object.keys(this.$store.state));\n        return false;\n      }\n\n      if (!this.$store.state.chatStore.chats) {\n        console.warn(\"[InboxSession] ⚠️ chatStore.chats 不存在，尝试初始化\");\n\n        // 尝试调度初始化 action\n        try {\n          await this.$store.dispatch('initializeChatStore');\n        } catch (error) {\n          console.warn(\"[InboxSession] 初始化 chatStore 失败，尝试手动创建:\", error);\n\n          // 手动初始化 chatStore.chats\n          if (this.$store.state.chatStore && !this.$store.state.chatStore.chats) {\n            this.$store.state.chatStore.chats = [];\n            console.log(\"[InboxSession] ✅ 手动创建了 chatStore.chats 数组\");\n          }\n        }\n      }\n\n      // 最终验证\n      const finalCheck = !!this.$store?.state?.chatStore?.chats;\n      console.log(\"[InboxSession] 🔍 最终 store 状态检查:\", finalCheck ? \"✅ 正常\" : \"❌ 异常\");\n\n      return finalCheck;\n    },\n\n    isHumanChatActive(chat) {\n      // 🔧 使用唯一标识符判断会话是否激活，而不是对象引用\n      const activeChat = this.chatStore.activeChat;\n      if (!activeChat || !chat) {\n        return false;\n      }\n\n      // 通过多个字段进行匹配，确保判断准确\n      const targetIdMatch = (activeChat.targetId || activeChat.id) === (chat.targetId || chat.id);\n      const nameMatch = activeChat.showName === chat.showName;\n      const typeMatch = activeChat.type === chat.type;\n\n      // 对于终端收件箱会话，需要额外检查终端字段\n      if (chat.isTerminalInbox && activeChat.isTerminalInbox) {\n        const terminalMatch = activeChat.receivingTerminal === chat.receivingTerminal;\n        return targetIdMatch && nameMatch && terminalMatch;\n      }\n\n      // 对于普通会话\n      return targetIdMatch && nameMatch && typeMatch;\n    },\n\n    // 统一会话激活 - 终端会话和普通会话使用相同的激活流程\n    async onActiveTerminalChatItem(chat, index) {\n      console.log('🔧 [InboxSession] 激活终端会话 - 原始索引:', index, '会话:', chat.showName);\n\n      // 🔧 验证索引的正确性\n      const actualChat = this.chatStore.chats[index];\n      if (actualChat?.targetId !== chat.targetId) {\n        console.warn('🔧 [InboxSession] ⚠️ 索引验证失败！传入索引对应的会话不匹配');\n        console.log('🔧 [InboxSession] 期望会话:', chat.showName, chat.targetId);\n        console.log('🔧 [InboxSession] 实际会话:', actualChat?.showName, actualChat?.targetId);\n\n        // 重新查找正确的索引\n        const correctIndex = this.chatStore.chats.findIndex(c =>\n          (c.targetId || c.id) === (chat.targetId || chat.id) &&\n          ((c.isTerminalChat && c.senderTerminal === chat.senderTerminal) ||\n            (c.isTerminalInbox && c.receivingTerminal === chat.receivingTerminal))\n        );\n\n        if (correctIndex === -1) {\n          console.error('🔧 [InboxSession] ❌ 无法找到正确的会话索引');\n          return;\n        }\n\n        console.log('🔧 [InboxSession] 🔍 重新找到正确索引:', correctIndex);\n        index = correctIndex;\n      }\n\n      // 统一处理：直接激活会话（与普通会话相同）\n      this.chatStore.activeChat = this.chatStore.chats[index];\n      console.log('🔧 [InboxSession] ✅ 终端会话激活完成:', chat.showName, '消息数:', this.chatStore.chats[index]?.messages?.length || 0);\n\n      // 🔧 核心修复：确保编辑器面板打开（与IM会话相同的逻辑）\n      if (window.vscodeServices) {\n        try {\n          // 使用统一服务访问机制获取面板管理服务\n          const panelManagerService = window.vscodeServices.get('panelManagerService');\n          if (panelManagerService && panelManagerService.openChatEditor) {\n            const chatUser = {\n              id: chat.targetId || chat.id,\n              nickName: chat.showName || chat.name,\n              name: chat.showName || chat.name,\n              headImage: chat.headImage || chat.avatar,\n              headImageThumb: chat.headImageThumb || chat.avatar,\n              avatar: chat.headImage || chat.avatar,\n              // 标识这是终端会话\n              isTerminalChat: chat.isTerminalChat,\n              isTerminalInbox: chat.isTerminalInbox,\n              receivingTerminal: chat.receivingTerminal,\n              senderTerminal: chat.senderTerminal\n            };\n            panelManagerService.openChatEditor(chatUser);\n            console.log(\"[InboxSession] ✅ 终端会话编辑器面板已打开:\", chat.showName);\n          } else {\n            console.warn(\"[InboxSession] ⚠️ PanelManagerService或openChatEditor方法不可用\");\n          }\n        } catch (error) {\n          console.error(\"[InboxSession] ❌ 打开终端会话编辑器面板失败:\", error);\n        }\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.chat-page {\n  height: 100%;\n  background: #f8f9fa;\n\n  .search-container {\n    padding: 12px 16px;\n    background: white;\n    border-bottom: 1px solid #e9ecef;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);\n\n    .search-input {\n      width: 100%;\n\n      ::v-deep .el-input__inner {\n        border-radius: 20px;\n        background: #f8f9fa;\n        border: 1px solid #e9ecef;\n\n        &:focus {\n          background: white;\n          border-color: #007bff;\n        }\n      }\n    }\n  }\n\n  .chat-list-container {\n    padding: 0;\n    overflow-y: auto;\n\n    .chat-group {\n      .group-header {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        padding: 12px 16px;\n        background: #f8f9fa;\n        border-bottom: 1px solid #e9ecef;\n        position: sticky;\n        top: 0;\n        z-index: 1;\n        height: 44px; // 强制设置固定高度\n        box-sizing: border-box;\n\n        .header-left {\n          display: flex;\n          align-items: center;\n          flex: 1;\n          height: 20px; // 固定高度\n          \n          .collapse-icon, .spacer-icon {\n            font-size: 12px;\n            color: #6c757d;\n            margin-right: 8px;\n            width: 12px;\n            height: 12px;\n            display: inline-block;\n            flex-shrink: 0; // 防止收缩\n          }\n          \n          .collapse-icon {\n            transition: transform 0.2s ease;\n            \n            &.expanded {\n              transform: rotate(90deg);\n            }\n          }\n          \n          .spacer-icon {\n            // 空占位符，保持与折叠图标相同的空间\n          }\n          \n          .group-title {\n            font-size: 14px;\n            font-weight: 600;\n            color: #495057;\n            line-height: 20px; // 确保一致的行高\n            height: 20px; // 固定高度\n            display: flex;\n            align-items: center;\n            flex-shrink: 0;\n          }\n        }\n        \n        .group-count {\n          font-size: 12px;\n          color: #6c757d;\n          background: #e9ecef;\n          padding: 2px 8px;\n          border-radius: 10px;\n          height: 20px; // 固定高度\n          line-height: 16px; // 确保徽章内文字垂直居中\n          display: inline-flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n          box-sizing: border-box;\n        }\n        \n        &.collapsible-header {\n          cursor: pointer;\n          user-select: none;\n          transition: background-color 0.2s ease;\n\n          &:hover {\n            background: #f1f3f4;\n          }\n        }\n\n      }\n\n      .chat-list {\n        background: white;\n\n        .loading-placeholder, .empty-placeholder {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          justify-content: center;\n          padding: 40px 20px;\n          text-align: center;\n          color: #909399;\n\n          i {\n            font-size: 24px;\n            margin-bottom: 12px;\n            \n            &.el-icon-loading {\n              animation: spin 1s linear infinite;\n            }\n          }\n\n          span {\n            font-size: 14px;\n            line-height: 1.5;\n            margin-bottom: 8px;\n          }\n          \n          .empty-hint {\n            font-size: 12px;\n            color: #c0c4cc;\n            line-height: 1.4;\n          }\n        }\n\n        .loading-placeholder {\n          color: #409eff;\n          \n          i {\n            color: #409eff;\n          }\n        }\n\n        .ai-chat-item {\n          position: relative;\n          border-bottom: 1px solid #f1f3f4;\n          transition: all 0.2s ease;\n\n          &:hover {\n            background: #f8f9fa;\n          }\n\n          &.active {\n            background: #e3f2fd;\n            border-left: 3px solid #007bff;\n          }\n\n          &.has-complex-tools {\n            &::before {\n              content: \"\";\n              position: absolute;\n              left: 0;\n              top: 0;\n              bottom: 0;\n              width: 2px;\n              background: #ffc107;\n            }\n          }\n\n          &.thinking {\n            background: linear-gradient(90deg,\n                rgba(255, 193, 7, 0.1) 0%,\n                rgba(255, 193, 7, 0.05) 50%,\n                rgba(255, 193, 7, 0.1) 100%);\n            animation: thinking-glow 2s ease-in-out infinite;\n          }\n          \n          &.roocode-task {\n            background: linear-gradient(to right, rgba(139, 92, 246, 0.05), rgba(139, 92, 246, 0.02));\n            border-left: 2px solid #8b5cf6;\n            \n            &:hover {\n              background: linear-gradient(to right, rgba(139, 92, 246, 0.1), rgba(139, 92, 246, 0.05));\n            }\n            \n            &.active {\n              background: linear-gradient(to right, rgba(139, 92, 246, 0.15), rgba(139, 92, 246, 0.1));\n              border-left: 3px solid #8b5cf6;\n            }\n          }\n\n          .ai-indicator {\n            display: flex;\n            align-items: center;\n            gap: 8px;\n\n            .ai-avatar {\n              font-size: 20px;\n              width: 32px;\n              height: 32px;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              border-radius: 50%;\n              background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n              color: white;\n              font-size: 14px;\n            }\n\n            .thinking-dots {\n              display: flex;\n              gap: 2px;\n\n              span {\n                width: 4px;\n                height: 4px;\n                background: #ffc107;\n                border-radius: 50%;\n                animation: thinking-dot 1.4s ease-in-out infinite both;\n\n                &:nth-child(1) {\n                  animation-delay: -0.32s;\n                }\n\n                &:nth-child(2) {\n                  animation-delay: -0.16s;\n                }\n\n                &:nth-child(3) {\n                  animation-delay: 0s;\n                }\n              }\n            }\n          }\n\n          .ai-meta {\n            display: flex;\n            flex-direction: column;\n            align-items: flex-end;\n            gap: 4px;\n\n            .model-tag {\n              font-size: 10px;\n              background: #e3f2fd;\n              color: #1976d2;\n              padding: 2px 6px;\n              border-radius: 8px;\n              font-weight: 500;\n            }\n\n            .tools-badge {\n              font-size: 12px;\n              color: #ff9500;\n            }\n\n            .message-count {\n              font-size: 11px;\n              color: #6c757d;\n              background: #f1f3f4;\n              padding: 2px 6px;\n              border-radius: 8px;\n            }\n          }\n        }\n\n        .human-chat-item {\n          border-bottom: 1px solid #f1f3f4;\n\n          &:hover {\n            background: #f8f9fa;\n          }\n\n          &.active {\n            background: #e8f5e8;\n            border-left: 3px solid #28a745;\n          }\n        }\n\n        // 终端收件箱会话样式\n        .terminal-inbox {\n          border-left: 2px solid #6c5ce7;\n          background: linear-gradient(90deg, rgba(108, 92, 231, 0.05) 0%, transparent 100%);\n\n          &:hover {\n            background: linear-gradient(90deg, rgba(108, 92, 231, 0.1) 0%, rgba(108, 92, 231, 0.05) 100%);\n          }\n\n          &.active {\n            background: linear-gradient(90deg, rgba(108, 92, 231, 0.15) 0%, rgba(108, 92, 231, 0.08) 100%);\n            border-left: 3px solid #6c5ce7;\n          }\n\n          .terminal-badge {\n            position: absolute;\n            top: 8px;\n            right: 8px;\n            background: #6c5ce7;\n            color: white;\n            padding: 2px 6px;\n            border-radius: 8px;\n            font-size: 10px;\n            font-weight: 500;\n          }\n        }\n\n        .normal-chat {\n          // 普通聊天的样式保持不变\n        }\n      }\n    }\n\n    .empty-state {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      height: 200px;\n\n      .empty-content {\n        text-align: center;\n\n        .empty-icon {\n          font-size: 48px;\n          color: #dee2e6;\n          margin-bottom: 16px;\n        }\n\n        h3 {\n          margin: 0 0 8px 0;\n          color: #495057;\n          font-size: 16px;\n          font-weight: 500;\n        }\n\n        p {\n          margin: 0;\n          color: #6c757d;\n          font-size: 14px;\n        }\n      }\n    }\n\n  }\n\n  .action-footer {\n    background: white;\n    border-top: 1px solid #e9ecef;\n    padding: 8px 16px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n    .action-buttons {\n      display: flex;\n      gap: 8px;\n\n      .el-button {\n        border-radius: 16px;\n        font-size: 12px;\n        padding: 6px 12px;\n\n        &--primary {\n          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n          border: none;\n\n          &:hover {\n            background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);\n          }\n        }\n      }\n    }\n\n    .sync-status {\n      .sync-time {\n        font-size: 11px;\n        color: #6c757d;\n      }\n    }\n  }\n}\n\n@keyframes thinking-glow {\n\n  0%,\n  100% {\n    box-shadow: inset 0 0 0 0 rgba(255, 193, 7, 0.1);\n  }\n\n  50% {\n    box-shadow: inset 0 0 20px 5px rgba(255, 193, 7, 0.2);\n  }\n}\n\n@keyframes thinking-dot {\n\n  0%,\n  80%,\n  100% {\n    transform: scale(0);\n  }\n\n  40% {\n    transform: scale(1);\n  }\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n// 覆盖Element UI的默认样式\n::v-deep .el-main {\n  padding: 0;\n}\n\n::v-deep .el-header {\n  padding: 0;\n}\n\n::v-deep .el-footer {\n  padding: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxSession.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxSession.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./InboxSession.vue?vue&type=template&id=45d813b4&scoped=true\"\nimport script from \"./InboxSession.vue?vue&type=script&lang=js\"\nexport * from \"./InboxSession.vue?vue&type=script&lang=js\"\nimport style0 from \"./InboxSession.vue?vue&type=style&index=0&id=45d813b4&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"45d813b4\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"friend-page\"},[_c('el-aside',{staticClass:\"friend-list-box\",attrs:{\"width\":\"100%\"}},[_c('div',{staticClass:\"friend-list-header\"},[_c('el-input',{staticClass:\"search-text\",attrs:{\"size\":\"small\",\"placeholder\":\"搜索\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})]),_c('el-button',{staticClass:\"add-btn\",attrs:{\"plain\":\"\",\"icon\":\"el-icon-plus\",\"title\":\"添加好友\"},on:{\"click\":function($event){return _vm.onShowAddFriend()}}}),_c('add-friend',{attrs:{\"dialogVisible\":_vm.showAddFriend},on:{\"close\":_vm.onCloseAddFriend}})],1),_c('el-scrollbar',{staticClass:\"friend-list-items\"},_vm._l((_vm.friendValues),function(friends,i){return _c('div',{key:i},[_c('div',{staticClass:\"index-title\"},[_vm._v(_vm._s(_vm.friendKeys[i]))]),_vm._l((friends),function(friend){return _c('div',{key:friend.id},[_c('friend-item',{attrs:{\"friend\":friend,\"active\":friend.id === _vm.activeFriend.id},on:{\"chat\":function($event){return _vm.onSendMessage(friend)},\"delete\":function($event){return _vm.onDelFriend(friend)}},nativeOn:{\"click\":function($event){return _vm.onActiveItem(friend)}}})],1)}),(i < _vm.friendValues.length - 1)?_c('div',{staticClass:\"divider\"}):_vm._e()],2)}),0)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-container class=\"friend-page\">\n\t\t<el-aside width=\"100%\" class=\"friend-list-box\">\n\t\t\t<div class=\"friend-list-header\">\n\t\t\t\t<el-input class=\"search-text\" size=\"small\" placeholder=\"搜索\" v-model=\"searchText\">\n\t\t\t\t\t<i class=\"el-icon-search el-input__icon\" slot=\"prefix\"> </i>\n\t\t\t\t</el-input>\n\t\t\t\t<el-button plain class=\"add-btn\" icon=\"el-icon-plus\" title=\"添加好友\"\n\t\t\t\t\t@click=\"onShowAddFriend()\"></el-button>\n\t\t\t\t<add-friend :dialogVisible=\"showAddFriend\" @close=\"onCloseAddFriend\"></add-friend>\n\t\t\t</div>\n\t\t\t<el-scrollbar class=\"friend-list-items\">\n\t\t\t\t<div v-for=\"(friends, i) in friendValues\" :key=\"i\">\n\t\t\t\t\t<div class=\"index-title\">{{ friendKeys[i] }}</div>\n\t\t\t\t\t<div v-for=\"(friend) in friends\" :key=\"friend.id\">\n\t\t\t\t\t\t<friend-item :friend=\"friend\" :active=\"friend.id === activeFriend.id\"\n\t\t\t\t\t\t\t@chat=\"onSendMessage(friend)\" @delete=\"onDelFriend(friend)\"\n\t\t\t\t\t\t\t@click.native=\"onActiveItem(friend)\">\n\t\t\t\t\t\t</friend-item>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"i < friendValues.length - 1\" class=\"divider\"></div>\n\t\t\t\t</div>\n\t\t\t</el-scrollbar>\n\t\t</el-aside>\n\t</el-container>\n</template>\n\n<script>\nimport FriendItem from \"../components/friend/FriendItem.vue\";\nimport AddFriend from \"../components/friend/AddFriend.vue\";\nimport HeadImage from \"../components/common/HeadImage.vue\";\nimport { pinyin } from 'pinyin-pro';\n\nexport default {\n\tname: \"friend\",\n\tcomponents: {\n\t\tFriendItem,\n\t\tAddFriend,\n\t\tHeadImage\n\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsearchText: \"\",\n\t\t\tshowAddFriend: false,\n\t\t\tuserInfo: {},\n\t\t\tactiveFriend: {}\n\t\t}\n\t},\n\tmethods: {\n\t\tonShowAddFriend() {\n\t\t\tthis.showAddFriend = true;\n\t\t},\n\t\tonCloseAddFriend() {\n\t\t\tthis.showAddFriend = false;\n\t\t},\n\t\tonActiveItem(friend) {\n\t\t\tconsole.log('hahahha')\n\t\t\tconsole.log('[InboxFriend] window.SharedServicesAccessor available:', !!window.SharedServicesAccessor);\n\t\t\t        console.log('[InboxFriend] window.SharedServicesAccessor type:', typeof window.SharedServicesAccessor);\n\t\t\tconsole.log('[InboxFriend] openChatEditor available:', !!(window.SharedServicesAccessor && window.SharedServicesAccessor.openChatEditor));\n\t\t\t\n\t\t\tthis.activeFriend = friend;\n\t\t\tthis.$store.commit(\"setActiveFriend\", friend);\n\t\t\tthis.loadUserInfo(friend.id);\n\n\t\t\t// VSCode环境中，同时打开编辑器中的聊天窗口\n\t\t\tif (window.SharedServicesAccessor && window.SharedServicesAccessor.openChatEditor) {\n\t\t\t\t// 构造用户信息对象，适配openChatEditor所需的格式\n\t\t\t\tconst chatUser = {\n\t\t\t\t\tid: friend.id,\n\t\t\t\t\tnickName: friend.nickName,\n\t\t\t\t\tname: friend.nickName,\n\t\t\t\t\theadImage: friend.headImage,\n\t\t\t\t\theadImageThumb: friend.headImageThumb || friend.headImage,\n\t\t\t\t\tavatar: friend.headImage\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tconsole.log('[InboxFriend] Opening chat editor for friend:', chatUser.nickName);\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\twindow.SharedServicesAccessor.openChatEditor(chatUser);\n\t\t\t\t\tconsole.log('[InboxFriend] Chat editor opened successfully');\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('[InboxFriend] Failed to open chat editor:', error);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn('[InboxFriend] window.SharedServicesAccessor.openChatEditor not available, trying fallback event');\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tconst chatUser = {\n\t\t\t\t\t\tid: friend.id,\n\t\t\t\t\t\tnickName: friend.nickName,\n\t\t\t\t\t\tname: friend.nickName,\n\t\t\t\t\t\theadImage: friend.headImage,\n\t\t\t\t\t\theadImageThumb: friend.headImageThumb || friend.headImage,\n\t\t\t\t\t\tavatar: friend.headImage\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\tconst event = new CustomEvent('wechat:openChatEditor', {\n\t\t\t\t\t\tdetail: { user: chatUser }\n\t\t\t\t\t});\n\t\t\t\t\twindow.dispatchEvent(event);\n\t\t\t\t\tconsole.log('[InboxFriend] Fallback event dispatched:', event);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('[InboxFriend] Failed to dispatch fallback event:', error);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonDelFriend(friend) {\n\t\t\tthis.$confirm(`确认删除'${friend.nickName}',并清空聊天记录吗?`, '确认解除?', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/friend/delete/${friend.id}`,\n\t\t\t\t\tmethod: 'delete'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$message.success(\"删除好友成功\");\n\t\t\t\t\tthis.$store.commit(\"removeFriend\", friend.id);\n\t\t\t\t\tthis.$store.commit(\"removePrivateChat\", friend.id);\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tonAddFriend(user) {\n\t\t\tthis.$http({\n\t\t\t\turl: \"/friend/add\",\n\t\t\t\tmethod: \"post\",\n\t\t\t\tparams: {\n\t\t\t\t\tfriendId: user.id\n\t\t\t\t}\n\t\t\t}).then(() => {\n\t\t\t\tthis.$message.success(\"添加成功，对方已成为您的好友\");\n\t\t\t\tlet friend = {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tnickName: user.nickName,\n\t\t\t\t\theadImage: user.headImage,\n\t\t\t\t\tonline: user.online\n\t\t\t\t}\n\t\t\t\tthis.$store.commit(\"addFriend\", friend);\n\t\t\t})\n\t\t},\n\t\tonSendMessage(user) {\n\t\t\tlet chat = {\n\t\t\t\ttype: 'PRIVATE',\n\t\t\t\ttargetId: user.id,\n\t\t\t\tshowName: user.nickName,\n\t\t\t\theadImage: user.headImageThumb,\n\t\t\t};\n\t\t\tthis.$store.commit(\"openChat\", chat);\n\t\t\tthis.$store.commit(\"activeChat\", 0);\n\t\t\tthis.$router.push(\"/home/chat\");\n\n\t\t\t// VSCode环境中，同时打开编辑器中的聊天窗口\n\t\t\tif (window.SharedServicesAccessor && window.SharedServicesAccessor.openChatEditor) {\n\t\t\t\t// 构造用户信息对象，适配openChatEditor所需的格式\n\t\t\t\tconst chatUser = {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tnickName: user.nickName,\n\t\t\t\t\tname: user.nickName,\n\t\t\t\t\theadImage: user.headImage,\n\t\t\t\t\theadImageThumb: user.headImageThumb || user.headImage,\n\t\t\t\t\tavatar: user.headImage\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tconsole.log('[InboxFriend] Opening chat editor for send message to:', chatUser.nickName);\n\t\t\t\t\n\t\t\t\t// 调用VSCode服务打开聊天编辑器\n\t\t\t\ttry {\n\t\t\t\t\twindow.SharedServicesAccessor.openChatEditor(chatUser);\n\t\t\t\t\tconsole.log('[InboxFriend] Chat editor opened successfully for messaging');\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('[InboxFriend] Failed to open chat editor for messaging:', error);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tshowFullImage() {\n\t\t\tif (this.userInfo.headImage) {\n\t\t\t\tthis.$store.commit('showFullImageBox', this.userInfo.headImage);\n\t\t\t}\n\t\t},\n\t\tupdateFriendInfo() {\n\t\t\tif (this.isFriend) {\n\t\t\t\t// store的数据不能直接修改，深拷贝一份store的数据\n\t\t\t\tlet friend = JSON.parse(JSON.stringify(this.activeFriend));\n\t\t\t\tfriend.headImage = this.userInfo.headImageThumb;\n\t\t\t\tfriend.nickName = this.userInfo.nickName;\n\t\t\t\tthis.$store.commit(\"updateChatFromFriend\", friend);\n\t\t\t\tthis.$store.commit(\"updateFriend\", friend);\n\t\t\t}\n\t\t},\n\t\tloadUserInfo(id) {\n\t\t\t// 获取好友用户信息\n\t\t\tthis.$http({\n\t\t\t\turl: `/user/find/${id}`,\n\t\t\t\tmethod: 'GET'\n\t\t\t}).then((userInfo) => {\n\t\t\t\tthis.userInfo = userInfo;\n\t\t\t\tthis.updateFriendInfo();\n\t\t\t})\n\t\t},\n\t\tfirstLetter(strText) {\n\t\t\t// 使用pinyin-pro库将中文转换为拼音\n\t\t\tlet pinyinOptions = {\n\t\t\t\ttoneType: 'none', // 无声调\n\t\t\t\ttype: 'normal' // 普通拼音\n\t\t\t};\n\t\t\tlet pyText = pinyin(strText, pinyinOptions);\n\t\t\treturn pyText[0];\n\t\t},\n\t\tisEnglish(character) {\n\t\t\treturn /^[A-Za-z]+$/.test(character);\n\t\t}\n\t},\n\tcomputed: {\n\t\tfriendStore() {\n\t\t\treturn this.$store.state.friendStore;\n\t\t},\n\t\tisFriend() {\n\t\t\treturn this.$store.getters.isFriend(this.userInfo.id);\n\t\t},\n\t\tfriendMap() {\n\t\t\t// 按首字母分组\n\t\t\tlet map = new Map();\n\t\t\tthis.friendStore.friends.forEach((f) => {\n\t\t\t\tif (f.deleted || (this.searchText && !f.nickName.includes(this.searchText))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet letter = this.firstLetter(f.nickName).toUpperCase();\n\t\t\t\t// 非英文一律为#组\n\t\t\t\tif (!this.isEnglish(letter)) {\n\t\t\t\t\tletter = \"#\"\n\t\t\t\t}\n\t\t\t\tif (f.online) {\n\t\t\t\t\tletter = '在线'\n\t\t\t\t}\n\t\t\t\tif (map.has(letter)) {\n\t\t\t\t\tmap.get(letter).push(f);\n\t\t\t\t} else {\n\t\t\t\t\tmap.set(letter, [f]);\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 排序\n\t\t\tlet arrayObj = Array.from(map);\n\t\t\tarrayObj.sort((a, b) => {\n\t\t\t\t// #组在最后面\n\t\t\t\tif (a[0] == '#' || b[0] == '#') {\n\t\t\t\t\treturn b[0].localeCompare(a[0])\n\t\t\t\t}\n\t\t\t\treturn a[0].localeCompare(b[0])\n\t\t\t})\n\t\t\tmap = new Map(arrayObj.map(i => [i[0], i[1]]));\n\t\t\treturn map;\n\t\t},\n\t\tfriendKeys() {\n\t\t\treturn Array.from(this.friendMap.keys());\n\t\t},\n\t\tfriendValues() {\n\t\t\treturn Array.from(this.friendMap.values());\n\t\t}\n\t},\n\tmounted() {\n\t\tconsole.log('[InboxFriend] Component mounted!');\n\t\tconsole.log('[InboxFriend] window.SharedServicesAccessor available on mount:', !!window.SharedServicesAccessor);\n\t\tconsole.log('[InboxFriend] window object keys:', Object.keys(window));\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.friend-page {\n\theight: 100% !important;\n\t\n\t// 重写Element UI的el-container样式\n\t\n\t\n\t.friend-list-box {\n\t\theight: 100% !important;\n\t\t\n\t\t// 重写Element UI的el-aside样式\n\t\t&.el-aside {\n\t\t\theight: 100% !important;\n\t\t}\n\t\t\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbackground: var(--im-background);\n\n\t\t.friend-list-header {\n\t\t\theight: 50px;\n\t\t\tflex-shrink: 0;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 8px;\n\n\t\t\t.add-btn {\n\t\t\t\tpadding: 5px !important;\n\t\t\t\tmargin: 5px;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tborder-radius: 50%;\n\t\t\t}\n\t\t}\n\n\t\t.friend-list-items {\n\t\t\tflex: 1;\n\t\t\theight: 0; // 强制flex子元素高度计算\n\n\t\t\t.index-title {\n\t\t\t\ttext-align: left;\n\t\t\t\tfont-size: var(--im-larger-size-larger);\n\t\t\t\tpadding: 5px 15px;\n\t\t\t\tcolor: var(--im-text-color-light);\n\t\t\t}\n\t\t}\n\t}\n\n\t.friend-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t.friend-header {\n\t\t\theight: 50px;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 12px;\n\t\t\tfont-size: var(--im-font-size-larger);\n\t\t\tborder-bottom: var(--im-border);\n\t\t\tbox-sizing: border-box;\n\t\t}\n\n\t\t.friend-detail {\n\t\t\tdisplay: flex;\n\t\t\tpadding: 50px 80px 20px 80px;\n\t\t\ttext-align: center;\n\n\t\t\t.info-item {\n\t\t\t\tmargin-left: 20px;\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t\tborder: 1px #ddd solid;\n\t\t\t}\n\n\t\t\t.description {\n\t\t\t\tpadding: 20px 20px 0 20px;\n\t\t\t}\n\t\t}\n\n\t\t.frient-btn-group {\n\t\t\ttext-align: left !important;\n\t\t\tpadding: 20px;\n\t\t}\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxFriend.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxFriend.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./InboxFriend.vue?vue&type=template&id=427844bc\"\nimport script from \"./InboxFriend.vue?vue&type=script&lang=js\"\nexport * from \"./InboxFriend.vue?vue&type=script&lang=js\"\nimport style0 from \"./InboxFriend.vue?vue&type=style&index=0&id=427844bc&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"group-page\"},[_c('el-aside',{staticClass:\"group-list-box\",attrs:{\"width\":\"100%\"}},[_c('div',{staticClass:\"group-list-header\"},[_c('el-input',{staticClass:\"search-text\",attrs:{\"size\":\"small\",\"placeholder\":\"搜索\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})]),_c('el-button',{staticClass:\"add-btn\",attrs:{\"plain\":\"\",\"icon\":\"el-icon-plus\",\"title\":\"创建群聊\"},on:{\"click\":function($event){return _vm.onCreateGroup()}}})],1),_c('el-scrollbar',{staticClass:\"group-list-items\"},_vm._l((_vm.groupValues),function(groups,i){return _c('div',{key:i},[_c('div',{staticClass:\"index-title\"},[_vm._v(_vm._s(_vm.groupKeys[i]))]),_vm._l((groups),function(group){return _c('div',{key:group.id},[_c('group-item',{attrs:{\"group\":group,\"active\":group.id == _vm.activeGroup.id},nativeOn:{\"click\":function($event){return _vm.onActiveItem(group)}}})],1)}),(i < _vm.groupValues.length - 1)?_c('div',{staticClass:\"divider\"}):_vm._e()],2)}),0)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-container class=\"group-page\">\n\t\t<el-aside width=\"100%\" class=\"group-list-box\">\n\t\t\t<div class=\"group-list-header\">\n\t\t\t\t<el-input class=\"search-text\" size=\"small\" placeholder=\"搜索\" v-model=\"searchText\">\n\t\t\t\t\t<i class=\"el-icon-search el-input__icon\" slot=\"prefix\"> </i>\n\t\t\t\t</el-input>\n\t\t\t\t<el-button plain class=\"add-btn\" icon=\"el-icon-plus\" title=\"创建群聊\" @click=\"onCreateGroup()\"></el-button>\n\t\t\t</div>\n\t\t\t<el-scrollbar class=\"group-list-items\">\n\t\t\t\t<div v-for=\"(groups, i) in groupValues\" :key=\"i\">\n\t\t\t\t\t<div class=\"index-title\">{{ groupKeys[i] }}</div>\n\t\t\t\t\t<div v-for=\"group in groups\" :key=\"group.id\">\n\t\t\t\t\t\t<group-item :group=\"group\" :active=\"group.id == activeGroup.id\"\n\t\t\t\t\t\t\t@click.native=\"onActiveItem(group)\">\n\t\t\t\t\t\t</group-item>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"i < groupValues.length - 1\" class=\"divider\"></div>\n\t\t\t\t</div>\n\t\t\t</el-scrollbar>\n\t\t</el-aside>\n\n\t</el-container>\n</template>\n\n\n<script>\nimport GroupItem from '../components/group/GroupItem';\nimport FileUpload from '../components/common/FileUpload';\nimport GroupMember from '../components/group/GroupMember.vue';\nimport AddGroupMember from '../components/group/AddGroupMember.vue';\nimport GroupMemberSelector from '../components/group/GroupMemberSelector.vue';\nimport HeadImage from '../components/common/HeadImage.vue';\nimport { pinyin } from 'pinyin-pro';\n\nexport default {\n\tname: \"group\",\n\tcomponents: {\n\t\tGroupItem,\n\t\tGroupMember,\n\t\tFileUpload,\n\t\tAddGroupMember,\n\t\tGroupMemberSelector,\n\t\tHeadImage\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsearchText: \"\",\n\t\t\tmaxSize: 5 * 1024 * 1024,\n\t\t\tactiveGroup: {},\n\t\t\tgroupMembers: [],\n\t\t\tshowAddGroupMember: false,\n\t\t\tshowMaxIdx: 150,\n\t\t\trules: {\n\t\t\t\tname: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入群聊名称',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}]\n\t\t\t}\n\t\t};\n\t},\n\tmethods: {\n\t\tonCreateGroup() {\n\t\t\tthis.$prompt('请输入群聊名称', '创建群聊', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\tinputPattern: /\\S/,\n\t\t\t\tinputErrorMessage: '请输入群聊名称'\n\t\t\t}).then((o) => {\n\t\t\t\tlet userInfo = this.$store.state.userStore.userInfo;\n\t\t\t\tlet data = {\n\t\t\t\t\tname: o.value\n\t\t\t\t}\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/create?groupName=${o.value}`,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: data\n\t\t\t\t}).then((group) => {\n\t\t\t\t\tthis.$store.commit(\"addGroup\", group);\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tonActiveItem(group) {\n\t\t\tthis.showMaxIdx = 150;\n\t\t\t// store数据不能直接修改，所以深拷贝一份内存\n\t\t\tthis.activeGroup = JSON.parse(JSON.stringify(group));\n\t\t\tthis.$store.commit(\"setActiveGroup\", this.activeGroup);\n\t\t\t// 重新加载群成员\n\t\t\tthis.groupMembers = [];\n\t\t\tthis.loadGroupMembers();\n\n\t\t\t// 触发父组件事件，切换到聊天视图\n\t\t\tthis.$emit('groupClick', {\n\t\t\t\ttype: \"GROUP\",\n\t\t\t\ttargetId: group.id,\n\t\t\t\tshowName: group.showGroupName || group.name,\n\t\t\t\theadImage: group.headImage,\n\t\t\t});\n\n\t\t\t// VSCode环境中，同时打开编辑器中的聊天窗口\n\t\t\tif (window.SharedServicesAccessor && window.SharedServicesAccessor.openChatEditor) {\n\t\t\t\t// 构造群组信息对象，适配openChatEditor所需的格式\n\t\t\t\tconst chatGroup = {\n\t\t\t\t\tid: group.id,\n\t\t\t\t\tnickName: group.showGroupName || group.name,\n\t\t\t\t\tname: group.showGroupName || group.name,\n\t\t\t\t\theadImage: group.headImage,\n\t\t\t\t\theadImageThumb: group.headImageThumb || group.headImage,\n\t\t\t\t\tavatar: group.headImage,\n\t\t\t\t\ttype: 'GROUP' // 标识为群组聊天\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tconsole.log('[InboxGroup] Opening chat editor for group:', chatGroup.nickName);\n\t\t\t\t\n\t\t\t\t// 调用VSCode服务打开聊天编辑器\n\t\t\t\ttry {\n\t\t\t\t\twindow.SharedServicesAccessor.openChatEditor(chatGroup);\n\t\t\t\t\tconsole.log('[InboxGroup] Chat editor opened successfully');\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('[InboxGroup] Failed to open chat editor:', error);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonInvite() {\n\t\t\tthis.$refs.addGroupMember.open();\n\t\t},\n\t\tonRemove() {\n\t\t\t// 群主不显示\n\t\t\tlet hideIds = [this.activeGroup.ownerId];\n\t\t\tthis.$refs.removeSelector.open(50, [], [], hideIds);\n\t\t},\n\t\tonRemoveComplete(members) {\n\t\t\tlet userIds = members.map(m => m.userId);\n\t\t\tlet data = {\n\t\t\t\tgroupId: this.activeGroup.id,\n\t\t\t\tuserIds: userIds\n\t\t\t}\n\t\t\tthis.$http({\n\t\t\t\turl: \"/group/members/remove\",\n\t\t\t\tmethod: 'delete',\n\t\t\t\tdata: data\n\t\t\t}).then(() => {\n\t\t\t\tthis.loadGroupMembers();\n\t\t\t\tthis.$message.success(`您移除了${userIds.length}位成员`);\n\t\t\t})\n\t\t},\n\t\tonUploadSuccess(data) {\n\t\t\tthis.activeGroup.headImage = data.originUrl;\n\t\t\tthis.activeGroup.headImageThumb = data.thumbUrl;\n\t\t},\n\t\tonSaveGroup() {\n\t\t\tthis.$refs['groupForm'].validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tlet vo = this.activeGroup;\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: \"/group/modify\",\n\t\t\t\t\t\tmethod: \"put\",\n\t\t\t\t\t\tdata: vo\n\t\t\t\t\t}).then((group) => {\n\t\t\t\t\t\tthis.$store.commit(\"updateGroup\", group);\n\t\t\t\t\t\tthis.$message.success(\"修改成功\");\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tonDissolve() {\n\t\t\tthis.$confirm(`确认要解散'${this.activeGroup.name}'吗?`, '确认解散?', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/delete/${this.activeGroup.id}`,\n\t\t\t\t\tmethod: 'delete'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$message.success(`群聊'${this.activeGroup.name}'已解散`);\n\t\t\t\t\tthis.$store.commit(\"removeGroup\", this.activeGroup.id);\n\t\t\t\t\tthis.reset();\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\tonQuit() {\n\t\t\tthis.$confirm(`确认退出'${this.activeGroup.showGroupName}',并清空聊天记录吗？`, '确认退出?', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/quit/${this.activeGroup.id}`,\n\t\t\t\t\tmethod: 'delete'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$message.success(`您已退出'${this.activeGroup.name}'`);\n\t\t\t\t\tthis.$store.commit(\"removeGroup\", this.activeGroup.id);\n\t\t\t\t\tthis.$store.commit(\"removeGroupChat\", this.activeGroup.id);\n\t\t\t\t\tthis.reset();\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\tonSendMessage() {\n\t\t\tlet chat = {\n\t\t\t\ttype: 'GROUP',\n\t\t\t\ttargetId: this.activeGroup.id,\n\t\t\t\tshowName: this.activeGroup.showGroupName,\n\t\t\t\theadImage: this.activeGroup.headImage,\n\t\t\t};\n\t\t\tthis.$store.commit(\"openChat\", chat);\n\t\t\tthis.$store.commit(\"activeChat\", 0);\n\t\t\tthis.$router.push(\"/home/chat\");\n\n\t\t\t// VSCode环境中，同时打开编辑器中的聊天窗口\n\t\t\tif (window.SharedServicesAccessor && window.SharedServicesAccessor.openChatEditor) {\n\t\t\t\t// 构造群组信息对象，适配openChatEditor所需的格式\n\t\t\t\tconst chatGroup = {\n\t\t\t\t\tid: this.activeGroup.id,\n\t\t\t\t\tnickName: this.activeGroup.showGroupName || this.activeGroup.name,\n\t\t\t\t\tname: this.activeGroup.showGroupName || this.activeGroup.name,\n\t\t\t\t\theadImage: this.activeGroup.headImage,\n\t\t\t\t\theadImageThumb: this.activeGroup.headImageThumb || this.activeGroup.headImage,\n\t\t\t\t\tavatar: this.activeGroup.headImage,\n\t\t\t\t\ttype: 'GROUP' // 标识为群组聊天\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tconsole.log('[InboxGroup] Opening chat editor for send message to group:', chatGroup.nickName);\n\t\t\t\t\n\t\t\t\t// 调用VSCode服务打开聊天编辑器\n\t\t\t\ttry {\n\t\t\t\t\twindow.SharedServicesAccessor.openChatEditor(chatGroup);\n\t\t\t\t\tconsole.log('[InboxGroup] Chat editor opened successfully for group messaging');\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('[InboxGroup] Failed to open chat editor for group messaging:', error);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonScroll(e) {\n\t\t\tconst scrollbar = e.target;\n\t\t\t// 滚到底部\n\t\t\tif (scrollbar.scrollTop + scrollbar.clientHeight >= scrollbar.scrollHeight - 30) {\n\t\t\t\tif (this.showMaxIdx < this.showMembers.length) {\n\t\t\t\t\tthis.showMaxIdx += 50;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tloadGroupMembers() {\n\t\t\tthis.$http({\n\t\t\t\turl: `/group/members/${this.activeGroup.id}`,\n\t\t\t\tmethod: \"get\"\n\t\t\t}).then((members) => {\n\t\t\t\tthis.groupMembers = members;\n\t\t\t})\n\t\t},\n\t\treset() {\n\t\t\tthis.activeGroup = {};\n\t\t\tthis.groupMembers = [];\n\t\t},\n\t\tfirstLetter(strText) {\n\t\t\t// 使用pinyin-pro库将中文转换为拼音\n\t\t\tlet pinyinOptions = {\n\t\t\t\ttoneType: 'none', // 无声调\n\t\t\t\ttype: 'normal' // 普通拼音\n\t\t\t};\n\t\t\tlet pyText = pinyin(strText, pinyinOptions);\n\t\t\treturn pyText[0];\n\t\t},\n\t\tisEnglish(character) {\n\t\t\treturn /^[A-Za-z]+$/.test(character);\n\t\t}\n\t},\n\tcomputed: {\n\t\tgroupStore() {\n\t\t\treturn this.$store.state.groupStore;\n\t\t},\n\t\townerName() {\n\t\t\tlet member = this.groupMembers.find((m) => m.userId == this.activeGroup.ownerId);\n\t\t\treturn member && member.showNickName;\n\t\t},\n\t\tisOwner() {\n\t\t\treturn this.activeGroup.ownerId == this.$store.state.userStore.userInfo.id;\n\t\t},\n\t\timageAction() {\n\t\t\treturn `/image/upload`;\n\t\t},\n\t\tgroupMap() {\n\t\t\t// 按首字母分组\n\t\t\tlet map = new Map();\n\t\t\tthis.groupStore.groups.forEach((g) => {\n\t\t\t\tif (g.quit || (this.searchText && !g.showGroupName.includes(this.searchText))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet letter = this.firstLetter(g.showGroupName).toUpperCase();\n\t\t\t\t// 非英文一律为#组\n\t\t\t\tif (!this.isEnglish(letter)) {\n\t\t\t\t\tletter = \"#\"\n\t\t\t\t}\n\t\t\t\tif (map.has(letter)) {\n\t\t\t\t\tmap.get(letter).push(g);\n\t\t\t\t} else {\n\t\t\t\t\tmap.set(letter, [g]);\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 排序\n\t\t\tlet arrayObj = Array.from(map);\n\t\t\tarrayObj.sort((a, b) => {\n\t\t\t\t// #组在最后面\n\t\t\t\tif (a[0] == '#' || b[0] == '#') {\n\t\t\t\t\treturn b[0].localeCompare(a[0])\n\t\t\t\t}\n\t\t\t\treturn a[0].localeCompare(b[0])\n\t\t\t})\n\t\t\tmap = new Map(arrayObj.map(i => [i[0], i[1]]));\n\t\t\treturn map;\n\t\t},\n\t\tgroupKeys() {\n\t\t\treturn Array.from(this.groupMap.keys());\n\t\t},\n\t\tgroupValues() {\n\t\t\treturn Array.from(this.groupMap.values());\n\t\t},\n\t\tshowMembers() {\n\t\t\treturn this.groupMembers.filter((m) => !m.quit)\n\t\t},\n\t\tscrollHeight() {\n\t\t\treturn Math.min(300, 80 + this.showMembers.length / 10 * 80);\n\t\t}\n\t},\n\tmounted() {\n\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.group-page {\n\theight: 100% !important;\n\t\n\t// 重写Element UI的el-container样式\n\t\n\t\n\t.group-list-box {\n\t\theight: 100% !important;\n\t\t\n\t\t// 重写Element UI的el-aside样式\n\t\t&.el-aside {\n\t\t\theight: 100% !important;\n\t\t}\n\t\t\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbackground: var(--im-background);\n\n\t\t.group-list-header {\n\t\t\theight: 50px;\n\t\t\tflex-shrink: 0;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 8px;\n\n\t\t\t.add-btn {\n\t\t\t\tpadding: 5px !important;\n\t\t\t\tmargin: 5px;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tborder-radius: 50%;\n\t\t\t}\n\t\t}\n\n\t\t.group-list-items {\n\t\t\tflex: 1;\n\t\t\theight: 0; // 强制flex子元素高度计算\n\n\t\t\t.index-title {\n\t\t\t\ttext-align: left;\n\t\t\t\tfont-size: var(--im-larger-size-larger);\n\t\t\t\tpadding: 5px 15px;\n\t\t\t\tcolor: var(--im-text-color-light);\n\t\t\t}\n\t\t}\n\t}\n\n\t.group-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t.group-header {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\tpadding: 0 12px;\n\t\t\tline-height: 50px;\n\t\t\tfont-size: var(--im-font-size-larger);\n\t\t\tborder-bottom: var(--im-border);\n\t\t}\n\n\t\t.el-divider--horizontal {\n\t\t\tmargin: 16px 0;\n\t\t}\n\n\t\t.group-container {\n\t\t\toverflow: auto;\n\t\t\tpadding: 20px;\n\t\t\tflex: 1;\n\n\t\t\t.group-info {\n\t\t\t\tdisplay: flex;\n\t\t\t\tpadding: 5px 20px;\n\n\t\t\t\t.group-form {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tpadding-left: 40px;\n\t\t\t\t\tmax-width: 700px;\n\t\t\t\t}\n\n\t\t\t\t.avatar-uploader {\n\t\t\t\t\t--width: 160px;\n\t\t\t\t\ttext-align: left;\n\n\t\t\t\t\t.el-upload {\n\t\t\t\t\t\tborder: 1px dashed #d9d9d9 !important;\n\t\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t}\n\n\t\t\t\t\t.el-upload:hover {\n\t\t\t\t\t\tborder-color: #409EFF;\n\t\t\t\t\t}\n\n\t\t\t\t\t.avatar-uploader-icon {\n\t\t\t\t\t\tfont-size: 28px;\n\t\t\t\t\t\tcolor: #8c939d;\n\t\t\t\t\t\twidth: var(--width);\n\t\t\t\t\t\theight: var(--width);\n\t\t\t\t\t\tline-height: var(--width);\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t.avatar {\n\t\t\t\t\t\twidth: var(--width);\n\t\t\t\t\t\theight: var(--width);\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.send-btn {\n\t\t\t\t\tmargin-top: 12px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.group-member-list {\n\t\t\t\tpadding: 0 12px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\ttext-align: center;\n\n\t\t\t\t.group-member {\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t}\n\n\t\t\t\t.member-tools {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\twidth: 60px;\n\n\t\t\t\t\t.tool-btn {\n\t\t\t\t\t\twidth: 38px;\n\t\t\t\t\t\theight: 38px;\n\t\t\t\t\t\tline-height: 38px;\n\t\t\t\t\t\tborder: var(--im-border);\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tbox-sizing: border-box;\n\n\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\tborder: #aaaaaa solid 1px;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.tool-text {\n\t\t\t\t\t\tfont-size: var(--im-font-size-smaller);\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 30px;\n\t\t\t\t\t\tline-height: 30px;\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\t\toverflow: hidden\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxGroup.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxGroup.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./InboxGroup.vue?vue&type=template&id=6f13104a\"\nimport script from \"./InboxGroup.vue?vue&type=script&lang=js\"\nexport * from \"./InboxGroup.vue?vue&type=script&lang=js\"\nimport style0 from \"./InboxGroup.vue?vue&type=style&index=0&id=6f13104a&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"home-page\">\n    <div class=\"navi-bar\">\n      <div class=\"navi-bar-box\">\n        <div class=\"top\">\n          <div class=\"menu\">\n\n            <div class=\"botoom-item\" @click=\"switchUi(1)\">\n              <span class=\"icon iconfont icon-chat\"></span>\n              <div v-show=\"unreadCount > 0\" class=\"unread-text\">\n                {{ unreadCount }}\n              </div>\n            </div>\n\n\n            <div class=\"botoom-item\" @click=\"switchUi(2)\">\n              <span class=\"icon iconfont icon-friend\"></span>\n            </div>\n\n\n            <div class=\"botoom-item\" @click=\"switchUi(3)\">\n              <span class=\"icon iconfont icon-group\" style=\"font-size: 28px\"></span>\n            </div>\n            <div class=\"botoom-item\" @click=\"showSetting\">\n              <span class=\"icon iconfont icon-setting\" style=\"font-size: 20px\"></span>\n            </div>\n\n          </div>\n        </div>\n\n\n      </div>\n    </div>\n    <div class=\"content-box\">\n      <keep-alive>\n        <inbox-session v-if=\"uiStore.viewCode === 1\"></inbox-session>\n        <inbox-friend v-if=\"uiStore.viewCode === 2\"></inbox-friend>\n        <inbox-group v-if=\"uiStore.viewCode === 3\"></inbox-group>\n      </keep-alive>\n    </div>\n    <setting :visible=\"showSettingDialog\" @close=\"closeSetting()\"></setting>\n    <user-info v-show=\"uiStore.userInfo.show\" :pos=\"uiStore.userInfo.pos\" :user=\"uiStore.userInfo.user\"\n      @close=\"$store.commit('closeUserInfoBox')\"></user-info>\n    <full-image :visible=\"uiStore.fullImage.show\" :url=\"uiStore.fullImage.url\"\n      @close=\"$store.commit('closeFullImageBox')\"></full-image>\n    <rtc-private-video ref=\"rtcPrivateVideo\"></rtc-private-video>\n    <rtc-group-video ref=\"rtcGroupVideo\"></rtc-group-video>\n  </div>\n</template>\n\n<script>\nimport HeadImage from \"../components/common/HeadImage.vue\";\nimport Setting from \"../components/setting/Setting.vue\";\nimport UserInfo from \"../components/common/UserInfo.vue\";\nimport FullImage from \"../components/common/FullImage.vue\";\nimport RtcPrivateVideo from \"../components/rtc/RtcPrivateVideo.vue\";\nimport RtcPrivateAcceptor from \"../components/rtc/RtcPrivateAcceptor.vue\";\nimport RtcGroupVideo from \"../components/rtc/RtcGroupVideo.vue\";\nimport InboxSession from \"./InboxSession.vue\";\nimport InboxFriend from \"./InboxFriend.vue\";\nimport InboxGroup from \"./InboxGroup.vue\";\n\nexport default {\n  components: {\n    HeadImage,\n    Setting,\n    UserInfo,\n    FullImage,\n    RtcPrivateVideo,\n    RtcPrivateAcceptor,\n    RtcGroupVideo,\n    InboxSession,\n    InboxFriend,\n    InboxGroup,\n  },\n  data() {\n    return {\n      showSettingDialog: false,\n      lastPlayAudioTime: new Date().getTime() - 1000,\n      isFullscreen: true,\n      reconnecting: false,\n    };\n  },\n  methods: {\n\n    init() {\n      this.$eventBus.$on(\"openPrivateVideo\", (rctInfo) => {\n        // 进入单人视频通话\n        this.$refs.rtcPrivateVideo.open(rctInfo);\n      });\n      this.$eventBus.$on(\"openGroupVideo\", (rctInfo) => {\n        // 进入多人视频通话\n        this.$refs.rtcGroupVideo.open(rctInfo);\n      });\n\n      this.$store\n        .dispatch(\"load\")\n        .then(() => {\n          // ws初始化\n          this.$wsApi.connect(\n            process.env.VUE_APP_WS_URL,\n            sessionStorage.getItem(\"accessToken\")\n          );\n          this.$wsApi.onConnect(() => {\n            console.log('[reconnecting]:', this.reconnecting);\n            if (this.reconnecting) {\n              this.onReconnectWs();\n            } else {\n              // 加载离线消息\n              this.pullPrivateOfflineMessage(\n                this.$store.state.chatStore.privateMsgMaxId\n              );\n              this.pullGroupOfflineMessage(\n                this.$store.state.chatStore.groupMsgMaxId\n              );\n            }\n          });\n          this.$wsApi.onMessage((cmd, msgInfo) => {\n            if (cmd == 2) {\n              // 关闭ws\n              this.$wsApi.close(3000);\n              // 异地登录，强制下线\n              this.$alert(\"您已在其他地方登录，将被强制下线\", \"强制下线通知\", {\n                confirmButtonText: \"确定\",\n                callback: (action) => {\n                  location.href = \"/\";\n                },\n              });\n            } else if (cmd == 3) {\n              // 插入私聊消息\n              this.handlePrivateMessage(msgInfo);\n            } else if (cmd == 4) {\n              // 插入群聊消息\n              this.handleGroupMessage(msgInfo);\n            } else if (cmd == 5) {\n              // 处理系统消息\n              this.handleSystemMessage(msgInfo);\n            } else if (cmd == 11) {\n              // LLM_STREAM_CHUNK - 处理LLM流式数据块\n              this.handleLLMChunk(msgInfo);\n            } else if (cmd == 12) {\n              // LLM_STREAM_END - 处理LLM流式结束\n              this.handleLLMEnd(msgInfo);\n            } else if (cmd == 13) {\n              // LLM_STREAM_ERROR - 处理LLM流式错误\n              this.handleLLMError(msgInfo);\n            }\n          });\n          this.$wsApi.onClose((e) => {\n            if (e.code != 3000) {\n              // 断线重连\n              this.reconnectWs();\n            }\n          });\n        })\n        .catch((e) => {\n          console.log(\"初始化失败\", e);\n        });\n    },\n    reconnectWs() {\n      // 记录标志\n      this.reconnecting = true;\n      // 重新加载一次个人信息，目的是为了保证网络已经正常且token有效\n      this.$store\n        .dispatch(\"loadUser\")\n        .then(() => {\n          // 断线重连\n          this.$message.error(\"连接断开，正在尝试重新连接...\");\n          this.$wsApi.reconnect(\n            process.env.VUE_APP_WS_URL,\n            sessionStorage.getItem(\"accessToken\")\n          );\n        })\n        .catch(() => {\n          // 10s后重试\n          setTimeout(() => this.reconnectWs(), 10000);\n        });\n    },\n    onReconnectWs() {\n      // 重连成功\n      this.reconnecting = false;\n      // 重新加载群和好友\n      const promises = [];\n      promises.push(this.$store.dispatch(\"loadFriend\"));\n      promises.push(this.$store.dispatch(\"loadGroup\"));\n      Promise.all(promises)\n        .then(() => {\n          // 加载离线消息\n          this.pullPrivateOfflineMessage(\n            this.$store.state.chatStore.privateMsgMaxId\n          );\n          this.pullGroupOfflineMessage(\n            this.$store.state.chatStore.groupMsgMaxId\n          );\n          this.$message.success(\"重新连接成功\");\n        })\n        .catch(() => {\n          this.$message.error(\"初始化失败\");\n          this.onExit();\n        });\n    },\n    pullPrivateOfflineMessage(minId) {\n      console.log(`[Inbox] 拉取私聊离线消息，minId: ${minId}`);\n      this.$store.commit(\"loadingPrivateMsg\", true);\n      this.$http({\n        url: \"/message/private/pullOfflineMessage?minId=\" + minId,\n        method: \"GET\",\n      }).catch(() => {\n        this.$store.commit(\"loadingPrivateMsg\", false);\n      });\n    },\n    pullGroupOfflineMessage(minId) {\n      console.log(`[Inbox] 拉取群聊离线消息，minId: ${minId}`);\n      this.$store.commit(\"loadingGroupMsg\", true);\n      this.$http({\n        url: \"/message/group/pullOfflineMessage?minId=\" + minId,\n        method: \"GET\",\n      }).catch(() => {\n        this.$store.commit(\"loadingGroupMsg\", false);\n      });\n    },\n    handlePrivateMessage(msg) {\n      // 标记这条消息是不是自己发的\n      msg.selfSend = msg.sendId == this.$store.state.userStore.userInfo.id;\n\n      // 🔧 检查是否为终端消息：包含senderTerminal和targetTerminal字段的就是终端消息\n      if (msg.senderTerminal !== undefined && msg.targetTerminal !== undefined) {\n        console.log(\"[Inbox] 🔧 接收到终端消息:\", msg);\n        // 设置终端消息标识\n        msg.isTerminalChat = true;\n        if (msg.targetTerminal === this.getCurrentTerminal()) {\n          this.insertTerminalMessage(msg);\n        }\n        // 🔧 修复：终端消息也需要更新privateMsgMaxId\n        if (msg.id && msg.id > this.$store.state.chatStore.privateMsgMaxId) {\n          this.$store.commit('updatePrivateMsgMaxId', msg.id);\n        }\n        return;\n      }\n\n      // 好友id\n      let friendId = msg.selfSend ? msg.recvId : msg.sendId;\n      // 会话信息\n      let chatInfo = {\n        type: \"PRIVATE\",\n        targetId: friendId,\n      };\n      // 消息加载标志\n      if (msg.type == this.$enums.MESSAGE_TYPE.LOADING) {\n        this.$store.commit(\"loadingPrivateMsg\", JSON.parse(msg.content));\n        return;\n      }\n      // 消息已读处理，清空已读数量\n      if (msg.type == this.$enums.MESSAGE_TYPE.READED) {\n        this.$store.commit(\"resetUnreadCount\", chatInfo);\n        return;\n      }\n      // 消息回执处理,改消息状态为已读\n      if (msg.type == this.$enums.MESSAGE_TYPE.RECEIPT) {\n        this.$store.commit(\"readedMessage\", {\n          friendId: msg.sendId,\n        });\n        return;\n      }\n      // 消息撤回\n      if (msg.type == this.$enums.MESSAGE_TYPE.RECALL) {\n        this.$store.commit(\"recallMessage\", [msg, chatInfo]);\n        return;\n      }\n      // 新增好友\n      if (msg.type == this.$enums.MESSAGE_TYPE.FRIEND_NEW) {\n        this.$store.commit(\"addFriend\", JSON.parse(msg.content));\n        return;\n      }\n      // 删除好友\n      if (msg.type == this.$enums.MESSAGE_TYPE.FRIEND_DEL) {\n        this.$store.commit(\"removeFriend\", friendId);\n        return;\n      }\n      // 单人webrtc 信令\n      if (this.$msgType.isRtcPrivate(msg.type)) {\n        this.$refs.rtcPrivateVideo.onRTCMessage(msg);\n        return;\n      }\n      // 插入消息\n      if (\n        this.$msgType.isNormal(msg.type) ||\n        this.$msgType.isTip(msg.type) ||\n        this.$msgType.isAction(msg.type)\n      ) {\n        let friend = this.loadFriendInfo(friendId);\n        this.insertPrivateMessage(friend, msg);\n      }\n    },\n    // 🔧 修正：终端消息插入方法（目标终端模式）\n    insertTerminalMessage(msg) {\n      try {\n        const userInfo = this.$store.state.userStore.userInfo;\n        if (!userInfo || !userInfo.id) {\n          console.error(\"[Inbox] 用户信息未加载，无法处理终端消息\");\n          return;\n        }\n\n        // 🔧 修正：使用发送端作为会话标识（目标终端模式）\n        const senderTerminal = msg.senderTerminal;\n        const targetTerminal = msg.targetTerminal || this.getCurrentTerminal(); // 如果没有targetTerminal，使用当前终端\n        const currentTerminal = this.getCurrentTerminal();\n\n        // 🔧 关键修复：确保终端消息的selfSend字段正确设置\n        msg.selfSend = msg.senderTerminal === currentTerminal;\n\n        // 🔧 补充缺失的targetTerminal字段\n        if (!msg.targetTerminal) {\n          msg.targetTerminal = currentTerminal;\n        }\n\n        console.log(`🔧 [Inbox] 终端消息: ${this.getTerminalName(senderTerminal)}端→${this.getTerminalName(targetTerminal)}端, selfSend=${msg.selfSend}`);\n\n        // 🔧 修正：创建发送端会话信息（在目标端显示为\"发送端会话\"）\n        const chatInfo = {\n          type: \"PRIVATE\",\n          targetId: `${userInfo.id}_${senderTerminal}`,  // 使用发送端标识\n          showName: `${this.getTerminalName(senderTerminal)}端`,\n          headImage: this.getTerminalIcon(senderTerminal),\n          isTerminalChat: true,  // 使用新的标识\n          senderTerminal: senderTerminal  // 记录发送端\n        };\n\n        // 🔧 修正：设置消息的发送者昵称（显示发送端信息）\n        msg.sendNickName = `${userInfo.nickName}(${this.getTerminalName(senderTerminal)}端)`;\n\n        // 使用统一的会话管理流程\n        this.$store.commit(\"openChat\", chatInfo);\n        this.$store.commit(\"insertMessage\", [msg, chatInfo]);\n\n        console.log(`✅ [Inbox] 终端消息已插入到 ${this.getTerminalName(senderTerminal)}端 会话`);\n\n        // 播放提示音（接收到其他终端的消息时）\n        if (!msg.selfSend && this.$msgType.isNormal(msg.type) &&\n          msg.status != this.$enums.MESSAGE_STATUS.READED) {\n          this.playAudioTip();\n        }\n      } catch (error) {\n        console.error(\"[Inbox] 处理终端消息失败:\", error, msg);\n      }\n    },\n    // 🔧 新增：获取终端名称的工具方法\n    getTerminalName(terminal) {\n      const terminalNames = {\n        0: \"傻蛋网页\",\n        1: \"傻蛋精灵App\",\n        2: \"我的电脑\",\n        3: \"我的云电脑\",\n        4: \"傻蛋浏览器\",\n        5: \"MCP\"\n      };\n      return terminalNames[terminal] || \"未知\";\n    },\n\n    // 🔧 新增：获取终端图标的工具方法\n    getTerminalIcon(terminal) {\n      const terminalIcons = {\n        0: \"🌐\",  // 傻蛋网页端\n        1: \"📱\",  // 傻蛋精灵App\n        2: \"💻\",  // 我的电脑\n        3: \"🖥️\",  // 我的云电脑\n        4: \"🔌\",  // 傻蛋浏览器\n        5: \"🤖\"   // MCP端\n      };\n      return terminalIcons[terminal] || \"❓\";\n    },\n\n    // 🔧 新增：获取当前终端类型\n    getCurrentTerminal() {\n      // 根据环境判断当前终端类型\n      if (typeof window !== 'undefined') {\n        // 检测VSCode环境 - 多种方式检测\n        if (window.parent !== window || // 在iframe中\n          window.acquireVsCodeApi || // VSCode WebView API\n          window.SharedServicesAccessor || // 我们的VSCode服务\n          navigator.userAgent.includes('VSCode') || // User Agent\n          window.location.protocol === 'vscode-webview:') { // VSCode WebView协议\n          return 2; // VSCode\n        }\n\n        // 检测Electron环境\n        if (window.require ||\n          window.process?.type ||\n          window.isElectron ||\n          navigator.userAgent.includes('Electron')) {\n          return 3; // PC客户端\n        }\n\n        // 检测移动端App环境\n        if (window.cordova ||\n          window.PhoneGap ||\n          window.phonegap ||\n          navigator.userAgent.includes('wv') || // WebView\n          navigator.userAgent.includes('Mobile')) {\n          return 1; // App\n        }\n\n        return 0; // Web\n      }\n      return 0; // 默认Web\n    },\n    insertPrivateMessage(friend, msg) {\n      let chatInfo = {\n        type: \"PRIVATE\",\n        targetId: friend.id,\n        showName: friend.nickName,\n        headImage: friend.headImage,\n      };\n      // 打开会话\n      this.$store.commit(\"openChat\", chatInfo);\n      // 插入消息\n      this.$store.commit(\"insertMessage\", [msg, chatInfo]);\n      // 播放提示音\n      if (\n        !msg.selfSend &&\n        this.$msgType.isNormal(msg.type) &&\n        msg.status != this.$enums.MESSAGE_STATUS.READED\n      ) {\n        this.playAudioTip();\n      }\n    }, handleGroupMessage(msg) {\n      // 标记这条消息是不是自己发的\n      msg.selfSend = msg.sendId == this.$store.state.userStore.userInfo.id;\n      let chatInfo = {\n        type: \"GROUP\",\n        targetId: msg.groupId,\n      };\n      // 消息加载标志\n      if (msg.type == this.$enums.MESSAGE_TYPE.LOADING) {\n        this.$store.commit(\"loadingGroupMsg\", JSON.parse(msg.content));\n        return;\n      }\n      // 消息已读处理\n      if (msg.type == this.$enums.MESSAGE_TYPE.READED) {\n        // 我已读对方的消息，清空已读数量\n        this.$store.commit(\"resetUnreadCount\", chatInfo);\n        return;\n      }\n      // 消息回执处理\n      if (msg.type == this.$enums.MESSAGE_TYPE.RECEIPT) {\n        // 更新消息已读人数\n        let msgInfo = {\n          id: msg.id,\n          groupId: msg.groupId,\n          readedCount: msg.readedCount,\n          receiptOk: msg.receiptOk,\n        };\n        this.$store.commit(\"updateMessage\", [msgInfo, chatInfo]);\n        return;\n      }\n      // 消息撤回\n      if (msg.type == this.$enums.MESSAGE_TYPE.RECALL) {\n        this.$store.commit(\"recallMessage\", [msg, chatInfo]);\n        return;\n      }\n      // 新增群\n      if (msg.type == this.$enums.MESSAGE_TYPE.GROUP_NEW) {\n        this.$store.commit(\"addGroup\", JSON.parse(msg.content));\n        return;\n      }\n      // 删除群\n      if (msg.type == this.$enums.MESSAGE_TYPE.GROUP_DEL) {\n        this.$store.commit(\"removeGroup\", msg.groupId);\n        return;\n      }\n      // 群视频信令\n      if (this.$msgType.isRtcGroup(msg.type)) {\n        this.$nextTick(() => {\n          this.$refs.rtcGroupVideo.onRTCMessage(msg);\n        });\n        return;\n      }\n      // 插入群聊消息\n      if (\n        this.$msgType.isNormal(msg.type) ||\n        this.$msgType.isTip(msg.type) ||\n        this.$msgType.isAction(msg.type)\n      ) {\n        let group = this.loadGroupInfo(msg.groupId);\n        this.insertGroupMessage(group, msg);\n      }\n    },\n    insertGroupMessage(group, msg) {\n      let chatInfo = {\n        type: \"GROUP\",\n        targetId: group.id,\n        showName: group.showGroupName,\n        headImage: group.headImageThumb,\n      };\n      // 打开会话\n      this.$store.commit(\"openChat\", chatInfo);\n      // 插入消息\n      this.$store.commit(\"insertMessage\", [msg, chatInfo]);\n      // 播放提示音\n      if (\n        !msg.selfSend &&\n        msg.type <= this.$enums.MESSAGE_TYPE.VIDEO &&\n        msg.status != this.$enums.MESSAGE_STATUS.READED\n      ) {\n        this.playAudioTip();\n      }\n    },\n    handleSystemMessage(msg) {\n      // 用户被封禁\n      if (msg.type == this.$enums.MESSAGE_TYPE.USER_BANNED) {\n        this.$wsApi.close(3000);\n        this.$alert(\n          \"您的账号已被管理员封禁,原因:\" + msg.content,\n          \"账号被封禁\",\n          {\n            confirmButtonText: \"确定\",\n            callback: (action) => {\n              this.onExit();\n            },\n          }\n        );\n        return;\n      }\n    },\n    handleLLMChunk(data) {\n      // 处理LLM流式数据块\n      console.log('[Inbox] 收到LLM流式数据块:', data);\n      \n      // 将LLM消息作为系统消息显示在聊天中\n      const llmMessage = {\n        id: Date.now(),\n        fromId: 0, // 系统消息\n        toId: this.$store.state.userStore.userInfo.userId,\n        content: data.chunk,\n        type: this.$enums.MESSAGE_TYPE.TEXT,\n        sendTime: new Date().getTime(),\n        streamId: data.streamId,\n        sequence: data.sequence,\n        isLLMStream: true\n      };\n      \n      // 使用store来处理消息\n      this.$store.commit('appendLLMMessage', llmMessage);\n      \n      // 触发UI更新事件\n      this.$nextTick(() => {\n        window.dispatchEvent(new CustomEvent('llm:chunk', {\n          detail: data\n        }));\n      });\n    },\n    handleLLMEnd(data) {\n      // 处理LLM流式结束\n      console.log('[Inbox] LLM流式传输结束:', data);\n      \n      // 标记流式传输结束\n      this.$store.commit('finishLLMStream', data.streamId);\n      \n      // 触发结束事件\n      window.dispatchEvent(new CustomEvent('llm:end', {\n        detail: data\n      }));\n    },\n    handleLLMError(data) {\n      // 处理LLM流式错误\n      console.error('[Inbox] LLM流式传输错误:', data);\n      \n      // 显示错误消息\n      this.$message.error(`LLM处理错误: ${data.error}`);\n      \n      // 标记流式传输错误\n      this.$store.commit('errorLLMStream', {\n        streamId: data.streamId,\n        error: data.error\n      });\n      \n      // 触发错误事件\n      window.dispatchEvent(new CustomEvent('llm:error', {\n        detail: data\n      }));\n    },\n    onExit() {\n      this.$wsApi.close(3000);// 关闭连接，3000 是自定义的关闭码, 不等于3000是意外关闭需要重连\n\n      // 清除用户信息,vscode通过用户状态判断是否登录的\n      this.$store.commit(\"setUserInfo\", {\n        id: -1,\n        userId: -1,\n        username: '',\n        nickName: '',\n        avatar: ''\n      });\n      this.$store.dispatch('setIsLoggedIn', false)\n      sessionStorage.removeItem(\"accessToken\");\n      // added by qinkee.对于vscode集成，需要清除所有store状态\n      this.$store.commit('clear');\n      location.href = \"/\";\n    },\n    playAudioTip() {\n      // 离线消息不播放铃声\n      if (this.$store.getters.isLoading()) {\n        return;\n      }\n      // 防止过于密集播放\n      if (new Date().getTime() - this.lastPlayAudioTime > 1000) {\n        this.lastPlayAudioTime = new Date().getTime();\n        let audio = new Audio();\n        let url = require(`@/assets/audio/tip.wav`);\n        audio.src = url;\n        audio.play();\n      }\n    },\n    showSetting() {\n      this.showSettingDialog = true;\n    },\n    switchUi(code) {\n      this.$store.commit(\"changeViewCode\", code);\n    },\n    closeSetting() {\n      this.showSettingDialog = false;\n    },\n    loadFriendInfo(id) {\n      if (String(id).includes('_')) {\n        id = String(id).split('_')[0];\n      }\n      let friend = this.$store.getters.findFriend(id);\n      if (!friend) {\n        // 🔧 修复：如果是当前用户自己，返回用户自己的信息\n        const currentUser = this.$store.state.userStore.userInfo;\n        if (currentUser && currentUser.id == id) {\n          friend = {\n            id: id,\n            nickName: currentUser.nickName || \"我\",\n            showNickName: currentUser.nickName || \"我\",\n            headImage: currentUser.headImageThumb || currentUser.headImage || \"\",\n          };\n        } else {\n          // 其他未知用户\n          friend = {\n            id: id,\n            nickName: \"未知用户\",\n            showNickName: \"未知用户\",\n            headImage: \"\",\n          };\n        }\n      }\n      return friend;\n    },\n    loadGroupInfo(id) {\n      let group = this.$store.getters.findGroup(id);\n      if (!group) {\n        group = {\n          id: id,\n          showGroupName: \"未知群聊\",\n          headImageThumb: \"\",\n        };\n      }\n      return group;\n    },\n    handleChatItemClick(chatData) {\n      // 处理聊天项点击事件，向父组件传递聊天数据\n      console.log('[Inbox] 接收到聊天项点击:', chatData);\n      this.$emit('chatItemClick', chatData);\n    },\n  },\n  computed: {\n    uiStore() {\n      return this.$store.state.uiStore;\n    },\n    unreadCount() {\n      let unreadCount = 0;\n      let chats = this.$store.state.chatStore.chats;\n      chats.forEach((chat) => {\n        if (!chat.delete) {\n          unreadCount += chat.unreadCount;\n        }\n      });\n      return unreadCount;\n    },\n  },\n  watch: {\n    unreadCount: {\n      handler(newCount, oldCount) {\n        let tip = newCount > 0 ? `${newCount}条未读` : \"\";\n        this.$elm.setTitleTip(tip);\n      },\n      immediate: true,\n    },\n  },\n  async mounted() {\n    this.init();\n\n    // 监听用户登出事件\n    this.handleUserLogout = () => {\n      console.log('[Inbox] 接收到用户登出事件，执行清理操作');\n      this.onExit();\n    };\n    window.addEventListener('im:user:logout', this.handleUserLogout);\n    \n    // 监听 token 刷新事件\n    this.handleTokenRefresh = (event) => {\n      console.log('[Inbox] 接收到 token 刷新事件，重新初始化', event.detail);\n      // 先断开现有连接\n      if (this.$wsApi) {\n        this.$wsApi.close();\n      }\n      // 重新初始化\n      this.init();\n    };\n    window.addEventListener('im:token:refreshed', this.handleTokenRefresh);\n  },\n  unmounted() {\n    console.log(\"zujian\")\n    this.$wsApi.clos();\n\n    // 移除用户登出事件监听\n    if (this.handleUserLogout) {\n      window.removeEventListener('im:user:logout', this.handleUserLogout);\n    }\n    \n    // 移除 token 刷新事件监听\n    if (this.handleTokenRefresh) {\n      window.removeEventListener('im:token:refreshed', this.handleTokenRefresh);\n    }\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.home-page {\n  height: 100vh;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  background: var(--im-color-primary-light-9);\n  background-color: #f6f6f6;\n  //background-image: url('../assets/image/background.jpg');\n\n\n  .navi-bar {\n    --icon-font-size: 22px;\n    width: var(--width);\n    background: var(--im-color-primary-light-1);\n    padding: 10px 8px;\n    /* 调整内边距适应水平布局 */\n\n    .top {\n      margin-left: auto;\n    }\n\n    .navi-bar-box {\n      display: flex;\n\n      justify-content: space-between;\n      align-items: center;\n      /* 垂直居中 */\n\n      .botoom {\n        margin-bottom: 0;\n        /* 移除底部边距 */\n      }\n    }\n\n    .menu {\n\n      display: flex;\n\n      justify-content: center;\n      align-content: center;\n\n      .menu-item {\n        margin-bottom: 0;\n        /* 移除底部边距 */\n        margin-right: 12px;\n        /* 改为右侧边距 */\n      }\n    }\n\n    .user-head-image {\n      display: flex;\n      justify-content: center;\n    }\n\n    .menu {\n      //margin-top: 10px;\n      display: flex;\n\n      justify-content: center;\n      align-content: center;\n\n      .link {\n        text-decoration: none;\n      }\n\n      .router-link-active .menu-item {\n        color: #fff;\n        background: var(--im-color-primary-light-2);\n      }\n\n      .link:not(.router-link-active) .menu-item:hover {\n        color: var(--im-color-primary-light-7);\n      }\n\n      .menu-item {\n        position: relative;\n        color: var(--im-color-primary-light-4);\n        width: var(--width);\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        margin-bottom: 12px;\n\n        .icon {\n          font-size: var(--icon-font-size);\n        }\n\n        .unread-text {\n          position: absolute;\n          background-color: var(--im-color-danger);\n          left: 28px;\n          top: 8px;\n          color: white;\n          border-radius: 30px;\n          padding: 0 5px;\n          font-size: var(--im-font-size-smaller);\n          text-align: center;\n          white-space: nowrap;\n          border: 1px solid #f1e5e5;\n        }\n      }\n    }\n\n    .botoom-item {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 12px;\n      width: 100%;\n      padding: 5px;\n      cursor: pointer;\n      color: var(--im-color-primary-light-4);\n      font-size: var(--icon-font-size);\n\n      .icon {\n        font-size: var(--icon-font-size);\n      }\n\n      &:hover {\n        font-weight: 600;\n        color: var(--im-color-primary-light-7);\n      }\n    }\n  }\n\n  .content-box {\n    flex: 1;\n    height: 0; /* 确保flex子项能正确计算高度 */\n    padding: 0;\n    background-color: #fff;\n    text-align: center;\n    overflow: auto; /* 内容溢出时显示滚动条 */\n    \n    /* 默认隐藏滚动条 */\n    scrollbar-width: none; /* Firefox */\n    -ms-overflow-style: none; /* IE and Edge */\n    \n    &::-webkit-scrollbar {\n      width: 0;\n      height: 0;\n    }\n    \n    /* 鼠标悬停时显示滚动条 */\n    &:hover {\n      scrollbar-width: thin; /* Firefox */\n      -ms-overflow-style: auto; /* IE and Edge */\n      \n      &::-webkit-scrollbar {\n        width: 8px;\n        height: 8px;\n      }\n      \n      &::-webkit-scrollbar-track {\n        background: #f1f1f1;\n        border-radius: 4px;\n      }\n      \n      &::-webkit-scrollbar-thumb {\n        background: #c1c1c1;\n        border-radius: 4px;\n        \n        &:hover {\n          background: #a8a8a8;\n        }\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Inbox.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Inbox.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Inbox.vue?vue&type=template&id=0d72d2a6&scoped=true\"\nimport script from \"./Inbox.vue?vue&type=script&lang=js\"\nexport * from \"./Inbox.vue?vue&type=script&lang=js\"\nimport style0 from \"./Inbox.vue?vue&type=style&index=0&id=0d72d2a6&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d72d2a6\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('keep-alive',[(_vm.uiStore.viewCode === 1)?_c('editor-chat'):_vm._e(),(_vm.uiStore.viewCode === 2)?_c('editor-friend'):_vm._e(),(_vm.uiStore.viewCode === 3)?_c('editor-group'):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"chat-page\"},[_c('el-container',{staticClass:\"chat-box\"},[(_vm.isPCTerminalChat)?_c('container-manager',{ref:\"containerManager\"}):_vm._e(),(_vm.chatStore.activeChat && !_vm.isAIChat)?_c('chat-box',{attrs:{\"chat\":_vm.chatStore.activeChat},on:{\"message-sent\":_vm.onMessageSent}}):_vm._e(),(!_vm.chatStore.activeChat && !_vm.selectedAIChat)?_c('div',{staticClass:\"empty-state\"},[_c('div',{staticClass:\"empty-content\"},[_c('div',{staticClass:\"empty-icon\"},[_vm._v(\"💬\")]),_c('p',[_vm._v(\"像使用微信一样使用AI...\")])])]):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-container class=\"chat-page\">\n    <!-- 左侧聊天区域 -->\n    <el-container class=\"chat-box\">\n      <!-- 容器管理组件 - 云电脑远程工作台 -->\n      <container-manager v-if=\"isPCTerminalChat\" ref=\"containerManager\"></container-manager>\n      \n      <!-- 人工聊天 -->\n      <chat-box v-if=\"chatStore.activeChat && !isAIChat\" :chat=\"chatStore.activeChat\" @message-sent=\"onMessageSent\">\n      </chat-box>\n\n      <!-- 空状态 -->\n      <div v-if=\"!chatStore.activeChat && !selectedAIChat\" class=\"empty-state\">\n        <div class=\"empty-content\">\n          <div class=\"empty-icon\">💬</div>\n          <p>像使用微信一样使用AI...</p>\n        </div>\n      </div>\n    </el-container>\n  </el-container>\n</template>\n\n<script>\n/* global IChatWorkspaceService, IFileService, INotificationService, URIHelper, VSBufferHelper */\n\nimport ChatItem from \"../components/chat/ChatItem.vue\";\nimport ChatBox from \"../components/chat/ChatBox.vue\";\nimport ContainerManager from \"../components/chat/ContainerManager.vue\";\n// import ThinkingChain from \"../components/chat/ThinkingChain.vue\";\n// import ThinkingDashboard from \"../components/chat/ThinkingDashboard.vue\";\n// import AIChatSimplified from \"../components/chat/AIChatSimplified.vue\";\nimport { log } from \"@/utils/logManager.js\";\n\nexport default {\n  name: \"EditorChat\",\n  components: {\n    ChatItem,\n    ChatBox,\n    ContainerManager,\n  },\n  props: {\n    chatData: {\n      type: Object,\n      default: () => null\n    }\n  },\n  data() {\n    return {\n      searchText: \"\",\n      messageContent: \"\",\n      group: {},\n      groupMembers: [],\n\n      // 思维面板相关\n      showThinkingPanel: false,\n      activeTab: 'chain',\n      currentSessionId: '',\n\n      // AI聊天相关\n      selectedAIChat: null,\n      isAIChat: false,\n      \n      // PC终端会话检测\n      isPCTerminalChat: false,\n\n      // 🆕 拖拽相关状态\n      dragHintElement: null,\n      processingMessage: null,\n      globalDragListeners: null, // 🔧 统一的全局拖拽监听器\n\n      // 🔧 统一会话服务监听器\n      unifiedSessionUnsubscribe: null,\n\n      // 防重复激活状态\n      lastActivatedSessionId: null,\n\n      // 标签页配置\n      tabs: [\n        { key: 'chain', label: '思维链', icon: '🧠' },\n        { key: 'dashboard', label: '仪表盘', icon: '📊' },\n        { key: 'assistant', label: 'AI助手', icon: '🤖' },\n        { key: 'settings', label: '设置', icon: '⚙️' }\n      ],\n\n      // AI助手相关\n      assistantStatus: 'active', // active, idle, analyzing\n      feedbackText: '',\n      aiInsights: [\n        {\n          id: 'insight_1',\n          icon: '💡',\n          title: '对话模式识别',\n          description: '检测到用户倾向于技术性讨论，建议提供更详细的技术解释',\n          priority: 'medium'\n        },\n        {\n          id: 'insight_2',\n          icon: '⚡',\n          title: '回复效率优化',\n          description: '可以通过预加载常见问题答案来提升响应速度',\n          priority: 'low'\n        }\n      ],\n\n      // 设置相关\n      settings: {\n        showRealtime: true,\n        autoExpand: true,\n        showConfidence: true,\n        analysisDepth: 'detailed',\n        updateInterval: '3000',\n        exportFormat: 'json'\n      }\n    }\n  },\n  computed: {\n    chatStore() {\n      return this.$store.state.chatStore;\n    },\n    loading() {\n      return this.chatStore.loadingGroupMsg || this.chatStore.loadingPrivateMsg\n    },\n    assistantStatusText() {\n      const statusMap = {\n        active: '🟢 活跃',\n        idle: '🟡 空闲',\n        analyzing: '🔵 分析中'\n      }\n      return statusMap[this.assistantStatus] || '未知'\n    }\n  },\n  created() {\n    this.loadSettings()\n  },\n  methods: {\n    \n    // 检测当前会话是否为PC终端\n    detectPCTerminalChat() {\n      console.log('[EditorChat] detectPCTerminalChat 开始检测');\n      console.log('[EditorChat] activeChat:', this.chatStore.activeChat);\n      \n      if (!this.chatStore.activeChat) {\n        console.log('[EditorChat] 没有活跃会话，isPCTerminalChat = false');\n        this.isPCTerminalChat = false;\n        return;\n      }\n      \n      const targetId = this.chatStore.activeChat.targetId;\n      console.log('[EditorChat] 会话信息:', {\n        targetId: targetId,\n        showName: this.chatStore.activeChat.showName\n      });\n      \n      // 简化判断：只要targetId包含\"_3\"就是PC终端会话\n      if (targetId && targetId.includes('_3')) {\n        this.isPCTerminalChat = true;\n        console.log('[EditorChat] 检测到PC终端会话 (targetId包含_3)，显示容器管理');\n      } else {\n        this.isPCTerminalChat = false;\n        console.log('[EditorChat] 非PC终端会话，不显示容器管理');\n      }\n      \n      console.log('[EditorChat] 最终 isPCTerminalChat =', this.isPCTerminalChat);\n    },\n    \n    onActiveItem(index) {\n      this.$store.commit(\"activeChat\", index);\n\n      // 切换到人类聊天模式\n      this.isAIChat = false;\n      this.selectedAIChat = null;\n      \n      // 检测是否为PC终端会话\n      this.detectPCTerminalChat();\n    },\n\n    onDelItem(index) {\n      this.$store.commit(\"removeChat\", index);\n    },\n\n    onTop(chatIdx) {\n      this.$store.commit(\"moveTop\", chatIdx);\n    },\n\n    // 获取当前聊天ID\n    getCurrentChatId() {\n      if (this.isAIChat && this.selectedAIChat) {\n        return this.selectedAIChat.aiThreadId || this.selectedAIChat.id;\n      }\n      if (this.chatStore.activeChat) {\n        return this.chatStore.activeChat.id || this.chatStore.activeChat.targetId;\n      }\n      return this.currentSessionId;\n    },\n\n    // 处理AI聊天选择（从InboxSession传来）\n    onAIChatSelected(aiSession) {\n      log.info('EditorChat', '收到AI聊天选择:', aiSession.showName);\n\n      this.selectedAIChat = aiSession;\n      this.isAIChat = true;\n\n      // 清除人类聊天选择\n      this.$store.commit(\"clearActiveChat\");\n      \n      // AI聊天不显示容器管理\n      this.isPCTerminalChat = false;\n    },\n\n    // 🌟 处理确保面板可见事件\n    handleEnsurePanelVisible(eventData) {\n      console.log('[EditorChat] 🔧 收到确保面板可见事件:', eventData);\n\n      const { sessionType, sessionData, reason } = eventData;\n\n      // 检查是否需要确保面板可见\n      if (!this.shouldEnsurePanelVisible(sessionType, sessionData)) {\n        console.log('[EditorChat] 🔧 无需确保面板可见，条件不满足');\n        return;\n      }\n\n      // 确保聊天记录面板可见\n      this.ensureChatRecordVisible(sessionType, sessionData, reason);\n    },\n\n    // 🌟 检查是否需要确保面板可见\n    shouldEnsurePanelVisible(sessionType, sessionData) {\n      // 如果当前没有活跃会话，则需要确保面板可见\n      if (sessionType === 'IM') {\n        return !this.chatStore.activeChat || this.chatStore.activeChat.targetId !== (sessionData.targetId || sessionData.id);\n      } else if (sessionType === 'AI') {\n        return !this.selectedAIChat || this.selectedAIChat.id !== sessionData.id;\n      }\n      return true;\n    },\n\n    // 🌟 确保聊天记录可见\n    ensureChatRecordVisible(sessionType, sessionData, reason) {\n      console.log(`[EditorChat] 🔧 确保${sessionType}聊天记录可见:`, sessionData?.showName || sessionData?.name);\n\n      // 根据会话类型处理\n      if (sessionType === 'IM') {\n        // 确保IM聊天记录可见\n        this.ensureIMChatVisible(sessionData, reason);\n      } else if (sessionType === 'AI') {\n        // 确保AI聊天记录可见  \n        this.ensureAIChatVisible(sessionData, reason);\n      }\n\n      // 强制更新Vue响应式系统\n      this.$nextTick(() => {\n        console.log('[EditorChat] 🔧 Vue响应式更新完成，面板应该已可见');\n      });\n    },\n\n    // 🌟 确保IM聊天可见\n    ensureIMChatVisible(sessionData, reason) {\n      // 如果当前不是IM模式，切换到IM模式\n      if (this.isAIChat) {\n        this.isAIChat = false;\n        this.selectedAIChat = null;\n        console.log('[EditorChat] 🔧 已切换到IM模式');\n      }\n\n      // 延迟确保数据已加载\n      setTimeout(() => {\n        if (this.chatStore.activeChat &&\n          (this.chatStore.activeChat.targetId === sessionData.targetId ||\n            this.chatStore.activeChat.id === sessionData.id)) {\n          console.log('[EditorChat] ✅ IM聊天记录已可见，无需额外处理');\n        } else {\n          console.log('[EditorChat] ⚠️ IM聊天记录可能未正确加载，发送刷新事件');\n          this.$bus && this.$bus.$emit('chat:force-refresh');\n        }\n      }, 100);\n    },\n\n    // 🌟 确保AI聊天可见\n    ensureAIChatVisible(sessionData, reason) {\n      // 如果当前不是AI模式，切换到AI模式\n      if (!this.isAIChat) {\n        this.isAIChat = true;\n        this.$store.commit(\"clearActiveChat\");\n        console.log('[EditorChat] 🔧 已切换到AI模式');\n      }\n\n      // 确保选中正确的AI会话\n      if (!this.selectedAIChat || this.selectedAIChat.id !== sessionData.id) {\n        this.selectedAIChat = sessionData;\n        console.log('[EditorChat] 🔧 已设置活跃AI会话:', sessionData.showName);\n      }\n\n      // 延迟确保AI聊天界面已渲染\n      setTimeout(() => {\n        console.log('[EditorChat] ✅ AI聊天记录应该已可见');\n      }, 100);\n    },\n\n    // 🔧 已移除onHumanChatSelected方法，现在直接通过统一会话服务处理\n\n    // 跳转到专业模式\n    jumpToProMode(messageId) {\n      console.log('跳转到React专业模式:', messageId);\n\n      // 这里应该通知React侧打开专业模式\n      // 可以通过postMessage或者专门的API\n      if (window.postMessage) {\n        window.postMessage({\n          type: 'OPEN_AI_PRO_MODE',\n          messageId,\n          threadId: this.selectedAIChat?.aiThreadId\n        }, '*');\n      }\n\n      // 也可以通过VSCode API\n      if (window.SharedServicesAccessor && window.SharedServicesAccessor.openAIProMode) {\n        try {\n          window.SharedServicesAccessor.openAIProMode({\n            messageId,\n            threadId: this.selectedAIChat?.aiThreadId\n          });\n        } catch (error) {\n          console.error('打开AI专业模式失败:', error);\n        }\n      }\n    },\n\n    // 下载构件\n    async downloadArtifact(artifact) {\n      console.log('下载构件到工作区:', artifact);\n\n      // 这里应该调用实际的下载API\n      try {\n        // 模拟下载过程\n        this.$message?.success(`正在下载：${artifact.title}`);\n\n        // 可以调用VSCode API下载到工作区\n        if (window.SharedServicesAccessor && window.SharedServicesAccessor.downloadToWorkspace) {\n          await window.SharedServicesAccessor.downloadToWorkspace(artifact);\n          this.$message?.success(`已下载到工作区：${artifact.title}`);\n        }\n      } catch (error) {\n        this.$message?.error('下载失败');\n        console.error('下载构件失败:', error);\n      }\n    },\n\n    // 切换思维面板显示\n    toggleThinkingPanel() {\n      this.showThinkingPanel = !this.showThinkingPanel\n\n      // 如果隐藏面板，暂停思维链分析\n      if (!this.showThinkingPanel) {\n        this.pauseThinkingAnalysis()\n      } else {\n        this.resumeThinkingAnalysis()\n      }\n    },\n\n    // 暂停思维链分析\n    pauseThinkingAnalysis() {\n      console.log('暂停思维链分析')\n      this.assistantStatus = 'idle'\n    },\n\n    // 恢复思维链分析\n    resumeThinkingAnalysis() {\n      console.log('恢复思维链分析')\n      this.assistantStatus = 'active'\n    },\n\n    // 实时模式变化处理\n    onRealtimeModeChanged(enabled) {\n      console.log('实时模式变化:', enabled)\n      this.settings.showRealtime = enabled\n    },\n\n    // 仪表盘数据刷新处理\n    onDashboardDataRefreshed(data) {\n      console.log('仪表盘数据已刷新:', data)\n    },\n\n    // 思维链选择处理\n    onChainSelected(chainId) {\n      console.log('选择思维链:', chainId)\n      this.activeTab = 'chain'\n    },\n\n    // AI助手操作\n    analyzeCurrentConversation() {\n      this.assistantStatus = 'analyzing'\n\n      // 模拟分析过程\n      setTimeout(() => {\n        this.assistantStatus = 'active'\n        this.addInsight({\n          id: `insight_${Date.now()}`,\n          icon: '🔍',\n          title: '对话分析完成',\n          description: this.isAIChat ?\n            '当前AI对话显示复杂的技术讨论模式' :\n            '当前对话显示用户关注代码质量和性能优化',\n          priority: 'high'\n        })\n      }, 2000)\n    },\n\n    suggestResponse() {\n      console.log('生成回复建议')\n      this.addInsight({\n        id: `insight_${Date.now()}`,\n        icon: '💬',\n        title: '回复建议',\n        description: this.isAIChat ?\n          '建议简化AI回复，突出关键信息' :\n          '建议提供具体的代码示例和性能对比数据',\n        priority: 'medium'\n      })\n    },\n\n    optimizeThinking() {\n      console.log('优化思维链')\n      this.addInsight({\n        id: `insight_${Date.now()}`,\n        icon: '⚡',\n        title: '思维链优化',\n        description: '已优化决策分支，提升思维效率15%',\n        priority: 'low'\n      })\n    },\n\n    exportInsights() {\n      const insights = {\n        sessionId: this.currentSessionId,\n        chatType: this.isAIChat ? 'ai' : 'human',\n        chatInfo: this.isAIChat ? this.selectedAIChat : this.chatStore.activeChat,\n        timestamp: Date.now(),\n        insights: this.aiInsights,\n        settings: this.settings\n      }\n\n      const dataStr = JSON.stringify(insights, null, 2)\n      const blob = new Blob([dataStr], { type: 'application/json' })\n      const url = URL.createObjectURL(blob)\n\n      const a = document.createElement('a')\n      a.href = url\n      a.download = `ai-insights-${Date.now()}.json`\n      a.click()\n\n      URL.revokeObjectURL(url)\n    },\n\n    // 添加洞察\n    addInsight(insight) {\n      this.aiInsights.unshift(insight)\n\n      // 限制洞察数量\n      if (this.aiInsights.length > 10) {\n        this.aiInsights = this.aiInsights.slice(0, 10)\n      }\n    },\n\n    // 提交反馈\n    submitFeedback() {\n      if (!this.feedbackText.trim()) {\n        this.$message?.warning('请输入反馈内容')\n        return\n      }\n\n      console.log('提交反馈:', this.feedbackText)\n\n      // 模拟提交\n      this.$message?.success('反馈已提交，感谢您的建议！')\n      this.feedbackText = ''\n    },\n\n    // 设置相关\n    updateSettings() {\n      console.log('更新设置:', this.settings)\n      localStorage.setItem('thinking_settings', JSON.stringify(this.settings))\n    },\n\n    resetSettings() {\n      this.settings = {\n        showRealtime: true,\n        autoExpand: true,\n        showConfidence: true,\n        analysisDepth: 'detailed',\n        updateInterval: '3000',\n        exportFormat: 'json'\n      }\n      this.updateSettings()\n      this.$message?.success('设置已重置')\n    },\n\n    saveSettings() {\n      this.updateSettings()\n      this.$message?.success('设置已保存')\n    },\n\n    loadSettings() {\n      const savedSettings = localStorage.getItem('thinking_settings')\n      if (savedSettings) {\n        try {\n          this.settings = { ...this.settings, ...JSON.parse(savedSettings) }\n        } catch (e) {\n          console.error('加载设置失败:', e)\n        }\n      }\n    },\n\n    // 事件监听\n    setupEventListeners() {\n      // 监听聊天消息\n      this.$bus && this.$bus.$on('chat:message:sent', this.onMessageSent)\n      this.$bus && this.$bus.$on('chat:message:received', this.onMessageReceived)\n\n      // 监听思维链事件\n      this.$bus && this.$bus.$on('thinking:chain:updated', this.onThinkingChainUpdated)\n\n      // 监听AI聊天选择事件\n      this.$bus && this.$bus.$on('ai:chat:selected', this.onAIChatSelected)\n\n      // 🌟 监听聊天面板可见确保事件\n      this.$bus && this.$bus.$on('chat:ensure-panel-visible', this.handleEnsurePanelVisible)\n\n      // 🔧 测试事件监听\n      this.$bus && this.$bus.$on('test:panel:debug', (data) => {\n        console.log('[EditorChat] 🔧 收到测试事件:', data);\n      })\n\n      // 🔧 直接监听统一会话服务事件，移除human:chat:selected自定义事件\n      this.setupUnifiedSessionListener()\n    },\n\n    cleanupEventListeners() {\n      if (this.$bus) {\n        this.$bus.$off('chat:message:sent', this.onMessageSent)\n        this.$bus.$off('chat:message:received', this.onMessageReceived)\n        this.$bus.$off('thinking:chain:updated', this.onThinkingChainUpdated)\n        this.$bus.$off('ai:chat:selected', this.onAIChatSelected)\n        this.$bus.$off('chat:ensure-panel-visible', this.handleEnsurePanelVisible)\n      }\n\n      // 清理统一会话服务监听器\n      if (this.unifiedSessionUnsubscribe) {\n        this.unifiedSessionUnsubscribe()\n        this.unifiedSessionUnsubscribe = null\n      }\n    },\n\n    // 消息发送处理\n    onMessageSent(message) {\n      console.log('消息已发送:', message)\n      \n      // 如果容器管理面板存在且未折叠，则自动折叠\n      if (this.$refs.containerManager && !this.$refs.containerManager.isCollapsed) {\n        console.log('[EditorChat] 发送消息，自动折叠容器管理面板');\n        this.$refs.containerManager.toggleCollapse();\n      }\n\n      // 触发AI思维分析\n      if (this.settings.showRealtime) {\n        this.triggerThinkingAnalysis('user_message', message)\n      }\n    },\n\n    // 消息接收处理\n    onMessageReceived(message) {\n      console.log('消息已接收:', message)\n\n      // 如果是AI回复，可以显示思维过程\n      if (message.type === 'ai_response' && this.settings.showRealtime) {\n        this.triggerThinkingAnalysis('ai_response', message)\n      }\n    },\n\n    // 思维链更新处理\n    onThinkingChainUpdated(data) {\n      console.log('思维链已更新:', data)\n    },\n\n    // 触发思维分析\n    triggerThinkingAnalysis(type, data) {\n      console.log('触发思维分析:', type, data)\n\n      // 发送思维开始事件\n      this.$bus && this.$bus.$emit('ai:thinking:start', {\n        type,\n        data,\n        preview: this.isAIChat ? '正在分析AI对话内容...' : '正在分析消息内容...'\n      })\n\n      // 模拟思维过程\n      setTimeout(() => {\n        this.$bus && this.$bus.$emit('ai:thinking:node', {\n          id: `node_${Date.now()}`,\n          type: 'analysis',\n          title: this.isAIChat ? 'AI对话分析' : '消息分析',\n          description: this.isAIChat ?\n            '分析AI回复的复杂度和用户满意度' :\n            '分析消息的语义和用户意图',\n          confidence: 0.85,\n          duration: 1200\n        })\n      }, 1000)\n\n      setTimeout(() => {\n        this.$bus && this.$bus.$emit('ai:thinking:complete')\n      }, 3000)\n    },\n\n    // ===== 文件自动保存到聊天工作区功能 =====\n\n    // 文件发送处理 - 使用注入的服务\n    async handleFileSend(fileData) {\n      console.log('[EditorChat] handleFileSend called with:', fileData);\n\n      try {\n\n        console.log('[EditorChat] VSCode services obtained successfully');\n\n        const currentSession = this.getCurrentSessionInfo();\n        console.log('[EditorChat] Current session info:', currentSession);\n\n        await this.saveFileToSession(fileData, currentSession);\n\n        window.vscodeServices?.get('INotificationService').info(`文件已保存到工作区: ${fileData.file.name}`);\n\n        console.log('[EditorChat] File saved successfully to workspace');\n      } catch (error) {\n        console.error('[EditorChat] 文件保存失败:', error);\n        window.vscodeServices?.get('INotificationService').error(`文件保存失败: ${error.message}`);\n      }\n    },\n\n    // 获取当前会话信息\n    getCurrentSessionInfo() {\n      if (this.isAIChat && this.selectedAIChat) {\n        return {\n          id: this.selectedAIChat.aiThreadId || this.selectedAIChat.id,\n          targetId: this.selectedAIChat.aiThreadId || this.selectedAIChat.id,\n          type: 'PRIVATE', // 统一为IM系统的格式\n          name: this.selectedAIChat.showName || 'AI对话',\n          showName: this.selectedAIChat.showName || 'AI对话',\n          participants: ['AI']\n        };\n      }\n\n      if (this.chatStore.activeChat) {\n        const activeChat = this.chatStore.activeChat;\n        const sessionInfo = {\n          id: activeChat.id || activeChat.targetId,\n          targetId: activeChat.targetId,\n          type: activeChat.type || 'PRIVATE', // 使用聊天实际类型\n          name: activeChat.showName || '聊天',\n          showName: activeChat.showName || '聊天',\n          headImage: activeChat.headImage || '',\n          participants: [activeChat.targetId]\n        };\n\n        // 🔧 处理终端会话的特殊字段\n        if (activeChat.isTerminalChat || activeChat.isTerminalInbox) {\n          sessionInfo.isTerminalChat = activeChat.isTerminalChat;\n          sessionInfo.isTerminalInbox = activeChat.isTerminalInbox;\n          sessionInfo.senderTerminal = activeChat.senderTerminal;\n          sessionInfo.targetTerminal = activeChat.targetTerminal;\n          sessionInfo.receivingTerminal = activeChat.receivingTerminal; // 兼容旧字段\n          \n          console.log('[EditorChat] 🔧 终端会话信息:', {\n            isTerminalChat: sessionInfo.isTerminalChat,\n            senderTerminal: sessionInfo.senderTerminal,\n            targetTerminal: sessionInfo.targetTerminal\n          });\n        }\n\n        return sessionInfo;\n      }\n\n      // 默认会话 - 创建一个基础的私聊会话\n      const defaultSessionId = this.currentSessionId || `session_${Date.now()}`;\n      return {\n        id: defaultSessionId,\n        targetId: defaultSessionId,\n        type: 'PRIVATE',\n        name: '当前会话',\n        showName: '当前会话',\n        headImage: '',\n        participants: []\n      };\n    },\n\n    // 🎯 使用统一的文件上传入口\n    async saveFileToSession(fileData, sessionInfo) {\n\n      try {\n        const file = fileData.file;\n        console.log('[EditorChat] 开始文件上传:', { fileName: file.name, size: file.size, type: file.type });\n\n        // 🚀 使用统一的uploadFiles方法\n        const results = await window.vscodeServices?.get('IChatWorkspaceService').uploadFiles([file]);\n\n        if (results && results.length > 0 && results[0].success) {\n          console.log('[EditorChat] ✅ 文件上传成功:', results[0]);\n          return results[0].filePath;\n        } else {\n          const error = results?.[0]?.error || '文件上传失败';\n          console.error('[EditorChat] ❌ 文件上传失败:', error);\n          throw new Error(error);\n        }\n      } catch (error) {\n        console.error('[EditorChat] 文件上传异常:', error);\n        throw error;\n      }\n    },\n\n    // 生成会话路径\n    generateSessionPath(sessionInfo) {\n      const sanitizedName = sessionInfo.name.replace(/[<>:\"/\\\\|?*]/g, '_');\n      const timestamp = new Date().toISOString().slice(0, 10);\n      return `chat_sessions/${sessionInfo.type}/${sanitizedName}_${sessionInfo.id}_${timestamp}`;\n    },\n\n    // 生成安全文件名\n    generateSafeFileName(originalName) {\n      // 只清理非法字符，不添加时间戳，重复文件名处理由SharedServicesAccessor负责\n      return originalName.replace(/[<>:\"/\\\\|?*\\u0000-\\u001f]/g, '_');\n    },\n\n    // 读取文件内容\n    readFileContent(file) {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = reject;\n        reader.readAsArrayBuffer(file);\n      });\n    },\n\n\n    // 🛡️ 保护VSCode服务对象，防止被Vue响应式系统处理\n    protectVSCodeService(service, serviceName = 'service') {\n      if (!service || typeof service !== 'object') {\n        return service;\n      }\n\n      try {\n        // 创建一个代理来防止Vue访问内部Symbol属性\n        return new Proxy(service, {\n          get(target, prop) {\n            // 阻止访问Symbol.toStringTag等可能导致问题的属性\n            if (typeof prop === 'symbol' || prop === Symbol.toStringTag) {\n              console.debug('[EditorChat] 🛡️ 阻止访问 Symbol 属性:', prop.toString());\n              return undefined;\n            }\n\n            try {\n              const value = target[prop];\n\n              // 如果是函数，绑定this上下文\n              if (typeof value === 'function') {\n                return value.bind(target);\n              }\n\n              return value;\n            } catch (error) {\n              console.warn(`[EditorChat] 🛡️ 访问 ${serviceName}.${prop} 失败:`, error);\n              return undefined;\n            }\n          },\n\n          // 防止Vue遍历对象属性\n          ownKeys(target) {\n            try {\n              return Object.getOwnPropertyNames(target).filter(key =>\n                typeof key === 'string' && !key.startsWith('_')\n              );\n            } catch (error) {\n              console.warn(`[EditorChat] 🛡️ 获取 ${serviceName} 属性列表失败:`, error);\n              return [];\n            }\n          },\n\n          // 阻止属性描述符访问\n          getOwnPropertyDescriptor(target, prop) {\n            if (typeof prop === 'symbol') {\n              return undefined;\n            }\n            try {\n              return Object.getOwnPropertyDescriptor(target, prop);\n            } catch (error) {\n              return undefined;\n            }\n          }\n        });\n      } catch (error) {\n        console.warn(`[EditorChat] 🛡️ 创建 ${serviceName} 保护代理失败:`, error);\n        return service;\n      }\n    },\n\n    // 🆕 统一的文件拖拽支持 - 父级组件管理\n    setupFileDragDrop() {\n      console.log('[EditorChat] 🎯 设置统一的文件拖拽管理（父级组件统一处理）');\n\n      // 全局document监听器 - 智能分发拖拽事件\n      this.globalDragListeners = {\n        handleDragEnter: (e) => {\n          // 检查拖拽目标是否在Vue聊天组件区域内\n          if (this.isDragTargetInChatArea(e.target)) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            console.log('[EditorChat] 🎯 拦截dragenter - 目标在聊天区域');\n            this.handleDragEnter(e);\n          }\n          // 否则不处理，让VSCode工作区正常工作\n        },\n\n        handleDragOver: (e) => {\n          if (this.isDragTargetInChatArea(e.target)) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            e.dataTransfer.dropEffect = 'copy';\n            console.log('[EditorChat] 🎯 拦截dragover - 目标在聊天区域');\n          }\n        },\n\n        handleDragLeave: (e) => {\n          if (this.isDragTargetInChatArea(e.target)) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            console.log('[EditorChat] 🎯 拦截dragleave - 目标在聊天区域');\n            this.handleDragLeave(e);\n          }\n        },\n\n        handleDrop: (e) => {\n          if (this.isDragTargetInChatArea(e.target)) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            console.log('[EditorChat] 🎯 拦截drop - 目标在聊天区域，完全阻止VSCode处理');\n\n            // 智能分发到对应的组件处理\n            this.handleFileDropToComponent(e);\n          }\n        }\n      };\n\n      // 全局监听器使用capture模式，确保优先级最高\n      document.addEventListener('dragenter', this.globalDragListeners.handleDragEnter, true);\n      document.addEventListener('dragover', this.globalDragListeners.handleDragOver, true);\n      document.addEventListener('dragleave', this.globalDragListeners.handleDragLeave, true);\n      document.addEventListener('drop', this.globalDragListeners.handleDrop, true);\n\n      console.log('[EditorChat] ✅ 统一拖拽管理已设置 - 智能分发到聊天区域');\n    },\n\n    // 🎯 智能判断：拖拽目标是否在聊天区域内\n    isDragTargetInChatArea(target) {\n      if (!this.$el || !target) return false;\n\n      // 检查是否在EditorChat组件内\n      const isInEditorChat = this.$el.contains(target);\n\n      // 进一步检查是否在聊天相关区域内\n      if (isInEditorChat) {\n        // 查找具体的聊天区域\n        const chatBox = this.$el.querySelector('.chat-box');\n        const chatInput = this.$el.querySelector('.chat-input-area');\n        const dragOverlay = this.$el.querySelector('.drag-overlay');\n\n        // 如果在这些区域内，则认为是聊天区域\n        const isInChatBox = chatBox && chatBox.contains(target);\n        const isInChatInput = chatInput && chatInput.contains(target);\n        const isInDragOverlay = dragOverlay && dragOverlay.contains(target);\n\n        return isInChatBox || isInChatInput || isInDragOverlay;\n      }\n\n      return false;\n    },\n\n    // 🎯 智能分发文件拖拽到具体组件\n    handleFileDropToComponent(event) {\n      const target = event.target;\n      const files = event.dataTransfer.files;\n\n      console.log('[EditorChat] 🎯 智能分发文件拖拽，文件数量:', files.length);\n\n      // 判断是否拖拽到ChatInput区域\n      const chatInputArea = this.$el.querySelector('.chat-input-area');\n      if (chatInputArea && chatInputArea.contains(target)) {\n        console.log('[EditorChat] 🎯 分发到ChatInput组件处理');\n\n        // 查找ChatInput组件实例并调用其处理方法\n        const chatBox = this.$refs.chatBox || this.$children.find(child => child.$options.name === 'chatPrivate');\n        if (chatBox && chatBox.$refs && chatBox.$refs.chatInputEditor) {\n          const chatInput = chatBox.$refs.chatInputEditor;\n          if (chatInput && typeof chatInput.handleDroppedFiles === 'function') {\n            // 设置拖拽状态\n            chatInput.isDragOver = false;\n            chatInput.dragCounter = 0;\n\n            // 调用ChatInput的文件处理方法\n            chatInput.handleDroppedFiles(files);\n            return;\n          }\n        }\n      }\n\n      // 否则使用EditorChat的通用文件处理\n      console.log('[EditorChat] 🎯 使用EditorChat通用文件处理');\n      this.handleFileDrop(event);\n    },\n\n    // 🔧 移除全局拖拽监听器\n    removeGlobalDragListeners() {\n      if (this.globalDragListeners) {\n        console.log('[EditorChat] 🧹 清理统一拖拽监听器');\n        document.removeEventListener('dragenter', this.globalDragListeners.handleDragEnter, true);\n        document.removeEventListener('dragover', this.globalDragListeners.handleDragOver, true);\n        document.removeEventListener('dragleave', this.globalDragListeners.handleDragLeave, true);\n        document.removeEventListener('drop', this.globalDragListeners.handleDrop, true);\n        this.globalDragListeners = null;\n      }\n    },\n\n    // 处理拖拽悬停\n    handleDragOver(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation(); // 强制阻止其他监听器\n      event.dataTransfer.dropEffect = 'copy';\n\n      console.log('[EditorChat] Vue组件拦截dragover事件，阻止VSCode处理');\n    },\n\n    // 处理拖拽进入\n    handleDragEnter(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation(); // 强制阻止其他监听器\n\n      console.log('[EditorChat] Vue组件拦截dragenter事件，阻止VSCode处理');\n\n      // 检查是否有文件\n      if (this.hasFiles(event.dataTransfer)) {\n        this.showDragHint();\n        this.addDragOverClass();\n      }\n    },\n\n    // 处理拖拽离开\n    handleDragLeave(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation(); // 强制阻止其他监听器\n\n      console.log('[EditorChat] Vue组件拦截dragleave事件，阻止VSCode处理');\n\n      // 检查是否真正离开了拖拽区域\n      if (!this.$el.contains(event.relatedTarget)) {\n        this.hideDragHint();\n        this.removeDragOverClass();\n      }\n    },\n\n    // 🎯 核心：处理文件拖拽放下\n    async handleFileDrop(event) {\n      // 立即阻止事件传播，确保VSCode组件不会处理\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation();\n\n      console.log('[EditorChat] 🎯 Vue组件接收到拖拽事件，立即阻止传播');\n      console.log('[EditorChat] Event target:', event.target);\n      console.log('[EditorChat] Event currentTarget:', event.currentTarget);\n\n      this.hideDragHint();\n      this.removeDragOverClass();\n\n      console.log('[EditorChat] Drop event received:', {\n        dataTransfer: event.dataTransfer,\n        types: Array.from(event.dataTransfer.types),\n        files: event.dataTransfer.files,\n        filesLength: event.dataTransfer.files.length,\n        items: event.dataTransfer.items,\n        itemsLength: event.dataTransfer.items ? event.dataTransfer.items.length : 0\n      });\n\n      const files = Array.from(event.dataTransfer.files);\n\n      if (files.length === 0) {\n        console.log('[EditorChat] No files in drop event, checking items...');\n\n        // 尝试从items中获取文件\n        if (event.dataTransfer.items && event.dataTransfer.items.length > 0) {\n          const itemFiles = [];\n          for (let i = 0; i < event.dataTransfer.items.length; i++) {\n            const item = event.dataTransfer.items[i];\n            console.log('[EditorChat] Item:', item.kind, item.type);\n\n            if (item.kind === 'file') {\n              const file = item.getAsFile();\n              if (file) {\n                itemFiles.push(file);\n              }\n            }\n          }\n\n          if (itemFiles.length > 0) {\n            console.log('[EditorChat] Found files in items:', itemFiles);\n            await this.processDroppedFiles(itemFiles);\n            return;\n          }\n        }\n\n        // 使用完整的VSCode拖拽数据解析（与聊天工作区一致）\n        console.log('[EditorChat] 开始解析VSCode拖拽数据...');\n        const filePaths = await this.parseVSCodeDragData(event.dataTransfer);\n        if (filePaths.length > 0) {\n          console.log('[EditorChat] 解析出VSCode拖拽文件路径:', filePaths.length, '个');\n          await this.handleVSCodeFilePaths(filePaths);\n          return;\n        }\n\n        console.warn('[EditorChat] No files found in drop event');\n        this.showErrorNotification('未检测到文件，请确保拖拽的是文件而不是文本');\n        return;\n      }\n\n      console.log('[EditorChat] Files dropped:', files.map(f => ({ name: f.name, size: f.size })));\n\n      // 检查当前是否有活跃会话\n      const currentSession = this.getCurrentSessionInfo();\n      if (!currentSession || !currentSession.id) {\n        this.showSessionSelectionRequired();\n        return;\n      }\n\n      // 显示确认对话框\n      const confirmed = await this.confirmFileSend(files, currentSession);\n      if (!confirmed) {\n        return;\n      }\n\n      // 🔄 复用现有的文件发送逻辑\n      await this.processDroppedFiles(files);\n    },\n\n    // 解析VSCode拖拽数据的完整逻辑（复用聊天工作区的解析方案）\n    async parseVSCodeDragData(dataTransfer) {\n      const filePaths = [];\n\n      console.log('[EditorChat] 🔍 开始解析VSCode拖拽数据，可用类型:', Array.from(dataTransfer.types));\n\n      // 方式1: VSCode内部URI列表 (多文件支持) - 最优先\n      // 使用正确的VSCode数据类型\n      const internalUriList = dataTransfer.getData('application/vnd.code.uri-list') || dataTransfer.getData('application/vnd.code.tree.resourcecontext');\n      if (internalUriList) {\n        console.log('[EditorChat] 🔗 获取到内部URI数据:', internalUriList);\n        try {\n          // 如果是URI列表格式，直接按行分割\n          if (internalUriList.includes('\\n') || internalUriList.includes('file://')) {\n            const uris = internalUriList.split(/[\\r\\n]+/).filter(uri => uri.trim() && !uri.startsWith('#'));\n            for (const uri of uris) {\n              const path = uri.replace('file://', '');\n              filePaths.push(path);\n            }\n          } else {\n            // 尝试解析为JSON数组\n            const parsedData = JSON.parse(internalUriList);\n            if (Array.isArray(parsedData)) {\n              for (const item of parsedData) {\n                if (item.uri) {\n                  const path = item.uri.replace('file://', '');\n                  filePaths.push(path);\n                } else if (typeof item === 'string') {\n                  const path = item.replace('file://', '');\n                  filePaths.push(path);\n                }\n              }\n            }\n          }\n        } catch (e) {\n          console.warn('[EditorChat] 解析内部URI数据失败:', e);\n        }\n      }\n\n      // 方式2: VSCode资源列表\n      if (filePaths.length === 0) {\n        const resourcesData = dataTransfer.getData('application/vnd.code.resources');\n        if (resourcesData) {\n          console.log('[EditorChat] 🔗 获取到resources数据:', resourcesData);\n          try {\n            const resources = JSON.parse(resourcesData);\n            if (Array.isArray(resources)) {\n              for (const resource of resources) {\n                if (typeof resource === 'string') {\n                  const path = resource.replace('file://', '');\n                  filePaths.push(path);\n                } else if (resource.uri) {\n                  const path = resource.uri.replace('file://', '');\n                  filePaths.push(path);\n                }\n              }\n            }\n          } catch (e) {\n            console.warn('[EditorChat] 解析resources数据失败:', e);\n          }\n        }\n      }\n\n      // 方式3: CodeFiles (文件路径数组) - 使用正确的类型名称\n      if (filePaths.length === 0) {\n        const codeFiles = dataTransfer.getData('codefiles') || dataTransfer.getData('application/vnd.code.files');\n        if (codeFiles) {\n          console.log('[EditorChat] 🔗 获取到CodeFiles:', codeFiles);\n          try {\n            const fileData = JSON.parse(codeFiles);\n            if (Array.isArray(fileData)) {\n              filePaths.push(...fileData);\n            }\n          } catch (e) {\n            console.warn('[EditorChat] 解析CodeFiles失败:', e);\n          }\n        }\n      }\n\n      // 方式4: 标准text/uri-list (通常只有一个URI，但也可能有多个)\n      if (filePaths.length === 0) {\n        const uriList = dataTransfer.getData('text/uri-list');\n        if (uriList) {\n          console.log('[EditorChat] 🔗 获取到text/uri-list:', uriList);\n          const uris = uriList.split(/[\\r\\n]+/).filter(uri => uri.trim() && !uri.startsWith('#'));\n          for (const uri of uris) {\n            const path = uri.replace('file://', '');\n            filePaths.push(path);\n          }\n        }\n      }\n\n      // 方式5: 简单的text/plain格式（最后备选）\n      if (filePaths.length === 0) {\n        const plainText = dataTransfer.getData('text/plain');\n        if (plainText) {\n          console.log('[EditorChat] 🔗 获取到text/plain:', plainText);\n\n          // 检查是否是文件路径格式\n          if (plainText.includes('/') || plainText.includes('\\\\')) {\n            // 检查是否是JSON格式的数据\n            if (plainText.startsWith('{') || plainText.startsWith('[')) {\n              try {\n                const parsedData = JSON.parse(plainText);\n                if (Array.isArray(parsedData)) {\n                  filePaths.push(...parsedData);\n                } else if (parsedData.path || parsedData.uri) {\n                  filePaths.push(parsedData.path || parsedData.uri);\n                }\n              } catch (e) {\n                console.log('[EditorChat] 不是JSON数据，按行分割处理');\n              }\n            }\n\n            // 如果不是JSON，尝试按行分割\n            if (filePaths.length === 0) {\n              const lines = plainText.split('\\n').filter(path => path.trim() && (path.includes('/') || path.includes('\\\\')));\n              filePaths.push(...lines);\n            }\n          }\n        }\n      }\n\n      // 清理路径格式\n      const cleanPaths = filePaths\n        .map(path => path.trim())\n        .filter(path => path && path !== '')\n        .map(path => path.replace(/^file:\\/\\//, '')) // 移除file://前缀\n        .filter((path, index, arr) => arr.indexOf(path) === index); // 去重\n\n      console.log('[EditorChat] 🎯 最终解析出文件路径:', cleanPaths.length, '个:', cleanPaths);\n      return cleanPaths;\n    },\n\n    // 处理VSCode文件路径（优化版）\n    async handleVSCodeFilePaths(filePaths) {\n      console.log('[EditorChat] 🚀 处理VSCode文件路径:', filePaths.length, '个');\n\n      if (filePaths.length === 0) {\n        this.showErrorNotification('无法解析拖拽的文件路径');\n        return;\n      }\n\n      // 🚀 使用SharedServicesAccessor直接从路径上传文件\n      if (window.BoxIMComponents) {\n        try {\n          // 显示进度提示\n          this.showFileProcessingProgress(filePaths.length);\n\n          // 获取当前会话信息\n          const sessionInfo = this.getCurrentSessionInfo();\n          if (!sessionInfo) {\n            throw new Error('未找到当前会话信息');\n          }\n\n          console.log('[EditorChat] 开始从路径批量上传文件:', filePaths);\n          const results = await window.vscodeServices?.get('IChatWorkspaceService').uploadFiles(filePaths, sessionInfo);\n\n          // 处理上传结果（Vue store同步已集成到uploadFileFromPath中）\n          let successCount = 0;\n          let failCount = 0;\n\n          for (const result of results) {\n            if (result.success) {\n              successCount++;\n              console.log('[EditorChat] ✅ 文件上传和消息同步成功:', result.message);\n            } else {\n              failCount++;\n              console.error('[EditorChat] ❌ 文件上传失败:', result);\n              this.$message && this.$message.error(result.message);\n            }\n          }\n\n          // 显示总体结果\n          if (failCount > 0) {\n            console.error(`[EditorChat] ${failCount} 个文件上传失败`);\n          }\n\n          this.hideFileProcessingProgress();\n\n        } catch (error) {\n          console.error('[EditorChat] 批量路径文件上传失败:', error);\n          this.hideFileProcessingProgress();\n          this.showErrorNotification(`文件上传失败: ${error.message}`);\n        }\n      } else {\n        this.showErrorNotification('VSCode服务不可用，无法处理文件拖拽');\n      }\n    },\n\n    // 🎯 优化：使用SharedServicesAccessor的批量文件上传\n    async processDroppedFiles(files) {\n      console.log('[EditorChat] Processing dropped files...');\n\n      // 过滤掉空文件\n      const validFiles = files.filter(file => {\n        if (file.size === 0) {\n          this.$message && this.$message.warning(`文件 ${file.name} 为空，已跳过`);\n          return false;\n        }\n        return true;\n      });\n\n      if (validFiles.length === 0) {\n        console.log('[EditorChat] 没有有效文件需要上传');\n        return;\n      }\n\n      try {\n        // 显示进度提示\n        this.showFileProcessingProgress(validFiles.length);\n\n        // 获取当前会话信息\n        const sessionInfo = this.getCurrentSessionInfo();\n        if (!sessionInfo) {\n          throw new Error('未找到当前会话信息');\n        }\n\n        // 🚀 使用SharedServicesAccessor的批量上传方法\n        if (window.vscodeServices) {\n          console.log('[EditorChat] 开始批量文件上传:', validFiles.length, '个文件');\n          const results = await window.vscodeServices.get('IChatWorkspaceService').uploadFiles(validFiles, sessionInfo);\n\n          // 处理上传结果\n          let successCount = 0;\n          let failCount = 0;\n\n          for (const result of results) {\n            if (result.success) {\n              successCount++;\n              console.log('[EditorChat] ✅ 文件上传成功:', result.message);\n            } else {\n              failCount++;\n              console.error('[EditorChat] ❌ 文件上传失败:', result);\n              this.$message && this.$message.error(result.message);\n            }\n          }\n\n          // 显示总体结果\n          if (failCount > 0) {\n            console.error(`[EditorChat] ${failCount} 个文件上传失败`);\n          }\n\n        } else {\n          // 降级：逐个处理文件\n          console.log('[EditorChat] 降级为逐个处理文件');\n          for (const file of validFiles) {\n            console.log('[EditorChat] Processing file:', file.name);\n\n            await this.handleFileSend({\n              file: file,\n              fileName: file.name,\n              fileSize: file.size,\n              fileType: file.type\n            });\n          }\n        }\n\n        this.hideFileProcessingProgress();\n\n      } catch (error) {\n        console.error('[EditorChat] File processing failed:', error);\n        this.hideFileProcessingProgress();\n        this.showErrorNotification(error.message);\n      }\n    },\n\n    // 检查是否包含文件\n    hasFiles(dataTransfer) {\n      if (!dataTransfer) return false;\n\n      // 检查files集合\n      if (dataTransfer.files && dataTransfer.files.length > 0) {\n        console.log('[EditorChat] Found files in dataTransfer.files');\n        return true;\n      }\n\n      // 检查types\n      if (dataTransfer.types) {\n        const hasFileType = dataTransfer.types.includes('Files') ||\n          dataTransfer.types.includes('application/x-vscode-file');\n        if (hasFileType) {\n          console.log('[EditorChat] Found file types in dataTransfer.types');\n          return true;\n        }\n      }\n\n      // 检查items\n      if (dataTransfer.items && dataTransfer.items.length > 0) {\n        for (let i = 0; i < dataTransfer.items.length; i++) {\n          const item = dataTransfer.items[i];\n          if (item.kind === 'file') {\n            console.log('[EditorChat] Found file in dataTransfer.items');\n            return true;\n          }\n        }\n      }\n\n      // 检查是否有文本数据（可能是VSCode文件路径）\n      if (dataTransfer.types && dataTransfer.types.includes('text/plain')) {\n        console.log('[EditorChat] Found text data, might be VSCode file paths');\n        return true;\n      }\n\n      console.log('[EditorChat] No files detected in dataTransfer');\n      return false;\n    },\n\n    // 显示拖拽提示\n    showDragHint() {\n      if (this.dragHintElement) return;\n\n      const hint = document.createElement('div');\n      hint.className = 'file-drag-hint';\n      hint.innerHTML = `\n        <div class=\"drag-hint-content\">\n          <div class=\"drag-hint-icon\">📁</div>\n          <div class=\"drag-hint-text\">拖拽文件到此处发送到聊天</div>\n          <div class=\"drag-hint-session\">${this.getCurrentSessionInfo()?.name || '当前会话'}</div>\n        </div>\n      `;\n\n      this.$el.appendChild(hint);\n      this.dragHintElement = hint;\n    },\n\n    // 隐藏拖拽提示\n    hideDragHint() {\n      if (this.dragHintElement) {\n        this.dragHintElement.remove();\n        this.dragHintElement = null;\n      }\n    },\n\n    // 添加拖拽样式\n    addDragOverClass() {\n      this.$el.classList.add('file-drag-over');\n    },\n\n    // 移除拖拽样式\n    removeDragOverClass() {\n      this.$el.classList.remove('file-drag-over');\n    },\n\n    // 确认文件发送\n    async confirmFileSend(files, session) {\n      const fileList = files.map(f => `• ${f.name} (${this.formatFileSize(f.size)})`).join('\\n');\n\n      if (this.$confirm) {\n        try {\n          await this.$confirm(\n            `确认发送 ${files.length} 个文件到 \"${session.name}\"？\\n\\n${fileList}`,\n            '确认文件发送',\n            {\n              confirmButtonText: '发送',\n              cancelButtonText: '取消',\n              type: 'info',\n              modal: false\n            }\n          );\n          return true;\n        } catch {\n          return false;\n        }\n      } else {\n        // 降级到原生确认对话框\n        return confirm(`确认发送 ${files.length} 个文件到 \"${session.name}\"？\\n\\n${fileList}`);\n      }\n    },\n\n    // 显示会话选择提示\n    showSessionSelectionRequired() {\n      const message = '请先选择一个聊天会话，然后再拖拽文件';\n\n      if (this.$message) {\n        this.$message.warning(message);\n      } else {\n        alert(message);\n      }\n    },\n\n    // 显示文件处理进度\n    showFileProcessingProgress(fileCount) {\n      console.log(`[EditorChat] 开始处理 ${fileCount} 个文件...`);\n    },\n\n    // 隐藏文件处理进度\n    hideFileProcessingProgress() {\n      if (this.processingMessage) {\n        this.processingMessage.close();\n        this.processingMessage = null;\n      }\n    },\n\n    // 显示错误通知\n    showErrorNotification(errorMessage) {\n      const message = `❌ 文件发送失败: ${errorMessage}`;\n\n      if (this.$message) {\n        this.$message.error(message);\n      } \n    },\n\n    // 格式化文件大小\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n\n    // 清理拖拽监听器\n    cleanupFileDragDrop() {\n      const dropZones = [\n        this.$el,\n        this.$el?.querySelector('.chat-box'),\n        this.$el?.querySelector('.chat-page')\n      ].filter(Boolean);\n\n      dropZones.forEach(dropZone => {\n        if (dropZone) {\n          dropZone.removeEventListener('dragover', this.handleDragOver, { capture: true });\n          dropZone.removeEventListener('dragenter', this.handleDragEnter, { capture: true });\n          dropZone.removeEventListener('dragleave', this.handleDragLeave, { capture: true });\n          dropZone.removeEventListener('drop', this.handleFileDrop, { capture: true });\n        }\n      });\n\n      this.hideDragHint();\n    },\n\n    // 🔧 设置统一会话服务监听器\n    setupUnifiedSessionListener() {\n      console.log(\"[EditorChat] 🔧 开始设置统一会话服务监听器\");\n\n      try {\n        let unifiedSessionService = null;\n\n        // 多种方式尝试获取统一会话服务\n\n        // 方式1: 通过$vscode服务获取\n        if (this.$vscode && this.$vscode.get) {\n          console.log(\"[EditorChat] 🔧 尝试通过$vscode.get获取统一会话服务...\");\n          unifiedSessionService = window.vscodeServices?.get('IUnifiedSessionService');\n          console.log(\"[EditorChat] 🔧 通过$vscode.get获取结果:\", !!unifiedSessionService);\n        }\n\n        // 方式2: 通过SharedServicesAccessor获取\n        if (!unifiedSessionService && window.SharedServicesAccessor) {\n          console.log(\"[EditorChat] 🔧 尝试通过SharedServicesAccessor获取统一会话服务...\");\n          unifiedSessionService = window.SharedServicesAccessor.get('IUnifiedSessionService');\n          console.log(\"[EditorChat] 🔧 通过SharedServicesAccessor获取结果:\", !!unifiedSessionService);\n        }\n\n        // 方式3: 通过全局VSCode服务获取\n        if (!unifiedSessionService && window.vscode?.services) {\n          console.log(\"[EditorChat] 🔧 尝试通过全局vscode.services获取统一会话服务...\");\n          unifiedSessionService = window.vscode.services.get('IUnifiedSessionService');\n          console.log(\"[EditorChat] 🔧 通过全局vscode.services获取结果:\", !!unifiedSessionService);\n        }\n\n        // 方式4: 直接从全局对象获取\n        if (!unifiedSessionService && window.unifiedSessionService) {\n          console.log(\"[EditorChat] 🔧 尝试从全局对象获取统一会话服务...\");\n          unifiedSessionService = window.unifiedSessionService;\n          console.log(\"[EditorChat] 🔧 从全局对象获取结果:\", !!unifiedSessionService);\n        }\n\n        console.log(\"[EditorChat] 🔧 最终统一会话服务获取结果:\", {\n          hasService: !!unifiedSessionService,\n          serviceType: typeof unifiedSessionService,\n          hasOnSessionChanged: !!unifiedSessionService?.onSessionChanged,\n          hasGetAllSessions: !!unifiedSessionService?.getAllSessions\n        });\n\n        if (unifiedSessionService && unifiedSessionService.onSessionChanged) {\n          console.log(\"[EditorChat] 🔧 统一会话服务正常，开始订阅事件...\");\n\n          // 订阅会话变更事件\n          const disposable = unifiedSessionService.onSessionChanged(\n            this.handleUnifiedSessionEvent.bind(this)\n          );\n\n          console.log(\"[EditorChat] 🔧 事件订阅结果:\", {\n            hasDisposable: !!disposable,\n            disposableType: typeof disposable,\n            hasDispose: !!disposable?.dispose\n          });\n\n          if (disposable && typeof disposable.dispose === 'function') {\n            this.unifiedSessionUnsubscribe = () => disposable.dispose();\n            console.log(\"[EditorChat] ✅ 已成功订阅统一会话事件\");\n          } else {\n            console.warn(\"[EditorChat] ⚠️ 事件订阅返回的不是有效的disposable对象:\", disposable);\n            this.unifiedSessionUnsubscribe = null;\n          }\n        } else {\n          console.warn(\"[EditorChat] ⚠️ 统一会话服务或onSessionChanged事件不可用\");\n          console.warn(\"[EditorChat] ⚠️ 尝试设置备用监听机制...\");\n          this.setupFallbackSessionListener();\n          this.unifiedSessionUnsubscribe = null;\n        }\n      } catch (error) {\n        console.error(\"[EditorChat] ❌ 设置统一会话监听器失败:\", error);\n        console.error(\"[EditorChat] ❌ 错误详情:\", error.stack);\n        console.warn(\"[EditorChat] ⚠️ 尝试设置备用监听机制...\");\n        this.setupFallbackSessionListener();\n        this.unifiedSessionUnsubscribe = null;\n      }\n\n      console.log(\"[EditorChat] 🔧 统一会话服务监听器设置完成\");\n    },\n\n    // 🔧 设置备用会话监听机制\n    setupFallbackSessionListener() {\n      console.log(\"[EditorChat] 🔧 设置备用会话监听机制...\");\n\n      try {\n        // 备用方案1: 监听全局自定义事件\n        const fallbackHandler = (event) => {\n          console.log(\"[EditorChat] 🔔 收到备用会话事件:\", event.detail);\n          if (event.detail && event.detail.type === 'unified-session-activated') {\n            this.handleUnifiedSessionEvent(event.detail);\n          }\n        };\n\n        window.addEventListener('unified-session-activated', fallbackHandler);\n        console.log(\"[EditorChat] ✅ 已设置全局事件监听器\");\n\n        this.unifiedSessionUnsubscribe = () => {\n          window.removeEventListener('unified-session-activated', fallbackHandler);\n          console.log(\"[EditorChat] 🔧 已清理备用事件监听器\");\n        };\n\n        // 备用方案2: 定期检查会话状态变化\n        let lastActiveSessionId = null;\n        const pollInterval = setInterval(() => {\n          try {\n            let unifiedSessionService = null;\n\n            // 尝试获取服务\n            if (window.SharedServicesAccessor) {\n              unifiedSessionService = window.SharedServicesAccessor.get('IUnifiedSessionService');\n            }\n\n            if (unifiedSessionService && typeof unifiedSessionService.getActiveSession === 'function') {\n              const activeSession = unifiedSessionService.getActiveSession();\n              const currentActiveSessionId = activeSession?.id;\n\n              if (currentActiveSessionId && currentActiveSessionId !== lastActiveSessionId) {\n                console.log(\"[EditorChat] 🔔 检测到活跃会话变化 (轮询):\", currentActiveSessionId);\n                lastActiveSessionId = currentActiveSessionId;\n\n                // 模拟统一会话事件\n                this.handleUnifiedSessionEvent({\n                  type: 'unified-session-activated',\n                  sessionId: currentActiveSessionId,\n                  sessionType: activeSession.type,\n                  session: activeSession\n                });\n              }\n            }\n          } catch (error) {\n            // 静默处理轮询错误\n          }\n        }, 1000); // 每秒检查一次\n\n        // 确保在组件销毁时清理轮询\n        const originalCleanup = this.unifiedSessionUnsubscribe;\n        this.unifiedSessionUnsubscribe = () => {\n          clearInterval(pollInterval);\n          if (originalCleanup) originalCleanup();\n          console.log(\"[EditorChat] 🔧 已清理轮询机制\");\n        };\n\n        console.log(\"[EditorChat] ✅ 已设置会话状态轮询机制\");\n\n      } catch (error) {\n        console.error(\"[EditorChat] ❌ 设置备用监听机制失败:\", error);\n      }\n    },\n\n    // 🔧 处理统一会话服务事件\n    handleUnifiedSessionEvent(event) {\n      console.log('[EditorChat] 🔔 收到统一会话事件:', {\n        eventType: event?.type,\n        sessionId: event?.sessionId,\n        sessionType: event?.sessionType,\n        hasSession: !!event?.session,\n        eventDetails: event\n      });\n\n      if (!event) {\n        console.warn('[EditorChat] ⚠️ 收到空的统一会话事件');\n        return;\n      }\n\n      if (event.type !== 'unified-session-activated') {\n        console.log('[EditorChat] 🔧 非激活事件，忽略:', event.type);\n        return;\n      }\n\n      console.log('[EditorChat] 🔔 处理会话激活事件，类型:', event.sessionType);\n\n      // 根据会话类型处理\n      if (event.sessionType === 'vue-im') {\n        console.log('[EditorChat] 🔧 处理Vue IM会话激活');\n        this.handleImSessionActivatedFromUnified(event);\n      } else if (event.sessionType === 'react-ai') {\n        console.log('[EditorChat] 🔧 处理React AI会话激活');\n        this.handleAiSessionActivatedFromUnified(event);\n      } else {\n        console.warn('[EditorChat] ⚠️ 未知的会话类型:', event.sessionType);\n      }\n    },\n\n    // 🔧 处理来自统一服务的IM会话激活\n    handleImSessionActivatedFromUnified(event) {\n      console.log('[EditorChat] 处理IM会话激活:', event.session?.title);\n\n      const sessionData = event.session;\n      if (!sessionData) {\n        console.warn('[EditorChat] IM会话事件中没有会话数据');\n        return;\n      }\n\n      // 获取targetId\n      const targetId = sessionData.targetId || sessionData.sessionId || sessionData.realSessionRef;\n      if (!targetId) {\n        console.warn('[EditorChat] IM会话事件中没有有效的targetId:', sessionData);\n        return;\n      }\n\n      // 防止重复激活同一会话\n      const sessionId = `vue-im-${targetId}`;\n      if (this.lastActivatedSessionId === sessionId) {\n        console.log('[EditorChat] 🔧 防止重复激活，会话已是当前激活状态:', sessionId);\n        return;\n      }\n\n      console.log('[EditorChat] 🔧 激活IM会话，targetId:', targetId);\n\n      // 切换到IM模式\n      this.selectedAIChat = null;\n      this.isAIChat = false;\n\n      // 通过targetId查找对应的聊天\n      const targetIdStr = targetId.toString();\n      const matchingChat = this.chatStore.chats?.find(\n        chat => {\n          const chatTargetId = (chat.targetId || chat.id)?.toString();\n          return chatTargetId === targetIdStr;\n        }\n      );\n\n      if (matchingChat) {\n        const chatIndex = this.chatStore.chats.indexOf(matchingChat);\n        console.log('[EditorChat] 🔧 找到匹配聊天，索引:', chatIndex, '会话名:', matchingChat.showName);\n\n        // 检查当前激活状态，由于InboxSession已经激活，这里只需要确认状态\n        console.log('[EditorChat] 🔧 当前activeChat:', this.chatStore.activeChat?.showName || 'null');\n        console.log('[EditorChat] 🔧 期望activeChat:', matchingChat.showName);\n\n        // 只要找到匹配的聊天，就认为激活成功，避免重复操作\n        this.lastActivatedSessionId = sessionId;\n\n        // 切换到IM模式\n        this.selectedAIChat = null;\n        this.isAIChat = false;\n\n        console.log('[EditorChat] 🔧 IM会话状态已同步');\n      } else {\n        console.warn('[EditorChat] ❌ 未找到匹配的聊天，targetId:', targetId);\n        console.log('[EditorChat] 🔧 可用聊天列表:', this.chatStore.chats?.map(c => ({\n          targetId: c.targetId,\n          id: c.id,\n          showName: c.showName\n        })));\n\n        // 如果找不到匹配聊天，清除活跃状态\n        this.$store.commit(\"clearActiveChat\");\n      }\n    },\n\n    // 🔧 处理来自统一服务的AI会话激活\n    handleAiSessionActivatedFromUnified(event) {\n      console.log('[EditorChat] 处理AI会话激活:', event.session?.title);\n\n      const sessionData = event.session;\n      if (!sessionData) {\n        console.warn('[EditorChat] AI会话事件中没有会话数据');\n        return;\n      }\n\n      // 切换到AI模式\n      this.isAIChat = true;\n      this.$store.commit(\"clearActiveChat\"); // 清除人类聊天选择\n\n      // 构造AI会话对象\n      this.selectedAIChat = {\n        id: sessionData.sessionId,\n        aiThreadId: sessionData.sessionId,\n        showName: sessionData.title || sessionData.showName || 'AI对话',\n        title: sessionData.title || sessionData.showName || 'AI对话',\n        summary: sessionData.summary || '',\n        lastModified: sessionData.lastModified || new Date().toISOString()\n      };\n\n      console.log('[EditorChat] 🔧 AI会话已激活:', this.selectedAIChat.showName);\n    },\n  },\n  mounted() {\n    console.log('[EditorChat] 🔧 Component mounting...');\n\n    // 检查事件总线\n    console.log('[EditorChat] 🔧 Checking event bus:');\n    console.log('- $bus:', !!this.$bus);\n    console.log('- $eventBus:', !!this.$eventBus);\n\n    // 设置通用事件监听\n    this.setupEventListeners()\n\n    // 🆕 添加文件拖拽支持\n    this.setupFileDragDrop();\n\n    // 设置文件事件监听\n    if (this.$bus) {\n      this.$bus.$on('chat:file:send', this.handleFileSend);\n      this.$bus.$on('chat:file:upload', this.handleFileSend);\n      console.log('[EditorChat] File event listeners registered on $bus');\n    } else {\n      console.warn('[EditorChat] $bus not available, cannot register file event listeners');\n    }\n\n    // 如果有$eventBus，也在那里监听\n    if (this.$eventBus) {\n      this.$eventBus.$on('chat:file:send', this.handleFileSend);\n      this.$eventBus.$on('chat:file:upload', this.handleFileSend);\n      console.log('[EditorChat] File event listeners registered on $eventBus');\n    }\n\n    console.log('[EditorChat] 🔧 Component mounted, all event listeners initialized');\n  },\n  beforeDestroy() {\n    // 清理通用事件监听\n    this.cleanupEventListeners()\n\n    // 🔧 清理统一的拖拽监听器\n    this.removeGlobalDragListeners();\n\n    // 清理文件事件监听\n    if (this.$bus) {\n      this.$bus.$off('chat:file:send', this.handleFileSend);\n      this.$bus.$off('chat:file:upload', this.handleFileSend);\n    }\n  },\n  watch: {\n    chatData: {\n      handler(newChatData) {\n        if (newChatData) {\n          this.activateChatData(newChatData);\n        }\n      },\n      immediate: true\n    },\n    'chatStore.activeChat': {\n      handler(newActiveChat) {\n        // 当激活的会话变化时，检测是否为PC终端\n        this.detectPCTerminalChat();\n      },\n      deep: true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.chat-page {\n  height: 100% !important;\n  background-color: #f1f1f1;\n  position: relative;\n\n  // 重写Element UI的el-container样式\n  &.el-container {\n    height: 100% !important;\n    flex-direction: row;\n  }\n\n  // 🆕 文件拖拽样式\n  &.file-drag-over {\n    background: rgba(0, 122, 255, 0.1) !important;\n\n    &::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      border: 3px dashed #007AFF;\n      border-radius: 8px;\n      pointer-events: none;\n      z-index: 999;\n    }\n  }\n\n  .chat-box {\n    flex: 1;\n    height: 100% !important;\n    display: flex;\n    flex-direction: column;\n    min-height: 0; // 添加这行，确保flex子项能正确收缩\n\n    // 重写Element UI的el-container样式\n    &.el-container {\n      height: 100% !important;\n      flex-direction: column;\n    }\n    \n    // 容器管理组件包装器\n    .container-manager-wrapper {\n      flex-shrink: 0;\n      z-index: 10;\n    }\n  }\n\n  .thinking-panel {\n    height: 100% !important;\n    border-left: 1px solid #e8eaec;\n    background: white;\n\n    // 重写Element UI的el-aside样式\n    &.el-aside {\n      height: 100% !important;\n    }\n\n    .panel-tabs {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n\n      .tabs-header {\n        display: flex;\n        border-bottom: 1px solid #e8eaec;\n        background: #f8f9fa;\n\n        .tab-btn {\n          flex: 1;\n          padding: 12px 8px;\n          border: none;\n          background: transparent;\n          cursor: pointer;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 4px;\n          transition: all 0.2s;\n\n          &:hover {\n            background: #e9ecef;\n          }\n\n          &.active {\n            background: white;\n            border-bottom: 2px solid #007bff;\n            color: #007bff;\n          }\n\n          .tab-icon {\n            font-size: 16px;\n          }\n\n          .tab-label {\n            font-size: 11px;\n            font-weight: 500;\n          }\n        }\n      }\n\n      .tabs-content {\n        flex: 1;\n        overflow: hidden;\n\n        .tab-panel {\n          height: 100%;\n          overflow-y: auto;\n        }\n      }\n    }\n  }\n\n  .panel-toggle {\n    position: absolute;\n    right: 12px;\n    top: 50%;\n    transform: translateY(-50%);\n    background: #007bff;\n    color: white;\n    padding: 8px 12px;\n    border-radius: 20px;\n    cursor: pointer;\n    box-shadow: 0 2px 8px rgba(0, 123, 255, 0.3);\n    transition: all 0.3s ease;\n    z-index: 100;\n\n    &:hover {\n      background: #0056b3;\n      transform: translateY(-50%) scale(1.05);\n    }\n\n    .toggle-icon {\n      margin-right: 6px;\n    }\n\n    .toggle-text {\n      font-size: 12px;\n      font-weight: 500;\n    }\n  }\n}\n\n// AI助手面板样式\n.ai-assistant-panel {\n  padding: 16px;\n  height: 100%;\n  overflow-y: auto;\n\n  .assistant-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20px;\n\n    h3 {\n      margin: 0;\n      font-size: 16px;\n      font-weight: 600;\n      color: #2c3e50;\n    }\n\n    .assistant-status {\n      font-size: 12px;\n      padding: 4px 8px;\n      border-radius: 12px;\n      font-weight: 500;\n\n      &.active {\n        background: #d4edda;\n        color: #155724;\n      }\n\n      &.idle {\n        background: #fff3cd;\n        color: #856404;\n      }\n\n      &.analyzing {\n        background: #cce5ff;\n        color: #004085;\n      }\n    }\n  }\n\n  .quick-actions {\n    margin-bottom: 24px;\n\n    h4 {\n      margin: 0 0 12px 0;\n      font-size: 14px;\n      font-weight: 600;\n      color: #495057;\n    }\n\n    .action-buttons {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 8px;\n\n      .action-btn {\n        padding: 8px 12px;\n        border: 1px solid #dee2e6;\n        border-radius: 6px;\n        background: white;\n        color: #495057;\n        cursor: pointer;\n        font-size: 12px;\n        text-align: center;\n        transition: all 0.2s;\n\n        &:hover {\n          background: #f8f9fa;\n          border-color: #adb5bd;\n        }\n      }\n    }\n  }\n\n  .ai-insights {\n    margin-bottom: 24px;\n\n    h4 {\n      margin: 0 0 12px 0;\n      font-size: 14px;\n      font-weight: 600;\n      color: #495057;\n    }\n\n    .insights-list {\n      .insight-item {\n        display: flex;\n        gap: 12px;\n        padding: 12px;\n        margin-bottom: 8px;\n        background: #f8f9fa;\n        border-radius: 8px;\n        border-left: 3px solid #dee2e6;\n\n        &.priority-high {\n          border-left-color: #dc3545;\n        }\n\n        &.priority-medium {\n          border-left-color: #ffc107;\n        }\n\n        &.priority-low {\n          border-left-color: #28a745;\n        }\n\n        .insight-icon {\n          font-size: 16px;\n          flex-shrink: 0;\n        }\n\n        .insight-content {\n          flex: 1;\n\n          .insight-title {\n            font-weight: 500;\n            font-size: 13px;\n            color: #2c3e50;\n            margin-bottom: 4px;\n          }\n\n          .insight-description {\n            font-size: 12px;\n            color: #6c757d;\n            line-height: 1.4;\n          }\n        }\n      }\n    }\n  }\n\n  .learning-feedback {\n    h4 {\n      margin: 0 0 12px 0;\n      font-size: 14px;\n      font-weight: 600;\n      color: #495057;\n    }\n\n    .feedback-form {\n      .feedback-input {\n        width: 100%;\n        min-height: 80px;\n        padding: 8px 12px;\n        border: 1px solid #dee2e6;\n        border-radius: 6px;\n        resize: vertical;\n        font-size: 12px;\n        line-height: 1.4;\n        margin-bottom: 8px;\n\n        &:focus {\n          outline: none;\n          border-color: #007bff;\n        }\n      }\n\n      .submit-btn {\n        width: 100%;\n        padding: 8px 12px;\n        border: 1px solid #007bff;\n        border-radius: 6px;\n        background: #007bff;\n        color: white;\n        cursor: pointer;\n        font-size: 12px;\n        transition: all 0.2s;\n\n        &:hover {\n          background: #0056b3;\n        }\n      }\n    }\n  }\n}\n\n// 设置面板样式\n.settings-panel {\n  padding: 16px;\n  height: 100%;\n  overflow-y: auto;\n\n  .settings-header {\n    margin-bottom: 20px;\n\n    h3 {\n      margin: 0;\n      font-size: 16px;\n      font-weight: 600;\n      color: #2c3e50;\n    }\n  }\n\n  .settings-sections {\n    .setting-section {\n      margin-bottom: 24px;\n\n      h4 {\n        margin: 0 0 12px 0;\n        font-size: 14px;\n        font-weight: 600;\n        color: #495057;\n        border-bottom: 1px solid #e9ecef;\n        padding-bottom: 6px;\n      }\n\n      .setting-item {\n        margin-bottom: 12px;\n\n        .setting-label {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 13px;\n          color: #495057;\n          cursor: pointer;\n\n          input[type=\"checkbox\"] {\n            margin: 0;\n          }\n\n          select {\n            margin-left: auto;\n            padding: 4px 8px;\n            border: 1px solid #dee2e6;\n            border-radius: 4px;\n            font-size: 12px;\n          }\n        }\n      }\n    }\n  }\n\n  .settings-actions {\n    display: flex;\n    gap: 8px;\n    margin-top: 20px;\n\n    .reset-btn,\n    .save-btn {\n      flex: 1;\n      padding: 8px 12px;\n      border: 1px solid #dee2e6;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 12px;\n      text-align: center;\n      transition: all 0.2s;\n    }\n\n    .reset-btn {\n      background: white;\n      color: #6c757d;\n\n      &:hover {\n        background: #f8f9fa;\n      }\n    }\n\n    .save-btn {\n      background: #28a745;\n      color: white;\n      border-color: #28a745;\n\n      &:hover {\n        background: #218838;\n      }\n    }\n  }\n}\n\n// 空状态样式\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n  min-height: 100vh; // 确保至少占满视口高度\n  position: relative;\n  \n  .empty-content {\n    text-align: center;\n    color: #6c757d;\n    padding: 20px; // 添加内边距提供更好的视觉效果\n\n    .empty-icon {\n      font-size: 48px;\n      margin-bottom: 16px;\n      display: block; // 确保图标独占一行\n    }\n\n    h3 {\n      margin: 0;\n      font-size: 18px;\n      font-weight: 600;\n      color: #333;\n    }\n\n    p {\n      margin: 8px 0 0 0;\n      font-size: 14px;\n      line-height: 1.5; // 改善文字行高\n    }\n  }\n}\n\n// 🆕 拖拽提示浮层样式\n.file-drag-hint {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  pointer-events: none;\n\n  .drag-hint-content {\n    background: white;\n    border-radius: 12px;\n    padding: 32px;\n    text-align: center;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n    transform: scale(0.95);\n    animation: dragHintShow 0.2s ease-out forwards;\n\n    .drag-hint-icon {\n      font-size: 48px;\n      margin-bottom: 16px;\n    }\n\n    .drag-hint-text {\n      font-size: 18px;\n      font-weight: 600;\n      color: #2c3e50;\n      margin-bottom: 8px;\n    }\n\n    .drag-hint-session {\n      font-size: 14px;\n      color: #6c757d;\n      padding: 6px 12px;\n      background: #f8f9fa;\n      border-radius: 6px;\n      display: inline-block;\n    }\n  }\n}\n\n@keyframes dragHintShow {\n  from {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorChat.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorChat.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./EditorChat.vue?vue&type=template&id=2b814f64\"\nimport script from \"./EditorChat.vue?vue&type=script&lang=js\"\nexport * from \"./EditorChat.vue?vue&type=script&lang=js\"\nimport style0 from \"./EditorChat.vue?vue&type=style&index=0&id=2b814f64&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"friend-page\"},[_c('el-container',{staticClass:\"friend-box\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.userInfo.id),expression:\"userInfo.id\"}],staticClass:\"friend-header\"},[_vm._v(\" \"+_vm._s(_vm.userInfo.nickName)+\" \")]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.userInfo.id),expression:\"userInfo.id\"}]},[_c('div',{staticClass:\"friend-detail\"},[_c('head-image',{attrs:{\"size\":160,\"name\":_vm.userInfo.nickName,\"url\":_vm.userInfo.headImage,\"radius\":\"10%\"},nativeOn:{\"click\":function($event){return _vm.showFullImage()}}}),_c('div',[_c('div',{staticClass:\"info-item\"},[_c('el-descriptions',{staticClass:\"description\",attrs:{\"title\":\"好友信息\",\"column\":1}},[_c('el-descriptions-item',{attrs:{\"label\":\"用户名\"}},[_vm._v(_vm._s(_vm.userInfo.userName)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"昵称\"}},[_vm._v(_vm._s(_vm.userInfo.nickName)+\" \")]),_c('el-descriptions-item',{attrs:{\"label\":\"性别\"}},[_vm._v(_vm._s(_vm.userInfo.sex == 0 ? \"男\" : \"女\"))]),_c('el-descriptions-item',{attrs:{\"label\":\"签名\"}},[_vm._v(_vm._s(_vm.userInfo.signature))])],1)],1),_c('div',{staticClass:\"frient-btn-group\"},[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isFriend),expression:\"isFriend\"}],attrs:{\"icon\":\"el-icon-position\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSendMessage(_vm.userInfo)}}},[_vm._v(\"发消息\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isFriend),expression:\"!isFriend\"}],attrs:{\"icon\":\"el-icon-plus\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onAddFriend(_vm.userInfo)}}},[_vm._v(\"加为好友\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isFriend),expression:\"isFriend\"}],attrs:{\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.onDelFriend(_vm.userInfo)}}},[_vm._v(\"删除好友\")])],1)])],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-container class=\"friend-page\">\n\n\t\t<el-container class=\"friend-box\">\n\t\t\t<div class=\"friend-header\" v-show=\"userInfo.id\">\n\t\t\t\t{{ userInfo.nickName }}\n\t\t\t</div>\n\t\t\t<div v-show=\"userInfo.id\">\n\t\t\t\t<div class=\"friend-detail\">\n\t\t\t\t\t<head-image :size=\"160\" :name=\"userInfo.nickName\" :url=\"userInfo.headImage\" radius=\"10%\"\n\t\t\t\t\t\t@click.native=\"showFullImage()\"></head-image>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\"info-item\">\n\t\t\t\t\t\t\t<el-descriptions title=\"好友信息\" class=\"description\" :column=\"1\">\n\t\t\t\t\t\t\t\t<el-descriptions-item label=\"用户名\">{{ userInfo.userName }}\n\t\t\t\t\t\t\t\t</el-descriptions-item>\n\t\t\t\t\t\t\t\t<el-descriptions-item label=\"昵称\">{{ userInfo.nickName }}\n\t\t\t\t\t\t\t\t</el-descriptions-item>\n\t\t\t\t\t\t\t\t<el-descriptions-item label=\"性别\">{{ userInfo.sex == 0 ? \"男\" : \"女\"\n\t\t\t\t\t\t\t\t}}</el-descriptions-item>\n\t\t\t\t\t\t\t\t<el-descriptions-item label=\"签名\">{{ userInfo.signature }}</el-descriptions-item>\n\t\t\t\t\t\t\t</el-descriptions>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"frient-btn-group\">\n\t\t\t\t\t\t\t<el-button v-show=\"isFriend\" icon=\"el-icon-position\" type=\"primary\"\n\t\t\t\t\t\t\t\t@click=\"onSendMessage(userInfo)\">发消息</el-button>\n\t\t\t\t\t\t\t<el-button v-show=\"!isFriend\" icon=\"el-icon-plus\" type=\"primary\"\n\t\t\t\t\t\t\t\t@click=\"onAddFriend(userInfo)\">加为好友</el-button>\n\t\t\t\t\t\t\t<el-button v-show=\"isFriend\" icon=\"el-icon-delete\" type=\"danger\"\n\t\t\t\t\t\t\t\t@click=\"onDelFriend(userInfo)\">删除好友</el-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-container>\n\t</el-container>\n</template>\n\n<script>\nimport AddFriend from \"../components/friend/AddFriend.vue\";\nimport HeadImage from \"../components/common/HeadImage.vue\";\nimport { pinyin } from 'pinyin-pro';\n\nexport default {\n\tname: \"friend\",\n\tcomponents: {\n\t\tAddFriend,\n\t\tHeadImage\n\n\t},\n\tprops: {\n\t\tfriendData: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => null\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsearchText: \"\",\n\t\t\tshowAddFriend: false,\n\t\t\tuserInfo: {}\n\t\t}\n\t},\n\tmethods: {\n\t\tonShowAddFriend() {\n\t\t\tthis.showAddFriend = true;\n\t\t},\n\t\tonCloseAddFriend() {\n\t\t\tthis.showAddFriend = false;\n\t\t},\n\t\tonActiveItem(friend) {\n\t\t\tthis.activeFriend = friend;\n\t\t\tthis.loadUserInfo(friend.id);\n\t\t},\n\t\tonDelFriend(friend) {\n\t\t\tthis.$confirm(`确认删除'${friend.nickName}',并清空聊天记录吗?`, '确认解除?', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/friend/delete/${friend.id}`,\n\t\t\t\t\tmethod: 'delete'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$message.success(\"删除好友成功\");\n\t\t\t\t\tthis.$store.commit(\"removeFriend\", friend.id);\n\t\t\t\t\tthis.$store.commit(\"removePrivateChat\", friend.id);\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tonAddFriend(user) {\n\t\t\tthis.$http({\n\t\t\t\turl: \"/friend/add\",\n\t\t\t\tmethod: \"post\",\n\t\t\t\tparams: {\n\t\t\t\t\tfriendId: user.id\n\t\t\t\t}\n\t\t\t}).then(() => {\n\t\t\t\tthis.$message.success(\"添加成功，对方已成为您的好友\");\n\t\t\t\tlet friend = {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tnickName: user.nickName,\n\t\t\t\t\theadImage: user.headImage,\n\t\t\t\t\tonline: user.online\n\t\t\t\t}\n\t\t\t\tthis.$store.commit(\"addFriend\", friend);\n\t\t\t})\n\t\t},\n\t\tasync onSendMessage(user) {\n\t\t\t// 构造聊天数据\n\t\t\tlet chatData = {\n\t\t\t\ttype: 'PRIVATE',\n\t\t\t\ttargetId: user.id,\n\t\t\t\tshowName: user.nickName,\n\t\t\t\theadImage: user.headImageThumb || user.headImage,\n\t\t\t};\n\t\t\t\n\t\t\t// 打开聊天会话\n\t\t\tthis.$store.commit(\"openChat\", chatData);\n\t\t\t\n\t\t\t// 查找会话索引\n\t\t\tconst chatIndex = this.$store.getters.findChatIdx(chatData);\n\t\t\tif (chatIndex !== undefined && chatIndex !== -1) {\n\t\t\t\t// 激活会话\n\t\t\t\tthis.$store.commit(\"activeChat\", chatIndex);\n\t\t\t\t\n\t\t\t\t// 在VSCode环境中，需要同步到统一会话服务并通知编辑器面板\n\t\t\t\tif (window.vscodeServices) {\n\t\t\t\t\tconsole.log('[EditorFriend] 在VSCode环境中，同步并激活编辑器面板会话');\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// 获取当前激活的会话\n\t\t\t\t\t\tconst activeChat = this.$store.state.chatStore.chats[chatIndex];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 生成统一会话ID\n\t\t\t\t\t\tconst unifiedSessionId = `vue-im-${user.id}`;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 获取统一会话服务\n\t\t\t\t\t\tconst unifiedSessionService = window.vscodeServices.get('IUnifiedSessionService');\n\t\t\t\t\t\tif (unifiedSessionService) {\n\t\t\t\t\t\t\t// 检查会话是否已存在\n\t\t\t\t\t\t\tconst sessionExists = unifiedSessionService.getAllSessions &&\n\t\t\t\t\t\t\t\tunifiedSessionService.getAllSessions().some(s => s.id === unifiedSessionId);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (!sessionExists && unifiedSessionService.syncVueSessionsFromWebView) {\n\t\t\t\t\t\t\t\tconsole.log(\"[EditorFriend] 会话不存在，进行增量同步...\");\n\t\t\t\t\t\t\t\t// 同步单个会话到统一服务\n\t\t\t\t\t\t\t\tconst sessionData = {\n\t\t\t\t\t\t\t\t\tid: user.id,\n\t\t\t\t\t\t\t\t\tsessionId: user.id,\n\t\t\t\t\t\t\t\t\tshowName: user.nickName,\n\t\t\t\t\t\t\t\t\ttype: 'vue-im',\n\t\t\t\t\t\t\t\t\theadImage: user.headImageThumb || user.headImage,\n\t\t\t\t\t\t\t\t\tlastSendTime: Date.now(),\n\t\t\t\t\t\t\t\t\tmessages: activeChat?.messages || []\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tunifiedSessionService.syncVueSessionsFromWebView([sessionData]);\n\t\t\t\t\t\t\t\t// 等待同步完成\n\t\t\t\t\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 50));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 激活会话\n\t\t\t\t\t\t\tif (unifiedSessionService.setActiveSession) {\n\t\t\t\t\t\t\t\tunifiedSessionService.setActiveSession(unifiedSessionId);\n\t\t\t\t\t\t\t\tconsole.log(\"[EditorFriend] ✅ 已调用统一会话激活:\", unifiedSessionId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 使用面板管理服务打开编辑器\n\t\t\t\t\t\tconst panelManagerService = window.vscodeServices.get('panelManagerService');\n\t\t\t\t\t\tif (panelManagerService && panelManagerService.openChatEditor) {\n\t\t\t\t\t\t\tconst chatUser = {\n\t\t\t\t\t\t\t\tid: user.id,\n\t\t\t\t\t\t\t\tnickName: user.nickName,\n\t\t\t\t\t\t\t\tname: user.nickName,\n\t\t\t\t\t\t\t\theadImage: user.headImageThumb || user.headImage,\n\t\t\t\t\t\t\t\theadImageThumb: user.headImageThumb || user.headImage,\n\t\t\t\t\t\t\t\tavatar: user.headImage,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tpanelManagerService.openChatEditor(chatUser);\n\n\t\t\t\t\t\t\tthis.$store.commit(\"changeViewCode\", 1);// 切换到聊天页面\n\t\t\t\t\t\t\tconsole.log(\"[EditorFriend] ✅ 聊天编辑器面板已打开:\", user.nickName);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn(\"[EditorFriend] ⚠️ PanelManagerService或openChatEditor方法不可用\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error(\"[EditorFriend] ❌ 激活编辑器面板失败:\", error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 检查是否在PluginChat环境中\n\t\t\tif (this.$parent && this.$parent.$options.name === 'PluginChat') {\n\t\t\t\tconsole.log('[EditorFriend] 在PluginChat环境中，触发startChat事件');\n\t\t\t\t// 触发父组件的startChat事件\n\t\t\t\tthis.$emit('startChat', chatData);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 原有的路由跳转逻辑（用于其他页面）\n\t\t\tif (!window.vscodeServices) {\n\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t}\n\t\t},\n\t\tshowFullImage() {\n\t\t\tif (this.userInfo.headImage) {\n\t\t\t\tthis.$store.commit('showFullImageBox', this.userInfo.headImage);\n\t\t\t}\n\t\t},\n\t\tupdateFriendInfo() {\n\t\t\tif (this.isFriend) {\n\t\t\t\t// store的数据不能直接修改，深拷贝一份store的数据\n\t\t\t\tlet friend = JSON.parse(JSON.stringify(this.activeFriend));\n\t\t\t\tfriend.headImage = this.userInfo.headImageThumb;\n\t\t\t\tfriend.nickName = this.userInfo.nickName;\n\t\t\t\tthis.$store.commit(\"updateChatFromFriend\", friend);\n\t\t\t\tthis.$store.commit(\"updateFriend\", friend);\n\t\t\t}\n\t\t},\n\t\tloadUserInfo(id) {\n\t\t\t// 获取好友用户信息\n\t\t\tthis.$http({\n\t\t\t\turl: `/user/find/${id}`,\n\t\t\t\tmethod: 'GET'\n\t\t\t}).then((userInfo) => {\n\t\t\t\tthis.userInfo = userInfo;\n\t\t\t\tthis.updateFriendInfo();\n\t\t\t})\n\t\t},\n\t\tfirstLetter(strText) {\n\t\t\t// 使用pinyin-pro库将中文转换为拼音\n\t\t\tlet pinyinOptions = {\n\t\t\t\ttoneType: 'none', // 无声调\n\t\t\t\ttype: 'normal' // 普通拼音\n\t\t\t};\n\t\t\tlet pyText = pinyin(strText, pinyinOptions);\n\t\t\treturn pyText[0];\n\t\t},\n\t\tisEnglish(character) {\n\t\t\treturn /^[A-Za-z]+$/.test(character);\n\t\t}\n\t},\n\tcomputed: {\n\t\tactiveFriend() {\n\t\t\treturn this.$store.state.friendStore.activeFriend;\n\t\t},\n\t\tfriendStore() {\n\t\t\treturn this.$store.state.friendStore;\n\t\t},\n\t\tisFriend() {\n\t\t\treturn this.$store.getters.isFriend(this.userInfo.id);\n\t\t},\n\t\tfriendMap() {\n\t\t\t// 按首字母分组\n\t\t\tlet map = new Map();\n\t\t\tthis.friendStore.friends.forEach((f) => {\n\t\t\t\tif (f.deleted || (this.searchText && !f.nickName.includes(this.searchText))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet letter = this.firstLetter(f.nickName).toUpperCase();\n\t\t\t\t// 非英文一律为#组\n\t\t\t\tif (!this.isEnglish(letter)) {\n\t\t\t\t\tletter = \"#\"\n\t\t\t\t}\n\t\t\t\tif (f.online) {\n\t\t\t\t\tletter = '在线'\n\t\t\t\t}\n\t\t\t\tif (map.has(letter)) {\n\t\t\t\t\tmap.get(letter).push(f);\n\t\t\t\t} else {\n\t\t\t\t\tmap.set(letter, [f]);\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 排序\n\t\t\tlet arrayObj = Array.from(map);\n\t\t\tarrayObj.sort((a, b) => {\n\t\t\t\t// #组在最后面\n\t\t\t\tif (a[0] == '#' || b[0] == '#') {\n\t\t\t\t\treturn b[0].localeCompare(a[0])\n\t\t\t\t}\n\t\t\t\treturn a[0].localeCompare(b[0])\n\t\t\t})\n\t\t\tmap = new Map(arrayObj.map(i => [i[0], i[1]]));\n\t\t\treturn map;\n\t\t},\n\t\tfriendKeys() {\n\t\t\treturn Array.from(this.friendMap.keys());\n\t\t},\n\t\tfriendValues() {\n\t\t\treturn Array.from(this.friendMap.values());\n\t\t}\n\t},\n\twatch: {\n\t\tactiveFriend(newFriend, oldFriend) {\n\t\t\tthis.onActiveItem(newFriend);\n\t\t},\n\t\t// 监听传入的好友数据\n\t\tfriendData: {\n\t\t\thandler(newFriendData) {\n\t\t\t\tif (newFriendData && newFriendData.id) {\n\t\t\t\t\tconsole.log('[EditorFriend] 接收到好友数据:', newFriendData);\n\t\t\t\t\t// 设置活跃好友\n\t\t\t\t\tthis.$store.commit(\"setActiveFriend\", newFriendData);\n\t\t\t\t\t// 加载用户详细信息\n\t\t\t\t\tthis.loadUserInfo(newFriendData.id);\n\t\t\t\t}\n\t\t\t},\n\t\t\timmediate: true\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.friend-page {\n\tbackground-color: #f1f1f1;\n\theight: 100%;\n\t.friend-list-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbackground: var(--im-background);\n\n\t\t.friend-list-header {\n\t\t\theight: 50px;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 8px;\n\n\t\t\t.add-btn {\n\t\t\t\tpadding: 5px !important;\n\t\t\t\tmargin: 5px;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tborder-radius: 50%;\n\t\t\t}\n\t\t}\n\n\t\t.friend-list-items {\n\t\t\tflex: 1;\n\n\t\t\t.index-title {\n\t\t\t\ttext-align: left;\n\t\t\t\tfont-size: var(--im-larger-size-larger);\n\t\t\t\tpadding: 5px 15px;\n\t\t\t\tcolor: var(--im-text-color-light);\n\t\t\t}\n\t\t}\n\t}\n\n\t.friend-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t.friend-header {\n\t\t\theight: 50px;\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 12px;\n\t\t\tfont-size: var(--im-font-size-larger);\n\t\t\tborder-bottom: var(--im-border);\n\t\t\tbox-sizing: border-box;\n\t\t}\n\n\t\t.friend-detail {\n\t\t\tdisplay: flex;\n\t\t\tpadding: 50px 80px 20px 80px;\n\t\t\ttext-align: center;\n\n\t\t\t.info-item {\n\t\t\t\tmargin-left: 20px;\n\t\t\t\tbackground-color: #ffffff;\n\t\t\t\tborder: 1px #ddd solid;\n\t\t\t}\n\n\t\t\t.description {\n\t\t\t\tpadding: 20px 20px 0 20px;\n\t\t\t}\n\t\t}\n\n\t\t.frient-btn-group {\n\t\t\ttext-align: left !important;\n\t\t\tpadding: 20px;\n\t\t}\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorFriend.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorFriend.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./EditorFriend.vue?vue&type=template&id=27b2c0bc\"\nimport script from \"./EditorFriend.vue?vue&type=script&lang=js\"\nexport * from \"./EditorFriend.vue?vue&type=script&lang=js\"\nimport style0 from \"./EditorFriend.vue?vue&type=style&index=0&id=27b2c0bc&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"group-page\"},[_c('el-container',{staticClass:\"group-box\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeGroup.id),expression:\"activeGroup.id\"}],staticClass:\"group-header\"},[_vm._v(\" \"+_vm._s(_vm.activeGroup.showGroupName)+\"(\"+_vm._s(_vm.groupMembers.length)+\") \")]),_c('div',{staticClass:\"group-container\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.activeGroup.id),expression:\"activeGroup.id\"}]},[_c('div',{staticClass:\"group-info\"},[_c('div',[_c('file-upload',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOwner),expression:\"isOwner\"}],staticClass:\"avatar-uploader\",attrs:{\"action\":_vm.imageAction,\"showLoading\":true,\"maxSize\":_vm.maxSize,\"fileTypes\":['image/jpeg', 'image/png', 'image/jpg', 'image/webp']},on:{\"success\":_vm.onUploadSuccess}},[(_vm.activeGroup.headImage)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.activeGroup.headImage}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})]),_c('head-image',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isOwner),expression:\"!isOwner\"}],staticClass:\"avatar\",attrs:{\"size\":160,\"url\":_vm.activeGroup.headImage,\"name\":_vm.activeGroup.showGroupName,\"radius\":\"10%\"}}),_c('el-button',{staticClass:\"send-btn\",attrs:{\"icon\":\"el-icon-position\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSendMessage()}}},[_vm._v(\"发消息 \")])],1),_c('el-form',{ref:\"groupForm\",staticClass:\"group-form\",attrs:{\"label-width\":\"130px\",\"model\":_vm.activeGroup,\"rules\":_vm.rules,\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"群聊名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"disabled\":!_vm.isOwner,\"maxlength\":\"20\"},model:{value:(_vm.activeGroup.name),callback:function ($$v) {_vm.$set(_vm.activeGroup, \"name\", $$v)},expression:\"activeGroup.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"群主\"}},[_c('el-input',{attrs:{\"value\":_vm.ownerName,\"disabled\":\"\"}})],1),_c('el-form-item',{attrs:{\"label\":\"群名备注\"}},[_c('el-input',{attrs:{\"placeholder\":_vm.activeGroup.name,\"maxlength\":\"20\"},model:{value:(_vm.activeGroup.remarkGroupName),callback:function ($$v) {_vm.$set(_vm.activeGroup, \"remarkGroupName\", $$v)},expression:\"activeGroup.remarkGroupName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"我在本群的昵称\"}},[_c('el-input',{attrs:{\"maxlength\":\"20\",\"placeholder\":_vm.$store.state.userStore.userInfo.nickName},model:{value:(_vm.activeGroup.remarkNickName),callback:function ($$v) {_vm.$set(_vm.activeGroup, \"remarkNickName\", $$v)},expression:\"activeGroup.remarkNickName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"群公告\"}},[_c('el-input',{attrs:{\"disabled\":!_vm.isOwner,\"type\":\"textarea\",\"rows\":3,\"maxlength\":\"1024\",\"placeholder\":\"群主未设置\"},model:{value:(_vm.activeGroup.notice),callback:function ($$v) {_vm.$set(_vm.activeGroup, \"notice\", $$v)},expression:\"activeGroup.notice\"}})],1),_c('div',[_c('el-button',{attrs:{\"type\":\"warning\"},on:{\"click\":function($event){return _vm.onInvite()}}},[_vm._v(\"邀请\")]),_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.onSaveGroup()}}},[_vm._v(\"保存\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isOwner),expression:\"!isOwner\"}],attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.onQuit()}}},[_vm._v(\"退出\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isOwner),expression:\"isOwner\"}],attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.onDissolve()}}},[_vm._v(\"解散\")])],1)],1)],1),_c('el-divider',{attrs:{\"content-position\":\"center\"}}),_c('el-scrollbar',{ref:\"scrollbar\",style:('height: ' + _vm.scrollHeight + 'px')},[_c('div',{staticClass:\"group-member-list\"},[_c('div',{staticClass:\"member-tools\"},[_c('div',{staticClass:\"tool-btn\",attrs:{\"title\":\"邀请好友进群聊\"},on:{\"click\":function($event){return _vm.onInvite()}}},[_c('i',{staticClass:\"el-icon-plus\"})]),_c('div',{staticClass:\"tool-text\"},[_vm._v(\"邀请\")]),_c('add-group-member',{attrs:{\"visible\":_vm.showAddGroupMember,\"groupId\":_vm.activeGroup.id,\"members\":_vm.groupMembers},on:{\"reload\":_vm.loadGroupMembers,\"close\":function($event){_vm.showAddGroupMember = false}}})],1),(_vm.isOwner)?_c('div',{staticClass:\"member-tools\"},[_c('div',{staticClass:\"tool-btn\",attrs:{\"title\":\"选择成员移出群聊\"},on:{\"click\":function($event){return _vm.onRemove()}}},[_c('i',{staticClass:\"el-icon-minus\"})]),_c('div',{staticClass:\"tool-text\"},[_vm._v(\"移除\")]),_c('group-member-selector',{ref:\"removeSelector\",attrs:{\"title\":\"选择成员进行移除\",\"groupId\":_vm.activeGroup.id},on:{\"complete\":_vm.onRemoveComplete}})],1):_vm._e(),_vm._l((_vm.showMembers),function(member,idx){return _c('div',{key:member.id},[(idx < _vm.showMaxIdx)?_c('group-member',{staticClass:\"group-member\",attrs:{\"member\":member}}):_vm._e()],1)})],2)])],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-container class=\"group-page\">\n\t\t<el-container class=\"group-box\">\n\t\t\t<div class=\"group-header\" v-show=\"activeGroup.id\">\n\t\t\t\t{{ activeGroup.showGroupName }}({{ groupMembers.length }})\n\t\t\t</div>\n\t\t\t<div class=\"group-container\">\n\t\t\t\t<div v-show=\"activeGroup.id\">\n\t\t\t\t\t<div class=\"group-info\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<file-upload v-show=\"isOwner\" class=\"avatar-uploader\" :action=\"imageAction\"\n\t\t\t\t\t\t\t\t:showLoading=\"true\" :maxSize=\"maxSize\" @success=\"onUploadSuccess\"\n\t\t\t\t\t\t\t\t:fileTypes=\"['image/jpeg', 'image/png', 'image/jpg', 'image/webp']\">\n\t\t\t\t\t\t\t\t<img v-if=\"activeGroup.headImage\" :src=\"activeGroup.headImage\" class=\"avatar\">\n\t\t\t\t\t\t\t\t<i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\n\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t<head-image v-show=\"!isOwner\" class=\"avatar\" :size=\"160\" :url=\"activeGroup.headImage\"\n\t\t\t\t\t\t\t\t:name=\"activeGroup.showGroupName\" radius=\"10%\">\n\t\t\t\t\t\t\t</head-image>\n\t\t\t\t\t\t\t<el-button class=\"send-btn\" icon=\"el-icon-position\" type=\"primary\"\n\t\t\t\t\t\t\t\t@click=\"onSendMessage()\">发消息\n\t\t\t\t\t\t\t</el-button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<el-form class=\"group-form\" label-width=\"130px\" :model=\"activeGroup\" :rules=\"rules\" size=\"small\"\n\t\t\t\t\t\t\tref=\"groupForm\">\n\t\t\t\t\t\t\t<el-form-item label=\"群聊名称\" prop=\"name\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.name\" :disabled=\"!isOwner\" maxlength=\"20\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"群主\">\n\t\t\t\t\t\t\t\t<el-input :value=\"ownerName\" disabled></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"群名备注\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.remarkGroupName\" :placeholder=\"activeGroup.name\"\n\t\t\t\t\t\t\t\t\tmaxlength=\"20\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"我在本群的昵称\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.remarkNickName\" maxlength=\"20\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"$store.state.userStore.userInfo.nickName\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<el-form-item label=\"群公告\">\n\t\t\t\t\t\t\t\t<el-input v-model=\"activeGroup.notice\" :disabled=\"!isOwner\" type=\"textarea\" :rows=\"3\"\n\t\t\t\t\t\t\t\t\tmaxlength=\"1024\" placeholder=\"群主未设置\"></el-input>\n\t\t\t\t\t\t\t</el-form-item>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<el-button type=\"warning\" @click=\"onInvite()\">邀请</el-button>\n\t\t\t\t\t\t\t\t<el-button type=\"success\" @click=\"onSaveGroup()\">保存</el-button>\n\t\t\t\t\t\t\t\t<el-button type=\"danger\" v-show=\"!isOwner\" @click=\"onQuit()\">退出</el-button>\n\t\t\t\t\t\t\t\t<el-button type=\"danger\" v-show=\"isOwner\" @click=\"onDissolve()\">解散</el-button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-form>\n\t\t\t\t\t</div>\n\t\t\t\t\t<el-divider content-position=\"center\"></el-divider>\n\t\t\t\t\t<el-scrollbar ref=\"scrollbar\" :style=\"'height: ' + scrollHeight + 'px'\">\n\t\t\t\t\t\t<div class=\"group-member-list\">\n\t\t\t\t\t\t\t<div class=\"member-tools\">\n\t\t\t\t\t\t\t\t<div class=\"tool-btn\" title=\"邀请好友进群聊\" @click=\"onInvite()\">\n\t\t\t\t\t\t\t\t\t<i class=\"el-icon-plus\"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tool-text\">邀请</div>\n\t\t\t\t\t\t\t\t<add-group-member :visible=\"showAddGroupMember\" :groupId=\"activeGroup.id\" :members=\"groupMembers\"\n\t\t\t\t\t\t\t\t\t@reload=\"loadGroupMembers\" @close=\"showAddGroupMember = false\"></add-group-member>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"member-tools\" v-if=\"isOwner\">\n\t\t\t\t\t\t\t\t<div class=\"tool-btn\" title=\"选择成员移出群聊\" @click=\"onRemove()\">\n\t\t\t\t\t\t\t\t\t<i class=\"el-icon-minus\"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"tool-text\">移除</div>\n\t\t\t\t\t\t\t\t<group-member-selector ref=\"removeSelector\" title=\"选择成员进行移除\" :groupId=\"activeGroup.id\"\n\t\t\t\t\t\t\t\t\t@complete=\"onRemoveComplete\"></group-member-selector>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-for=\"(member, idx) in showMembers\" :key=\"member.id\">\n\t\t\t\t\t\t\t\t<group-member v-if=\"idx < showMaxIdx\" class=\"group-member\" :member=\"member\"></group-member>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</el-scrollbar>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-container>\n\t</el-container>\n</template>\n\n\n<script>\nimport FileUpload from '../components/common/FileUpload';\nimport GroupMember from '../components/group/GroupMember.vue';\nimport AddGroupMember from '../components/group/AddGroupMember.vue';\nimport GroupMemberSelector from '../components/group/GroupMemberSelector.vue';\nimport HeadImage from '../components/common/HeadImage.vue';\nimport { pinyin } from 'pinyin-pro';\n\nexport default {\n\tname: \"group\",\n\tcomponents: {\n\t\tGroupMember,\n\t\tFileUpload,\n\t\tAddGroupMember,\n\t\tGroupMemberSelector,\n\t\tHeadImage\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsearchText: \"\",\n\t\t\tmaxSize: 5 * 1024 * 1024,\n\t\t\tgroupMembers: [],\n\t\t\tshowAddGroupMember: false,\n\t\t\tshowMaxIdx: 150,\n\t\t\trules: {\n\t\t\t\tname: [{\n\t\t\t\t\trequired: true,\n\t\t\t\t\tmessage: '请输入群聊名称',\n\t\t\t\t\ttrigger: 'blur'\n\t\t\t\t}]\n\t\t\t}\n\t\t};\n\t},\n\tmethods: {\n\t\tonCreateGroup() {\n\t\t\tthis.$prompt('请输入群聊名称', '创建群聊', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\tinputPattern: /\\S/,\n\t\t\t\tinputErrorMessage: '请输入群聊名称',\n\t\t\t\tmodal: false\n\t\t\t}).then((o) => {\n\t\t\t\tlet userInfo = this.$store.state.userStore.userInfo;\n\t\t\t\tlet data = {\n\t\t\t\t\tname: o.value\n\t\t\t\t}\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/create?groupName=${o.value}`,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: data\n\t\t\t\t}).then((group) => {\n\t\t\t\t\tthis.$store.commit(\"addGroup\", group);\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tonActiveItem(group) {\n\t\t\tthis.showMaxIdx = 150;\n\t\t\t// store数据不能直接修改，所以深拷贝一份内存\n\t\t\tthis.activeGroup = JSON.parse(JSON.stringify(group));\n\t\t\t// 重新加载群成员\n\t\t\tthis.groupMembers = [];\n\t\t\tthis.loadGroupMembers();\n\t\t},\n\t\tonInvite() {\n\t\t\tthis.showAddGroupMember = true;\n\t\t},\n\t\tonRemove() {\n\t\t\t// 群主不显示\n\t\t\tlet hideIds = [this.activeGroup.ownerId];\n\t\t\tthis.$refs.removeSelector.open(50, [], [], hideIds);\n\t\t},\n\t\tonRemoveComplete(members) {\n\t\t\tlet userIds = members.map(m => m.userId);\n\t\t\tlet data = {\n\t\t\t\tgroupId: this.activeGroup.id,\n\t\t\t\tuserIds: userIds\n\t\t\t}\n\t\t\tthis.$http({\n\t\t\t\turl: \"/group/members/remove\",\n\t\t\t\tmethod: 'delete',\n\t\t\t\tdata: data\n\t\t\t}).then(() => {\n\t\t\t\tthis.loadGroupMembers();\n\t\t\t\tthis.$message.success(`您移除了${userIds.length}位成员`);\n\t\t\t})\n\t\t},\n\t\tonUploadSuccess(data) {\n\t\t\tthis.activeGroup.headImage = data.originUrl;\n\t\t\tthis.activeGroup.headImageThumb = data.thumbUrl;\n\t\t},\n\t\tonSaveGroup() {\n\t\t\tthis.$refs['groupForm'].validate((valid) => {\n\t\t\t\tif (valid) {\n\t\t\t\t\tlet vo = this.activeGroup;\n\t\t\t\t\tthis.$http({\n\t\t\t\t\t\turl: \"/group/modify\",\n\t\t\t\t\t\tmethod: \"put\",\n\t\t\t\t\t\tdata: vo\n\t\t\t\t\t}).then((group) => {\n\t\t\t\t\t\tthis.$store.commit(\"updateGroup\", group);\n\t\t\t\t\t\tthis.$message.success(\"修改成功\");\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tonDissolve() {\n\t\t\tthis.$confirm(`确认要解散'${this.activeGroup.name}'吗?`, '确认解散?', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning',\n\t\t\t\tmodal: false\n\t\t\t}).then(() => {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/delete/${this.activeGroup.id}`,\n\t\t\t\t\tmethod: 'delete'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$message.success(`群聊'${this.activeGroup.name}'已解散`);\n\t\t\t\t\tthis.$store.commit(\"removeGroup\", this.activeGroup.id);\n\t\t\t\t\tthis.reset();\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\tonQuit() {\n\t\t\tthis.$confirm(`确认退出'${this.activeGroup.showGroupName}',并清空聊天记录吗？`, '确认退出?', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning',\n\t\t\t\tmodal: false\n\t\t\t}).then(() => {\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: `/group/quit/${this.activeGroup.id}`,\n\t\t\t\t\tmethod: 'delete'\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.$message.success(`您已退出'${this.activeGroup.name}'`);\n\t\t\t\t\tthis.$store.commit(\"removeGroup\", this.activeGroup.id);\n\t\t\t\t\tthis.$store.commit(\"removeGroupChat\", this.activeGroup.id);\n\t\t\t\t\tthis.reset();\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\tasync onSendMessage() {\n\t\t\tlet chat = {\n\t\t\t\ttype: 'GROUP',\n\t\t\t\ttargetId: this.activeGroup.id,\n\t\t\t\tshowName: this.activeGroup.showGroupName,\n\t\t\t\theadImage: this.activeGroup.headImage,\n\t\t\t};\n\t\t\t\n\t\t\t// 打开聊天会话\n\t\t\tthis.$store.commit(\"openChat\", chat);\n\t\t\t\n\t\t\t// 查找会话索引\n\t\t\tconst chatIndex = this.$store.getters.findChatIdx(chat);\n\t\t\tif (chatIndex !== undefined && chatIndex !== -1) {\n\t\t\t\t// 激活会话\n\t\t\t\tthis.$store.commit(\"activeChat\", chatIndex);\n\t\t\t\t\n\t\t\t\t// 在VSCode环境中，需要同步到统一会话服务并通知编辑器面板\n\t\t\t\tif (window.vscodeServices) {\n\t\t\t\t\tconsole.log('[EditorGroup] 在VSCode环境中，同步并激活编辑器面板会话');\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// 获取当前激活的会话\n\t\t\t\t\t\tconst activeChat = this.$store.state.chatStore.chats[chatIndex];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 生成统一会话ID\n\t\t\t\t\t\tconst unifiedSessionId = `vue-im-${this.activeGroup.id}`;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 获取统一会话服务\n\t\t\t\t\t\tconst unifiedSessionService = window.vscodeServices.get('IUnifiedSessionService');\n\t\t\t\t\t\tif (unifiedSessionService) {\n\t\t\t\t\t\t\t// 检查会话是否已存在\n\t\t\t\t\t\t\tconst sessionExists = unifiedSessionService.getAllSessions &&\n\t\t\t\t\t\t\t\tunifiedSessionService.getAllSessions().some(s => s.id === unifiedSessionId);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (!sessionExists && unifiedSessionService.syncVueSessionsFromWebView) {\n\t\t\t\t\t\t\t\tconsole.log(\"[EditorGroup] 会话不存在，进行增量同步...\");\n\t\t\t\t\t\t\t\t// 同步单个会话到统一服务\n\t\t\t\t\t\t\t\tconst sessionData = {\n\t\t\t\t\t\t\t\t\tid: this.activeGroup.id,\n\t\t\t\t\t\t\t\t\tsessionId: this.activeGroup.id,\n\t\t\t\t\t\t\t\t\tshowName: this.activeGroup.showGroupName,\n\t\t\t\t\t\t\t\t\ttype: 'vue-im',\n\t\t\t\t\t\t\t\t\theadImage: this.activeGroup.headImage,\n\t\t\t\t\t\t\t\t\tlastSendTime: Date.now(),\n\t\t\t\t\t\t\t\t\tmessages: activeChat?.messages || []\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tunifiedSessionService.syncVueSessionsFromWebView([sessionData]);\n\t\t\t\t\t\t\t\t// 等待同步完成\n\t\t\t\t\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 50));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 激活会话\n\t\t\t\t\t\t\tif (unifiedSessionService.setActiveSession) {\n\t\t\t\t\t\t\t\tunifiedSessionService.setActiveSession(unifiedSessionId);\n\t\t\t\t\t\t\t\tconsole.log(\"[EditorGroup] ✅ 已调用统一会话激活:\", unifiedSessionId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 使用面板管理服务打开编辑器\n\t\t\t\t\t\tconst panelManagerService = window.vscodeServices.get('panelManagerService');\n\t\t\t\t\t\tif (panelManagerService && panelManagerService.openChatEditor) {\n\t\t\t\t\t\t\tconst chatUser = {\n\t\t\t\t\t\t\t\tid: this.activeGroup.id,\n\t\t\t\t\t\t\t\tnickName: this.activeGroup.showGroupName,\n\t\t\t\t\t\t\t\tname: this.activeGroup.showGroupName,\n\t\t\t\t\t\t\t\theadImage: this.activeGroup.headImage,\n\t\t\t\t\t\t\t\theadImageThumb: this.activeGroup.headImage,\n\t\t\t\t\t\t\t\tavatar: this.activeGroup.headImage,\n\t\t\t\t\t\t\t\tisGroup: true\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tpanelManagerService.openChatEditor(chatUser);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.$store.commit(\"changeViewCode\", 1); // 切换到聊天页面\n\t\t\t\t\t\t\tconsole.log(\"[EditorGroup] ✅ 群聊编辑器面板已打开:\", this.activeGroup.showGroupName);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn(\"[EditorGroup] ⚠️ PanelManagerService或openChatEditor方法不可用\");\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error(\"[EditorGroup] ❌ 激活编辑器面板失败:\", error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 原有的路由跳转逻辑（用于非VSCode环境）\n\t\t\tif (!window.vscodeServices) {\n\t\t\t\tthis.$router.push(\"/home/chat\");\n\t\t\t}\n\t\t},\n\t\tonScroll(e) {\n\t\t\tconst scrollbar = e.target;\n\t\t\t// 滚到底部\n\t\t\tif (scrollbar.scrollTop + scrollbar.clientHeight >= scrollbar.scrollHeight - 30) {\n\t\t\t\tif (this.showMaxIdx < this.showMembers.length) {\n\t\t\t\t\tthis.showMaxIdx += 50;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tloadGroupMembers() {\n\t\t\tthis.$http({\n\t\t\t\turl: `/group/members/${this.activeGroup.id}`,\n\t\t\t\tmethod: \"get\"\n\t\t\t}).then((members) => {\n\t\t\t\tthis.groupMembers = members;\n\t\t\t})\n\t\t},\n\t\treset() {\n\t\t\tthis.activeGroup = {};\n\t\t\tthis.groupMembers = [];\n\t\t},\n\t\tfirstLetter(strText) {\n\t\t\t// 使用pinyin-pro库将中文转换为拼音\n\t\t\tlet pinyinOptions = {\n\t\t\t\ttoneType: 'none', // 无声调\n\t\t\t\ttype: 'normal' // 普通拼音\n\t\t\t};\n\t\t\tlet pyText = pinyin(strText, pinyinOptions);\n\t\t\treturn pyText[0];\n\t\t},\n\t\tisEnglish(character) {\n\t\t\treturn /^[A-Za-z]+$/.test(character);\n\t\t}\n\t},\n\tcomputed: {\n\t\tactiveGroup() {\n\t\t\treturn this.$store.state.groupStore.activeGroup;\n\t\t},\n\t\tgroupStore() {\n\t\t\treturn this.$store.state.groupStore;\n\t\t},\n\t\townerName() {\n\t\t\tlet member = this.groupMembers.find((m) => m.userId == this.activeGroup.ownerId);\n\t\t\treturn member && member.showNickName;\n\t\t},\n\t\tisOwner() {\n\t\t\treturn this.activeGroup.ownerId == this.$store.state.userStore.userInfo.id;\n\t\t},\n\t\timageAction() {\n\t\t\treturn `/image/upload`;\n\t\t},\n\t\tgroupMap() {\n\t\t\t// 按首字母分组\n\t\t\tlet map = new Map();\n\t\t\tthis.groupStore.groups.forEach((g) => {\n\t\t\t\tif (g.quit || (this.searchText && !g.showGroupName.includes(this.searchText))) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlet letter = this.firstLetter(g.showGroupName).toUpperCase();\n\t\t\t\t// 非英文一律为#组\n\t\t\t\tif (!this.isEnglish(letter)) {\n\t\t\t\t\tletter = \"#\"\n\t\t\t\t}\n\t\t\t\tif (map.has(letter)) {\n\t\t\t\t\tmap.get(letter).push(g);\n\t\t\t\t} else {\n\t\t\t\t\tmap.set(letter, [g]);\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 排序\n\t\t\tlet arrayObj = Array.from(map);\n\t\t\tarrayObj.sort((a, b) => {\n\t\t\t\t// #组在最后面\n\t\t\t\tif (a[0] == '#' || b[0] == '#') {\n\t\t\t\t\treturn b[0].localeCompare(a[0])\n\t\t\t\t}\n\t\t\t\treturn a[0].localeCompare(b[0])\n\t\t\t})\n\t\t\tmap = new Map(arrayObj.map(i => [i[0], i[1]]));\n\t\t\treturn map;\n\t\t},\n\t\tgroupKeys() {\n\t\t\treturn Array.from(this.groupMap.keys());\n\t\t},\n\t\tgroupValues() {\n\t\t\treturn Array.from(this.groupMap.values());\n\t\t},\n\t\tshowMembers() {\n\t\t\treturn this.groupMembers.filter((m) => !m.quit)\n\t\t},\n\t\tscrollHeight() {\n\t\t\treturn Math.min(300, 80 + this.showMembers.length / 10 * 80);\n\t\t}\n\t},\n\twatch: {\n\t\tactiveGroup(newGroup, oldGroup) {\n\t\t\tthis.onActiveItem(newGroup);\n\t\t}\n\t},\n\tmounted() {\n\t\tlet scrollWrap = this.$refs.scrollbar.$el.querySelector('.el-scrollbar__wrap');\n\t\tscrollWrap.addEventListener('scroll', this.onScroll);\n\n\t\t// this.onActiveItem(this.$store.state.groupStore.activeGroup);\n\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.group-page {\n\tbackground-color: #f1f1f1;\n\theight: 100%;\n\t.group-list-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tbackground: var(--im-background);\n\n\t\t.group-list-header {\n\t\t\theight: 50px;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tpadding: 0 8px;\n\n\t\t\t.add-btn {\n\t\t\t\tpadding: 5px !important;\n\t\t\t\tmargin: 5px;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tborder-radius: 50%;\n\t\t\t}\n\t\t}\n\n\t\t.group-list-items {\n\t\t\tflex: 1;\n\n\t\t\t.index-title {\n\t\t\t\ttext-align: left;\n\t\t\t\tfont-size: var(--im-larger-size-larger);\n\t\t\t\tpadding: 5px 15px;\n\t\t\t\tcolor: var(--im-text-color-light);\n\t\t\t}\n\t\t}\n\t}\n\n\t.group-box {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\n\t\t.group-header {\n\t\t\tdisplay: flex;\n\t\t\tjustify-content: space-between;\n\t\t\tpadding: 0 12px;\n\t\t\tline-height: 50px;\n\t\t\tfont-size: var(--im-font-size-larger);\n\t\t\tborder-bottom: var(--im-border);\n\t\t}\n\n\t\t.el-divider--horizontal {\n\t\t\tmargin: 16px 0;\n\t\t}\n\n\t\t.group-container {\n\t\t\toverflow: auto;\n\t\t\tpadding: 20px;\n\t\t\tflex: 1;\n\n\t\t\t.group-info {\n\t\t\t\tdisplay: flex;\n\t\t\t\tpadding: 5px 20px;\n\n\t\t\t\t.group-form {\n\t\t\t\t\tflex: 1;\n\t\t\t\t\tpadding-left: 40px;\n\t\t\t\t\tmax-width: 700px;\n\t\t\t\t}\n\n\t\t\t\t.avatar-uploader {\n\t\t\t\t\t--width: 160px;\n\t\t\t\t\ttext-align: left;\n\n\t\t\t\t\t.el-upload {\n\t\t\t\t\t\tborder: 1px dashed #d9d9d9 !important;\n\t\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t}\n\n\t\t\t\t\t.el-upload:hover {\n\t\t\t\t\t\tborder-color: #409EFF;\n\t\t\t\t\t}\n\n\t\t\t\t\t.avatar-uploader-icon {\n\t\t\t\t\t\tfont-size: 28px;\n\t\t\t\t\t\tcolor: #8c939d;\n\t\t\t\t\t\twidth: var(--width);\n\t\t\t\t\t\theight: var(--width);\n\t\t\t\t\t\tline-height: var(--width);\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t}\n\n\t\t\t\t\t.avatar {\n\t\t\t\t\t\twidth: var(--width);\n\t\t\t\t\t\theight: var(--width);\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.send-btn {\n\t\t\t\t\tmargin-top: 12px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.group-member-list {\n\t\t\t\tpadding: 0 12px;\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tflex-wrap: wrap;\n\t\t\t\ttext-align: center;\n\n\t\t\t\t.group-member {\n\t\t\t\t\tmargin-right: 5px;\n\t\t\t\t}\n\n\t\t\t\t.member-tools {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\twidth: 60px;\n\n\t\t\t\t\t.tool-btn {\n\t\t\t\t\t\twidth: 38px;\n\t\t\t\t\t\theight: 38px;\n\t\t\t\t\t\tline-height: 38px;\n\t\t\t\t\t\tborder: var(--im-border);\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tbox-sizing: border-box;\n\n\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\tborder: #aaaaaa solid 1px;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t.tool-text {\n\t\t\t\t\t\tfont-size: var(--im-font-size-smaller);\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 30px;\n\t\t\t\t\t\tline-height: 30px;\n\t\t\t\t\t\twhite-space: nowrap;\n\t\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\t\toverflow: hidden\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\n\n\t}\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorGroup.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorGroup.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./EditorGroup.vue?vue&type=template&id=f6a231cc\"\nimport script from \"./EditorGroup.vue?vue&type=script&lang=js\"\nexport * from \"./EditorGroup.vue?vue&type=script&lang=js\"\nimport style0 from \"./EditorGroup.vue?vue&type=style&index=0&id=f6a231cc&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <keep-alive>\n  <editor-chat v-if=\"uiStore.viewCode === 1\"></editor-chat>\n  <editor-friend v-if=\"uiStore.viewCode === 2\"></editor-friend>\n  <editor-group v-if=\"uiStore.viewCode === 3\"></editor-group>\n</keep-alive>\n  </div>\n</template>\n<script>\nimport EditorChat from \"./EditorChat.vue\";\nimport EditorFriend from \"./EditorFriend.vue\";\nimport EditorGroup from \"./EditorGroup.vue\";\n\nexport default {\n  name: \"ShadanChat\",\n  components: {\n    EditorChat,\n    EditorFriend,\n    EditorGroup,\n  },\n  props: {\n    chatData: {\n      type: Object,\n      default: () => null\n    }\n  },\n  data() {\n    return {\n      searchText: \"\",\n      messageContent: \"\",\n      group: {},\n      groupMembers: [],\n    };\n  },\n  methods: {\n    onTop(chatIdx) {\n      this.$store.commit(\"moveTop\", chatIdx);\n    },\n    // 激活聊天数据\n    activateChatData() {\n      if (this.chatData) {\n        console.log('[ShadanChat] 激活聊天数据:', this.chatData);\n        \n        // 确保聊天会话已打开\n        this.$store.commit(\"openChat\", {\n          type: this.chatData.type,\n          targetId: this.chatData.targetId,\n          showName: this.chatData.showName,\n          headImage: this.chatData.headImage,\n        });\n        \n        // 激活第一个聊天会话（刚打开的）\n        this.$store.commit(\"activeChat\", 0);\n      }\n    },\n  },\n  computed: {\n\t\tuiStore() {\n\t\t\treturn this.$store.state.uiStore;\n\t\t},\n    chatStore() {\n      return this.$store.state.chatStore;\n    },\n    loading() {\n      return this.chatStore.loadingGroupMsg || this.chatStore.loadingPrivateMsg;\n    },\n  },\n  watch: {\n    // 监听 chatData 变化\n    chatData: {\n      handler(newChatData) {\n        if (newChatData) {\n          this.activateChatData();\n        }\n      },\n      immediate: true\n    }\n  },\n  mounted() {\n    // 组件挂载时如果有 chatData，立即激活\n    if (this.chatData) {\n      this.activateChatData();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.chat-page {\n  .chat-list-box {\n    display: flex;\n    flex-direction: column;\n    background: var(--im-background);\n\n    .chat-list-header {\n      height: 50px;\n      display: flex;\n      align-items: center;\n      padding: 0 8px;\n    }\n\n    .chat-list-loading {\n      height: 50px;\n      background-color: #eee;\n\n      .el-icon-loading {\n        font-size: 24px;\n        color: var(--im-text-color-light);\n      }\n\n      .el-loading-text {\n        color: var(--im-text-color-light);\n      }\n\n      .chat-loading-box {\n        height: 100%;\n      }\n    }\n\n    .chat-list-items {\n      flex: 1;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShadanChat.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShadanChat.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ShadanChat.vue?vue&type=template&id=afdf42f6\"\nimport script from \"./ShadanChat.vue?vue&type=script&lang=js\"\nexport * from \"./ShadanChat.vue?vue&type=script&lang=js\"\nimport style0 from \"./ShadanChat.vue?vue&type=style&index=0&id=afdf42f6&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"vscode-container\">\n    <div class=\"left-panel\">\n      <Inbox @chatItemClick=\"handleChatItemClick\"></Inbox>\n    </div>\n    <div class=\"right-panel\">\n      <shadan-chat :chatData=\"selectedChatData\"></shadan-chat>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Inbox from \"./Inbox.vue\";\nimport ShadanChat from \"./ShadanChat.vue\";\n\nexport default {\n  name: \"VscodeChat\",\n  components: {\n    Inbox,\n    ShadanChat,\n  },\n  data() {\n    return {\n      selectedChatData: null, // 选中的聊天数据\n    };\n  },\n  methods: {\n    // 处理会话列表点击事件\n    handleChatItemClick(chatData) {\n      console.log('[Vscode] 接收到聊天数据:', chatData);\n      this.selectedChatData = chatData;\n      \n      // 设置UI状态为聊天模式，确保ShadanChat显示聊天界面\n      this.$store.commit(\"changeViewCode\", 1);\n      \n      // 激活对应的聊天会话，传递完整的会话信息包括终端信息\n      this.$store.commit(\"openChat\", {\n        type: chatData.type,\n        targetId: chatData.targetId,\n        showName: chatData.showName,\n        headImage: chatData.headImage,\n        isTerminalChat: chatData.isTerminalChat,\n        isTerminalInbox: chatData.isTerminalInbox,\n        senderTerminal: chatData.senderTerminal,\n        targetTerminal: chatData.targetTerminal,\n        receivingTerminal: chatData.receivingTerminal,\n      });\n    },\n  },\n  computed: {},\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.vscode-container {\n  display: flex;\n  height: 100vh;\n  width: 100%;\n  \n  .left-panel {\n    width: 50%;\n    height: 100%;\n    border-right: 1px solid #e4e7ed;\n    overflow: hidden;\n  }\n  \n  .right-panel {\n    width: 50%;\n    height: 100%;\n    overflow: hidden;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Vscode.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Vscode.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./Vscode.vue?vue&type=template&id=1eb5ba4a&scoped=true\"\nimport script from \"./Vscode.vue?vue&type=script&lang=js\"\nexport * from \"./Vscode.vue?vue&type=script&lang=js\"\nimport style0 from \"./Vscode.vue?vue&type=style&index=0&id=1eb5ba4a&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1eb5ba4a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"plugin-container\"},[_c('keep-alive',[_c(_vm.currentComponent,{ref:\"currentComponentRef\",tag:\"component\",attrs:{\"chatData\":_vm.selectedChatData,\"friendData\":_vm.selectedFriendData},on:{\"showChat\":_vm.showChatView,\"showFriend\":_vm.showFriendView,\"backToInbox\":_vm.backToInbox}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"home-page\"},[_c('div',{staticClass:\"navi-bar\"},[_c('div',{staticClass:\"navi-bar-box\"},[_c('div',{staticClass:\"top\"},[_c('div',{staticClass:\"menu\"},[_c('div',{staticClass:\"botoom-item\",on:{\"click\":function($event){return _vm.switchUi(1)}}},[_c('span',{staticClass:\"icon iconfont icon-chat\"}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.unreadCount > 0),expression:\"unreadCount > 0\"}],staticClass:\"unread-text\"},[_vm._v(\" \"+_vm._s(_vm.unreadCount)+\" \")])]),_c('div',{staticClass:\"botoom-item\",on:{\"click\":function($event){return _vm.switchUi(2)}}},[_c('span',{staticClass:\"icon iconfont icon-friend\"})]),_c('div',{staticClass:\"botoom-item\",on:{\"click\":function($event){return _vm.switchUi(3)}}},[_c('span',{staticClass:\"icon iconfont icon-group\",staticStyle:{\"font-size\":\"28px\"}})]),_c('div',{staticClass:\"botoom-item\",on:{\"click\":_vm.showSetting}},[_c('span',{staticClass:\"icon iconfont icon-setting\",staticStyle:{\"font-size\":\"20px\"}})])])])])]),_c('div',{staticClass:\"content-box\"},[(_vm.uiStore.viewCode === 1)?_c('inbox-plugin-session',{on:{\"chatItemClick\":_vm.onChatItemClick}}):_vm._e(),(_vm.uiStore.viewCode === 2)?_c('inbox-friend',{on:{\"showFriend\":_vm.onFriendClick}}):_vm._e(),(_vm.uiStore.viewCode === 3)?_c('inbox-group',{on:{\"groupClick\":_vm.onGroupClick}}):_vm._e()],1),_c('setting',{attrs:{\"visible\":_vm.showSettingDialog},on:{\"close\":function($event){return _vm.closeSetting()}}}),_c('user-info',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.uiStore.userInfo.show),expression:\"uiStore.userInfo.show\"}],attrs:{\"pos\":_vm.uiStore.userInfo.pos,\"user\":_vm.uiStore.userInfo.user},on:{\"close\":function($event){return _vm.$store.commit('closeUserInfoBox')}}}),_c('full-image',{attrs:{\"visible\":_vm.uiStore.fullImage.show,\"url\":_vm.uiStore.fullImage.url},on:{\"close\":function($event){return _vm.$store.commit('closeFullImageBox')}}}),_c('rtc-private-video',{ref:\"rtcPrivateVideo\"}),_c('rtc-group-video',{ref:\"rtcGroupVideo\"})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"chat-page\",staticStyle:{\"flex-wrap\":\"wrap\"},attrs:{\"type\":\"flex\"}},[_c('el-aside',{staticClass:\"chat-list-box\",attrs:{\"width\":\"100%\"}},[_c('div',{staticClass:\"chat-list-header\"},[_c('el-input',{staticClass:\"search-text\",attrs:{\"size\":\"small\",\"placeholder\":\"搜索\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})]),_c('el-button',{staticClass:\"new-terminal-chat-btn\",attrs:{\"type\":\"text\",\"icon\":\"el-icon-plus\",\"size\":\"small\",\"title\":\"新建终端会话\"},on:{\"click\":function($event){_vm.showTerminalSelector = true}}},[_vm._v(\" 终端 \")])],1),(_vm.loading)?_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(true),expression:\"true\"}],staticClass:\"chat-list-loading\",attrs:{\"element-loading-text\":\"消息接收中...\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"#F9F9F9\",\"element-loading-size\":\"24\"}}):_c('el-scrollbar',{staticClass:\"chat-list-items\"},_vm._l((_vm.filteredChats),function(chat,index){return _c('div',{key:index},[_c('chat-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(!chat.delete && chat.showName && chat.showName.includes(_vm.searchText)),expression:\"!chat.delete && chat.showName && chat.showName.includes(searchText)\"}],class:{\n            'terminal-inbox': chat.isTerminalInbox,\n            'normal-chat': !chat.isTerminalInbox\n          },attrs:{\"chat\":chat,\"index\":index,\"active\":chat === _vm.chatStore.activeChat},on:{\"delete\":function($event){return _vm.onDelItem(index)},\"top\":function($event){return _vm.onTop(index)}},nativeOn:{\"click\":function($event){return _vm.onActiveItem(index)}}})],1)}),0)],1),_c('terminal-selector',{attrs:{\"visible\":_vm.showTerminalSelector},on:{\"update:visible\":function($event){_vm.showTerminalSelector=$event},\"terminal-selected\":_vm.handleTerminalSelected}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"terminal-selector\"},[_c('el-dialog',{attrs:{\"title\":\"选择接收终端\",\"visible\":_vm.dialogVisible,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.handleClose}},[_c('div',{staticClass:\"terminal-list\"},_vm._l((_vm.availableTerminals),function(terminal){return _c('div',{key:terminal.type,staticClass:\"terminal-item\",class:{ \n          disabled: !terminal.online || terminal.type === _vm.currentTerminal,\n          current: terminal.type === _vm.currentTerminal \n        },on:{\"click\":function($event){return _vm.selectTerminal(terminal)}}},[_c('div',{staticClass:\"terminal-icon\"},[_vm._v(_vm._s(terminal.icon))]),_c('div',{staticClass:\"terminal-info\"},[_c('div',{staticClass:\"terminal-name\"},[_vm._v(_vm._s(terminal.name))]),_c('div',{staticClass:\"terminal-status\",class:_vm.getStatusClass(terminal)},[_vm._v(\" \"+_vm._s(_vm.getStatusText(terminal))+\" \")])]),(terminal.type === _vm.currentTerminal)?_c('div',{staticClass:\"current-badge\"},[_vm._v(\"当前\")]):_vm._e()])}),0),(_vm.onlineTerminals.length === 0)?_c('div',{staticClass:\"empty-state\"},[_c('div',{staticClass:\"empty-icon\"},[_vm._v(\"📱\")]),_c('div',{staticClass:\"empty-text\"},[_vm._v(\"暂无其他在线终端\")]),_c('div',{staticClass:\"empty-hint\"},[_vm._v(\"请在其他设备上登录后再试\")])]):_vm._e(),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.handleClose}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.onlineTerminals.length === 0},on:{\"click\":_vm.openQuickSend}},[_vm._v(\" 快速发送消息 \")])],1)]),_c('el-dialog',{attrs:{\"title\":\"发送消息到终端\",\"visible\":_vm.showQuickSend,\"width\":\"500px\"},on:{\"update:visible\":function($event){_vm.showQuickSend=$event},\"close\":_vm.resetQuickSend}},[(_vm.selectedTerminal)?_c('div',{staticClass:\"quick-send-header\"},[_c('span',{staticClass:\"target-terminal\"},[_vm._v(\" \"+_vm._s(_vm.selectedTerminal.icon)+\" \"+_vm._s(_vm.selectedTerminal.name)+\" \")])]):_vm._e(),_c('el-input',{attrs:{\"type\":\"textarea\",\"rows\":4,\"placeholder\":\"输入要发送的消息...\",\"maxlength\":\"500\",\"show-word-limit\":\"\"},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;if(!$event.ctrlKey)return null;return _vm.sendQuickMessage.apply(null, arguments)}},model:{value:(_vm.quickMessage),callback:function ($$v) {_vm.quickMessage=$$v},expression:\"quickMessage\"}}),_c('div',{staticClass:\"quick-send-tips\"},[_c('span',{staticClass:\"tip\"},[_vm._v(\"💡 按 Ctrl+Enter 快速发送\")])]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.resetQuickSend}},[_vm._v(\"取消\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.sending,\"disabled\":!_vm.quickMessage.trim()},on:{\"click\":_vm.sendQuickMessage}},[_vm._v(\" 发送 \")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"terminal-selector\">\n    <el-dialog\n      title=\"选择接收终端\"\n      :visible.sync=\"dialogVisible\"\n      width=\"400px\"\n      @close=\"handleClose\"\n    >\n      <div class=\"terminal-list\">\n        <div\n          v-for=\"terminal in availableTerminals\"\n          :key=\"terminal.type\"\n          class=\"terminal-item\"\n          :class=\"{ \n            disabled: !terminal.online || terminal.type === currentTerminal,\n            current: terminal.type === currentTerminal \n          }\"\n          @click=\"selectTerminal(terminal)\"\n        >\n          <div class=\"terminal-icon\">{{ terminal.icon }}</div>\n          <div class=\"terminal-info\">\n            <div class=\"terminal-name\">{{ terminal.name }}</div>\n            <div class=\"terminal-status\" :class=\"getStatusClass(terminal)\">\n              {{ getStatusText(terminal) }}\n            </div>\n          </div>\n          <div v-if=\"terminal.type === currentTerminal\" class=\"current-badge\">当前</div>\n        </div>\n      </div>\n\n      <div v-if=\"onlineTerminals.length === 0\" class=\"empty-state\">\n        <div class=\"empty-icon\">📱</div>\n        <div class=\"empty-text\">暂无其他在线终端</div>\n        <div class=\"empty-hint\">请在其他设备上登录后再试</div>\n      </div>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"handleClose\">取消</el-button>\n        <el-button type=\"primary\" @click=\"openQuickSend\" :disabled=\"onlineTerminals.length === 0\">\n          快速发送消息\n        </el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 快速发送消息对话框 -->\n    <el-dialog\n      title=\"发送消息到终端\"\n      :visible.sync=\"showQuickSend\"\n      width=\"500px\"\n      @close=\"resetQuickSend\"\n    >\n      <div v-if=\"selectedTerminal\" class=\"quick-send-header\">\n        <span class=\"target-terminal\">\n          {{ selectedTerminal.icon }} {{ selectedTerminal.name }}\n        </span>\n      </div>\n      \n      <el-input\n        v-model=\"quickMessage\"\n        type=\"textarea\"\n        :rows=\"4\"\n        placeholder=\"输入要发送的消息...\"\n        maxlength=\"500\"\n        show-word-limit\n        @keydown.ctrl.enter=\"sendQuickMessage\"\n      />\n      \n      <div class=\"quick-send-tips\">\n        <span class=\"tip\">💡 按 Ctrl+Enter 快速发送</span>\n      </div>\n\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"resetQuickSend\">取消</el-button>\n        <el-button \n          type=\"primary\" \n          @click=\"sendQuickMessage\"\n          :loading=\"sending\"\n          :disabled=\"!quickMessage.trim()\"\n        >\n          发送\n        </el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'TerminalSelector',\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      dialogVisible: this.visible,\n      // currentTerminal: this.getCurrentTerminal(),\n      currentTerminal: 4,\n      availableTerminals: [\n        { type: 0, name: '傻蛋网页端', icon: '🌐', online: false },\n        { type: 1, name: '傻蛋精灵App', icon: '📱', online: false },\n        { type: 2, name: '我的电脑', icon: '💻', online: false },\n        { type: 3, name: '我的云电脑', icon: '🖥', online: false },\n        { type: 4, name: '傻蛋浏览器', icon: '🔌', online: false },\n        { type: 5, name: 'MCP端', icon: '🤖', online: false }\n      ],\n      onlineTerminals: [],\n      \n      // 快速发送相关\n      showQuickSend: false,\n      selectedTerminal: null,\n      quickMessage: '',\n      sending: false\n    };\n  },\n  watch: {\n    visible(val) {\n      this.dialogVisible = val;\n      if (val) {\n        this.loadTerminalStatus();\n      }\n    },\n    dialogVisible(val) {\n      this.$emit('update:visible', val);\n    }\n  },\n  methods: {\n    async loadTerminalStatus() {\n      try {\n        const response = await this.$http.get('/message/private/terminal-status');\n        \n        // 前端HTTP库直接返回了data部分，所以从response中直接获取onlineTerminals\n        console.log('终端在线状态返回值:', response);\n        const onlineTerminals = response.otherOnlineTerminals || [];\n        \n        this.onlineTerminals = onlineTerminals;\n        \n        this.availableTerminals.forEach(terminal => {\n          terminal.online = onlineTerminals.includes(terminal.type);\n        });\n        \n        console.log('🔧 终端在线状态:', {\n          current: this.currentTerminal,\n          online: onlineTerminals,\n          available: this.availableTerminals\n        });\n      } catch (error) {\n        console.error('获取终端状态失败:', error);\n        this.$message.error('获取终端状态失败');\n      }\n    },\n\n    selectTerminal(terminal) {\n      if (!terminal.online) {\n        this.$message.warning('目标终端不在线');\n        return;\n      }\n\n      if (terminal.type === this.currentTerminal) {\n        this.$message.warning('无法选择当前终端');\n        return;\n      }\n\n      // 发出终端选择事件\n      this.$emit('terminal-selected', terminal.type);\n      this.handleClose();\n      \n      console.log('🎯 选择终端:', terminal);\n    },\n\n    openQuickSend() {\n      if (this.onlineTerminals.length === 0) {\n        this.$message.warning('暂无其他在线终端');\n        return;\n      }\n      \n      // 选择第一个在线的非当前终端\n      const firstOnlineTerminal = this.availableTerminals.find(\n        t => t.online && t.type !== this.currentTerminal\n      );\n      \n      if (firstOnlineTerminal) {\n        this.selectedTerminal = firstOnlineTerminal;\n        this.showQuickSend = true;\n        this.dialogVisible = false;\n      }\n    },\n\n    async sendQuickMessage() {\n      if (!this.quickMessage.trim()) {\n        this.$message.warning('请输入消息内容');\n        return;\n      }\n      \n      if (!this.selectedTerminal) {\n        this.$message.warning('请选择目标终端');\n        return;\n      }\n\n      this.sending = true;\n      \n      try {\n        const messageData = {\n          recvId: this.$store.getters.currentUser.id,\n          content: this.quickMessage.trim(),\n          type: 0, // 文本消息\n          targetTerminal: this.selectedTerminal.type,\n          senderTerminal: this.currentTerminal\n        };\n\n        const response = await this.$http.post('/message/private/send-to-terminal', messageData);\n        \n        this.createTargetTerminalChat(this.selectedTerminal.type);\n        \n        this.$message.success(`消息已发送到${this.selectedTerminal.name}`);\n        this.resetQuickSend();\n        \n        console.log('📤 终端间消息发送成功:', response.data);\n      } catch (error) {\n        console.error('发送终端间消息失败:', error);\n        this.$message.error('发送失败: ' + (error.response?.data?.message || error.message));\n      } finally {\n        this.sending = false;\n      }\n    },\n\n    createTargetTerminalChat(targetTerminal) {\n      const currentUserId = this.$store.getters.currentUser.id;\n      const chatInfo = {\n        type: 'PRIVATE',\n        targetId: `${currentUserId}_${targetTerminal}`,\n        senderTerminal: this.currentTerminal,\n        targetTerminal: targetTerminal,\n        showName: `${this.$store.getters.currentUser.nickName}(${this.getTerminalName(targetTerminal)}端)`,\n        headImage: this.getTerminalIcon(targetTerminal),\n        isTerminalChat: true\n      };\n\n      this.$store.commit('openChat', chatInfo);\n      \n      if (this.$route.name !== 'Chat') {\n        this.$router.push('/chat');\n      }\n    },\n\n    getCurrentTerminal() {\n      // 根据环境判断当前终端类型\n      if (typeof window !== 'undefined') {\n        // 检测VSCode环境 - 多种方式检测\n        if (window.parent !== window || // 在iframe中\n            window.acquireVsCodeApi || // VSCode WebView API\n            window.SharedServicesAccessor || // 我们的VSCode服务\n            navigator.userAgent.includes('VSCode') || // User Agent\n            window.location.protocol === 'vscode-webview:') { // VSCode WebView协议\n          return 2; // VSCode\n        }\n        \n        // 检测Electron环境\n        if (window.require || \n            window.process?.type || \n            window.isElectron ||\n            navigator.userAgent.includes('Electron')) {\n          return 3; // Server\n        }\n        \n        // 检测移动端App环境\n        if (window.cordova || \n            window.PhoneGap || \n            window.phonegap ||\n            navigator.userAgent.includes('wv') || // WebView\n            navigator.userAgent.includes('Mobile')) {\n          return 1; // App\n        }\n        \n        return 0; // Web\n      }\n      return 0; // 默认Web\n    },\n\n    getStatusClass(terminal) {\n      if (terminal.type === this.currentTerminal) return 'current';\n      return terminal.online ? 'online' : 'offline';\n    },\n\n    getStatusText(terminal) {\n      if (terminal.type === this.currentTerminal) return '当前终端';\n      return terminal.online ? '在线' : '离线';\n    },\n\n    getTerminalName(terminal) {\n      const terminalNames = {\n        0: '傻蛋网页端',\n        1: '傻蛋精灵App', \n        2: '我的电脑',\n        3: '我的云电脑',\n        4: '傻蛋浏览器',\n        5: 'MCP端'\n      };\n      return terminalNames[terminal] || '未知';\n    },\n\n    getTerminalIcon(terminal) {\n      const terminalIcons = {\n        0: '🌐',  // 傻蛋网页端\n        1: '📱',  // 傻蛋精灵App\n        2: '💻',  // 我的电脑  \n        3: '🖥',   // 我的云电脑\n        4: '🔌',  // 傻蛋浏览器\n        5: '🤖'   // MCP端\n      };\n      return terminalIcons[terminal] || '❓';\n    },\n\n    handleClose() {\n      this.dialogVisible = false;\n      this.resetQuickSend();\n    },\n\n    resetQuickSend() {\n      this.showQuickSend = false;\n      this.selectedTerminal = null;\n      this.quickMessage = '';\n      this.sending = false;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.terminal-list {\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.terminal-item {\n  display: flex;\n  align-items: center;\n  padding: 12px;\n  margin-bottom: 8px;\n  border: 1px solid #e1e6eb;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.3s;\n  position: relative;\n}\n\n.terminal-item:hover:not(.disabled) {\n  background-color: #f0f9ff;\n  border-color: #3b82f6;\n}\n\n.terminal-item.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n.terminal-item.current {\n  background-color: #fff7ed;\n  border-color: #f59e0b;\n}\n\n.terminal-icon {\n  font-size: 24px;\n  margin-right: 12px;\n}\n\n.terminal-info {\n  flex: 1;\n}\n\n.terminal-name {\n  font-weight: 500;\n  color: #1f2937;\n}\n\n.terminal-status {\n  font-size: 12px;\n  margin-top: 2px;\n}\n\n.terminal-status.online {\n  color: #10b981;\n}\n\n.terminal-status.offline {\n  color: #ef4444;\n}\n\n.terminal-status.current {\n  color: #f59e0b;\n}\n\n.current-badge {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  padding: 2px 6px;\n  font-size: 10px;\n  background-color: #f59e0b;\n  color: white;\n  border-radius: 10px;\n}\n\n.empty-state {\n  text-align: center;\n  padding: 40px 20px;\n  color: #909399;\n}\n\n.empty-icon {\n  font-size: 48px;\n  margin-bottom: 16px;\n}\n\n.empty-text {\n  font-size: 16px;\n  margin-bottom: 8px;\n}\n\n.empty-hint {\n  font-size: 12px;\n  color: #c0c4cc;\n}\n\n.quick-send-header {\n  margin-bottom: 16px;\n  padding: 12px;\n  background-color: #f5f7fa;\n  border-radius: 4px;\n}\n\n.target-terminal {\n  font-weight: 500;\n  color: #409eff;\n}\n\n.quick-send-tips {\n  margin-top: 8px;\n  font-size: 12px;\n  color: #909399;\n}\n\n.tip {\n  display: flex;\n  align-items: center;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TerminalSelectorPlugin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TerminalSelectorPlugin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./TerminalSelectorPlugin.vue?vue&type=template&id=80b38fb2&scoped=true\"\nimport script from \"./TerminalSelectorPlugin.vue?vue&type=script&lang=js\"\nexport * from \"./TerminalSelectorPlugin.vue?vue&type=script&lang=js\"\nimport style0 from \"./TerminalSelectorPlugin.vue?vue&type=style&index=0&id=80b38fb2&prod&scoped=true&lang=css\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"80b38fb2\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <el-container class=\"chat-page\" type=\"flex\" style=\"flex-wrap:wrap\">\n    <el-aside width=\"100%\" class=\"chat-list-box\">\n      <div class=\"chat-list-header\">\n        <el-input class=\"search-text\" size=\"small\" placeholder=\"搜索\" v-model=\"searchText\">\n          <i class=\"el-icon-search el-input__icon\" slot=\"prefix\"> </i>\n        </el-input>\n        <el-button\n          type=\"text\"\n          icon=\"el-icon-plus\"\n          size=\"small\"\n          class=\"new-terminal-chat-btn\"\n          @click=\"showTerminalSelector = true\"\n          title=\"新建终端会话\"\n        >\n          终端\n        </el-button>\n      </div>\n      <div class=\"chat-list-loading\" v-if=\"loading\" v-loading=\"true\" element-loading-text=\"消息接收中...\"\n        element-loading-spinner=\"el-icon-loading\" element-loading-background=\"#F9F9F9\" element-loading-size=\"24\">\n      </div>\n      <el-scrollbar class=\"chat-list-items\" v-else>\n        <div v-for=\"(chat, index) in filteredChats\" :key=\"index\">\n          <chat-item v-show=\"!chat.delete && chat.showName && chat.showName.includes(searchText)\" :chat=\"chat\" :index=\"index\"\n            @click.native=\"onActiveItem(index)\" @delete=\"onDelItem(index)\" @top=\"onTop(index)\"\n            :active=\"chat === chatStore.activeChat\" :class=\"{\n              'terminal-inbox': chat.isTerminalInbox,\n              'normal-chat': !chat.isTerminalInbox\n            }\"></chat-item>\n        </div>\n      </el-scrollbar>\n    </el-aside>\n \n    <!-- 终端选择器 -->\n    <terminal-selector\n      :visible.sync=\"showTerminalSelector\"\n      @terminal-selected=\"handleTerminalSelected\"\n    />\n  </el-container>\n</template>\n\n<script>\nimport ChatItem from \"../components/chat/ChatItem.vue\";\nimport TerminalSelector from \"../components/chat/TerminalSelectorPlugin.vue\";\n\nexport default {\n  name: \"chat\",\n  components: {\n    ChatItem,\n    TerminalSelector\n  },\n  data() {\n    return {\n      searchText: \"\",\n      messageContent: \"\",\n      group: {},\n      groupMembers: [],\n      // 终端间通信相关\n      showTerminalSelector: false,\n      currentTerminal: null,  // 当前终端类型\n      terminalChats: []       // 终端会话列表\n    }\n  },\n  methods: {\n    // 获取当前终端类型\n    getCurrentTerminal() {\n      // InboxPluginSession 是插件端专用界面\n      // 固定返回 4 表示插件端\n      return 4; // 插件端\n    },\n    \n    // 初始化其他终端会话\n    initOtherTerminalChats() {\n      const userInfo = this.$store.state.userStore.userInfo;\n      if (!userInfo || !userInfo.id) {\n        console.log('[InboxPluginSession] 用户信息不存在，无法初始化终端会话');\n        return;\n      }\n      \n      const currentTerminal = this.getCurrentTerminal();\n      this.currentTerminal = currentTerminal;\n      \n      // 定义所有终端类型\n      const terminals = [\n        { type: 0, name: 'Web', icon: '🌐' },\n        { type: 1, name: 'App', icon: '📱' },\n        { type: 2, name: 'VSCode', icon: '💻' },\n        { type: 3, name: 'PC', icon: '🖥️' },\n        { type: 4, name: '插件', icon: '🔌' }\n      ];\n      \n      // 清理已存在的终端会话\n      this.cleanupTerminalChatsFromStore();\n      \n      // 预先添加其他终端会话到 chatStore.chats 中（不包括当前终端）\n      terminals.forEach(terminal => {\n        // 跳过当前终端（插件端）\n        if (terminal.type === currentTerminal) {\n          return;\n        }\n        \n        const targetId = `${userInfo.id}_${terminal.type}`;\n        \n        // 检查是否已存在该终端会话\n        const existingChat = this.chatStore.chats.find(chat => \n          chat.isTerminalInbox && chat.targetId === targetId\n        );\n        \n        if (!existingChat) {\n          // 创建终端会话\n          const chatInfo = {\n            type: 'PRIVATE',\n            targetId: targetId,\n            receivingTerminal: terminal.type,\n            senderTerminal: 4, // 插件端发送\n            showName: `${terminal.name}端`,\n            headImage: terminal.icon,\n            isTerminalInbox: true,\n            lastContent: '',\n            lastSendTime: Date.now(),\n            unreadCount: 0,\n            delete: false,\n            messages: [],\n            stored: false,\n            lastTimeTip: Date.now()\n          };\n          \n          // 使用 openChat 方法添加会话\n          this.$store.commit('openChat', chatInfo);\n          \n          // 立即检查是否需要发送系统消息\n          this.$nextTick(async () => {\n            const chat = this.chatStore.chats.find(c => \n              c.targetId === targetId && c.type === 'PRIVATE'\n            );\n            \n            if (chat) {\n              // 清理任何空消息\n              if (chat.messages && chat.messages.length > 0) {\n                chat.messages = chat.messages.filter((msg, index) => {\n                  if (!msg || msg.type === undefined || msg.type === null) {\n                    return false;\n                  }\n                  if (msg.type === 0 && (!msg.content || msg.content.trim() === '')) {\n                    return false;\n                  }\n                  if (msg.type === 8 && (!msg.content || msg.content.trim() === '')) {\n                    return false;\n                  }\n                  return true;\n                });\n                \n                if (chat.messages.length === 0) {\n                  chat.stored = false;\n                }\n              }\n              \n              // 如果没有有效消息，发送系统消息\n              if (!chat.messages || chat.messages.length === 0) {\n                await this.sendSystemMessage(chatInfo, terminal.type);\n              }\n            }\n          });\n        }\n      });\n      \n      // 清理所有会话中的空消息\n      this.$store.commit('cleanEmptyMessages');\n      \n      // 立即将终端会话置顶\n      this.moveTerminalChatsToTop();\n      \n      console.log('[InboxPluginSession] 终端会话初始化完成');\n    },\n    \n    // 清理 chatStore 中的终端会话\n    cleanupTerminalChatsFromStore() {\n      // 移除 chatStore.chats 中所有的终端会话\n      const terminalChatIndices = [];\n      this.chatStore.chats.forEach((chat, index) => {\n        if (chat.isTerminalInbox) {\n          terminalChatIndices.push(index);\n        }\n      });\n      \n      // 从后往前删除，避免索引问题\n      for (let i = terminalChatIndices.length - 1; i >= 0; i--) {\n        this.chatStore.chats.splice(terminalChatIndices[i], 1);\n      }\n    },\n    \n    // 将终端会话移到顶部\n    moveTerminalChatsToTop() {\n      // 使用mutation来置顶终端会话\n      this.$store.commit('sortTerminalChatsToTop');\n    },\n    \n    // 发送系统消息\n    async sendSystemMessage(chatInfo, terminal) {\n      // 获取终端类型对应的消息内容\n      let terminalKey = null;\n      const terminalKeys = {\n        0: 'web',\n        1: 'app',\n        2: 'vscode',\n        3: 'pc',\n        4: 'plugin'\n      };\n      \n      terminalKey = terminalKeys[terminal];\n      let content = `欢迎使用傻蛋IM ${this.getTerminalName(terminal)}端`; // 默认消息\n      \n      // 尝试从远程获取消息内容\n      if (terminalKey) {\n        try {\n          const response = await fetch('https://aiim.service.thinkgs.cn/text.json');\n          if (response.ok) {\n            const data = await response.json();\n            if (data && data[terminalKey]) {\n              content = data[terminalKey];\n              console.log(`[InboxPluginSession] 从远程获取${terminalKey}端系统消息:`, content);\n            }\n          }\n        } catch (error) {\n          console.error('[InboxPluginSession] 获取远程系统消息失败:', error);\n        }\n      }\n      \n      // 检查内容是否为空\n      if (!content || content.trim() === '') {\n        console.warn('[InboxPluginSession] 系统消息内容为空，跳过发送');\n        return null;\n      }\n      \n      // 先确保会话存在\n      let chat = this.chatStore.chats.find(c => \n        c.targetId === chatInfo.targetId && c.type === chatInfo.type\n      );\n      \n      if (!chat) {\n        console.warn('[InboxPluginSession] 发送系统消息时找不到会话:', chatInfo.targetId);\n        return null;\n      }\n      \n      const systemMessage = {\n        id: `sys_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        tmpId: `tmp_sys_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n        type: 21, // MESSAGE_TYPE.TIP_TEXT = 21\n        content: content.trim(),\n        sendTime: Date.now(),\n        selfSend: false,\n        status: 1,\n        sendNickName: '系统',\n        sendId: -1,\n        recvId: this.$store.state.userStore.userInfo?.id || 0\n      };\n      \n      console.log('[InboxPluginSession] 发送系统消息:', systemMessage);\n      \n      // 将系统消息添加到会话中\n      this.$store.commit('insertMessage', [systemMessage, chatInfo]);\n      \n      // 更新会话的最后消息\n      chat.lastContent = content;\n      chat.lastSendTime = systemMessage.sendTime;\n      \n      return systemMessage;\n    },\n    \n    onActiveItem(index) {\n      this.$store.commit(\"activeChat\", index);\n      \n      // 获取当前激活的聊天对象\n      const activeChat = this.chatStore.chats[index];\n      if (activeChat) {\n        // 触发父组件事件，切换到聊天视图\n        this.$emit('chatItemClick', {\n          type: activeChat.type,\n          targetId: activeChat.targetId,\n          showName: activeChat.showName,\n          headImage: activeChat.headImage,\n        });\n      }\n      \n      // VSCode环境中，同时打开编辑器中的聊天窗口\n      // if (window.vscodeServices && window.vscodeServices.openChatEditor) {\n      //   if (activeChat) {\n      //     // 构造用户信息对象，适配openChatEditor所需的格式\n      //     const chatUser = {\n      //       id: activeChat.targetId || activeChat.id,\n      //       nickName: activeChat.showName || activeChat.name,\n      //       name: activeChat.showName || activeChat.name,\n      //       headImage: activeChat.headImage || activeChat.avatar,\n      //       headImageThumb: activeChat.headImageThumb || activeChat.avatar,\n      //       avatar: activeChat.headImage || activeChat.avatar\n      //     };\n          \n      //     console.log('[InboxSession] Opening chat editor for user:', chatUser.nickName);\n          \n      //     // 调用VSCode服务打开聊天编辑器\n      //     try {\n      //       window.vscodeServices.openChatEditor(chatUser);\n      //       console.log('[InboxSession] Chat editor opened successfully');\n      //     } catch (error) {\n      //       console.error('[InboxSession] Failed to open chat editor:', error);\n      //     }\n      //   }\n      // }\n    },\n    // 处理终端选择\n    async handleTerminalSelected(receivingTerminal) {\n      console.log('[Chat] 选择的终端:', receivingTerminal);\n      \n      try {\n        // 1. 获取当前用户信息\n        const userInfo = this.$store.state.userStore.userInfo;\n        if (!userInfo || !userInfo.id) {\n          this.$message.error('用户未登录');\n          return;\n        }\n\n        const targetId = `${userInfo.id}_${receivingTerminal}`;\n        \n        // 2. 检查会话是否已存在，避免重复创建\n        const existingChatIndex = this.chatStore.chats.findIndex(chat => \n          chat.targetId === targetId && chat.isTerminalInbox\n        );\n        \n        if (existingChatIndex !== -1) {\n          // 会话已存在，直接激活\n          console.log('[Chat] 终端会话已存在，直接激活');\n          this.onActiveItem(existingChatIndex);\n          this.$message.success(`已切换到${userInfo.nickName}(${this.getTerminalName(receivingTerminal)}端)会话`);\n          return;\n        }\n        let heademoji= '👤'\n        if(receivingTerminal === 0){\n          heademoji='🌐'\n        }\n        if(receivingTerminal === 1){\n          heademoji='📱'\n        }\n        if(receivingTerminal === 2){\n          heademoji='💻'\n        }\n        if(receivingTerminal === 3){\n          heademoji='🖥️'\n        }\n        if(receivingTerminal === 4){\n          heademoji='🔌'\n        }\n        // 3. 创建新的终端收件箱会话\n        const chatInfo = {\n          type: 'PRIVATE',\n          targetId: targetId,\n          receivingTerminal: receivingTerminal,\n          senderTerminal: 4,\n          showName: `${userInfo.nickName}(${this.getTerminalName(receivingTerminal)}端)`,\n          headImage: userInfo.headImage || userInfo.avatar || heademoji,\n          isTerminalInbox: true\n        };\n\n        // 4. 打开会话（只在不存在时创建）\n        this.$store.commit('openChat', chatInfo);\n\n        // 5. 查找并激活会话\n        const chatIndex = this.$store.getters.findChatIdx(chatInfo);\n        if (chatIndex !== undefined) {\n          this.onActiveItem(chatIndex);\n        }\n\n        this.$message.success(`已创建${userInfo.nickName}(${this.getTerminalName(receivingTerminal)}端)会话`);\n      } catch (error) {\n        console.error('[Chat] 创建终端会话失败:', error);\n        this.$message.error('创建终端会话失败');\n      }\n    },\n\n    // 获取终端名称\n    getTerminalName(terminal) {\n      const terminalNames = {\n        0: 'Web',\n        1: 'App', \n        2: 'VSCode',\n        3: 'PC',\n        4: '插件'\n      };\n      return terminalNames[terminal] || '未知';\n    },\n    // 获取终端图标\n    getTerminalIcon(terminal) {\n      const terminalIcons = {\n        0: '🌐',  // Web\n        1: '📱',  // App\n        2: '💻',  // VSCode\n        3: '🖥️',   // PC\n        4: '🔌'   //插件\n      };\n      return terminalIcons[terminal] || '❓';\n    },\n    onDelItem(index) {\n      this.$store.commit(\"removeChat\", index);\n    },\n    onTop(chatIdx) {\n      this.$store.commit(\"moveTop\", chatIdx);\n    },\n  },\n  computed: {\n    chatStore() {\n      return this.$store.state.chatStore;\n    },\n    loading() {\n      return this.chatStore.loadingGroupMsg || this.chatStore.loadingPrivateMsg\n    },\n    // 过滤后的会话列表（排除插件端自己的会话）\n    filteredChats() {\n      const currentTerminal = this.getCurrentTerminal(); // 插件端 = 4\n      \n      // 过滤掉插件端自己的终端会话\n      return this.chatStore.chats.filter(chat => {\n        // 如果是终端会话，检查是否是插件端\n        if (chat.isTerminalInbox) {\n          // 过滤掉插件端的会话\n          if (chat.receivingTerminal === currentTerminal) {\n            console.log(`[InboxPluginSession] 过滤掉插件端会话: ${chat.showName}`);\n            return false;\n          }\n        }\n        return true;\n      });\n    }\n  },\n  \n  mounted() {\n    console.log('[InboxPluginSession] 组件挂载，开始初始化终端会话...');\n    \n    // 初始化其他终端会话\n    this.initOtherTerminalChats();\n    \n    // 确保终端会话置顶\n    this.$nextTick(() => {\n      this.moveTerminalChatsToTop();\n    });\n    \n    // 监听用户信息变化\n    this.$watch(\n      () => this.$store.state.userStore.userInfo,\n      (newVal) => {\n        if (newVal && newVal.id) {\n          this.initOtherTerminalChats();\n          // 用户信息变化后也要确保置顶\n          this.$nextTick(() => {\n            this.moveTerminalChatsToTop();\n          });\n        }\n      },\n      { deep: true }\n    );\n    \n    // 监听 chatStore 中的会话变化\n    this.$watch(\n      () => this.chatStore.chats,\n      () => {\n        // 检查是否需要重新置顶终端会话\n        if (this.chatStore.chats && this.chatStore.chats.length > 0) {\n          const firstChat = this.chatStore.chats[0];\n          if (!firstChat.isTerminalInbox) {\n            console.log('[InboxPluginSession] 检测到会话列表变化，重新置顶终端会话');\n            this.$nextTick(() => {\n              this.moveTerminalChatsToTop();\n            });\n          }\n        }\n      },\n      { deep: true }\n    );\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.chat-page {\n  height: 100% !important;\n  \n  // 重写Element UI的el-container样式\n  \n  \n  .chat-list-box {\n    height: 100% !important;\n    \n    // 重写Element UI的el-aside样式\n    &.el-aside {\n      height: 100% !important;\n    }\n    \n    display: flex;\n    flex-direction: column;\n    background: var(--im-background);\n\n    .chat-list-header {\n      height: 50px;\n      flex-shrink: 0;\n      display: flex;\n      align-items: center;\n      padding: 0 2px 0 8px;\n\n      .search-text {\n        flex: 1;\n        margin-right: 8px;\n      }\n\n      .new-terminal-chat-btn {\n        padding: 4px 8px;\n        font-size: 12px;\n        border-radius: 12px;\n        background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);\n        color: white;\n        border: none;\n        transition: all 0.2s ease;\n        flex: 0 0 auto;\n        min-width: 50px;\n\n        &:hover {\n          background: linear-gradient(135deg, #5f4fcf 0%, #9088e8 100%);\n          transform: translateY(-1px);\n          box-shadow: 0 2px 8px rgba(108, 92, 231, 0.3);\n        }\n\n        &:active {\n          transform: translateY(0);\n        }\n\n        &:focus {\n          outline: none;\n          box-shadow: 0 0 0 2px rgba(108, 92, 231, 0.2);\n        }\n      }\n    }\n\n    .chat-list-loading {\n      height: 50px;\n      flex-shrink: 0;\n      background-color: #eee;\n\n      .el-icon-loading {\n        font-size: 24px;\n        color: var(--im-text-color-light);\n      }\n\n      .el-loading-text {\n        color: var(--im-text-color-light);\n      }\n\n      .chat-loading-box {\n        height: 100%;\n      }\n    }\n\n    .chat-list-items {\n      flex: 1;\n      height: 0; // 强制flex子元素高度计算\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxPluginSession.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxPluginSession.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./InboxPluginSession.vue?vue&type=template&id=4eba4063\"\nimport script from \"./InboxPluginSession.vue?vue&type=script&lang=js\"\nexport * from \"./InboxPluginSession.vue?vue&type=script&lang=js\"\nimport style0 from \"./InboxPluginSession.vue?vue&type=style&index=0&id=4eba4063&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"home-page\">\n    <div class=\"navi-bar\">\n      <div class=\"navi-bar-box\">\n        <div class=\"top\">\n          <div class=\"menu\">\n\n              <div class=\"botoom-item\" @click=\"switchUi(1)\">\n                <span class=\"icon iconfont icon-chat\"></span>\n                <div v-show=\"unreadCount > 0\" class=\"unread-text\">\n                  {{ unreadCount }}\n                </div>\n              </div>\n\n\n              <div class=\"botoom-item\" @click=\"switchUi(2)\">\n                <span class=\"icon iconfont icon-friend\"></span>\n              </div>\n\n    \n              <div class=\"botoom-item\" @click=\"switchUi(3)\">\n                <span\n                  class=\"icon iconfont icon-group\"\n                  style=\"font-size: 28px\"\n                ></span>\n              </div>\n            <div class=\"botoom-item\" @click=\"showSetting\">\n\t\t\t\t\t\t\t<span class=\"icon iconfont icon-setting\" style=\"font-size: 20px\"></span>\n\t\t\t\t\t\t</div>\n\n          </div>\n        </div>\n\n\n      </div>\n    </div>\n    <div class=\"content-box\">\n      <inbox-plugin-session \n        v-if=\"uiStore.viewCode === 1\"\n        @chatItemClick=\"onChatItemClick\"\n      ></inbox-plugin-session>\n      <inbox-friend \n        v-if=\"uiStore.viewCode === 2\"\n        @showFriend=\"onFriendClick\"\n      ></inbox-friend>\n      <inbox-group \n        v-if=\"uiStore.viewCode === 3\"\n        @groupClick=\"onGroupClick\"\n      ></inbox-group>\n    </div>\n    <setting :visible=\"showSettingDialog\" @close=\"closeSetting()\"></setting>\n    <user-info\n      v-show=\"uiStore.userInfo.show\"\n      :pos=\"uiStore.userInfo.pos\"\n      :user=\"uiStore.userInfo.user\"\n      @close=\"$store.commit('closeUserInfoBox')\"\n    ></user-info>\n    <full-image\n      :visible=\"uiStore.fullImage.show\"\n      :url=\"uiStore.fullImage.url\"\n      @close=\"$store.commit('closeFullImageBox')\"\n    ></full-image>\n    <rtc-private-video ref=\"rtcPrivateVideo\"></rtc-private-video>\n    <rtc-group-video ref=\"rtcGroupVideo\"></rtc-group-video>\n  </div>\n</template>\n\n<script>\nimport HeadImage from \"../components/common/HeadImage.vue\";\nimport Setting from \"../components/setting/Setting.vue\";\nimport UserInfo from \"../components/common/UserInfo.vue\";\nimport FullImage from \"../components/common/FullImage.vue\";\nimport RtcPrivateVideo from \"../components/rtc/RtcPrivateVideo.vue\";\nimport RtcPrivateAcceptor from \"../components/rtc/RtcPrivateAcceptor.vue\";\nimport RtcGroupVideo from \"../components/rtc/RtcGroupVideo.vue\";\nimport InboxPluginSession from \"./InboxPluginSession.vue\";\nimport InboxFriend from \"./InboxFriend.vue\";\nimport InboxGroup from \"./InboxGroup.vue\";\n\nexport default {\n  components: {\n    HeadImage,\n    Setting,\n    UserInfo,\n    FullImage,\n    RtcPrivateVideo,\n    RtcPrivateAcceptor,\n    RtcGroupVideo,\n    InboxPluginSession,\n    InboxFriend,\n    InboxGroup,\n  },\n  data() {\n    return {\n      showSettingDialog: false,\n      lastPlayAudioTime: new Date().getTime() - 1000,\n      isFullscreen: true,\n      reconnecting: false,\n    };\n  },\n  methods: {\n    init() {\n      this.$eventBus.$on(\"openPrivateVideo\", (rctInfo) => {\n        // 进入单人视频通话\n        this.$refs.rtcPrivateVideo.open(rctInfo);\n      });\n      this.$eventBus.$on(\"openGroupVideo\", (rctInfo) => {\n        // 进入多人视频通话\n        this.$refs.rtcGroupVideo.open(rctInfo);\n      });\n\n      this.$store\n        .dispatch(\"load\")\n        .then(() => {\n          // ws初始化\n          this.$wsApi.connect(\n            process.env.VUE_APP_WS_URL,\n            sessionStorage.getItem(\"accessToken\")\n          );\n          this.$wsApi.onConnect(() => {\n            if (this.reconnecting) {\n              this.onReconnectWs();\n            } else {\n              // 加载离线消息\n              this.pullPrivateOfflineMessage(\n                this.$store.state.chatStore.privateMsgMaxId\n              );\n              this.pullGroupOfflineMessage(\n                this.$store.state.chatStore.groupMsgMaxId\n              );\n            }\n          });\n          this.$wsApi.onMessage((cmd, msgInfo) => {\n            if (cmd == 2) {\n              // 关闭ws\n              this.$wsApi.close(3000);\n              // 异地登录，强制下线\n              this.$alert(\"您已在其他地方登录，将被强制下线\", \"强制下线通知\", {\n                confirmButtonText: \"确定\",\n                callback: (action) => {\n                  location.href = \"/\";\n                },\n              });\n            } else if (cmd == 3) {\n              // 插入私聊消息\n                this.handlePrivateMessage(msgInfo);\n              \n            } else if (cmd == 4) {\n              // 插入群聊消息\n              this.handleGroupMessage(msgInfo);\n            } else if (cmd == 5) {\n              // 处理系统消息\n              this.handleSystemMessage(msgInfo);\n            }\n          });\n          this.$wsApi.onClose((e) => {\n            if (e.code != 3000) {\n              // 断线重连\n              this.reconnectWs();\n            }\n          });\n        })\n        .catch((e) => {\n          console.log(\"初始化失败\", e);\n        });\n    },\n    reconnectWs() {\n      // 记录标志\n      this.reconnecting = true;\n      // 重新加载一次个人信息，目的是为了保证网络已经正常且token有效\n      this.$store\n        .dispatch(\"loadUser\")\n        .then(() => {\n          // 断线重连\n          this.$message.error(\"连接断开，正在尝试重新连接...\");\n          this.$wsApi.reconnect(\n            process.env.VUE_APP_WS_URL,\n            sessionStorage.getItem(\"accessToken\")\n          );\n        })\n        .catch(() => {\n          // 10s后重试\n          setTimeout(() => this.reconnectWs(), 10000);\n        });\n    },\n    onReconnectWs() {\n      // 重连成功\n      this.reconnecting = false;\n      // 重新加载群和好友\n      const promises = [];\n      promises.push(this.$store.dispatch(\"loadFriend\"));\n      promises.push(this.$store.dispatch(\"loadGroup\"));\n      Promise.all(promises)\n        .then(() => {\n          // 加载离线消息\n          this.pullPrivateOfflineMessage(\n            this.$store.state.chatStore.privateMsgMaxId\n          );\n          this.pullGroupOfflineMessage(\n            this.$store.state.chatStore.groupMsgMaxId\n          );\n          this.$message.success(\"重新连接成功\");\n        })\n        .catch(() => {\n          this.$message.error(\"初始化失败\");\n          this.onExit();\n        });\n    },\n    pullPrivateOfflineMessage(minId) {\n      this.$store.commit(\"loadingPrivateMsg\", true);\n      this.$http({\n        url: \"/message/private/pullOfflineMessage?minId=\" + minId,\n        method: \"GET\",\n      }).catch(() => {\n        this.$store.commit(\"loadingPrivateMsg\", false);\n      });\n    },\n    pullGroupOfflineMessage(minId) {\n      this.$store.commit(\"loadingGroupMsg\", true);\n      this.$http({\n        url: \"/message/group/pullOfflineMessage?minId=\" + minId,\n        method: \"GET\",\n      }).catch(() => {\n        this.$store.commit(\"loadingGroupMsg\", false);\n      });\n    },\n    handlePrivateMessage(msg) {\n      // 标记这条消息是不是自己发的\n      msg.selfSend = msg.sendId == this.$store.state.userStore.userInfo.id;\n      \n      // 🔧 检查是否为终端消息：包含senderTerminal和targetTerminal字段的就是终端消息\n      if (msg.senderTerminal !== undefined && msg.targetTerminal !== undefined) {\n        console.log(\"[InboxPlugin] 🔧 接收到终端消息:\", msg);\n        // 设置终端消息标识\n        msg.isTerminalChat = true;\n        if(msg.targetTerminal===4){\n          this.insertTerminalMessage(msg);\n        }\n        // 🔧 修复：终端消息也需要更新privateMsgMaxId\n        if (msg.id && msg.id > this.$store.state.chatStore.privateMsgMaxId) {\n          this.$store.commit('updatePrivateMsgMaxId', msg.id);\n        }\n        return;\n      }\n      \n      // 好友id\n      let friendId = msg.selfSend ? msg.recvId : msg.sendId;\n      // 会话信息\n      let chatInfo = {\n        type: \"PRIVATE\",\n        targetId: friendId,\n      };\n      // 消息加载标志\n      if (msg.type == this.$enums.MESSAGE_TYPE.LOADING) {\n        this.$store.commit(\"loadingPrivateMsg\", JSON.parse(msg.content));\n        return;\n      }\n      // 消息已读处理，清空已读数量\n      if (msg.type == this.$enums.MESSAGE_TYPE.READED) {\n        this.$store.commit(\"resetUnreadCount\", chatInfo);\n        return;\n      }\n      // 消息回执处理,改消息状态为已读\n      if (msg.type == this.$enums.MESSAGE_TYPE.RECEIPT) {\n        this.$store.commit(\"readedMessage\", {\n          friendId: msg.sendId,\n        });\n        return;\n      }\n      // 消息撤回\n      if (msg.type == this.$enums.MESSAGE_TYPE.RECALL) {\n        this.$store.commit(\"recallMessage\", [msg, chatInfo]);\n        return;\n      }\n      // 新增好友\n      if (msg.type == this.$enums.MESSAGE_TYPE.FRIEND_NEW) {\n        this.$store.commit(\"addFriend\", JSON.parse(msg.content));\n        return;\n      }\n      // 删除好友\n      if (msg.type == this.$enums.MESSAGE_TYPE.FRIEND_DEL) {\n        this.$store.commit(\"removeFriend\", friendId);\n        return;\n      }\n      // 单人webrtc 信令\n      if (this.$msgType.isRtcPrivate(msg.type)) {\n        this.$refs.rtcPrivateVideo.onRTCMessage(msg);\n        return;\n      }\n      // 插入消息\n      if (\n        this.$msgType.isNormal(msg.type) ||\n        this.$msgType.isTip(msg.type) ||\n        this.$msgType.isAction(msg.type)\n      ) {\n        let friend = this.loadFriendInfo(friendId);\n        this.insertPrivateMessage(friend, msg);\n      }\n    },\n    insertPrivateMessage(friend, msg) {\n      let chatInfo = {\n        type: \"PRIVATE\",\n        targetId: friend.id,\n        showName: friend.nickName,\n        headImage: friend.headImage\n      };\n      // 打开会话\n      this.$store.commit(\"openChat\", chatInfo);\n      // 插入消息\n      this.$store.commit(\"insertMessage\", [msg, chatInfo]);\n      // 播放提示音\n      if (\n        !msg.selfSend &&\n        this.$msgType.isNormal(msg.type) &&\n        msg.status != this.$enums.MESSAGE_STATUS.READED\n      ) {\n        this.playAudioTip();\n      }\n    },\n    \n    // 🔧 修正：终端消息插入方法（目标终端模式）\n    insertTerminalMessage(msg) {\n      try {\n        const userInfo = this.$store.state.userStore.userInfo;\n        if (!userInfo || !userInfo.id) {\n          console.error(\"[InboxPlugin] 用户信息未加载，无法处理终端消息\");\n          return;\n        }\n        \n        // 🔧 修正：使用发送端作为会话标识（目标终端模式）\n        const senderTerminal = msg.senderTerminal;\n        const targetTerminal = msg.targetTerminal || this.getCurrentTerminal(); // 如果没有targetTerminal，使用当前终端\n        const currentTerminal = this.getCurrentTerminal();\n        \n        // 🔧 关键修复：确保终端消息的selfSend字段正确设置\n        msg.selfSend = msg.senderTerminal === currentTerminal;\n        \n        // 🔧 补充缺失的targetTerminal字段\n        if (!msg.targetTerminal) {\n          msg.targetTerminal = currentTerminal;\n        }\n        \n        console.log(`🔧 [InboxPlugin] 终端消息: ${this.getTerminalName(senderTerminal)}端→${this.getTerminalName(targetTerminal)}端, selfSend=${msg.selfSend}`);\n        \n        // 🔧 修正：创建发送端会话信息（在目标端显示为\"发送端会话\"）\n        const chatInfo = {\n          type: \"PRIVATE\",\n          targetId: `${userInfo.id}_${senderTerminal}`,  // 使用发送端标识\n          showName: `${userInfo.nickName}(${this.getTerminalName(senderTerminal)}端)`,\n          headImage: this.getTerminalIcon(senderTerminal),\n          isTerminalChat: true,  // 使用新的标识\n          senderTerminal: senderTerminal,  // 记录发送端\n          targetTerminal: targetTerminal\n        };\n        \n        // 🔧 修正：设置消息的发送者昵称（显示发送端信息）\n        msg.sendNickName = `${userInfo.nickName}(${this.getTerminalName(senderTerminal)}端)`;\n        \n        // 使用统一的会话管理流程\n        this.$store.commit(\"openChat\", chatInfo);\n        this.$store.commit(\"insertMessage\", [msg, chatInfo]);\n        \n        console.log(`✅ [InboxPlugin] 终端消息已插入到 ${this.getTerminalName(senderTerminal)}端 会话`);\n        \n        // 播放提示音（接收到其他终端的消息时）\n        if (!msg.selfSend && this.$msgType.isNormal(msg.type) &&\n            msg.status != this.$enums.MESSAGE_STATUS.READED) {\n          this.playAudioTip();\n        }\n      } catch (error) {\n        console.error(\"[InboxPlugin] 处理终端消息失败:\", error, msg);\n      }\n    },\n    \n    // 🔧 新增：获取终端名称的工具方法\n    getTerminalName(terminal) {\n      const terminalNames = {\n        0: \"傻蛋网页\",\n        1: \"傻蛋精灵App\",\n        2: \"我的电脑\",\n        3: \"我的云电脑\",\n        4: \"傻蛋浏览器\",\n        5: \"MCP\"\n      };\n      return terminalNames[terminal] || \"未知\";\n    },\n\n    // 🔧 新增：获取终端图标的工具方法\n    getTerminalIcon(terminal) {\n      const terminalIcons = {\n        0: \"🌐\",\n        1: \"📱\",\n        2: \"💻\",\n        3: \"🖥️\",\n        4: \"🔌\"\n      };\n      return terminalIcons[terminal] || \"❓\";\n    },\n\n    // 🔧 新增：获取当前终端类型\n    getCurrentTerminal() {\n      // 根据环境判断当前终端类型\n      \n      return 4; // 默认Web\n    },\n    \n    handleGroupMessage(msg) {\n      // 标记这条消息是不是自己发的\n      msg.selfSend = msg.sendId == this.$store.state.userStore.userInfo.id;\n      let chatInfo = {\n        type: \"GROUP\",\n        targetId: msg.groupId,\n      };\n      // 消息加载标志\n      if (msg.type == this.$enums.MESSAGE_TYPE.LOADING) {\n        this.$store.commit(\"loadingGroupMsg\", JSON.parse(msg.content));\n        return;\n      }\n      // 消息已读处理\n      if (msg.type == this.$enums.MESSAGE_TYPE.READED) {\n        // 我已读对方的消息，清空已读数量\n        this.$store.commit(\"resetUnreadCount\", chatInfo);\n        return;\n      }\n      // 消息回执处理\n      if (msg.type == this.$enums.MESSAGE_TYPE.RECEIPT) {\n        // 更新消息已读人数\n        let msgInfo = {\n          id: msg.id,\n          groupId: msg.groupId,\n          readedCount: msg.readedCount,\n          receiptOk: msg.receiptOk,\n        };\n        this.$store.commit(\"updateMessage\", [msgInfo, chatInfo]);\n        return;\n      }\n      // 消息撤回\n      if (msg.type == this.$enums.MESSAGE_TYPE.RECALL) {\n        this.$store.commit(\"recallMessage\", [msg, chatInfo]);\n        return;\n      }\n      // 新增群\n      if (msg.type == this.$enums.MESSAGE_TYPE.GROUP_NEW) {\n        this.$store.commit(\"addGroup\", JSON.parse(msg.content));\n        return;\n      }\n      // 删除群\n      if (msg.type == this.$enums.MESSAGE_TYPE.GROUP_DEL) {\n        this.$store.commit(\"removeGroup\", msg.groupId);\n        return;\n      }\n      // 群视频信令\n      if (this.$msgType.isRtcGroup(msg.type)) {\n        this.$nextTick(() => {\n          this.$refs.rtcGroupVideo.onRTCMessage(msg);\n        });\n        return;\n      }\n      // 插入群聊消息\n      if (\n        this.$msgType.isNormal(msg.type) ||\n        this.$msgType.isTip(msg.type) ||\n        this.$msgType.isAction(msg.type)\n      ) {\n        let group = this.loadGroupInfo(msg.groupId);\n        this.insertGroupMessage(group, msg);\n      }\n    },\n    insertGroupMessage(group, msg) {\n      let chatInfo = {\n        type: \"GROUP\",\n        targetId: group.id,\n        showName: group.showGroupName,\n        headImage: group.headImageThumb,\n      };\n      // 打开会话\n      this.$store.commit(\"openChat\", chatInfo);\n      // 插入消息\n      this.$store.commit(\"insertMessage\", [msg, chatInfo]);\n      // 播放提示音\n      if (\n        !msg.selfSend &&\n        msg.type <= this.$enums.MESSAGE_TYPE.VIDEO &&\n        msg.status != this.$enums.MESSAGE_STATUS.READED\n      ) {\n        this.playAudioTip();\n      }\n    },\n    handleSystemMessage(msg) {\n      // 用户被封禁\n      if (msg.type == this.$enums.MESSAGE_TYPE.USER_BANNED) {\n        this.$wsApi.close(3000);\n        this.$alert(\n          \"您的账号已被管理员封禁,原因:\" + msg.content,\n          \"账号被封禁\",\n          {\n            confirmButtonText: \"确定\",\n            callback: (action) => {\n              this.onExit();\n            },\n          }\n        );\n        return;\n      }\n    },\n    onExit() {\n      this.$wsApi.close(3000);\n      sessionStorage.removeItem(\"accessToken\");\n      location.href = \"/\";\n    },\n    playAudioTip() {\n      // 离线消息不播放铃声\n      if (this.$store.getters.isLoading()) {\n        return;\n      }\n      // 防止过于密集播放\n      if (new Date().getTime() - this.lastPlayAudioTime > 1000) {\n        this.lastPlayAudioTime = new Date().getTime();\n        let audio = new Audio();\n        let url = require(`@/assets/audio/tip.wav`);\n        audio.src = url;\n        audio.play();\n      }\n    },\n    showSetting() {\n      this.showSettingDialog = true;\n    },\n    switchUi(code) {\n      this.$store.commit(\"changeViewCode\", code);\n    },\n    closeSetting() {\n      this.showSettingDialog = false;\n    },\n    loadFriendInfo(id) {\n      if(String(id).includes('_')){\n\t\t\t\tid = String(id).split('_')[0];\n\t\t\t}\n      let friend = this.$store.getters.findFriend(id);\n      if (!friend) {\n        // 🔧 修复：如果是当前用户自己，返回用户自己的信息\n        const currentUser = this.$store.state.userStore.userInfo;\n        if (currentUser && currentUser.id == id) {\n          friend = {\n            id: id,\n            nickName: currentUser.nickName || \"我\",\n            showNickName: currentUser.nickName || \"我\",\n            headImage: currentUser.headImageThumb || currentUser.headImage || \"\",\n          };\n        } else {\n          // 其他未知用户\n        friend = {\n          id: id,\n            nickName: \"未知用户\",\n          showNickName: \"未知用户\",\n          headImage: \"\",\n        };\n        }\n      }\n      return friend;\n    },\n    loadGroupInfo(id) {\n      let group = this.$store.getters.findGroup(id);\n      if (!group) {\n        group = {\n          id: id,\n          showGroupName: \"未知群聊\",\n          headImageThumb: \"\",\n        };\n      }\n      return group;\n    },\n    // 新增方法：触发切换到聊天视图\n    onChatItemClick(chatData) {\n      // 触发父组件的事件，切换到聊天视图\n      this.$emit('showChat', chatData);\n    },\n    onFriendClick(friendData) {\n      // 触发父组件的事件，切换到好友详情视图\n      this.$emit('showFriend', friendData);\n    },\n    onGroupClick(groupData) {\n      // 构造聊天数据\n      let chatData = {\n        type: \"GROUP\",\n        targetId: groupData.id,\n        showName: groupData.showGroupName,\n        headImage: groupData.headImageThumb,\n      };\n      this.$emit('showChat', chatData);\n    },\n  },\n  computed: {\n    uiStore() {\n      return this.$store.state.uiStore;\n    },\n    unreadCount() {\n      let unreadCount = 0;\n      let chats = this.$store.state.chatStore.chats;\n      chats.forEach((chat) => {\n        if (!chat.delete) {\n          unreadCount += chat.unreadCount;\n        }\n      });\n      return unreadCount;\n    },\n  },\n  watch: {\n    unreadCount: {\n      handler(newCount, oldCount) {\n        let tip = newCount > 0 ? `${newCount}条未读` : \"\";\n        this.$elm.setTitleTip(tip);\n      },\n      immediate: true,\n    },\n  },\n  mounted() {\n    this.init();\n  },\n  // 添加activated钩子，当组件重新显示时触发\n  activated() {\n    console.log('InboxPlugin组件重新激活');\n    // 刷新聊天列表数据\n    this.$nextTick(() => {\n      this.$store.commit('refreshChats');\n    });\n  },\n  // 添加deactivated钩子，当组件被隐藏时触发\n  deactivated() {\n    console.log('InboxPlugin组件被隐藏');\n  },\n  unmounted() {\n    console.log(\"InboxPlugin组件卸载\")\n    // 只有在真正卸载时才关闭WebSocket连接\n    if (this.$wsApi) {\n      this.$wsApi.close();\n    }\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.home-page {\n  height: 100vh;\n  justify-content: center;\n  align-items: center;\n\n  overflow: hidden;\n  background: var(--im-color-primary-light-9);\n  background-color: #f6f6f6;\n  //background-image: url('../assets/image/background.jpg');\n\n\n  .navi-bar {\n    --icon-font-size: 22px;\n    width: var(--width);\n    background: var(--im-color-primary-light-1);\n    padding: 10px 8px;  /* 调整内边距适应水平布局 */\n\n    .top{\n      margin-left: auto;\n    }\n\n    .navi-bar-box {\n      display: flex;\n\n      justify-content: space-between;\n      align-items: center;  /* 垂直居中 */\n\n      .botoom {\n        margin-bottom: 0;  /* 移除底部边距 */\n      }\n    }\n\n    .menu {\n\n      display: flex;\n\n      justify-content: center;\n      align-content: center;\n\n      .menu-item {\n        margin-bottom: 0;  /* 移除底部边距 */\n        margin-right: 12px;  /* 改为右侧边距 */\n      }\n    }\n\n    .user-head-image {\n      display: flex;\n      justify-content: center;\n    }\n\n    .menu {\n      //margin-top: 10px;\n      display: flex;\n\n      justify-content: center;\n      align-content: center;\n\n      .link {\n        text-decoration: none;\n      }\n\n      .router-link-active .menu-item {\n        color: #fff;\n        background: var(--im-color-primary-light-2);\n      }\n\n      .link:not(.router-link-active) .menu-item:hover {\n        color: var(--im-color-primary-light-7);\n      }\n\n      .menu-item {\n        position: relative;\n        color: var(--im-color-primary-light-4);\n        width: var(--width);\n\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        margin-bottom: 12px;\n\n        .icon {\n          font-size: var(--icon-font-size);\n        }\n\n        .unread-text {\n          position: absolute;\n          background-color: var(--im-color-danger);\n          left: 28px;\n          top: 8px;\n          color: white;\n          border-radius: 30px;\n          padding: 0 5px;\n          font-size: var(--im-font-size-smaller);\n          text-align: center;\n          white-space: nowrap;\n          border: 1px solid #f1e5e5;\n        }\n      }\n    }\n\n    .botoom-item {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      height: 12px;\n      width: 100%;\n      padding: 5px;\n      cursor: pointer;\n      color: var(--im-color-primary-light-4);\n      font-size: var(--icon-font-size);\n\n      .icon {\n        font-size: var(--icon-font-size);\n      }\n\n      &:hover {\n        font-weight: 600;\n        color: var(--im-color-primary-light-7);\n      }\n    }\n  }\n\n  .content-box {\n    flex: 1;\n    padding: 0;\n    background-color: #fff;\n    text-align: center;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxPlugin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxPlugin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./InboxPlugin.vue?vue&type=template&id=6cc8846c&scoped=true\"\nimport script from \"./InboxPlugin.vue?vue&type=script&lang=js\"\nexport * from \"./InboxPlugin.vue?vue&type=script&lang=js\"\nimport style0 from \"./InboxPlugin.vue?vue&type=style&index=0&id=6cc8846c&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6cc8846c\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"plugin-chat-container\"},[_c('div',{staticClass:\"back-button-container\"},[_c('el-button',{staticClass:\"back-button\",attrs:{\"type\":\"primary\",\"icon\":\"el-icon-arrow-left\",\"size\":\"small\"},on:{\"click\":_vm.goBack}},[_vm._v(\" 返回 \")])],1),(_vm.isShowingChat)?_c('div',{staticClass:\"chat-content\"},[(_vm.uiStore.viewCode === 1)?_c('editor-chat',{attrs:{\"chatData\":_vm.currentChatData}}):_vm._e(),(_vm.uiStore.viewCode === 2)?_c('editor-friend',{on:{\"startChat\":_vm.handleStartChat}}):_vm._e(),(_vm.uiStore.viewCode === 3)?_c('editor-group'):_vm._e()],1):_vm._e(),(_vm.isShowingFriend)?_c('div',{staticClass:\"friend-content\"},[_c('editor-friend',{attrs:{\"friendData\":_vm.friendData},on:{\"startChat\":_vm.handleStartChat}})],1):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"chat-page\"},[_c('el-container',{staticClass:\"chat-box\"},[(_vm.isPCTerminalChat)?_c('container-manager'):_vm._e(),(_vm.chatStore.activeChat && !_vm.isAIChat)?_c('chat-box',{attrs:{\"chat\":_vm.chatStore.activeChat}}):_vm._e()],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-box\",on:{\"click\":function($event){return _vm.closeRefBox()},\"mousemove\":function($event){return _vm.readedMessage()}}},[_c('el-container',[_c('el-header',{attrs:{\"height\":\"50px\"}},[_c('span',[_vm._v(_vm._s(_vm.title))]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(this.chat.type == 'GROUP'),expression:\"this.chat.type == 'GROUP'\"}],staticClass:\"btn-side el-icon-more\",attrs:{\"title\":\"群聊信息\"},on:{\"click\":function($event){_vm.showSide = !_vm.showSide}}})]),_c('el-main',{staticStyle:{\"padding\":\"0\"}},[_c('el-container',[_c('el-container',{staticClass:\"content-box\"},[_c('el-main',{staticClass:\"im-chat-main\",attrs:{\"id\":\"chatScrollBox\"},on:{\"scroll\":_vm.onScroll}},[_c('div',{staticClass:\"im-chat-box\"},[_c('ul',_vm._l((_vm.messageList),function(msgInfo,idx){return _c('li',{key:`${msgInfo.tmpId || msgInfo.id || idx}-${msgInfo.sendTime || idx}`},[(idx >= _vm.showMinIdx)?_c('chat-message-item',{attrs:{\"mine\":_vm.isMessageFromCurrentUser(msgInfo),\"headImage\":_vm.headImage(msgInfo),\"showName\":_vm.showName(msgInfo),\"msgInfo\":msgInfo,\"groupMembers\":_vm.groupMembers},on:{\"call\":function($event){return _vm.onCall(msgInfo.type)},\"delete\":_vm.deleteMessage,\"recall\":_vm.recallMessage}}):_vm._e()],1)}),0)])]),_c('el-footer',{staticClass:\"im-chat-footer\",attrs:{\"height\":\"220px\"}},[_c('div',{staticClass:\"chat-tool-bar\"},[_c('div',{ref:\"emotion\",staticClass:\"icon iconfont icon-emoji\",attrs:{\"title\":\"表情\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showEmotionBox()}}}),_c('div',{attrs:{\"title\":\"发送图片\"}},[_c('file-upload',{attrs:{\"action\":'/image/upload',\"maxSize\":100 * 1024 * 1024,\"fileTypes\":['image/jpeg', 'image/png', 'image/jpg', 'image/webp', 'image/gif']},on:{\"before\":_vm.onImageBefore,\"success\":_vm.onImageSuccess,\"fail\":_vm.onImageFail}},[_c('i',{staticClass:\"el-icon-picture-outline\"})])],1),_c('div',{attrs:{\"title\":\"发送文件\"}},[_c('file-upload',{ref:\"fileUpload\",attrs:{\"action\":'/file/upload',\"maxSize\":10 * 1024 * 1024},on:{\"before\":_vm.onFileBefore,\"success\":_vm.onFileSuccess,\"fail\":_vm.onFileFail}},[_c('i',{staticClass:\"el-icon-wallet\"})])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chat.type == 'GROUP' && _vm.memberSize <= 500),expression:\"chat.type == 'GROUP' && memberSize <= 500\"}],staticClass:\"icon iconfont icon-receipt\",class:_vm.isReceipt ? 'chat-tool-active' : '',attrs:{\"title\":\"回执消息\"},on:{\"click\":_vm.onSwitchReceipt}}),_c('div',{staticClass:\"el-icon-microphone\",attrs:{\"title\":\"发送语音\"},on:{\"click\":function($event){return _vm.showRecordBox()}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chat.type == 'PRIVATE'),expression:\"chat.type == 'PRIVATE'\"}],staticClass:\"el-icon-phone-outline\",attrs:{\"title\":\"语音通话\"},on:{\"click\":function($event){return _vm.showPrivateVideo('voice')}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chat.type == 'GROUP'),expression:\"chat.type == 'GROUP'\"}],staticClass:\"el-icon-phone-outline\",attrs:{\"title\":\"语音通话\"},on:{\"click\":function($event){return _vm.onGroupVideo()}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.chat.type == 'PRIVATE'),expression:\"chat.type == 'PRIVATE'\"}],staticClass:\"el-icon-video-camera\",attrs:{\"title\":\"视频通话\"},on:{\"click\":function($event){return _vm.showPrivateVideo('video')}}}),_c('div',{staticClass:\"el-icon-chat-dot-round\",attrs:{\"title\":\"聊天记录\"},on:{\"click\":function($event){return _vm.showHistoryBox()}}})]),_c('div',{staticClass:\"send-content-area\"},[_c('ChatInput',{ref:\"chatInputEditor\",attrs:{\"ownerId\":_vm.chat && _vm.chat.type === 'GROUP' ? _vm.group.ownerId : _vm.mine.id,\"targetUserId\":_vm.chat && _vm.chat.type === 'PRIVATE' ? _vm.chat.targetId : null,\"group-members\":_vm.groupMembers},on:{\"submit\":_vm.sendMessage}}),_c('div',{staticClass:\"send-btn-area\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-s-promotion\"},on:{\"click\":function($event){return _vm.notifySend()}}},[_vm._v(\"发送\")])],1)],1)])],1),(_vm.showSide)?_c('el-aside',{staticClass:\"chat-group-side-box\",attrs:{\"width\":\"320px\"}},[_c('chat-group-side',{attrs:{\"group\":_vm.group,\"groupMembers\":_vm.groupMembers},on:{\"reload\":function($event){return _vm.loadGroup(_vm.group.id)}}})],1):_vm._e()],1)],1),_c('emotion',{ref:\"emoBox\",on:{\"emotion\":_vm.onEmotion}}),_c('chat-record',{attrs:{\"visible\":_vm.showRecord},on:{\"close\":_vm.closeRecordBox,\"send\":_vm.onSendRecord}}),_c('group-member-selector',{ref:\"rtcSel\",attrs:{\"groupId\":_vm.group.id},on:{\"complete\":_vm.onInviteOk}}),_c('rtc-group-join',{ref:\"rtcJoin\",attrs:{\"groupId\":_vm.group.id}}),_c('chat-history',{attrs:{\"visible\":_vm.showHistory,\"chat\":_vm.chat,\"friend\":_vm.friend,\"group\":_vm.group,\"groupMembers\":_vm.groupMembers},on:{\"close\":_vm.closeHistoryBox}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"chat-box\" @click=\"closeRefBox()\" @mousemove=\"readedMessage()\">\n\t\t<el-container>\n\t\t\t<el-header height=\"50px\">\n\t\t\t\t<span>{{ title }}</span>\n\t\t\t\t<span title=\"群聊信息\" v-show=\"this.chat.type == 'GROUP'\" class=\"btn-side el-icon-more\"\n\t\t\t\t\t@click=\"showSide = !showSide\"></span>\n\t\t\t</el-header>\n\t\t\t<el-main style=\"padding: 0;\">\n\t\t\t\t<el-container>\n\t\t\t\t\t<el-container class=\"content-box\">\n\t\t\t\t\t\t<el-main class=\"im-chat-main\" id=\"chatScrollBox\" @scroll=\"onScroll\">\n\t\t\t\t\t\t\t<div class=\"im-chat-box\">\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<li v-for=\"(msgInfo, idx) in messageList\" :key=\"`${msgInfo.tmpId || msgInfo.id || idx}-${msgInfo.sendTime || idx}`\">\n\t\t\t\t\t\t\t\t\t\t<chat-message-item v-if=\"idx >= showMinIdx\" @call=\"onCall(msgInfo.type)\"\n\t\t\t\t\t\t\t\t\t\t\t:mine=\"isMessageFromCurrentUser(msgInfo)\" :headImage=\"headImage(msgInfo)\"\n\t\t\t\t\t\t\t\t\t\t\t:showName=\"showName(msgInfo)\" :msgInfo=\"msgInfo\"\n\t\t\t\t\t\t\t\t\t\t\t:groupMembers=\"groupMembers\" @delete=\"deleteMessage\"\n\t\t\t\t\t\t\t\t\t\t\t@recall=\"recallMessage\">\n\t\t\t\t\t\t\t\t\t\t</chat-message-item>\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-main>\n\t\t\t\t\t\t<el-footer height=\"220px\" class=\"im-chat-footer\">\n\t\t\t\t\t\t\t<div class=\"chat-tool-bar\">\n\t\t\t\t\t\t\t\t<div title=\"表情\" class=\"icon iconfont icon-emoji\" ref=\"emotion\"\n\t\t\t\t\t\t\t\t\t@click.stop=\"showEmotionBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送图片\">\n\t\t\t\t\t\t\t\t\t<file-upload :action=\"'/image/upload'\" :maxSize=\"100 * 1024 * 1024\"\n\t\t\t\t\t\t\t\t\t\t:fileTypes=\"['image/jpeg', 'image/png', 'image/jpg', 'image/webp', 'image/gif']\"\n\t\t\t\t\t\t\t\t\t\t@before=\"onImageBefore\" @success=\"onImageSuccess\" @fail=\"onImageFail\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-picture-outline\"></i>\n\t\t\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送文件\">\n\t\t\t\t\t\t\t\t\t<file-upload ref=\"fileUpload\" :action=\"'/file/upload'\" :maxSize=\"10 * 1024 * 1024\"\n\t\t\t\t\t\t\t\t\t\t@before=\"onFileBefore\" @success=\"onFileSuccess\" @fail=\"onFileFail\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-wallet\"></i>\n\t\t\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"回执消息\" v-show=\"chat.type == 'GROUP' && memberSize <= 500\"\n\t\t\t\t\t\t\t\t\tclass=\"icon iconfont icon-receipt\" :class=\"isReceipt ? 'chat-tool-active' : ''\"\n\t\t\t\t\t\t\t\t\t@click=\"onSwitchReceipt\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送语音\" class=\"el-icon-microphone\" @click=\"showRecordBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"语音通话\" v-show=\"chat.type == 'PRIVATE'\" class=\"el-icon-phone-outline\"\n\t\t\t\t\t\t\t\t\t@click=\"showPrivateVideo('voice')\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"语音通话\" v-show=\"chat.type == 'GROUP'\" class=\"el-icon-phone-outline\"\n\t\t\t\t\t\t\t\t\t@click=\"onGroupVideo()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"视频通话\" v-show=\"chat.type == 'PRIVATE'\" class=\"el-icon-video-camera\"\n\t\t\t\t\t\t\t\t\t@click=\"showPrivateVideo('video')\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"聊天记录\" class=\"el-icon-chat-dot-round\" @click=\"showHistoryBox()\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"send-content-area\">\n\t\t\t\t\t\t\t\t<ChatInput \n\t\t\t\t\t\t\t\t\t:ownerId=\"chat && chat.type === 'GROUP' ? group.ownerId : mine.id\" \n\t\t\t\t\t\t\t\t\t:targetUserId=\"chat && chat.type === 'PRIVATE' ? chat.targetId : null\"\n\t\t\t\t\t\t\t\t\tref=\"chatInputEditor\" \n\t\t\t\t\t\t\t\t\t:group-members=\"groupMembers\"\n\t\t\t\t\t\t\t\t\t@submit=\"sendMessage\" />\n\t\t\t\t\t\t\t\t<div class=\"send-btn-area\">\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-s-promotion\"\n\t\t\t\t\t\t\t\t\t\t@click=\"notifySend()\">发送</el-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-footer>\n\t\t\t\t\t</el-container>\n\t\t\t\t\t<el-aside class=\"chat-group-side-box\" width=\"320px\" v-if=\"showSide\">\n\t\t\t\t\t\t<chat-group-side :group=\"group\" :groupMembers=\"groupMembers\" @reload=\"loadGroup(group.id)\">\n\t\t\t\t\t\t</chat-group-side>\n\t\t\t\t\t</el-aside>\n\t\t\t\t</el-container>\n\t\t\t</el-main>\n\t\t\t<emotion ref=\"emoBox\" @emotion=\"onEmotion\"></Emotion>\n\t\t\t<chat-record :visible=\"showRecord\" @close=\"closeRecordBox\" @send=\"onSendRecord\"></chat-record>\n\t\t\t<group-member-selector ref=\"rtcSel\" :groupId=\"group.id\" @complete=\"onInviteOk\"></group-member-selector>\n\t\t\t<rtc-group-join ref=\"rtcJoin\" :groupId=\"group.id\"></rtc-group-join>\n\t\t\t<chat-history :visible=\"showHistory\" :chat=\"chat\" :friend=\"friend\" :group=\"group\"\n\t\t\t\t:groupMembers=\"groupMembers\" @close=\"closeHistoryBox\"></chat-history>\n\t\t</el-container>\n\t</div>\n</template>\n\n<script>\nimport ChatGroupSide from \"./ChatGroupSide.vue\";\nimport ChatMessageItem from \"./ChatMessageItem.vue\";\nimport FileUpload from \"../common/FileUpload.vue\";\nimport Emotion from \"../common/Emotion.vue\";\nimport ChatRecord from \"./ChatRecord.vue\";\nimport ChatHistory from \"./ChatHistory.vue\";\nimport ChatAtBox from \"./ChatAtBox.vue\"\nimport GroupMemberSelector from \"../group/GroupMemberSelector.vue\"\nimport RtcGroupJoin from \"../rtc/RtcGroupJoin.vue\"\nimport ChatInput from \"./ChatInput\";\nimport VSCodeAdapter from '../../api/vscode-adapter.js';\n\n// 全局适配器实例，提升性能\nconst globalAdapter = VSCodeAdapter;\n\nexport default {\n\tname: \"chatPrivate\",\n\tcomponents: {\n\t\tChatInput,\n\t\tChatMessageItem,\n\t\tFileUpload,\n\t\tChatGroupSide,\n\t\tEmotion,\n\t\tChatRecord,\n\t\tChatHistory,\n\t\tChatAtBox,\n\t\tGroupMemberSelector,\n\t\tRtcGroupJoin\n\t},\n\tprops: {\n\t\tchat: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuserInfo: {},\n\t\t\tgroup: {},\n\t\t\tgroupMembers: [],\n\t\t\tsendImageUrl: \"\",\n\t\t\tsendImageFile: \"\",\n\t\t\tplaceholder: \"\",\n\t\t\tisReceipt: true,\n\t\t\tshowRecord: false, // 是否显示语音录制弹窗\n\t\t\tshowSide: false, // 是否显示群聊信息栏\n\t\t\tshowHistory: false, // 是否显示历史聊天记录\n\t\t\tlockMessage: false, // 是否锁定发送，\n\t\t\tshowMinIdx: 0, // 下标低于showMinIdx的消息不显示，否则页面会很卡置\n\t\t\treqQueue: [],\n\t\t\tisSending: false,\n\t\t\tscrollThrottle: null, // 滚动节流计时器\n\t\t\tscrollTimer: null, // 滚动防抖计时器\n\t\t\tlastScrollTime: 0,\n\t\t\t// 用于 [飞轮效应] 监听VSCode发送的文件事件\n\t\t\tactiveEventBus: null,\n\t\t\tactiveEventName: null\n\t\t}\n\t},\n\tmethods: {\n\t\tmoveChatToTop() {\n\t\t\tlet chatIdx = this.$store.getters.findChatIdx(this.chat);\n\t\t\tthis.$store.commit(\"moveTop\", chatIdx);\n\t\t},\n\t\tcloseRefBox() {\n\t\t\tthis.$refs.emoBox.close();\n\t\t\t// this.$refs.atBox.close();\n\t\t},\n\t\tonCall(type) {\n\t\t\tif (type == this.$enums.MESSAGE_TYPE.ACT_RT_VOICE) {\n\t\t\t\tthis.showPrivateVideo('voice');\n\t\t\t} else if (type == this.$enums.MESSAGE_TYPE.ACT_RT_VIDEO) {\n\t\t\t\tthis.showPrivateVideo('video');\n\t\t\t}\n\t\t},\n\t\tonSwitchReceipt() {\n\t\t\tthis.isReceipt = !this.isReceipt;\n\t\t\tthis.refreshPlaceHolder();\n\t\t},\n\t\tonImageSuccess(data, file) {\n\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\tmsgInfo.content = JSON.stringify(data);\n\t\t\tmsgInfo.receipt = this.isReceipt;\n\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\tmsgInfo.loadStatus = 'ok';\n\t\t\t\tmsgInfo.id = m.id;\n\t\t\t\tthis.isReceipt = false;\n\t\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t\t})\n\t\t},\n\t\tonImageFail(e, file) {\n\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\tmsgInfo.loadStatus = 'fail';\n\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t},\n\t\tonImageBefore(file) {\n\t\t\t// 被封禁提示\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 保存图片到VSCode工作区\n\t\t\tthis.saveFileToWorkspace(file);\n\t\t\t\n\t\t\tlet url = URL.createObjectURL(file);\n\t\t\tlet data = {\n\t\t\t\toriginUrl: url,\n\t\t\t\tthumbUrl: url\n\t\t\t}\n\t\t\tlet msgInfo = {\n\t\t\t\tid: 0,\n\t\t\t\ttmpId: this.generateId(),\n\t\t\t\tfileId: file.uid,\n\t\t\t\tsendId: this.mine.id,\n\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\tselfSend: true,\n\t\t\t\ttype: 1,\n\t\t\t\treadedCount: 0,\n\t\t\t\tloadStatus: \"loading\",\n\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t}\n\t\t\t// 填充对方id\n\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t// 插入消息\n\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t\t// 会话置顶\n\t\t\tthis.moveChatToTop();\n\t\t\t// 滚动到底部\n\t\t\tthis.scrollToBottom();\n\t\t\t// 借助file对象保存\n\t\t\tfile.msgInfo = msgInfo;\n\t\t},\n\t\tonFileSuccess(url, file) {\n\t\t\tlet data = {\n\t\t\t\tname: file.name,\n\t\t\t\tsize: file.size,\n\t\t\t\turl: url\n\t\t\t}\n\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\tmsgInfo.content = JSON.stringify(data);\n\t\t\tmsgInfo.receipt = this.isReceipt\n\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\tmsgInfo.loadStatus = 'ok';\n\t\t\t\tmsgInfo.id = m.id;\n\t\t\t\tthis.isReceipt = false;\n\t\t\t\tthis.refreshPlaceHolder();\n\t\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t\t})\n\t\t},\n\t\tonFileFail(e, file) {\n\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\tmsgInfo.loadStatus = 'fail';\n\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t},\n\t\tonFileBefore(file) {\n\t\t\t// 被封禁提示\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 保存文件到VSCode工作区\n\t\t\tthis.saveFileToWorkspace(file);\n\t\t\t\n\t\t\tlet url = URL.createObjectURL(file);\n\t\t\tlet data = {\n\t\t\t\tname: file.name,\n\t\t\t\tsize: file.size,\n\t\t\t\turl: url\n\t\t\t}\n\t\t\tlet msgInfo = {\n\t\t\t\tid: 0,\n\t\t\t\ttmpId: this.generateId(),\n\t\t\t\tsendId: this.mine.id,\n\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\tselfSend: true,\n\t\t\t\ttype: 2,\n\t\t\t\tloadStatus: \"loading\",\n\t\t\t\treadedCount: 0,\n\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t}\n\t\t\t// 填充对方id\n\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t// 插入消息\n\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t\t// 会话置顶\n\t\t\tthis.moveChatToTop();\n\t\t\t// 滚动到底部\n\t\t\tthis.scrollToBottom();\n\t\t\t// 借助file对象透传\n\t\t\tfile.msgInfo = msgInfo;\n\t\t},\n\t\tasync saveFileToWorkspace(file) {\n\t\t\ttry {\n\t\t\t\tconsole.log('[ChatBox] saveFileToWorkspace called with file:', file.name);\n\t\t\t\t\n\t\t\t\tif (!this.$vscode) {\n\t\t\t\t\tconsole.warn('[ChatBox] VSCode services not available');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// 等待服务初始化\n\t\t\t\tif (this.$vscode.waitForInitialization) {\n\t\t\t\t\tawait this.$vscode.waitForInitialization();\n\t\t\t\t}\n\n\t\t\t\t// 使用原始文件名，重复文件名处理由SharedServicesAccessor负责\n\t\t\t\tconst fileName = file.name;\n\t\t\t\t\n\t\t\t\t// 获取会话ID\n\t\t\t\tconst sessionId = this.chat.targetId || 'unknown';\n\t\t\t\t\n\t\t\t\t// 使用 SharedServicesAccessor 的 saveFileToWorkspace 方法\n\t\t\t\t// 这个方法会自动处理 VSBuffer 转换\n\t\t\t\tconst success = await this.$vscode.saveFileToWorkspace(file, fileName, sessionId);\n\t\t\t\t\n\t\t\t\tif (success) {\n\t\t\t\t\tconsole.log('[ChatBox] File saved successfully via SharedServicesAccessor:', {\n\t\t\t\t\t\tfileName: fileName,\n\t\t\t\t\t\tfileSize: file.size,\n\t\t\t\t\t\tsessionId: sessionId\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error('[ChatBox] Failed to save file via SharedServicesAccessor');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatBox] Failed to save file to workspace:', error);\n\t\t\t}\n\t\t},\n\t\treadFileAsArrayBuffer(file) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst reader = new FileReader();\n\t\t\t\treader.onload = (event) => resolve(event.target.result);\n\t\t\t\treader.onerror = (error) => reject(error);\n\t\t\t\treader.readAsArrayBuffer(file);\n\t\t\t});\n\t\t},\n\t\tonCloseSide() {\n\t\t\tthis.showSide = false;\n\t\t},\n\t\tonScrollToTop() {\n\t\t\t// 多展示10条信息\n\t\t\tthis.showMinIdx = this.showMinIdx > 10 ? this.showMinIdx - 10 : 0;\n\t\t},\n\t\tonScroll(e) {\n\t\t\t// 清理之前的节流定时器\n\t\t\tif (this.scrollThrottle) {\n\t\t\t\tclearTimeout(this.scrollThrottle);\n\t\t\t}\n\n\t\t\t// 节流处理滚动事件\n\t\t\tthis.scrollThrottle = setTimeout(() => {\n\t\t\t\tlet scrollElement = e.target;\n\t\t\t\tlet scrollTop = scrollElement.scrollTop;\n\t\t\t\t\n\t\t\t\tif (scrollTop < 30) {\n\t\t\t\t\t// 在顶部时加载更多消息\n\t\t\t\t\tthis.showMinIdx = this.showMinIdx > 20 ? this.showMinIdx - 20 : 0;\n\t\t\t\t}\n\t\t\t}, 100); // 100ms节流\n\t\t},\n\t\tshowEmotionBox() {\n\t\t\tlet width = this.$refs.emotion.offsetWidth;\n\t\t\tlet left = this.$elm.fixLeft(this.$refs.emotion);\n\t\t\tlet top = this.$elm.fixTop(this.$refs.emotion);\n\t\t\tthis.$refs.emoBox.open({\n\t\t\t\tx: left + width / 2,\n\t\t\t\ty: top\n\t\t\t})\n\t\t},\n\t\tonEmotion(emoText) {\n\t\t\tthis.$refs.chatInputEditor.insertEmoji(emoText);\n\t\t},\n\t\tshowRecordBox() {\n\t\t\tthis.showRecord = true;\n\t\t},\n\t\tcloseRecordBox() {\n\t\t\tthis.showRecord = false;\n\t\t},\n\t\tshowPrivateVideo(mode) {\n\t\t\t// 检查是否被封禁\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet rtcInfo = {\n\t\t\t\tmode: mode,\n\t\t\t\tisHost: true,\n\t\t\t\tfriend: this.friend,\n\t\t\t}\n\t\t\t// 通过home.vue打开单人视频窗口\n\t\t\tthis.$eventBus.$emit(\"openPrivateVideo\", rtcInfo);\n\t\t},\n\t\tonGroupVideo() {\n\t\t\t// 检查是否被封禁\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 邀请成员发起通话\n\t\t\tlet ids = [this.mine.id];\n\t\t\tlet maxChannel = this.$store.state.configStore.webrtc.maxChannel;\n\t\t\tthis.$refs.rtcSel.open(maxChannel, ids, ids);\n\t\t},\n\t\tonInviteOk(members) {\n\t\t\tif (members.length < 2) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet userInfos = [];\n\t\t\tmembers.forEach(m => {\n\t\t\t\tuserInfos.push({\n\t\t\t\t\tid: m.userId,\n\t\t\t\t\tnickName: m.showNickName,\n\t\t\t\t\theadImage: m.headImage,\n\t\t\t\t\tisCamera: false,\n\t\t\t\t\tisMicroPhone: true\n\t\t\t\t})\n\t\t\t})\n\t\t\tlet rtcInfo = {\n\t\t\t\tisHost: true,\n\t\t\t\tgroupId: this.group.id,\n\t\t\t\tinviterId: this.mine.id,\n\t\t\t\tuserInfos: userInfos\n\t\t\t}\n\t\t\t// 通过home.vue打开多人视频窗口\n\t\t\tthis.$eventBus.$emit(\"openGroupVideo\", rtcInfo);\n\t\t},\n\t\tshowHistoryBox() {\n\t\t\tthis.showHistory = true;\n\t\t},\n\t\tcloseHistoryBox() {\n\t\t\tthis.showHistory = false;\n\t\t},\n\t\tonSendRecord(data) {\n\t\t\t// 检查是否被封禁\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet msgInfo = {\n\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\ttype: 3,\n\t\t\t\treceipt: this.isReceipt\n\t\t\t}\n\t\t\t// 填充对方id\n\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\tm.selfSend = true;\n\t\t\t\tthis.$store.commit(\"insertMessage\", [m, this.chat]);\n\t\t\t\t// 会话置顶\n\t\t\t\tthis.moveChatToTop();\n\t\t\t\t// 保持输入框焦点\n\t\t\t\tthis.$refs.chatInputEditor.focus();\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\t// 关闭录音窗口\n\t\t\t\tthis.showRecord = false;\n\t\t\t\tthis.isReceipt = false;\n\t\t\t\tthis.refreshPlaceHolder();\n\t\t\t})\n\t\t},\n\t\tfillTargetId(msgInfo, targetId) {\n\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\tmsgInfo.groupId = targetId;\n\t\t\t} else if (this.chat.isTerminalChat || this.chat.isTerminalInbox) {\n\t\t\t\t// 🔧 修正：终端会话处理（支持新旧格式）\n\t\t\t\tconst parts = targetId.split('_');\n\t\t\t\tconst userId = parseInt(parts[0]);\n\t\t\t\t\n\t\t\t\tmsgInfo.recvId = userId; // 用户自己的ID\n\t\t\t\t\n\t\t\t\t// 🔧 处理新的目标终端模式\n\t\t\t\tif (this.chat.isTerminalChat) {\n\t\t\t\t\tmsgInfo.targetTerminal = this.chat.senderTerminal; // 发送给发送端终端\n\t\t\t\t\tmsgInfo.senderTerminal = this.getCurrentTerminal(); // 当前终端作为发送端\n\t\t\t\t} \n\t\t\t\t// 🔧 兼容旧的终端收件箱模式\n\t\t\t\telse if (this.chat.isTerminalInbox) {\n\t\t\t\t\tconst receivingTerminal = parseInt(parts[1]);\n\t\t\t\t\tmsgInfo.targetTerminal = receivingTerminal; // 保持兼容性\n\t\t\t\t\tmsgInfo.senderTerminal = this.getCurrentTerminal();\n\t\t\t\t}\n\t\t\t\tconsole.log(`🔧 [ChatBox] 终端消息填充: 目标终端=${msgInfo.targetTerminal}, 发送端=${msgInfo.senderTerminal}`);\n\t\t\t} else {\n\t\t\t\tmsgInfo.recvId = targetId;\n\t\t\t\tmsgInfo.senderTerminal = this.getCurrentTerminal();\n\t\t\t}\n\t\t},\n\t\tnotifySend() {\n\t\t\tthis.$refs.chatInputEditor.submit();\n\t\t},\n\t\tasync sendMessage(fullList) {\n\t\t\tconsole.log('[ChatBox] 📤 开始发送消息:', fullList);\n\t\t\t\n\t\t\tthis.readedMessage();\n\t\t\t// 检查是否被封禁\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tlet sendText = this.isReceipt ? \"【回执消息】\" : \"\";\n\t\t\tlet promiseList = [];\n\t\t\tlet hasSuccessfulSend = false;\n\t\t\t\n\t\t\tfor (let i = 0; i < fullList.length; i++) {\n\t\t\t\tlet msg = fullList[i];\n\t\t\t\ttry {\n\t\t\t\t\tswitch (msg.type) {\n\t\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\t\tawait this.sendTextMessage(sendText + msg.content, msg.atUserIds);\n\t\t\t\t\t\t\thasSuccessfulSend = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"image\":\n\t\t\t\t\t\t\tawait this.sendImageMessage(msg.content.file);\n\t\t\t\t\t\t\thasSuccessfulSend = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"file\":\n\t\t\t\t\t\t\tawait this.sendFileMessage(msg.content.file);\n\t\t\t\t\t\t\thasSuccessfulSend = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('[ChatBox] ❌ 发送消息失败:', error);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 🔧 只有在所有消息发送完成后才重置编辑器\n\t\t\tif (hasSuccessfulSend) {\n\t\t\t\tconsole.log('[ChatBox] ✅ 消息发送成功，重置编辑器并滚动到底部');\n\t\t\t\tthis.resetEditor();\n\t\t\t\t// 确保UI更新后再滚动\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tsendImageMessage(file) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.onImageBefore(file);\n\t\t\t\tlet formData = new FormData()\n\t\t\t\tformData.append('file', file)\n\t\t\t\tthis.$http.post(\"/image/upload\", formData, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.onImageSuccess(data, file);\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((res) => {\n\t\t\t\t\tthis.onImageFail(res, file);\n\t\t\t\t\treject();\n\t\t\t\t})\n\t\t\t\tthis.$nextTick(() => this.$refs.chatInputEditor.focus());\n\t\t\t\tthis.scrollToBottom();\n\t\t\t});\n\t\t},\n\t\tsendTextMessage(sendText, atUserIds) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconsole.log('[ChatBox] 📝 发送文本消息:', { sendText, atUserIds });\n\t\t\t\t\n\t\t\t\tif (!sendText.trim()) {\n\t\t\t\t\tconsole.warn('[ChatBox] ⚠️ 消息内容为空，拒绝发送');\n\t\t\t\t\treject(new Error('消息内容为空'));\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 🔧 第一步：创建临时消息立即显示（模仿文件发送的onFileBefore流程）\n\t\t\t\tlet tempMsgInfo = {\n\t\t\t\t\tid: 0,\n\t\t\t\t\ttmpId: this.generateId(),\n\t\t\t\t\tsendId: this.mine.id,\n\t\t\t\t\tcontent: sendText,\n\t\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\t\tselfSend: true,\n\t\t\t\t\ttype: 0,\n\t\t\t\t\treadedCount: 0,\n\t\t\t\t\tloadStatus: \"loading\", // 标记为发送中\n\t\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(tempMsgInfo, this.chat.targetId);\n\t\t\t\t// 被@人员列表\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\ttempMsgInfo.atUserIds = atUserIds;\n\t\t\t\t\ttempMsgInfo.receipt = this.isReceipt;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('[ChatBox] 📦 立即插入临时消息:', tempMsgInfo);\n\t\t\t\t\n\t\t\t\t// 立即插入临时消息到界面\n\t\t\t\tthis.$store.commit(\"insertMessage\", [tempMsgInfo, this.chat]);\n\t\t\t\t// 会话置顶\n\t\t\t\tthis.moveChatToTop();\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\n\t\t\t\t// 🔧 第二步：发送HTTP请求并更新消息状态（模仿文件发送的onFileSuccess流程）\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tcontent: sendText,\n\t\t\t\t\ttype: 0\n\t\t\t\t};\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t// 被@人员列表\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tmsgInfo.atUserIds = atUserIds;\n\t\t\t\t\tmsgInfo.receipt = this.isReceipt;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('[ChatBox] 📡 准备发送HTTP请求:', msgInfo);\n\t\t\t\tthis.lockMessage = true;\n\t\t\t\t\n\t\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\t\tconsole.log('[ChatBox] ✅ HTTP请求成功，收到响应:', m);\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 创建最终消息对象，包含服务器返回的ID\n\t\t\t\t\tlet finalMsgInfo = JSON.parse(JSON.stringify(tempMsgInfo));\n\t\t\t\t\tfinalMsgInfo.id = m.id;\n\t\t\t\t\tfinalMsgInfo.loadStatus = 'ok';\n\t\t\t\t\tfinalMsgInfo.status = this.$enums.MESSAGE_STATUS.SENDED;\n\t\t\t\t\t// 确保其他字段从服务器响应更新\n\t\t\t\t\tObject.assign(finalMsgInfo, m);\n\t\t\t\t\tfinalMsgInfo.selfSend = true;\n\t\t\t\t\tfinalMsgInfo.sendTime = finalMsgInfo.sendTime || Date.now();\n\t\t\t\t\tfinalMsgInfo.sendId = finalMsgInfo.sendId || this.mine.id;\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 更新消息（这会触发UI更新）\n\t\t\t\t\tconsole.log('[ChatBoxPlugin] 📦 更新最终消息状态:', finalMsgInfo);\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", [finalMsgInfo, this.chat]);\n\t\t\t\t\t\n\t\t\t\t\tthis.isReceipt = false;\n\t\t\t\t\tconsole.log('[ChatBox] ✅ 文本消息处理完成');\n\t\t\t\t\tresolve(finalMsgInfo);\n\t\t\t\t\t\n\t\t\t\t}).catch((error) => {\n\t\t\t\t\tconsole.error('[ChatBox] ❌ HTTP请求失败:', error);\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 发送失败时更新临时消息状态\n\t\t\t\t\tlet failedMsgInfo = JSON.parse(JSON.stringify(tempMsgInfo));\n\t\t\t\t\tfailedMsgInfo.loadStatus = 'fail';\n\t\t\t\t\tfailedMsgInfo.status = this.$enums.MESSAGE_STATUS.FAILED;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", [failedMsgInfo, this.chat]);\n\t\t\t\t\t\n\t\t\t\t\treject(error);\n\t\t\t\t}).finally(() => {\n\t\t\t\t\t// 解除锁定\n\t\t\t\t\tthis.lockMessage = false;\n\t\t\t\t\tthis.isReceipt = false;\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsendFileMessage(file) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet check = this.$refs.fileUpload.beforeUpload(file);\n\t\t\t\tif (check) {\n\t\t\t\t\tthis.$refs.fileUpload.onFileUpload({ file });\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdeleteMessage(msgInfo) {\n\t\t\tthis.$confirm('确认删除消息?', '删除消息', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.$store.commit(\"deleteMessage\", msgInfo);\n\t\t\t});\n\t\t},\n\t\trecallMessage(msgInfo) {\n\t\t\tthis.$confirm('确认撤回消息?', '撤回消息', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tlet url = `/message/${this.chat.type.toLowerCase()}/recall/${msgInfo.id}`\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: url,\n\t\t\t\t\tmethod: 'delete'\n\t\t\t\t}).then((m) => {\n\t\t\t\t\tthis.$message.success(\"消息已撤回\");\n\t\t\t\t\tm.selfSend = true;\n\t\t\t\t\tthis.$store.commit(\"recallMessage\", [m, this.chat]);\n\t\t\t\t})\n\t\t\t});\n\t\t},\n\t\treadedMessage() {\n\t\t\tif (this.chat.unreadCount == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$store.commit(\"resetUnreadCount\", this.chat)\n\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\tvar url = `/message/group/readed?groupId=${this.chat.targetId}`\n\t\t\t} else {\n\t\t\t\turl = `/message/private/readed?friendId=${this.chat.targetId}`\n\t\t\t}\n\t\t\tthis.$http({\n\t\t\t\turl: url,\n\t\t\t\tmethod: 'put'\n\t\t\t}).then(() => { })\n\t\t},\n\t\tloadReaded(fId) {\n\t\t\tthis.$http({\n\t\t\t\turl: `/message/private/maxReadedId?friendId=${fId}`,\n\t\t\t\tmethod: 'get'\n\t\t\t}).then((id) => {\n\t\t\t\tthis.$store.commit(\"readedMessage\", {\n\t\t\t\t\tfriendId: fId,\n\t\t\t\t\tmaxId: id\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tloadGroup(groupId) {\n\t\t\tthis.$http({\n\t\t\t\turl: `/group/find/${groupId}`,\n\t\t\t\tmethod: 'get'\n\t\t\t}).then((group) => {\n\t\t\t\tthis.group = group;\n\t\t\t\tthis.$store.commit(\"updateChatFromGroup\", group);\n\t\t\t\tthis.$store.commit(\"updateGroup\", group);\n\t\t\t});\n\n\t\t\tthis.$http({\n\t\t\t\turl: `/group/members/${groupId}`,\n\t\t\t\tmethod: 'get'\n\t\t\t}).then((groupMembers) => {\n\t\t\t\tthis.groupMembers = groupMembers;\n\t\t\t});\n\t\t},\n\t\tupdateFriendInfo() {\n\t\t\tif (this.isFriend) {\n\t\t\t\t// store的数据不能直接修改，深拷贝一份store的数据\n\t\t\t\tlet friend = JSON.parse(JSON.stringify(this.friend));\n\t\t\t\tfriend.headImage = this.userInfo.headImageThumb;\n\t\t\t\tfriend.nickName = this.userInfo.nickName;\n\t\t\t\tfriend.showNickName = friend.remarkNickName ? friend.remarkNickName : friend.nickName;\n\t\t\t\tthis.$store.commit(\"updateChatFromFriend\", friend);\n\t\t\t\tthis.$store.commit(\"updateFriend\", friend);\n\t\t\t} else {\n\t\t\t\tthis.$store.commit(\"updateChatFromUser\", this.userInfo);\n\t\t\t}\n\t\t},\n\t\tloadFriend(friendId) {\n\t\t\tconsole.log(`[ChatBox] 🔍 开始加载好友信息: ${friendId}`);\n\t\t\t\n\t\t\t// 获取好友信息\n\t\t\tthis.$http({\n\t\t\t\turl: `/user/find/${friendId}`,\n\t\t\t\tmethod: 'GET'\n\t\t\t}).then((userInfo) => {\n\t\t\t\tconsole.log(`[ChatBox] 📥 HTTP响应 /user/find/${friendId}:`, userInfo);\n\t\t\t\t\n\t\t\t\t// 🔧 关键修复：验证响应数据的有效性\n\t\t\t\tif (userInfo && typeof userInfo === 'object' && userInfo.id) {\n\t\t\t\t\tconsole.log(`[ChatBox] ✅ 用户信息有效，更新userInfo:`, userInfo);\n\t\t\t\t\tthis.userInfo = userInfo;\n\t\t\t\t\tthis.updateFriendInfo();\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(`[ChatBox] ❌ 用户信息无效，保持现有userInfo不变:`, userInfo);\n\t\t\t\t\tconsole.warn(`[ChatBox] 当前userInfo:`, this.userInfo);\n\t\t\t\t\t\n\t\t\t\t\t// 如果当前userInfo为空，提供降级方案\n\t\t\t\t\tif (!this.userInfo || !this.userInfo.id) {\n\t\t\t\t\t\tthis.userInfo = {\n\t\t\t\t\t\t\tid: friendId,\n\t\t\t\t\t\t\tnickName: this.chat?.showName || `用户${friendId}`,\n\t\t\t\t\t\t\theadImage: this.chat?.headImage || '',\n\t\t\t\t\t\t\theadImageThumb: this.chat?.headImage || ''\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconsole.log(`[ChatBox] 🔄 使用降级用户信息:`, this.userInfo);\n\t\t\t\t\t\tthis.updateFriendInfo();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(`[ChatBox] ❌ 加载好友信息失败: ${friendId}`, error);\n\t\t\t\t\n\t\t\t\t// 🔧 关键修复：错误时提供降级方案，确保userInfo不为undefined\n\t\t\t\tif (!this.userInfo || !this.userInfo.id) {\n\t\t\t\t\tthis.userInfo = {\n\t\t\t\t\t\tid: friendId,\n\t\t\t\t\t\tnickName: this.chat?.showName || `用户${friendId}`,\n\t\t\t\t\t\theadImage: this.chat?.headImage || '',\n\t\t\t\t\t\theadImageThumb: this.chat?.headImage || ''\n\t\t\t\t\t};\n\t\t\t\t\tconsole.log(`[ChatBox] 🔄 错误时使用降级用户信息:`, this.userInfo);\n\t\t\t\t\tthis.updateFriendInfo();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tshowName(msgInfo) {\n\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\treturn member ? member.showNickName : \"\";\n\t\t\t} else {\n\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.nickName : this.chat.showName\n\t\t\t}\n\n\t\t},\n\t\theadImage(msgInfo) {\n\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\treturn member ? member.headImage : \"\";\n\t\t\t} else {\n\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.headImageThumb : this.chat.headImage\n\t\t\t}\n\t\t},\n\t\tresetEditor() {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\t// 🔧 安全调用编辑器的clear方法\n\t\t\t\tif (this.$refs.chatInputEditor && typeof this.$refs.chatInputEditor.clear === 'function') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.$refs.chatInputEditor.clear();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.warn('[ChatBox] 编辑器清理失败:', error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 🔧 安全调用编辑器的focus方法\n\t\t\t\tif (this.$refs.chatInputEditor && typeof this.$refs.chatInputEditor.focus === 'function') {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.$refs.chatInputEditor.focus();\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.warn('[ChatBox] 编辑器聚焦失败:', error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tscrollToBottom() {\n\t\t\tconst now = Date.now();\n\t\t\t\n\t\t\t// 节流：避免频繁滚动调用\n\t\t\tif (now - this.lastScrollTime < 50) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.lastScrollTime = now;\n\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tlet div = document.getElementById(\"chatScrollBox\");\n\t\t\t\tif (div) {\n\t\t\t\t\t// 🔧 安全检查：确保globalAdapter可用\n\t\t\t\t\tif (globalAdapter && typeof globalAdapter.scrollToBottom === 'function') {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t// 使用全局适配器的高性能滚动\n\t\t\t\t\t\t\tglobalAdapter.scrollToBottom(div);\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.warn('[ChatBox] globalAdapter.scrollToBottom failed, using fallback:', error);\n\t\t\t\t\t\t\t// 降级方案：直接滚动\n\t\t\t\t\t\t\tdiv.scrollTop = div.scrollHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn('[ChatBox] globalAdapter不可用，使用降级方案');\n\t\t\t\t\t\t// 降级方案：直接滚动\n\t\t\t\t\t\tdiv.scrollTop = div.scrollHeight;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\trefreshPlaceHolder() {\n\t\t\tif (this.isReceipt) {\n\t\t\t\tthis.placeholder = \"【回执消息】\"\n\t\t\t} else if (this.$refs.editBox && this.$refs.editBox.innerHTML) {\n\t\t\t\tthis.placeholder = \"\"\n\t\t\t} else {\n\t\t\t\tthis.placeholder = \"聊点什么吧~\";\n\t\t\t}\n\t\t},\n\t\tsendMessageRequest(msgInfo) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t// 请求入队列，防止请求\"后发先至\"，导致消息错序\n\t\t\t\tthis.reqQueue.push({ msgInfo, resolve, reject });\n\t\t\t\tthis.processReqQueue();\n\t\t\t})\n\t\t},\n\t\tprocessReqQueue() {\n\t\t\tif (this.reqQueue.length && !this.isSending) {\n\t\t\t\tthis.isSending = true;\n\t\t\t\tconst reqData = this.reqQueue.shift();\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: reqData.msgInfo\n\t\t\t\t}).then((res) => {\n\t\t\t\t\treqData.resolve(res)\n\t\t\t\t}).catch((e) => {\n\t\t\t\t\treqData.reject(e)\n\t\t\t\t}).finally(() => {\n\t\t\t\t\tthis.isSending = false;\n\t\t\t\t\t// 发送下一条请求\n\t\t\t\t\tthis.processReqQueue();\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tshowBannedTip() {\n\t\t\tlet msgInfo = {\n\t\t\t\ttmpId: this.generateId(),\n\t\t\t\tsendId: this.mine.id,\n\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\ttype: this.$enums.MESSAGE_TYPE.TIP_TEXT\n\t\t\t}\n\t\t\tif (this.chat.type == \"PRIVATE\") {\n\t\t\t\tmsgInfo.recvId = this.mine.id\n\t\t\t\tmsgInfo.content = \"该用户已被管理员封禁,原因:\" + this.userInfo.reason\n\t\t\t} else {\n\t\t\t\tmsgInfo.groupId = this.group.id;\n\t\t\t\tmsgInfo.content = \"本群聊已被管理员封禁,原因:\" + this.group.reason\n\t\t\t}\n\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t},\n\t\tgenerateId() {\n\t\t\t// 生成临时id\n\t\t\treturn String(new Date().getTime()) + String(Math.floor(Math.random() * 1000));\n\t\t},\n\n\t\tgetCurrentTerminal() {\n\t\t\treturn 4; \n\t\t},\n\n\t\t// 🔧 新增：正确判断消息是否来自当前用户（终端模式）\n\t\tisMessageFromCurrentUser(msgInfo) {\n\t\t\t// 🔧 对于终端消息，判断是否来自当前终端\n\t\t\tif (msgInfo.senderTerminal !== undefined || msgInfo.targetTerminal !== undefined || this.chat.isTerminalChat || this.chat.isTerminalInbox) {\n\t\t\t\t// 🔧 核心原则：只有本端发送的消息才显示在右侧，其他端发来的消息都显示在左侧\n\t\t\t\tconst currentTerminal = this.getCurrentTerminal();\n\t\t\t\tconst isFromCurrentTerminal = msgInfo.senderTerminal === currentTerminal;\n\t\t\t\t\n\t\t\t\t// 🔧 优化：只对终端消息输出判断日志，避免过多重复日志\n\t\t\t\tif (msgInfo.senderTerminal !== undefined && this.messageList.length < 10) {\n\t\t\t\t\tconsole.log(`🔧 [ChatBox] 终端消息: 当前=${currentTerminal}, 发送端=${msgInfo.senderTerminal}, 右侧=${isFromCurrentTerminal}`);\n\t\t\t\t}\n\t\t\t\treturn isFromCurrentTerminal;\n\t\t\t}\n\t\t\t\n\t\t\t// 🔧 对于普通消息，使用sendId判断\n\t\t\treturn msgInfo.sendId === this.mine.id;\n\t\t},\n\n\t\t// 🔧 新增：初始化终端会话\n\t\tinitializeTerminalChat() {\n\t\t\tconsole.log('[ChatBox] 初始化终端会话:', this.chat.showName);\n\t\t\t\n\t\t\t// 确保消息数组存在\n\t\t\tif (!this.chat.messages) {\n\t\t\t\tthis.$set(this.chat, 'messages', []);\n\t\t\t}\n\t\t\t\n\t\t\t// 🔧 统一用户信息获取逻辑：从终端会话的targetId中提取真实的用户ID\n\t\t\tconst targetId = this.chat.targetId;\n\t\t\tlet realUserId = null;\n\t\t\t\n\t\t\tif (typeof targetId === 'string' && targetId.includes('_')) {\n\t\t\t\t// 终端会话格式：userId_terminalId（如\"1_2\"）\n\t\t\t\trealUserId = parseInt(targetId.split('_')[0]);\n\t\t\t\tconsole.log(`[ChatBox] 从终端会话targetId \"${targetId}\" 提取用户ID: ${realUserId}`);\n\t\t\t} else if (typeof targetId === 'number') {\n\t\t\t\t// 普通会话格式：直接是用户ID\n\t\t\t\trealUserId = targetId;\n\t\t\t}\n\t\t\t\n\t\t\tif (realUserId) {\n\t\t\t\t// 🔧 关键修复1：立即设置基本userInfo，避免渲染时访问undefined\n\t\t\t\tthis.userInfo = {\n\t\t\t\t\tid: realUserId,\n\t\t\t\t\tnickName: this.chat.showName || '用户',\n\t\t\t\t\theadImage: this.chat.headImage || '',\n\t\t\t\t\theadImageThumb: this.chat.headImage || ''\n\t\t\t\t};\n\t\t\t\tconsole.log(`[ChatBox] 立即设置基本用户信息:`, this.userInfo);\n\t\t\t\t\n\t\t\t\t// 🔧 关键修复2：异步加载完整用户信息\n\t\t\t\tconsole.log(`[ChatBox] 为终端会话加载完整用户信息: ${realUserId}`);\n\t\t\t\tthis.loadFriend(realUserId);\n\t\t\t} else {\n\t\t\t\t// 降级方案：使用userStore中的信息\n\t\t\t\tconsole.warn(`[ChatBox] 无法提取用户ID，使用userStore信息`);\n\t\t\t\tthis.userInfo = this.$store.state.userStore.userInfo || {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tnickName: '未知用户',\n\t\t\t\t\theadImage: '',\n\t\t\t\t\theadImageThumb: ''\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\t// 🔧 不再在这里设置showMinIdx，由chat watcher统一处理\n\t\t\tconsole.log(`[ChatBox] 终端会话初始化完成，当前消息数: ${this.chat.messages ? this.chat.messages.length : 0}`);\n\t\t\t\n\t\t\t// 确保滚动到底部\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.scrollToBottom();\n\t\t\t});\n\t\t},\n\n\t\t// 🚀 [飞轮效应] 监听VSCode发送的文件事件 - 简化版本\n\t\tsetupVSCodeFileEventListeners() {\n\t\t\tconsole.log('🚀 [飞轮效应] 设置VSCode文件事件监听器...');\n\t\t\t\n\t\t\tconst eventName = 'chat:file:send';\n\t\t\t\n\t\t\t// 优先使用全局事件总线\n\t\t\tif (window.vueEventBus && typeof window.vueEventBus.$on === 'function') {\n\t\t\t\twindow.vueEventBus.$on(eventName, this.handleVSCodeFileSend);\n\t\t\t\tconsole.log('🚀 [飞轮效应] 使用全局vueEventBus监听');\n\t\t\t\tthis.activeEventBus = window.vueEventBus;\n\t\t\t\tthis.activeEventName = eventName;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 备选：使用$eventBus\n\t\t\tif (this.$eventBus && typeof this.$eventBus.$on === 'function') {\n\t\t\t\tthis.$eventBus.$on(eventName, this.handleVSCodeFileSend);\n\t\t\t\tconsole.log('🚀 [飞轮效应] 使用$eventBus监听');\n\t\t\t\tthis.activeEventBus = this.$eventBus;\n\t\t\t\tthis.activeEventName = eventName;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 最后备选：使用$bus\n\t\t\tif (this.$bus && typeof this.$bus.$on === 'function') {\n\t\t\t\tthis.$bus.$on(eventName, this.handleVSCodeFileSend);\n\t\t\t\tconsole.log('🚀 [飞轮效应] 使用$bus监听');\n\t\t\t\tthis.activeEventBus = this.$bus;\n\t\t\t\tthis.activeEventName = eventName;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn('⚠️ [飞轮效应] 没有可用的事件总线');\n\t\t},\n\n\t\t\n\t\t// 🚀 [飞轮效应] 处理VSCode发送的文件事件\n\t\thandleVSCodeFileSend(eventData) {\n\t\t\tconsole.log('🚀 [飞轮效应] 接收到VSCode文件发送事件:', eventData);\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 验证事件数据\n\t\t\t\tif (!eventData || !eventData.file) {\n\t\t\t\t\tconsole.error('❌ [飞轮效应] 无效的文件事件数据:', eventData);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst { file, sessionId, sessionType, targetId, source } = eventData;\n\t\t\t\t\n\t\t\t\t// 验证当前聊天会话是否匹配\n\t\t\t\tif (sessionId && this.chat && this.chat.targetId) {\n\t\t\t\t\tif (sessionId !== this.chat.targetId.toString()) {\n\t\t\t\t\t\tconsole.log(`🔄 [飞轮效应] 会话ID不匹配，切换到目标会话: ${sessionId}`);\n\t\t\t\t\t\t// 切换到目标会话\n\t\t\t\t\t\tthis.switchToTargetSession(sessionId, sessionType);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 发送文件消息\n\t\t\t\tthis.sendFileFromVSCode(file, source);\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('❌ [飞轮效应] 处理VSCode文件事件失败:', error);\n\t\t\t\tthis.$message.error('发送文件失败，请重试');\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 🚀 [飞轮效应] 切换到目标会话\n\t\tswitchToTargetSession(sessionId, sessionType) {\n\t\t\ttry {\n\t\t\t\tconsole.log(`🔄 [飞轮效应] 切换会话: ${sessionType}/${sessionId}`);\n\t\t\t\t\n\t\t\t\t// 构造会话对象\n\t\t\t\tconst targetChat = {\n\t\t\t\t\ttargetId: parseInt(sessionId),\n\t\t\t\t\ttype: sessionType === 'ai' ? 'PRIVATE' : (sessionType || 'PRIVATE').toUpperCase(),\n\t\t\t\t\tshowName: `会话${sessionId}`\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 通过store切换会话\n\t\t\t\tif (this.$store && this.$store.commit) {\n\t\t\t\t\tthis.$store.commit('setActiveChat', targetChat);\n\t\t\t\t\tconsole.log('✅ [飞轮效应] 会话切换成功');\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('⚠️ [飞轮效应] Store不可用，无法切换会话');\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('❌ [飞轮效应] 切换会话失败:', error);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 🚀 [飞轮效应] 从VSCode发送文件消息\n\t\tasync sendFileFromVSCode(file, source = 'vscode-workspace') {\n\t\t\ttry {\n\t\t\t\tconsole.log('🚀 [飞轮效应] 开始发送VSCode文件:', {\n\t\t\t\t\tfileName: file.name,\n\t\t\t\t\tfileSize: file.size,\n\t\t\t\t\tfileType: file.type,\n\t\t\t\t\tsource: source\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 检查是否被封禁\n\t\t\t\tif (this.isBanned) {\n\t\t\t\t\tthis.showBannedTip();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 验证文件\n\t\t\t\tif (!this.$refs.fileUpload || !this.$refs.fileUpload.beforeUpload(file)) {\n\t\t\t\t\tconsole.error('❌ [飞轮效应] 文件验证失败');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 调用现有的文件发送逻辑\n\t\t\t\tawait this.sendFileMessage(file);\n\t\t\t\t\n\t\t\t\tconsole.log('✅ [飞轮效应] VSCode文件发送成功');\n\t\t\t\tthis.$message.success(`✅ 文件 \"${file.name}\" 发送成功`);\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('❌ [飞轮效应] VSCode文件发送失败:', error);\n\t\t\t\tthis.$message.error(`❌ 文件 \"${file.name}\" 发送失败`);\n\t\t\t}\n\t\t},\n\n\t\t// 🚀 [飞轮效应] 清理VSCode文件事件监听器 - 简化版本\n\t\tcleanupVSCodeFileEventListeners() {\n\t\t\tconsole.log('🚀 [飞轮效应] 清理VSCode文件事件监听器...');\n\t\t\t\n\t\t\t// 只清理当前活跃的事件总线\n\t\t\tif (this.activeEventBus && this.activeEventName && typeof this.activeEventBus.$off === 'function') {\n\t\t\t\tthis.activeEventBus.$off(this.activeEventName, this.handleVSCodeFileSend);\n\t\t\t\tconsole.log('✅ [飞轮效应] 已清理活跃事件总线上的监听器');\n\t\t\t\tthis.activeEventBus = null;\n\t\t\t\tthis.activeEventName = null;\n\t\t\t}\n\t\t}\n\t},\n\tcomputed: {\n\t\tmine() {\n\t\t\treturn this.$store.state.userStore.userInfo;\n\t\t},\n\t\tisFriend() {\n\t\t\t// 🔧 关键修复：防护userInfo为undefined的情况\n\t\t\tif (!this.userInfo || !this.userInfo.id) {\n\t\t\t\tconsole.warn('[ChatBox] isFriend计算时userInfo无效:', this.userInfo);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn this.$store.getters.isFriend(this.userInfo.id);\n\t\t},\n\t\tfriend() {\n\t\t\t// 🔧 关键修复：防护userInfo为undefined的情况\n\t\t\tif (!this.userInfo || !this.userInfo.id) {\n\t\t\t\tconsole.warn('[ChatBox] friend计算时userInfo无效:', this.userInfo);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\treturn this.$store.getters.findFriend(this.userInfo.id)\n\t\t},\n\t\ttitle() {\n\t\t\tlet title = this.chat.showName;\n\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t// 修复：确保groupMembers存在且是数组，避免filter错误\n\t\t\t\tconst members = this.groupMembers;\n\t\t\t\tif (Array.isArray(members)) {\n\t\t\t\t\tlet size = members.filter(m => m && !m.quit).length;\n\t\t\t\t\ttitle += `(${size})`;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('[ChatBox] groupMembers不是数组或为undefined:', members);\n\t\t\t\t\ttitle += `(?)`;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn title;\n\t\t},\n\t\tmessageAction() {\n\t\t\t// 终端收件箱会话使用专门的接口\n\t\t\tif (this.chat.isTerminalInbox) {\n\t\t\t\treturn `/message/private/send-to-terminal`;\n\t\t\t}\n\t\t\treturn `/message/${this.chat.type.toLowerCase()}/send`;\n\t\t},\n\t\tunreadCount() {\n\t\t\treturn this.chat.unreadCount;\n\t\t},\n\t\tmessageSize() {\n\t\t\tif (!this.chat || !this.chat.messages) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\t// 移除重复的日志输出，由watch来处理数量变化的日志\n\t\t\treturn this.chat.messages.length;\n\t\t},\n\t\t// 🔧 新增：更精确的消息列表引用，用于强制响应式更新\n\t\tmessageList() {\n\t\t\tconsole.log(\"📋 [ChatBox] 聊天记录排查：\", {\n\t\t\t\tchatType: this.chat?.type,\n\t\t\t\tchatTargetId: this.chat?.targetId,\n\t\t\t\tisTerminalInbox: this.chat?.isTerminalInbox,\n\t\t\t\tshowName: this.chat?.showName,\n\t\t\t\tmessagesExists: !!this.chat?.messages,\n\t\t\t\tmessagesCount: this.chat?.messages?.length || 0,\n\t\t\t\tshowMinIdx: this.showMinIdx,\n\t\t\t\tvisibleMessageCount: this.chat?.messages ? this.chat.messages.filter((_, idx) => idx >= this.showMinIdx).length : 0\n\t\t\t});\n\t\t\t\n\t\t\tif (!this.chat || !this.chat.messages) {\n\t\t\t\tconsole.log(\"📋 [ChatBox] 返回空消息列表\");\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\t\n\t\t\tconst visibleCount = this.chat.messages.filter((_, idx) => idx >= this.showMinIdx).length;\n\t\t\tconsole.log(`📋 [ChatBox] 总消息${this.chat.messages.length}条，showMinIdx=${this.showMinIdx}，可见消息${visibleCount}条`);\n\t\t\treturn this.chat.messages;\n\t\t},\n\t\tisBanned() {\n\t\t\t// 🔧 关键修复：防护userInfo为undefined的情况\n\t\t\tconst privateUserBanned = this.chat.type == \"PRIVATE\" && this.userInfo && this.userInfo.isBanned;\n\t\t\tconst groupBanned = this.chat.type == \"GROUP\" && this.group && this.group.isBanned;\n\t\t\treturn privateUserBanned || groupBanned;\n\t\t},\n\t\tmemberSize() {\n\t\t\t// 修复：确保groupMembers存在且是数组，避免filter错误\n\t\t\tconst members = this.groupMembers;\n\t\t\tif (Array.isArray(members)) {\n\t\t\t\treturn members.filter(m => m && !m.quit).length;\n\t\t\t} else {\n\t\t\t\tconsole.warn('[ChatBox] memberSize计算时groupMembers不是数组或为undefined:', members);\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t},\n\twatch: {\n\t\tchat: {\n\t\t\thandler(newChat, oldChat) {\n\t\t\t\t// 🔧 关键修复：改为检查会话有效性，支持字符串和数字targetId\n\t\t\t\tif (newChat && newChat.targetId && (!oldChat || newChat.type != oldChat.type ||\n\t\t\t\t\tnewChat.targetId != oldChat.targetId)) {\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 关键修复：立即重置showMinIdx，防止切换会话时消息被过滤\n\t\t\t\t\tthis.showMinIdx = 0;\n\t\t\t\t\tconsole.log(`[ChatBox] 🔧 立即重置showMinIdx为0，防止消息被过滤`);\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 根据会话类型处理不同逻辑\n\t\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\t\tthis.loadGroup(this.chat.targetId);\n\t\t\t\t\t} else if (this.chat.isTerminalChat || this.chat.isTerminalInbox) {\n\t\t\t\t\t\t// 🔧 终端收件箱会话的特殊处理\n\t\t\t\t\t\tconsole.log('[ChatBox] 切换到终端收件箱会话:', this.chat.showName);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 终端会话不需要加载好友信息，但需要确保消息正确显示\n\t\t\t\t\t\tthis.initializeTerminalChat();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.loadFriend(this.chat.targetId);\n\t\t\t\t\t\t// 加载已读状态\n\t\t\t\t\t\tthis.loadReaded(this.chat.targetId)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 滚到底部\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\tthis.showSide = false;\n\t\t\t\t\t// 消息已读\n\t\t\t\t\tthis.readedMessage()\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 修复：延迟设置最终的showMinIdx值（在消息加载完成后）\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tlet size = this.chat.messages ? this.chat.messages.length : 0;\n\t\t\t\t\t\t\tlet newShowMinIdx = size > 30 ? size - 30 : 0;\n\t\t\t\t\t\t\tthis.showMinIdx = newShowMinIdx;\n\t\t\t\t\t\t\tconsole.log(`[ChatBox] 🔧 最终设置showMinIdx: ${newShowMinIdx}, 总消息数: ${size}, 会话类型: ${this.chat.isTerminalInbox ? '终端' : '普通'}`);\n\t\t\t\t\t\t}, this.chat.isTerminalInbox ? 200 : 50); // 终端会话需要更多时间\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// 重置输入框\n\t\t\t\t\tthis.resetEditor();\n\t\t\t\t\t// 复位回执消息\n\t\t\t\t\tthis.isReceipt = false;\n\t\t\t\t\t// 更新placeholder\n\t\t\t\t\tthis.refreshPlaceHolder();\n\t\t\t\t}\n\t\t\t},\n\t\t\timmediate: true\n\t\t},\n\t\t// 优化：统一的消息变化监听器，避免重复处理\n\t\tmessageSize: {\n\t\t\thandler(newSize, oldSize) {\n\t\t\t\t// 减少日志输出，只在真正有新消息时记录\n\t\t\t\tif (newSize > oldSize) {\n\t\t\t\t\tconsole.log('[ChatBox] 📈 检测到新消息，数量: %d → %d (聊天: %s)', oldSize, newSize, this.chat?.targetId);\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 防抖处理，避免连续的滚动操作\n\t\t\t\t\tif (this.scrollTimer) {\n\t\t\t\t\t\tclearTimeout(this.scrollTimer);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.scrollTimer = setTimeout(() => {\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 50); // 50ms防抖\n\t\t\t\t}\n\t\t\t},\n\t\t\timmediate: false\n\t\t}\n\t},\n\tmounted() {\n\t\tconsole.log('[ChatBox] Component mounting...');\n\t\t\n\t\tconsole.log('[ChatBox] Checking event bus availability:');\n\t\tconsole.log('- $eventBus:', !!this.$eventBus);\n\t\tconsole.log('- $bus:', !!this.$bus);\n\t\tconsole.log('[ChatBox] Component mounted');\n\t\t\n\t\t// 🔧 安全初始化全局适配器\n\t\ttry {\n\t\t\tif (globalAdapter && typeof globalAdapter.init === 'function') {\n\t\t\t\tglobalAdapter.init();\n\t\t\t\tconsole.log('[ChatBox] globalAdapter初始化成功');\n\t\t\t} else {\n\t\t\t\tconsole.warn('[ChatBox] globalAdapter不可用或缺少init方法');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('[ChatBox] globalAdapter初始化失败:', error);\n\t\t}\n\t\t\n\t\t// 🚀 [飞轮效应] 监听VSCode发送的文件事件\n\t\tthis.setupVSCodeFileEventListeners();\n\t\t\n\t\tlet div = document.getElementById(\"chatScrollBox\");\n\t\tif (div) {\n\t\t\tdiv.addEventListener('scroll', this.onScroll);\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\t// 🚀 [飞轮效应] 清理VSCode文件事件监听器\n\t\tthis.cleanupVSCodeFileEventListeners();\n\t\t\n\t\t// 清理定时器\n\t\tif (this.scrollThrottle) {\n\t\t\tclearTimeout(this.scrollThrottle);\n\t\t}\n\t\tif (this.scrollTimer) {\n\t\t\tclearTimeout(this.scrollTimer);\n\t\t}\n\t\t\n\t\t// 🔧 安全清理适配器缓存\n\t\ttry {\n\t\t\tif (globalAdapter && typeof globalAdapter.cleanup === 'function') {\n\t\t\t\tglobalAdapter.cleanup();\n\t\t\t\tconsole.log('[ChatBox] globalAdapter清理成功');\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.warn('[ChatBox] globalAdapter清理失败:', error);\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.chat-box {\n\tposition: relative;\n\twidth: 100%;\n\tbackground: #fff;\n\n\t.el-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\tpadding: 0 12px;\n\t\tline-height: 50px;\n\t\tfont-size: var(--im-font-size-larger);\n\t\tborder-bottom: var(--im-border);\n\n\n\t\t.btn-side {\n\t\t\tposition: absolute;\n\t\t\tright: 20px;\n\t\t\tline-height: 50px;\n\t\t\tfont-size: 20px;\n\t\t\tcursor: pointer;\n\t\t\tcolor: var(--im-text-color-light);\n\t\t}\n\t}\n\n\t.im-chat-main {\n\t\tpadding: 0;\n\t\tbackground-color: #fff;\n\n\t\t.im-chat-box {\n\t\t\t>ul {\n\t\t\t\tpadding: 0 20px;\n\n\t\t\t\tli {\n\t\t\t\t\tlist-style-type: none;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.im-chat-footer {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 0;\n\n\t\t.chat-tool-bar {\n\t\t\tdisplay: flex;\n\t\t\tposition: relative;\n\t\t\twidth: 100%;\n\t\t\theight: 36px;\n\t\t\ttext-align: left;\n\t\t\tbox-sizing: border-box;\n\t\t\tborder-top: var(--im-border);\n\t\t\tpadding: 4px 2px 2px 8px;\n\n\t\t\t>div {\n\t\t\t\tfont-size: 22px;\n\t\t\t\tcursor: pointer;\n\t\t\t\tline-height: 30px;\n\t\t\t\twidth: 30px;\n\t\t\t\theight: 30px;\n\t\t\t\ttext-align: center;\n\t\t\t\tborder-radius: 2px;\n\t\t\t\tmargin-right: 8px;\n\t\t\t\tcolor: #999;\n\t\t\t\ttransition: 0.3s;\n\n\t\t\t\t&.chat-tool-active {\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\tcolor: var(--im-color-primary);\n\t\t\t\t\tbackground-color: #ddd;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t>div:hover {\n\t\t\t\tcolor: #333;\n\t\t\t}\n\t\t}\n\n\t\t.send-content-area {\n\t\t\tposition: relative;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\theight: 100%;\n\t\t\tbackground-color: white !important;\n\n\t\t\t.send-btn-area {\n\t\t\t\tpadding: 10px;\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 4px;\n\t\t\t\tright: 6px;\n\t\t\t}\n\t\t}\n\t}\n\n\t.chat-group-side-box {\n\t\tborder-left: var(--im-border);\n\t\t//animation: rtl-drawer-in .3s 1ms;\n\t}\n\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatBoxPlugin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatBoxPlugin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatBoxPlugin.vue?vue&type=template&id=1334967a\"\nimport script from \"./ChatBoxPlugin.vue?vue&type=script&lang=js\"\nexport * from \"./ChatBoxPlugin.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatBoxPlugin.vue?vue&type=style&index=0&id=1334967a&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <el-container class=\"chat-page\">\n    <!-- 左侧聊天区域 -->\n    <el-container class=\"chat-box\">\n      <!-- 容器管理组件 - 云电脑远程工作台 -->\n      <container-manager v-if=\"isPCTerminalChat\"></container-manager>\n      \n      <!-- 人工聊天 -->\n      <chat-box \n        v-if=\"chatStore.activeChat && !isAIChat\" \n        :chat=\"chatStore.activeChat\">\n      </chat-box>\n\n    </el-container>\n\n  </el-container>\n</template>\n\n<script>\n/* global IChatWorkspaceService, IFileService, INotificationService, URIHelper, VSBufferHelper */\n\nimport ChatItem from \"../components/chat/ChatItem.vue\";\nimport ChatBox from \"../components/chat/ChatBoxPlugin.vue\";\nimport ContainerManager from \"../components/chat/ContainerManager.vue\";\n\nimport { log } from \"@/utils/logManager.js\";\n\nexport default {\n  name: \"EditorChat\",\n  components: {\n    ChatItem,\n    ChatBox,\n    ContainerManager\n  },\n  props: {\n    chatData: {\n      type: Object,\n      default: () => null\n    }\n  },\n  data() {\n    return {\n      searchText: \"\",\n      messageContent: \"\",\n      group: {},\n      groupMembers: [],\n      \n      // 思维面板相关\n      showThinkingPanel: false,\n      activeTab: 'chain',\n      currentSessionId: '',\n      \n      // AI聊天相关\n      selectedAIChat: null,\n      isAIChat: false,\n      \n      // 🆕 拖拽相关状态\n      dragHintElement: null,\n      processingMessage: null,\n      globalDragListeners: null, // 🔧 统一的全局拖拽监听器\n      \n      // 🔧 统一会话服务监听器\n      unifiedSessionUnsubscribe: null,\n      \n      // 防重复激活状态\n      lastActivatedSessionId: null,\n      \n      // 标签页配置\n      tabs: [\n        { key: 'chain', label: '思维链', icon: '🧠' },\n        { key: 'dashboard', label: '仪表盘', icon: '📊' },\n        { key: 'assistant', label: 'AI助手', icon: '🤖' },\n        { key: 'settings', label: '设置', icon: '⚙️' }\n      ],\n\n      // AI助手相关\n      assistantStatus: 'active', // active, idle, analyzing\n      feedbackText: '',\n      aiInsights: [\n        {\n          id: 'insight_1',\n          icon: '💡',\n          title: '对话模式识别',\n          description: '检测到用户倾向于技术性讨论，建议提供更详细的技术解释',\n          priority: 'medium'\n        },\n        {\n          id: 'insight_2',\n          icon: '⚡',\n          title: '回复效率优化',\n          description: '可以通过预加载常见问题答案来提升响应速度',\n          priority: 'low'\n        }\n      ],\n\n      // 设置相关\n      settings: {\n        showRealtime: true,\n        autoExpand: true,\n        showConfidence: true,\n        analysisDepth: 'detailed',\n        updateInterval: '3000',\n        exportFormat: 'json'\n      },\n      \n      // PC终端会话检测\n      isPCTerminalChat: false\n    }\n  },\n  computed: {\n    chatStore() {\n      return this.$store.state.chatStore;\n    },\n    loading() {\n      return this.chatStore.loadingGroupMsg || this.chatStore.loadingPrivateMsg\n    },\n    assistantStatusText() {\n      const statusMap = {\n        active: '🟢 活跃',\n        idle: '🟡 空闲',\n        analyzing: '🔵 分析中'\n      }\n      return statusMap[this.assistantStatus] || '未知'\n    }\n  },\n  created() {\n    this.loadSettings()\n  },\n  methods: {\n    onActiveItem(index) {\n      this.$store.commit(\"activeChat\", index);\n      \n      // 切换到人类聊天模式\n      this.isAIChat = false;\n      this.selectedAIChat = null;\n      \n      // 检测PC终端会话\n      this.detectPCTerminalChat();\n    },\n    \n    // 检测是否为PC终端会话\n    detectPCTerminalChat() {\n      console.log('[EditorChatPlugin] detectPCTerminalChat 开始检测');\n      console.log('[EditorChatPlugin] activeChat:', this.chatStore.activeChat);\n      \n      if (!this.chatStore.activeChat) {\n        console.log('[EditorChatPlugin] 没有活跃会话，isPCTerminalChat = false');\n        this.isPCTerminalChat = false;\n        return;\n      }\n      \n      const targetId = this.chatStore.activeChat.targetId;\n      console.log('[EditorChatPlugin] 会话信息:', {\n        targetId: targetId,\n        showName: this.chatStore.activeChat.showName\n      });\n      \n      // 简化判断：只要targetId包含\"_3\"就是PC终端会话\n      if (targetId && targetId.includes('_3')) {\n        this.isPCTerminalChat = true;\n        console.log('[EditorChatPlugin] 检测到PC终端会话 (targetId包含_3)，显示容器管理');\n      } else {\n        this.isPCTerminalChat = false;\n        console.log('[EditorChatPlugin] 非PC终端会话，不显示容器管理');\n      }\n      \n      console.log('[EditorChatPlugin] 最终 isPCTerminalChat =', this.isPCTerminalChat);\n    },\n    \n    onDelItem(index) {\n      this.$store.commit(\"removeChat\", index);\n    },\n    \n    onTop(chatIdx) {\n      this.$store.commit(\"moveTop\", chatIdx);\n    },\n\n    // 获取当前聊天ID\n    getCurrentChatId() {\n      if (this.isAIChat && this.selectedAIChat) {\n        return this.selectedAIChat.aiThreadId || this.selectedAIChat.id;\n      }\n      if (this.chatStore.activeChat) {\n        return this.chatStore.activeChat.id || this.chatStore.activeChat.targetId;\n      }\n      return this.currentSessionId;\n    },\n\n    // 处理AI聊天选择（从InboxSession传来）\n    onAIChatSelected(aiSession) {\n      log.info('EditorChat', '收到AI聊天选择:', aiSession.showName);\n      \n      this.selectedAIChat = aiSession;\n      this.isAIChat = true;\n      \n      // 清除人类聊天选择\n      this.$store.commit(\"clearActiveChat\");\n      \n      // 重新初始化会话\n      this.initializeThinkingSession();\n    },\n\n    // 🌟 处理确保面板可见事件\n    handleEnsurePanelVisible(eventData) {\n      console.log('[EditorChat] 🔧 收到确保面板可见事件:', eventData);\n      \n      const { sessionType, sessionData, reason } = eventData;\n      \n      // 检查是否需要确保面板可见\n      if (!this.shouldEnsurePanelVisible(sessionType, sessionData)) {\n        console.log('[EditorChat] 🔧 无需确保面板可见，条件不满足');\n        return;\n      }\n      \n      // 确保聊天记录面板可见\n      this.ensureChatRecordVisible(sessionType, sessionData, reason);\n    },\n    \n    // 🌟 检查是否需要确保面板可见\n    shouldEnsurePanelVisible(sessionType, sessionData) {\n      // 如果当前没有活跃会话，则需要确保面板可见\n      if (sessionType === 'IM') {\n        return !this.chatStore.activeChat || this.chatStore.activeChat.targetId !== (sessionData.targetId || sessionData.id);\n      } else if (sessionType === 'AI') {\n        return !this.selectedAIChat || this.selectedAIChat.id !== sessionData.id;\n      }\n      return true;\n    },\n    \n    // 🌟 确保聊天记录可见\n    ensureChatRecordVisible(sessionType, sessionData, reason) {\n      console.log(`[EditorChat] 🔧 确保${sessionType}聊天记录可见:`, sessionData?.showName || sessionData?.name);\n      \n      // 根据会话类型处理\n      if (sessionType === 'IM') {\n        // 确保IM聊天记录可见\n        this.ensureIMChatVisible(sessionData, reason);\n      } \n      \n      // 强制更新Vue响应式系统\n      this.$nextTick(() => {\n        console.log('[EditorChat] 🔧 Vue响应式更新完成，面板应该已可见');\n      });\n    },\n    \n    // 🌟 确保IM聊天可见\n    ensureIMChatVisible(sessionData, reason) {\n      // 如果当前不是IM模式，切换到IM模式\n      if (this.isAIChat) {\n        this.isAIChat = false;\n        this.selectedAIChat = null;\n        console.log('[EditorChat] 🔧 已切换到IM模式');\n      }\n      \n    \n    },\n    // 🔧 已移除onHumanChatSelected方法，现在直接通过统一会话服务处理\n\n    // 跳转到专业模式\n    jumpToProMode(messageId) {\n      console.log('跳转到React专业模式:', messageId);\n      \n      // 这里应该通知React侧打开专业模式\n      // 可以通过postMessage或者专门的API\n      if (window.postMessage) {\n        window.postMessage({\n          type: 'OPEN_AI_PRO_MODE',\n          messageId,\n          threadId: this.selectedAIChat?.aiThreadId\n        }, '*');\n      }\n\n      // 也可以通过VSCode API\n      if (window.SharedServicesAccessor && window.SharedServicesAccessor.openAIProMode) {\n        try {\n          window.SharedServicesAccessor.openAIProMode({\n            messageId,\n            threadId: this.selectedAIChat?.aiThreadId\n          });\n        } catch (error) {\n          console.error('打开AI专业模式失败:', error);\n        }\n      }\n    },\n\n    // 下载构件\n    async downloadArtifact(artifact) {\n      console.log('下载构件到工作区:', artifact);\n      \n      // 这里应该调用实际的下载API\n      try {\n        // 模拟下载过程\n        this.$message?.success(`正在下载：${artifact.title}`);\n        \n        // 可以调用VSCode API下载到工作区\n        if (window.SharedServicesAccessor && window.SharedServicesAccessor.downloadToWorkspace) {\n          await window.SharedServicesAccessor.downloadToWorkspace(artifact);\n          this.$message?.success(`已下载到工作区：${artifact.title}`);\n        }\n      } catch (error) {\n        this.$message?.error('下载失败');\n        console.error('下载构件失败:', error);\n      }\n    },\n\n    // 初始化思维会话\n    initializeThinkingSession() {\n      this.currentSessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`\n      log.debug('EditorChat', '初始化思维会话:', this.currentSessionId)\n    },\n\n    // 切换思维面板显示\n    toggleThinkingPanel() {\n      this.showThinkingPanel = !this.showThinkingPanel\n      \n      // 如果隐藏面板，暂停思维链分析\n      if (!this.showThinkingPanel) {\n        this.pauseThinkingAnalysis()\n      } else {\n        this.resumeThinkingAnalysis()\n      }\n    },\n\n    // 暂停思维链分析\n    pauseThinkingAnalysis() {\n      console.log('暂停思维链分析')\n      this.assistantStatus = 'idle'\n    },\n\n    // 恢复思维链分析\n    resumeThinkingAnalysis() {\n      console.log('恢复思维链分析')\n      this.assistantStatus = 'active'\n    },\n\n    // 实时模式变化处理\n    onRealtimeModeChanged(enabled) {\n      console.log('实时模式变化:', enabled)\n      this.settings.showRealtime = enabled\n    },\n\n    // 仪表盘数据刷新处理\n    onDashboardDataRefreshed(data) {\n      console.log('仪表盘数据已刷新:', data)\n    },\n\n    // 思维链选择处理\n    onChainSelected(chainId) {\n      console.log('选择思维链:', chainId)\n      this.activeTab = 'chain'\n    },\n\n    // AI助手操作\n    analyzeCurrentConversation() {\n      this.assistantStatus = 'analyzing'\n      \n      // 模拟分析过程\n      setTimeout(() => {\n        this.assistantStatus = 'active'\n        this.addInsight({\n          id: `insight_${Date.now()}`,\n          icon: '🔍',\n          title: '对话分析完成',\n          description: this.isAIChat ? \n            '当前AI对话显示复杂的技术讨论模式' : \n            '当前对话显示用户关注代码质量和性能优化',\n          priority: 'high'\n        })\n      }, 2000)\n    },\n\n    suggestResponse() {\n      console.log('生成回复建议')\n      this.addInsight({\n        id: `insight_${Date.now()}`,\n        icon: '💬',\n        title: '回复建议',\n        description: this.isAIChat ? \n          '建议简化AI回复，突出关键信息' :\n          '建议提供具体的代码示例和性能对比数据',\n        priority: 'medium'\n      })\n    },\n\n    optimizeThinking() {\n      console.log('优化思维链')\n      this.addInsight({\n        id: `insight_${Date.now()}`,\n        icon: '⚡',\n        title: '思维链优化',\n        description: '已优化决策分支，提升思维效率15%',\n        priority: 'low'\n      })\n    },\n\n    exportInsights() {\n      const insights = {\n        sessionId: this.currentSessionId,\n        chatType: this.isAIChat ? 'ai' : 'human',\n        chatInfo: this.isAIChat ? this.selectedAIChat : this.chatStore.activeChat,\n        timestamp: Date.now(),\n        insights: this.aiInsights,\n        settings: this.settings\n      }\n\n      const dataStr = JSON.stringify(insights, null, 2)\n      const blob = new Blob([dataStr], { type: 'application/json' })\n      const url = URL.createObjectURL(blob)\n      \n      const a = document.createElement('a')\n      a.href = url\n      a.download = `ai-insights-${Date.now()}.json`\n      a.click()\n      \n      URL.revokeObjectURL(url)\n    },\n\n    // 添加洞察\n    addInsight(insight) {\n      this.aiInsights.unshift(insight)\n      \n      // 限制洞察数量\n      if (this.aiInsights.length > 10) {\n        this.aiInsights = this.aiInsights.slice(0, 10)\n      }\n    },\n\n    // 提交反馈\n    submitFeedback() {\n      if (!this.feedbackText.trim()) {\n        this.$message?.warning('请输入反馈内容')\n        return\n      }\n\n      console.log('提交反馈:', this.feedbackText)\n      \n      // 模拟提交\n      this.$message?.success('反馈已提交，感谢您的建议！')\n      this.feedbackText = ''\n    },\n\n    // 设置相关\n    updateSettings() {\n      console.log('更新设置:', this.settings)\n      localStorage.setItem('thinking_settings', JSON.stringify(this.settings))\n    },\n\n    resetSettings() {\n      this.settings = {\n        showRealtime: true,\n        autoExpand: true,\n        showConfidence: true,\n        analysisDepth: 'detailed',\n        updateInterval: '3000',\n        exportFormat: 'json'\n      }\n      this.updateSettings()\n      this.$message?.success('设置已重置')\n    },\n\n    saveSettings() {\n      this.updateSettings()\n      this.$message?.success('设置已保存')\n    },\n\n    loadSettings() {\n      const savedSettings = localStorage.getItem('thinking_settings')\n      if (savedSettings) {\n        try {\n          this.settings = { ...this.settings, ...JSON.parse(savedSettings) }\n        } catch (e) {\n          console.error('加载设置失败:', e)\n        }\n      }\n    },\n\n    // 事件监听\n    setupEventListeners() {\n      // 监听聊天消息\n      this.$bus && this.$bus.$on('chat:message:sent', this.onMessageSent)\n      this.$bus && this.$bus.$on('chat:message:received', this.onMessageReceived)\n      \n      // 监听思维链事件\n      this.$bus && this.$bus.$on('thinking:chain:updated', this.onThinkingChainUpdated)\n      \n      // 监听AI聊天选择事件\n      this.$bus && this.$bus.$on('ai:chat:selected', this.onAIChatSelected)\n      \n      // 🌟 监听聊天面板可见确保事件\n      this.$bus && this.$bus.$on('chat:ensure-panel-visible', this.handleEnsurePanelVisible)\n      \n      // 🔧 测试事件监听\n      this.$bus && this.$bus.$on('test:panel:debug', (data) => {\n        console.log('[EditorChat] 🔧 收到测试事件:', data);\n      })\n      \n      // 🔧 直接监听统一会话服务事件，移除human:chat:selected自定义事件\n      this.setupUnifiedSessionListener()\n    },\n\n    cleanupEventListeners() {\n      if (this.$bus) {\n        this.$bus.$off('chat:message:sent', this.onMessageSent)\n        this.$bus.$off('chat:message:received', this.onMessageReceived)\n        this.$bus.$off('thinking:chain:updated', this.onThinkingChainUpdated)\n        this.$bus.$off('ai:chat:selected', this.onAIChatSelected)\n        this.$bus.$off('chat:ensure-panel-visible', this.handleEnsurePanelVisible)\n      }\n      \n      // 清理统一会话服务监听器\n      if (this.unifiedSessionUnsubscribe) {\n        this.unifiedSessionUnsubscribe()\n        this.unifiedSessionUnsubscribe = null\n      }\n    },\n\n    // 消息发送处理\n    onMessageSent(message) {\n      console.log('消息已发送:', message)\n      \n      // 触发AI思维分析\n      if (this.settings.showRealtime) {\n        this.triggerThinkingAnalysis('user_message', message)\n      }\n    },\n\n    // 消息接收处理\n    onMessageReceived(message) {\n      console.log('消息已接收:', message)\n      \n      // 如果是AI回复，可以显示思维过程\n      if (message.type === 'ai_response' && this.settings.showRealtime) {\n        this.triggerThinkingAnalysis('ai_response', message)\n      }\n    },\n\n    // 思维链更新处理\n    onThinkingChainUpdated(data) {\n      console.log('思维链已更新:', data)\n    },\n\n    // 触发思维分析\n    triggerThinkingAnalysis(type, data) {\n      console.log('触发思维分析:', type, data)\n      \n      // 发送思维开始事件\n      this.$bus && this.$bus.$emit('ai:thinking:start', {\n        type,\n        data,\n        preview: this.isAIChat ? '正在分析AI对话内容...' : '正在分析消息内容...'\n      })\n\n      // 模拟思维过程\n      setTimeout(() => {\n        this.$bus && this.$bus.$emit('ai:thinking:node', {\n          id: `node_${Date.now()}`,\n          type: 'analysis',\n          title: this.isAIChat ? 'AI对话分析' : '消息分析',\n          description: this.isAIChat ? \n            '分析AI回复的复杂度和用户满意度' :\n            '分析消息的语义和用户意图',\n          confidence: 0.85,\n          duration: 1200\n        })\n      }, 1000)\n\n      setTimeout(() => {\n        this.$bus && this.$bus.$emit('ai:thinking:complete')\n      }, 3000)\n    },\n\n    // ===== 文件自动保存到聊天工作区功能 =====\n\n    // 文件发送处理 - 使用注入的服务\n    async handleFileSend(fileData) {\n      console.log('[EditorChat] handleFileSend called with:', fileData);\n      \n      if (!this.$vscode) {\n        console.warn('[EditorChat] $vscode service not available');\n        return;\n      }\n\n      try {\n        // 使用SharedServicesAccessor直接访问服务（不需要window上的服务标识符）\n        if (!window.SharedServicesAccessor) {\n          console.warn('[EditorChat] SharedServicesAccessor not available');\n          return;\n        }\n\n        const chatWorkspace = window.SharedServicesAccessor.getChatThreadsService ? \n          this.protectVSCodeService(window.SharedServicesAccessor.getChatThreadsService(), 'ChatThreadsService') : null;\n        const fileService = this.protectVSCodeService(this.$vscode?.get('IFileService'), 'IFileService');\n        const notification = this.protectVSCodeService(this.$vscode?.get('INotificationService'), 'INotificationService');\n        \n        console.log('[EditorChat] VSCode services obtained successfully');\n\n        const currentSession = this.getCurrentSessionInfo();\n        console.log('[EditorChat] Current session info:', currentSession);\n        \n        await this.saveFileToSession(fileData, currentSession);\n        await chatWorkspace.refreshFiles();\n        notification.info(`文件已保存到工作区: ${fileData.file.name}`);\n        \n        console.log('[EditorChat] File saved successfully to workspace');\n      } catch (error) {\n        console.error('[EditorChat] 文件保存失败:', error);\n        if (this.$vscode) {\n          try {\n            const notification = this.protectVSCodeService(this.$vscode.get('INotificationService'), 'INotificationService');\n            notification?.error(`文件保存失败: ${error.message}`);\n          } catch (notificationError) {\n            console.warn('[EditorChat] 无法发送错误通知:', notificationError);\n          }\n        }\n      }\n    },\n\n    // 获取当前会话信息\n    getCurrentSessionInfo() {\n      if (this.isAIChat && this.selectedAIChat) {\n        return {\n          id: this.selectedAIChat.aiThreadId || this.selectedAIChat.id,\n          targetId: this.selectedAIChat.aiThreadId || this.selectedAIChat.id,\n          type: 'PRIVATE', // 统一为IM系统的格式\n          name: this.selectedAIChat.showName || 'AI对话',\n          showName: this.selectedAIChat.showName || 'AI对话',\n          participants: ['AI']\n        };\n      }\n      \n      if (this.chatStore.activeChat) {\n        return {\n          id: this.chatStore.activeChat.id || this.chatStore.activeChat.targetId,\n          targetId: this.chatStore.activeChat.targetId,\n          type: this.chatStore.activeChat.type || 'PRIVATE', // 使用聊天实际类型\n          name: this.chatStore.activeChat.showName || '聊天',\n          showName: this.chatStore.activeChat.showName || '聊天',\n          headImage: this.chatStore.activeChat.headImage || '',\n          participants: [this.chatStore.activeChat.targetId]\n        };\n      }\n      \n      // 默认会话 - 创建一个基础的私聊会话\n      const defaultSessionId = this.currentSessionId || `session_${Date.now()}`;\n      return {\n        id: defaultSessionId,\n        targetId: defaultSessionId,\n        type: 'PRIVATE',\n        name: '当前会话',\n        showName: '当前会话',\n        headImage: '',\n        participants: []\n      };\n    },\n\n    // 🎯 第一性原理：使用SharedServicesAccessor的完整文件上传方法\n    async saveFileToSession(fileData, sessionInfo) {\n      if (!window.SharedServicesAccessor) {\n        console.warn('[EditorChat] SharedServicesAccessor not available');\n        return;\n      }\n\n      try {\n      const file = fileData.file;\n        console.log('[EditorChat] 开始文件上传:', { fileName: file.name, size: file.size, type: file.type });\n\n        // 🚀 直接调用SharedServicesAccessor的完整文件上传方法\n        const result = await window.SharedServicesAccessor.uploadFileToSession(file, sessionInfo);\n        \n        if (result.success) {\n          console.log('[EditorChat] ✅ 文件上传成功:', result);\n          return result.filePath;\n        } else {\n          console.error('[EditorChat] ❌ 文件上传失败:', result);\n          throw new Error(result.error || result.message);\n        }\n      } catch (error) {\n        console.error('[EditorChat] 文件上传异常:', error);\n        throw error;\n      }\n    },\n\n    // 生成会话路径\n    generateSessionPath(sessionInfo) {\n      const sanitizedName = sessionInfo.name.replace(/[<>:\"/\\\\|?*]/g, '_');\n      const timestamp = new Date().toISOString().slice(0, 10);\n      return `chat_sessions/${sessionInfo.type}/${sanitizedName}_${sessionInfo.id}_${timestamp}`;\n    },\n\n    // 生成安全文件名\n    generateSafeFileName(originalName) {\n      // 只清理非法字符，不添加时间戳，重复文件名处理由SharedServicesAccessor负责\n      return originalName.replace(/[<>:\"/\\\\|?*\\u0000-\\u001f]/g, '_');\n    },\n\n    // 读取文件内容\n    readFileContent(file) {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = reject;\n        reader.readAsArrayBuffer(file);\n      });\n    },\n\n    // 修复VSCode服务访问问题\n    async fixVSCodeServices() {\n      console.log('[EditorChat] Fixing VSCode services...');\n      console.log('[EditorChat] Current $vscode type:', typeof this.$vscode);\n      console.log('[EditorChat] Current $vscode.get type:', typeof this.$vscode?.get);\n      console.log('[EditorChat] window.SharedServicesAccessor available:', !!window.SharedServicesAccessor);\n      \n      // 🛡️ 添加保护措施避免Symbol.toStringTag错误\n      if (this.$vscode && typeof this.$vscode === 'object') {\n        // 确保$vscode对象不会被Vue的响应式系统处理\n        Object.defineProperty(this, '$vscode', {\n          value: this.$vscode,\n          writable: true,\n          enumerable: false,  // 不可枚举，避免被Vue处理\n          configurable: true\n        });\n      }\n      \n      // 如果SharedServicesAccessor不存在，等待它被初始化\n      if (!window.SharedServicesAccessor) {\n        console.log('[EditorChat] SharedServicesAccessor not available, waiting...');\n        await this.waitForSharedServicesAccessor();\n      }\n      \n      // 如果SharedServicesAccessor存在但还没初始化，等待初始化\n      if (window.SharedServicesAccessor && !window.SharedServicesAccessor.isInitialized()) {\n        console.log('[EditorChat] SharedServicesAccessor not initialized, waiting...');\n        await window.SharedServicesAccessor.waitForInitialization();\n      }\n      \n      // 如果$vscode.get不存在，但SharedServicesAccessor存在且已初始化，则重新初始化\n      if ((!this.$vscode || typeof this.$vscode.get !== 'function') && window.SharedServicesAccessor?.isInitialized()) {\n        console.log('[EditorChat] Reinitializing $vscode with SharedServicesAccessor...');\n        \n        // 创建VueServicesAccessor类\n        class VueServicesAccessor {\n          constructor() {\n            // ✅ 避免将VSCode服务对象存储为实例属性，直接使用window对象\n          }\n          \n          get(serviceIdentifier) {\n            // ✅ 直接使用window.SharedServicesAccessor，避免存储引用\n            return window.SharedServicesAccessor?.get(serviceIdentifier);\n          }\n          \n          // 保持与原有VSCodeIntegrationService的兼容性\n          saveFileToWorkspace(...args) {\n            return this.get('IChatWorkspaceService')?.saveFileToWorkspace(...args);\n          }\n          \n          showNotification(...args) {\n            return this.get('INotificationService')?.info(...args);\n          }\n        }\n        \n        // 重新设置$vscode，并保护它不被Vue响应式系统处理\n        const vueServicesAccessor = new VueServicesAccessor();\n        \n        // 使用非响应式方式设置$vscode\n        Object.defineProperty(this, '$vscode', {\n          value: vueServicesAccessor,\n          writable: true,\n          enumerable: false,  // 不可枚举，避免被Vue处理\n          configurable: true\n        });\n        \n        // 如果是全局Vue实例，也要更新\n        if (window.Vue && window.Vue.prototype) {\n          Object.defineProperty(window.Vue.prototype, '$vscode', {\n            value: vueServicesAccessor,\n            writable: true,\n            enumerable: false,\n            configurable: true\n          });\n        }\n        \n        console.log('[EditorChat] $vscode reinitialized successfully');\n        console.log('[EditorChat] $vscode.get type after fix:', typeof this.$vscode.get);\n      }\n      \n      // 延迟验证服务是否正确工作\n      setTimeout(() => {\n        this.validateVSCodeServices();\n      }, 1000);\n    },\n\n    // 等待SharedServicesAccessor被创建\n    async waitForSharedServicesAccessor() {\n      console.log('[EditorChat] Waiting for SharedServicesAccessor to be created...');\n      let attempts = 0;\n      const maxAttempts = 100; // 最多等待10秒\n      \n      while (!window.SharedServicesAccessor && attempts < maxAttempts) {\n        await new Promise(resolve => setTimeout(resolve, 100));\n        attempts++;\n      }\n      \n      if (window.SharedServicesAccessor) {\n        console.log('[EditorChat] SharedServicesAccessor found after', attempts * 100, 'ms');\n      } else {\n        console.warn('[EditorChat] SharedServicesAccessor not found after', maxAttempts * 100, 'ms');\n      }\n    },\n\n    // 验证VSCode服务\n    validateVSCodeServices() {\n      console.log('[EditorChat] Validating VSCode services...');\n      \n      try {\n        if (this.$vscode && typeof this.$vscode.get === 'function') {\n          const fileService = this.$vscode.get('IFileService');\n          const notificationService = this.$vscode.get('INotificationService');\n          \n          console.log('[EditorChat] IFileService available:', !!fileService);\n          console.log('[EditorChat] INotificationService available:', !!notificationService);\n          \n          if (fileService && notificationService) {\n            console.log('[EditorChat] ✅ VSCode services validation successful');\n            // 可选：显示一个成功通知\n            // notificationService.info('BoxIM组件已成功连接到VSCode服务');\n          } else {\n            console.warn('[EditorChat] ⚠️ Some VSCode services are not available');\n          }\n        } else {\n          console.error('[EditorChat] ❌ $vscode.get method is not available');\n        }\n      } catch (error) {\n        console.error('[EditorChat] ❌ VSCode services validation failed:', error);\n      }\n    },\n\n    // 🛡️ 保护VSCode服务对象，防止被Vue响应式系统处理\n    protectVSCodeService(service, serviceName = 'service') {\n      if (!service || typeof service !== 'object') {\n        return service;\n      }\n      \n      try {\n        // 创建一个代理来防止Vue访问内部Symbol属性\n        return new Proxy(service, {\n          get(target, prop) {\n            // 阻止访问Symbol.toStringTag等可能导致问题的属性\n            if (typeof prop === 'symbol' || prop === Symbol.toStringTag) {\n              console.debug('[EditorChat] 🛡️ 阻止访问 Symbol 属性:', prop.toString());\n              return undefined;\n            }\n            \n            try {\n              const value = target[prop];\n              \n              // 如果是函数，绑定this上下文\n              if (typeof value === 'function') {\n                return value.bind(target);\n              }\n              \n              return value;\n            } catch (error) {\n              console.warn(`[EditorChat] 🛡️ 访问 ${serviceName}.${prop} 失败:`, error);\n              return undefined;\n            }\n          },\n          \n          // 防止Vue遍历对象属性\n          ownKeys(target) {\n            try {\n              return Object.getOwnPropertyNames(target).filter(key => \n                typeof key === 'string' && !key.startsWith('_')\n              );\n            } catch (error) {\n              console.warn(`[EditorChat] 🛡️ 获取 ${serviceName} 属性列表失败:`, error);\n              return [];\n            }\n          },\n          \n          // 阻止属性描述符访问\n          getOwnPropertyDescriptor(target, prop) {\n            if (typeof prop === 'symbol') {\n              return undefined;\n            }\n            try {\n              return Object.getOwnPropertyDescriptor(target, prop);\n            } catch (error) {\n              return undefined;\n            }\n          }\n        });\n      } catch (error) {\n        console.warn(`[EditorChat] 🛡️ 创建 ${serviceName} 保护代理失败:`, error);\n        return service;\n      }\n    },\n\n    // 🆕 统一的文件拖拽支持 - 父级组件管理\n    setupFileDragDrop() {\n      console.log('[EditorChat] 🎯 设置统一的文件拖拽管理（父级组件统一处理）');\n      \n      // 全局document监听器 - 智能分发拖拽事件\n      this.globalDragListeners = {\n        handleDragEnter: (e) => {\n          // 检查拖拽目标是否在Vue聊天组件区域内\n          if (this.isDragTargetInChatArea(e.target)) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            console.log('[EditorChat] 🎯 拦截dragenter - 目标在聊天区域');\n            this.handleDragEnter(e);\n          }\n          // 否则不处理，让VSCode工作区正常工作\n        },\n        \n        handleDragOver: (e) => {\n          if (this.isDragTargetInChatArea(e.target)) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            e.dataTransfer.dropEffect = 'copy';\n            console.log('[EditorChat] 🎯 拦截dragover - 目标在聊天区域');\n          }\n        },\n        \n        handleDragLeave: (e) => {\n          if (this.isDragTargetInChatArea(e.target)) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n            console.log('[EditorChat] 🎯 拦截dragleave - 目标在聊天区域');\n            this.handleDragLeave(e);\n          }\n        },\n        \n                 handleDrop: (e) => {\n           if (this.isDragTargetInChatArea(e.target)) {\n             e.preventDefault();\n             e.stopPropagation();\n             e.stopImmediatePropagation();\n             console.log('[EditorChat] 🎯 拦截drop - 目标在聊天区域，完全阻止VSCode处理');\n             \n             // 智能分发到对应的组件处理\n             this.handleFileDropToComponent(e);\n           }\n         }\n      };\n      \n      // 全局监听器使用capture模式，确保优先级最高\n      document.addEventListener('dragenter', this.globalDragListeners.handleDragEnter, true);\n      document.addEventListener('dragover', this.globalDragListeners.handleDragOver, true);\n      document.addEventListener('dragleave', this.globalDragListeners.handleDragLeave, true);\n      document.addEventListener('drop', this.globalDragListeners.handleDrop, true);\n      \n      console.log('[EditorChat] ✅ 统一拖拽管理已设置 - 智能分发到聊天区域');\n    },\n\n    // 🎯 智能判断：拖拽目标是否在聊天区域内\n    isDragTargetInChatArea(target) {\n      if (!this.$el || !target) return false;\n      \n      // 检查是否在EditorChat组件内\n      const isInEditorChat = this.$el.contains(target);\n      \n      // 进一步检查是否在聊天相关区域内\n      if (isInEditorChat) {\n        // 查找具体的聊天区域\n        const chatBox = this.$el.querySelector('.chat-box');\n        const chatInput = this.$el.querySelector('.chat-input-area');\n        const dragOverlay = this.$el.querySelector('.drag-overlay');\n        \n        // 如果在这些区域内，则认为是聊天区域\n        const isInChatBox = chatBox && chatBox.contains(target);\n        const isInChatInput = chatInput && chatInput.contains(target);\n        const isInDragOverlay = dragOverlay && dragOverlay.contains(target);\n        \n        return isInChatBox || isInChatInput || isInDragOverlay;\n      }\n      \n      return false;\n    },\n\n    // 🎯 智能分发文件拖拽到具体组件\n    handleFileDropToComponent(event) {\n      const target = event.target;\n      const files = event.dataTransfer.files;\n      \n      console.log('[EditorChat] 🎯 智能分发文件拖拽，文件数量:', files.length);\n      \n      // 判断是否拖拽到ChatInput区域\n      const chatInputArea = this.$el.querySelector('.chat-input-area');\n      if (chatInputArea && chatInputArea.contains(target)) {\n        console.log('[EditorChat] 🎯 分发到ChatInput组件处理');\n        \n        // 查找ChatInput组件实例并调用其处理方法\n        const chatBox = this.$refs.chatBox || this.$children.find(child => child.$options.name === 'chatPrivate');\n        if (chatBox && chatBox.$refs && chatBox.$refs.chatInputEditor) {\n          const chatInput = chatBox.$refs.chatInputEditor;\n          if (chatInput && typeof chatInput.handleDroppedFiles === 'function') {\n            // 设置拖拽状态\n            chatInput.isDragOver = false;\n            chatInput.dragCounter = 0;\n            \n            // 调用ChatInput的文件处理方法\n            chatInput.handleDroppedFiles(files);\n            return;\n          }\n        }\n      }\n      \n      // 否则使用EditorChat的通用文件处理\n      console.log('[EditorChat] 🎯 使用EditorChat通用文件处理');\n      this.handleFileDrop(event);\n    },\n\n    // 🔧 移除全局拖拽监听器\n    removeGlobalDragListeners() {\n      if (this.globalDragListeners) {\n        console.log('[EditorChat] 🧹 清理统一拖拽监听器');\n        document.removeEventListener('dragenter', this.globalDragListeners.handleDragEnter, true);\n        document.removeEventListener('dragover', this.globalDragListeners.handleDragOver, true);\n        document.removeEventListener('dragleave', this.globalDragListeners.handleDragLeave, true);\n        document.removeEventListener('drop', this.globalDragListeners.handleDrop, true);\n        this.globalDragListeners = null;\n      }\n    },\n\n    // 处理拖拽悬停\n    handleDragOver(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation(); // 强制阻止其他监听器\n      event.dataTransfer.dropEffect = 'copy';\n      \n      console.log('[EditorChat] Vue组件拦截dragover事件，阻止VSCode处理');\n    },\n\n    // 处理拖拽进入\n    handleDragEnter(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation(); // 强制阻止其他监听器\n      \n      console.log('[EditorChat] Vue组件拦截dragenter事件，阻止VSCode处理');\n      \n      // 检查是否有文件\n      if (this.hasFiles(event.dataTransfer)) {\n        this.showDragHint();\n        this.addDragOverClass();\n      }\n    },\n\n    // 处理拖拽离开\n    handleDragLeave(event) {\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation(); // 强制阻止其他监听器\n      \n      console.log('[EditorChat] Vue组件拦截dragleave事件，阻止VSCode处理');\n      \n      // 检查是否真正离开了拖拽区域\n      if (!this.$el.contains(event.relatedTarget)) {\n        this.hideDragHint();\n        this.removeDragOverClass();\n      }\n    },\n\n    // 🎯 核心：处理文件拖拽放下\n    async handleFileDrop(event) {\n      // 立即阻止事件传播，确保VSCode组件不会处理\n      event.preventDefault();\n      event.stopPropagation();\n      event.stopImmediatePropagation();\n      \n      console.log('[EditorChat] 🎯 Vue组件接收到拖拽事件，立即阻止传播');\n      console.log('[EditorChat] Event target:', event.target);\n      console.log('[EditorChat] Event currentTarget:', event.currentTarget);\n      \n      this.hideDragHint();\n      this.removeDragOverClass();\n      \n      console.log('[EditorChat] Drop event received:', {\n        dataTransfer: event.dataTransfer,\n        types: Array.from(event.dataTransfer.types),\n        files: event.dataTransfer.files,\n        filesLength: event.dataTransfer.files.length,\n        items: event.dataTransfer.items,\n        itemsLength: event.dataTransfer.items ? event.dataTransfer.items.length : 0\n      });\n      \n      const files = Array.from(event.dataTransfer.files);\n      \n      if (files.length === 0) {\n        console.log('[EditorChat] No files in drop event, checking items...');\n        \n        // 尝试从items中获取文件\n        if (event.dataTransfer.items && event.dataTransfer.items.length > 0) {\n          const itemFiles = [];\n          for (let i = 0; i < event.dataTransfer.items.length; i++) {\n            const item = event.dataTransfer.items[i];\n            console.log('[EditorChat] Item:', item.kind, item.type);\n            \n            if (item.kind === 'file') {\n              const file = item.getAsFile();\n              if (file) {\n                itemFiles.push(file);\n              }\n            }\n          }\n          \n          if (itemFiles.length > 0) {\n            console.log('[EditorChat] Found files in items:', itemFiles);\n            await this.processDroppedFiles(itemFiles);\n            return;\n          }\n        }\n        \n        // 使用完整的VSCode拖拽数据解析（与聊天工作区一致）\n        console.log('[EditorChat] 开始解析VSCode拖拽数据...');\n        const filePaths = await this.parseVSCodeDragData(event.dataTransfer);\n        if (filePaths.length > 0) {\n          console.log('[EditorChat] 解析出VSCode拖拽文件路径:', filePaths.length, '个');\n          await this.handleVSCodeFilePaths(filePaths);\n          return;\n        }\n        \n        console.warn('[EditorChat] No files found in drop event');\n        this.showErrorNotification('未检测到文件，请确保拖拽的是文件而不是文本');\n        return;\n      }\n      \n      console.log('[EditorChat] Files dropped:', files.map(f => ({ name: f.name, size: f.size })));\n      \n      // 检查当前是否有活跃会话\n      const currentSession = this.getCurrentSessionInfo();\n      if (!currentSession || !currentSession.id) {\n        this.showSessionSelectionRequired();\n        return;\n      }\n      \n      // 显示确认对话框\n      const confirmed = await this.confirmFileSend(files, currentSession);\n      if (!confirmed) {\n        return;\n      }\n      \n      // 🔄 复用现有的文件发送逻辑\n      await this.processDroppedFiles(files);\n    },\n\n    // 解析VSCode拖拽数据的完整逻辑（复用聊天工作区的解析方案）\n    async parseVSCodeDragData(dataTransfer) {\n      const filePaths = [];\n      \n      console.log('[EditorChat] 🔍 开始解析VSCode拖拽数据，可用类型:', Array.from(dataTransfer.types));\n      \n      // 方式1: VSCode内部URI列表 (多文件支持) - 最优先\n      // 使用正确的VSCode数据类型\n      const internalUriList = dataTransfer.getData('application/vnd.code.uri-list') || dataTransfer.getData('application/vnd.code.tree.resourcecontext');\n      if (internalUriList) {\n        console.log('[EditorChat] 🔗 获取到内部URI数据:', internalUriList);\n        try {\n          // 如果是URI列表格式，直接按行分割\n          if (internalUriList.includes('\\n') || internalUriList.includes('file://')) {\n            const uris = internalUriList.split(/[\\r\\n]+/).filter(uri => uri.trim() && !uri.startsWith('#'));\n            for (const uri of uris) {\n              const path = uri.replace('file://', '');\n              filePaths.push(path);\n            }\n          } else {\n            // 尝试解析为JSON数组\n            const parsedData = JSON.parse(internalUriList);\n            if (Array.isArray(parsedData)) {\n              for (const item of parsedData) {\n                if (item.uri) {\n                  const path = item.uri.replace('file://', '');\n                  filePaths.push(path);\n                } else if (typeof item === 'string') {\n                  const path = item.replace('file://', '');\n                  filePaths.push(path);\n                }\n              }\n            }\n          }\n        } catch (e) {\n          console.warn('[EditorChat] 解析内部URI数据失败:', e);\n        }\n      }\n\n      // 方式2: VSCode资源列表\n      if (filePaths.length === 0) {\n        const resourcesData = dataTransfer.getData('application/vnd.code.resources');\n        if (resourcesData) {\n          console.log('[EditorChat] 🔗 获取到resources数据:', resourcesData);\n          try {\n            const resources = JSON.parse(resourcesData);\n            if (Array.isArray(resources)) {\n              for (const resource of resources) {\n                if (typeof resource === 'string') {\n                  const path = resource.replace('file://', '');\n                  filePaths.push(path);\n                } else if (resource.uri) {\n                  const path = resource.uri.replace('file://', '');\n                  filePaths.push(path);\n                }\n              }\n            }\n          } catch (e) {\n            console.warn('[EditorChat] 解析resources数据失败:', e);\n          }\n        }\n      }\n\n      // 方式3: CodeFiles (文件路径数组) - 使用正确的类型名称\n      if (filePaths.length === 0) {\n        const codeFiles = dataTransfer.getData('codefiles') || dataTransfer.getData('application/vnd.code.files');\n        if (codeFiles) {\n          console.log('[EditorChat] 🔗 获取到CodeFiles:', codeFiles);\n          try {\n            const fileData = JSON.parse(codeFiles);\n            if (Array.isArray(fileData)) {\n              filePaths.push(...fileData);\n            }\n          } catch (e) {\n            console.warn('[EditorChat] 解析CodeFiles失败:', e);\n          }\n        }\n      }\n\n      // 方式4: 标准text/uri-list (通常只有一个URI，但也可能有多个)\n      if (filePaths.length === 0) {\n        const uriList = dataTransfer.getData('text/uri-list');\n        if (uriList) {\n          console.log('[EditorChat] 🔗 获取到text/uri-list:', uriList);\n          const uris = uriList.split(/[\\r\\n]+/).filter(uri => uri.trim() && !uri.startsWith('#'));\n          for (const uri of uris) {\n            const path = uri.replace('file://', '');\n            filePaths.push(path);\n          }\n        }\n      }\n\n      // 方式5: 简单的text/plain格式（最后备选）\n      if (filePaths.length === 0) {\n        const plainText = dataTransfer.getData('text/plain');\n        if (plainText) {\n          console.log('[EditorChat] 🔗 获取到text/plain:', plainText);\n          \n          // 检查是否是文件路径格式\n          if (plainText.includes('/') || plainText.includes('\\\\')) {\n            // 检查是否是JSON格式的数据\n            if (plainText.startsWith('{') || plainText.startsWith('[')) {\n              try {\n                const parsedData = JSON.parse(plainText);\n                if (Array.isArray(parsedData)) {\n                  filePaths.push(...parsedData);\n                } else if (parsedData.path || parsedData.uri) {\n                  filePaths.push(parsedData.path || parsedData.uri);\n                }\n              } catch (e) {\n                console.log('[EditorChat] 不是JSON数据，按行分割处理');\n              }\n            }\n            \n            // 如果不是JSON，尝试按行分割\n            if (filePaths.length === 0) {\n              const lines = plainText.split('\\n').filter(path => path.trim() && (path.includes('/') || path.includes('\\\\')));\n              filePaths.push(...lines);\n            }\n          }\n        }\n      }\n\n      // 清理路径格式\n      const cleanPaths = filePaths\n        .map(path => path.trim())\n        .filter(path => path && path !== '')\n        .map(path => path.replace(/^file:\\/\\//, '')) // 移除file://前缀\n        .filter((path, index, arr) => arr.indexOf(path) === index); // 去重\n\n      console.log('[EditorChat] 🎯 最终解析出文件路径:', cleanPaths.length, '个:', cleanPaths);\n      return cleanPaths;\n    },\n\n    // 处理VSCode文件路径（优化版）\n    async handleVSCodeFilePaths(filePaths) {\n      console.log('[EditorChat] 🚀 处理VSCode文件路径:', filePaths.length, '个');\n      \n      if (filePaths.length === 0) {\n        this.showErrorNotification('无法解析拖拽的文件路径');\n        return;\n      }\n      \n      // 🚀 使用SharedServicesAccessor直接从路径上传文件\n      if (window.SharedServicesAccessor && window.SharedServicesAccessor.uploadFilesFromPaths) {\n        try {\n          // 显示进度提示\n          this.showFileProcessingProgress(filePaths.length);\n          \n          // 获取当前会话信息\n          const sessionInfo = this.getCurrentSessionInfo();\n          if (!sessionInfo) {\n            throw new Error('未找到当前会话信息');\n          }\n\n          console.log('[EditorChat] 开始从路径批量上传文件:', filePaths);\n          const results = await window.SharedServicesAccessor.uploadFilesFromPaths(filePaths, sessionInfo);\n          \n          // 处理上传结果（Vue store同步已集成到uploadFileFromPath中）\n          let successCount = 0;\n          let failCount = 0;\n          \n          for (const result of results) {\n            if (result.success) {\n              successCount++;\n              console.log('[EditorChat] ✅ 文件上传和消息同步成功:', result.message);\n            } else {\n              failCount++;\n              console.error('[EditorChat] ❌ 文件上传失败:', result);\n              this.$message && this.$message.error(result.message);\n            }\n          }\n          \n          // 显示总体结果\n          if (successCount > 0) {\n            this.showSuccessNotification(successCount);\n          }\n          if (failCount > 0) {\n            console.error(`[EditorChat] ${failCount} 个文件上传失败`);\n          }\n          \n          this.hideFileProcessingProgress();\n          \n        } catch (error) {\n          console.error('[EditorChat] 批量路径文件上传失败:', error);\n          this.hideFileProcessingProgress();\n          this.showErrorNotification(`文件上传失败: ${error.message}`);\n        }\n      } else {\n        this.showErrorNotification('VSCode服务不可用，无法处理文件拖拽');\n      }\n    },\n\n    // 🎯 优化：使用SharedServicesAccessor的批量文件上传\n    async processDroppedFiles(files) {\n      console.log('[EditorChat] Processing dropped files...');\n      \n      // 过滤掉空文件\n      const validFiles = files.filter(file => {\n        if (file.size === 0) {\n          this.$message && this.$message.warning(`文件 ${file.name} 为空，已跳过`);\n          return false;\n        }\n        return true;\n      });\n\n      if (validFiles.length === 0) {\n        console.log('[EditorChat] 没有有效文件需要上传');\n        return;\n      }\n\n      try {\n        // 显示进度提示\n        this.showFileProcessingProgress(validFiles.length);\n        \n        // 获取当前会话信息\n        const sessionInfo = this.getCurrentSessionInfo();\n        if (!sessionInfo) {\n          throw new Error('未找到当前会话信息');\n        }\n\n        // 🚀 使用SharedServicesAccessor的批量上传方法\n        if (window.SharedServicesAccessor && window.SharedServicesAccessor.uploadFilesToSession) {\n          console.log('[EditorChat] 开始批量文件上传:', validFiles.length, '个文件');\n          const results = await window.SharedServicesAccessor.uploadFilesToSession(validFiles, sessionInfo);\n          \n          // 处理上传结果\n          let successCount = 0;\n          let failCount = 0;\n          \n          for (const result of results) {\n            if (result.success) {\n              successCount++;\n              console.log('[EditorChat] ✅ 文件上传成功:', result.message);\n            } else {\n              failCount++;\n              console.error('[EditorChat] ❌ 文件上传失败:', result);\n              this.$message && this.$message.error(result.message);\n            }\n          }\n          \n          // 显示总体结果\n          if (successCount > 0) {\n            this.showSuccessNotification(successCount);\n          }\n          if (failCount > 0) {\n            console.error(`[EditorChat] ${failCount} 个文件上传失败`);\n          }\n          \n        } else {\n          // 降级：逐个处理文件\n          console.log('[EditorChat] 降级为逐个处理文件');\n          for (const file of validFiles) {\n            console.log('[EditorChat] Processing file:', file.name);\n            \n            await this.handleFileSend({\n              file: file,\n              fileName: file.name,\n              fileSize: file.size,\n              fileType: file.type\n            });\n          }\n          \n          this.showSuccessNotification(validFiles.length);\n        }\n        \n        this.hideFileProcessingProgress();\n        \n      } catch (error) {\n        console.error('[EditorChat] File processing failed:', error);\n        this.hideFileProcessingProgress();\n        this.showErrorNotification(error.message);\n      }\n    },\n\n    // 检查是否包含文件\n    hasFiles(dataTransfer) {\n      if (!dataTransfer) return false;\n      \n      // 检查files集合\n      if (dataTransfer.files && dataTransfer.files.length > 0) {\n        console.log('[EditorChat] Found files in dataTransfer.files');\n        return true;\n      }\n      \n      // 检查types\n      if (dataTransfer.types) {\n        const hasFileType = dataTransfer.types.includes('Files') || \n                           dataTransfer.types.includes('application/x-vscode-file');\n        if (hasFileType) {\n          console.log('[EditorChat] Found file types in dataTransfer.types');\n          return true;\n        }\n      }\n      \n      // 检查items\n      if (dataTransfer.items && dataTransfer.items.length > 0) {\n        for (let i = 0; i < dataTransfer.items.length; i++) {\n          const item = dataTransfer.items[i];\n          if (item.kind === 'file') {\n            console.log('[EditorChat] Found file in dataTransfer.items');\n            return true;\n          }\n        }\n      }\n      \n      // 检查是否有文本数据（可能是VSCode文件路径）\n      if (dataTransfer.types && dataTransfer.types.includes('text/plain')) {\n        console.log('[EditorChat] Found text data, might be VSCode file paths');\n        return true;\n      }\n      \n      console.log('[EditorChat] No files detected in dataTransfer');\n      return false;\n    },\n\n    // 显示拖拽提示\n    showDragHint() {\n      if (this.dragHintElement) return;\n      \n      const hint = document.createElement('div');\n      hint.className = 'file-drag-hint';\n      hint.innerHTML = `\n        <div class=\"drag-hint-content\">\n          <div class=\"drag-hint-icon\">📁</div>\n          <div class=\"drag-hint-text\">拖拽文件到此处发送到聊天</div>\n          <div class=\"drag-hint-session\">${this.getCurrentSessionInfo()?.name || '当前会话'}</div>\n        </div>\n      `;\n      \n      this.$el.appendChild(hint);\n      this.dragHintElement = hint;\n    },\n\n    // 隐藏拖拽提示\n    hideDragHint() {\n      if (this.dragHintElement) {\n        this.dragHintElement.remove();\n        this.dragHintElement = null;\n      }\n    },\n\n    // 添加拖拽样式\n    addDragOverClass() {\n      this.$el.classList.add('file-drag-over');\n    },\n\n    // 移除拖拽样式\n    removeDragOverClass() {\n      this.$el.classList.remove('file-drag-over');\n    },\n\n    // 确认文件发送\n    async confirmFileSend(files, session) {\n      const fileList = files.map(f => `• ${f.name} (${this.formatFileSize(f.size)})`).join('\\n');\n      \n      if (this.$confirm) {\n        try {\n          await this.$confirm(\n            `确认发送 ${files.length} 个文件到 \"${session.name}\"？\\n\\n${fileList}`,\n            '确认文件发送',\n            {\n              confirmButtonText: '发送',\n              cancelButtonText: '取消',\n              type: 'info'\n            }\n          );\n          return true;\n        } catch {\n          return false;\n        }\n      } else {\n        // 降级到原生确认对话框\n        return confirm(`确认发送 ${files.length} 个文件到 \"${session.name}\"？\\n\\n${fileList}`);\n      }\n    },\n\n    // 显示会话选择提示\n    showSessionSelectionRequired() {\n      const message = '请先选择一个聊天会话，然后再拖拽文件';\n      \n      if (this.$message) {\n        this.$message.warning(message);\n      } else if (this.$vscode) {\n        const notification = this.protectVSCodeService(this.$vscode.get('INotificationService'), 'INotificationService');\n        notification?.warn(message);\n      } else {\n        alert(message);\n      }\n    },\n\n    // 显示文件处理进度\n    showFileProcessingProgress(fileCount) {\n      console.log(`[EditorChat] 开始处理 ${fileCount} 个文件...`);\n    \n    },\n\n    // 隐藏文件处理进度\n    hideFileProcessingProgress() {\n      if (this.processingMessage) {\n        this.processingMessage.close();\n        this.processingMessage = null;\n      }\n    },\n\n    // 显示成功通知\n    showSuccessNotification(fileCount) {\n      const message = `✅ 成功发送 ${fileCount} 个文件到聊天`;\n      \n      if (this.$message) {\n        this.$message.success(message);\n      } else if (this.$vscode) {\n        const notification = this.protectVSCodeService(this.$vscode.get('INotificationService'), 'INotificationService');\n        notification?.info(message);\n      }\n    },\n\n    // 显示错误通知\n    showErrorNotification(errorMessage) {\n      const message = `❌ 文件发送失败: ${errorMessage}`;\n      \n      if (this.$message) {\n        this.$message.error(message);\n      } else if (this.$vscode) {\n        const notification = this.protectVSCodeService(this.$vscode.get('INotificationService'), 'INotificationService');\n        notification?.error(message);\n      }\n    },\n\n    // 格式化文件大小\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n    },\n\n    // 清理拖拽监听器\n    cleanupFileDragDrop() {\n      const dropZones = [\n        this.$el,\n        this.$el?.querySelector('.chat-box'),\n        this.$el?.querySelector('.chat-page')\n      ].filter(Boolean);\n      \n      dropZones.forEach(dropZone => {\n        if (dropZone) {\n          dropZone.removeEventListener('dragover', this.handleDragOver, { capture: true });\n          dropZone.removeEventListener('dragenter', this.handleDragEnter, { capture: true });\n          dropZone.removeEventListener('dragleave', this.handleDragLeave, { capture: true });\n          dropZone.removeEventListener('drop', this.handleFileDrop, { capture: true });\n        }\n      });\n      \n      this.hideDragHint();\n    },\n\n    // 🔧 设置统一会话服务监听器\n    setupUnifiedSessionListener() {\n      console.log(\"[EditorChat] 🔧 开始设置统一会话服务监听器\");\n      \n      try {\n        let unifiedSessionService = null;\n        \n        // 多种方式尝试获取统一会话服务\n        \n        // 方式1: 通过$vscode服务获取\n        if (this.$vscode && this.$vscode.get) {\n          console.log(\"[EditorChat] 🔧 尝试通过$vscode.get获取统一会话服务...\");\n          unifiedSessionService = this.$vscode.get('IUnifiedSessionService');\n          console.log(\"[EditorChat] 🔧 通过$vscode.get获取结果:\", !!unifiedSessionService);\n        }\n        \n        // 方式2: 通过SharedServicesAccessor获取\n        if (!unifiedSessionService && window.SharedServicesAccessor) {\n          console.log(\"[EditorChat] 🔧 尝试通过SharedServicesAccessor获取统一会话服务...\");\n          unifiedSessionService = window.SharedServicesAccessor.get('IUnifiedSessionService');\n          console.log(\"[EditorChat] 🔧 通过SharedServicesAccessor获取结果:\", !!unifiedSessionService);\n        }\n        \n        // 方式3: 通过全局VSCode服务获取\n        if (!unifiedSessionService && window.vscode?.services) {\n          console.log(\"[EditorChat] 🔧 尝试通过全局vscode.services获取统一会话服务...\");\n          unifiedSessionService = window.vscode.services.get('IUnifiedSessionService');\n          console.log(\"[EditorChat] 🔧 通过全局vscode.services获取结果:\", !!unifiedSessionService);\n        }\n        \n        // 方式4: 直接从全局对象获取\n        if (!unifiedSessionService && window.unifiedSessionService) {\n          console.log(\"[EditorChat] 🔧 尝试从全局对象获取统一会话服务...\");\n          unifiedSessionService = window.unifiedSessionService;\n          console.log(\"[EditorChat] 🔧 从全局对象获取结果:\", !!unifiedSessionService);\n        }\n        \n        console.log(\"[EditorChat] 🔧 最终统一会话服务获取结果:\", {\n          hasService: !!unifiedSessionService,\n          serviceType: typeof unifiedSessionService,\n          hasOnSessionChanged: !!unifiedSessionService?.onSessionChanged,\n          hasGetAllSessions: !!unifiedSessionService?.getAllSessions\n        });\n        \n        if (unifiedSessionService && unifiedSessionService.onSessionChanged) {\n          console.log(\"[EditorChat] 🔧 统一会话服务正常，开始订阅事件...\");\n          \n          // 订阅会话变更事件\n          const disposable = unifiedSessionService.onSessionChanged(\n            this.handleUnifiedSessionEvent.bind(this)\n          );\n          \n          console.log(\"[EditorChat] 🔧 事件订阅结果:\", {\n            hasDisposable: !!disposable,\n            disposableType: typeof disposable,\n            hasDispose: !!disposable?.dispose\n          });\n          \n          if (disposable && typeof disposable.dispose === 'function') {\n            this.unifiedSessionUnsubscribe = () => disposable.dispose();\n            console.log(\"[EditorChat] ✅ 已成功订阅统一会话事件\");\n          } else {\n            console.warn(\"[EditorChat] ⚠️ 事件订阅返回的不是有效的disposable对象:\", disposable);\n            this.unifiedSessionUnsubscribe = null;\n          }\n        } else {\n          console.warn(\"[EditorChat] ⚠️ 统一会话服务或onSessionChanged事件不可用\");\n          console.warn(\"[EditorChat] ⚠️ 尝试设置备用监听机制...\");\n          this.setupFallbackSessionListener();\n          this.unifiedSessionUnsubscribe = null;\n        }\n      } catch (error) {\n        console.error(\"[EditorChat] ❌ 设置统一会话监听器失败:\", error);\n        console.error(\"[EditorChat] ❌ 错误详情:\", error.stack);\n        console.warn(\"[EditorChat] ⚠️ 尝试设置备用监听机制...\");\n        this.setupFallbackSessionListener();\n        this.unifiedSessionUnsubscribe = null;\n      }\n      \n      console.log(\"[EditorChat] 🔧 统一会话服务监听器设置完成\");\n    },\n\n    // 🔧 设置备用会话监听机制\n    setupFallbackSessionListener() {\n      console.log(\"[EditorChat] 🔧 设置备用会话监听机制...\");\n      \n      try {\n        // 备用方案1: 监听全局自定义事件\n        const fallbackHandler = (event) => {\n          console.log(\"[EditorChat] 🔔 收到备用会话事件:\", event.detail);\n          if (event.detail && event.detail.type === 'unified-session-activated') {\n            this.handleUnifiedSessionEvent(event.detail);\n          }\n        };\n        \n        window.addEventListener('unified-session-activated', fallbackHandler);\n        console.log(\"[EditorChat] ✅ 已设置全局事件监听器\");\n        \n        this.unifiedSessionUnsubscribe = () => {\n          window.removeEventListener('unified-session-activated', fallbackHandler);\n          console.log(\"[EditorChat] 🔧 已清理备用事件监听器\");\n        };\n        \n        // 备用方案2: 定期检查会话状态变化\n        let lastActiveSessionId = null;\n        const pollInterval = setInterval(() => {\n          try {\n            let unifiedSessionService = null;\n            \n            // 尝试获取服务\n            if (window.SharedServicesAccessor) {\n              unifiedSessionService = window.SharedServicesAccessor.get('IUnifiedSessionService');\n            }\n            \n            if (unifiedSessionService && typeof unifiedSessionService.getActiveSession === 'function') {\n              const activeSession = unifiedSessionService.getActiveSession();\n              const currentActiveSessionId = activeSession?.id;\n              \n              if (currentActiveSessionId && currentActiveSessionId !== lastActiveSessionId) {\n                console.log(\"[EditorChat] 🔔 检测到活跃会话变化 (轮询):\", currentActiveSessionId);\n                lastActiveSessionId = currentActiveSessionId;\n                \n                // 模拟统一会话事件\n                this.handleUnifiedSessionEvent({\n                  type: 'unified-session-activated',\n                  sessionId: currentActiveSessionId,\n                  sessionType: activeSession.type,\n                  session: activeSession\n                });\n              }\n            }\n          } catch (error) {\n            // 静默处理轮询错误\n          }\n        }, 1000); // 每秒检查一次\n        \n        // 确保在组件销毁时清理轮询\n        const originalCleanup = this.unifiedSessionUnsubscribe;\n        this.unifiedSessionUnsubscribe = () => {\n          clearInterval(pollInterval);\n          if (originalCleanup) originalCleanup();\n          console.log(\"[EditorChat] 🔧 已清理轮询机制\");\n        };\n        \n        console.log(\"[EditorChat] ✅ 已设置会话状态轮询机制\");\n        \n      } catch (error) {\n        console.error(\"[EditorChat] ❌ 设置备用监听机制失败:\", error);\n      }\n    },\n\n    // 🔧 测试统一会话服务访问\n    testUnifiedSessionServiceAccess() {\n      console.log(\"[EditorChat] 🔧 开始测试统一会话服务访问...\");\n      \n      try {\n        if (!this.$vscode) {\n          console.error(\"[EditorChat] ❌ $vscode服务不可用，无法测试\");\n          return;\n        }\n        \n        // 测试获取统一会话服务\n        const unifiedSessionService = this.$vscode.get('IUnifiedSessionService');\n        console.log(\"[EditorChat] 🔧 统一会话服务获取测试:\", {\n          hasService: !!unifiedSessionService,\n          serviceType: typeof unifiedSessionService,\n          hasOnSessionChanged: !!unifiedSessionService?.onSessionChanged,\n          hasGetAllSessions: !!unifiedSessionService?.getAllSessions,\n          hasSetActiveSession: !!unifiedSessionService?.setActiveSession\n        });\n        \n        // 如果服务可用，测试获取会话列表\n        if (unifiedSessionService && typeof unifiedSessionService.getAllSessions === 'function') {\n          try {\n            const sessions = unifiedSessionService.getAllSessions();\n            console.log(\"[EditorChat] 🔧 获取会话列表测试:\", {\n              sessionsCount: sessions?.length || 0,\n              firstSessionSample: sessions?.[0] || null\n            });\n          } catch (error) {\n            console.error(\"[EditorChat] ❌ 获取会话列表失败:\", error);\n          }\n        }\n        \n        // 测试其他常用服务\n        const notificationService = this.$vscode.get('INotificationService');\n        console.log(\"[EditorChat] 🔧 通知服务测试:\", !!notificationService);\n        \n        const fileService = this.$vscode.get('IFileService');\n        console.log(\"[EditorChat] 🔧 文件服务测试:\", !!fileService);\n        \n      } catch (error) {\n        console.error(\"[EditorChat] ❌ 统一会话服务访问测试失败:\", error);\n      }\n      \n      console.log(\"[EditorChat] 🔧 统一会话服务访问测试完成\");\n    },\n\n    // 🔧 处理统一会话服务事件\n    handleUnifiedSessionEvent(event) {\n      console.log('[EditorChat] 🔔 收到统一会话事件:', {\n        eventType: event?.type,\n        sessionId: event?.sessionId,\n        sessionType: event?.sessionType,\n        hasSession: !!event?.session,\n        eventDetails: event\n      });\n      \n      if (!event) {\n        console.warn('[EditorChat] ⚠️ 收到空的统一会话事件');\n        return;\n      }\n      \n      if (event.type !== 'unified-session-activated') {\n        console.log('[EditorChat] 🔧 非激活事件，忽略:', event.type);\n        return;\n      }\n\n      console.log('[EditorChat] 🔔 处理会话激活事件，类型:', event.sessionType);\n\n      // 根据会话类型处理\n      if (event.sessionType === 'vue-im') {\n        console.log('[EditorChat] 🔧 处理Vue IM会话激活');\n        this.handleImSessionActivatedFromUnified(event);\n      } else if (event.sessionType === 'react-ai') {\n        console.log('[EditorChat] 🔧 处理React AI会话激活');\n        this.handleAiSessionActivatedFromUnified(event);\n      } else {\n        console.warn('[EditorChat] ⚠️ 未知的会话类型:', event.sessionType);\n      }\n    },\n\n    // 🔧 处理来自统一服务的IM会话激活\n    handleImSessionActivatedFromUnified(event) {\n      console.log('[EditorChat] 处理IM会话激活:', event.session?.title);\n      \n      const sessionData = event.session;\n      if (!sessionData) {\n        console.warn('[EditorChat] IM会话事件中没有会话数据');\n        return;\n      }\n\n      // 获取targetId\n      const targetId = sessionData.targetId || sessionData.sessionId || sessionData.realSessionRef;\n      if (!targetId) {\n        console.warn('[EditorChat] IM会话事件中没有有效的targetId:', sessionData);\n        return;\n      }\n\n      // 防止重复激活同一会话\n      const sessionId = `vue-im-${targetId}`;\n      if (this.lastActivatedSessionId === sessionId) {\n        console.log('[EditorChat] 🔧 防止重复激活，会话已是当前激活状态:', sessionId);\n        return;\n      }\n\n      console.log('[EditorChat] 🔧 激活IM会话，targetId:', targetId);\n      \n      // 切换到IM模式\n      this.selectedAIChat = null;\n      this.isAIChat = false;\n      \n      // 通过targetId查找对应的聊天\n      const targetIdStr = targetId.toString();\n      const matchingChat = this.chatStore.chats?.find(\n        chat => {\n          const chatTargetId = (chat.targetId || chat.id)?.toString();\n          return chatTargetId === targetIdStr;\n        }\n      );\n\n      if (matchingChat) {\n        const chatIndex = this.chatStore.chats.indexOf(matchingChat);\n        console.log('[EditorChat] 🔧 找到匹配聊天，索引:', chatIndex, '会话名:', matchingChat.showName);\n        \n        // 检查当前激活状态，由于InboxSession已经激活，这里只需要确认状态\n        console.log('[EditorChat] 🔧 当前activeChat:', this.chatStore.activeChat?.showName || 'null');\n        console.log('[EditorChat] 🔧 期望activeChat:', matchingChat.showName);\n        \n        // 只要找到匹配的聊天，就认为激活成功，避免重复操作\n        this.lastActivatedSessionId = sessionId;\n        \n        // 切换到IM模式\n        this.selectedAIChat = null;\n        this.isAIChat = false;\n        \n        // 清除思维会话（如果有的话）\n        this.initializeThinkingSession();\n        \n        console.log('[EditorChat] 🔧 IM会话状态已同步');\n      } else {\n        console.warn('[EditorChat] ❌ 未找到匹配的聊天，targetId:', targetId);\n        console.log('[EditorChat] 🔧 可用聊天列表:', this.chatStore.chats?.map(c => ({\n          targetId: c.targetId,\n          id: c.id,\n          showName: c.showName\n        })));\n        \n        // 如果找不到匹配聊天，清除活跃状态\n        this.$store.commit(\"clearActiveChat\");\n        this.initializeThinkingSession();\n      }\n    },\n\n    // 🔧 处理来自统一服务的AI会话激活\n    handleAiSessionActivatedFromUnified(event) {\n      console.log('[EditorChat] 处理AI会话激活:', event.session?.title);\n      \n      const sessionData = event.session;\n      if (!sessionData) {\n        console.warn('[EditorChat] AI会话事件中没有会话数据');\n        return;\n      }\n\n      // 切换到AI模式\n      this.isAIChat = true;\n      this.$store.commit(\"clearActiveChat\"); // 清除人类聊天选择\n      \n      // 构造AI会话对象\n      this.selectedAIChat = {\n        id: sessionData.sessionId,\n        aiThreadId: sessionData.sessionId,\n        showName: sessionData.title || sessionData.showName || 'AI对话',\n        title: sessionData.title || sessionData.showName || 'AI对话',\n        summary: sessionData.summary || '',\n        lastModified: sessionData.lastModified || new Date().toISOString()\n      };\n      \n      console.log('[EditorChat] 🔧 AI会话已激活:', this.selectedAIChat.showName);\n    },\n  },\n  mounted() {\n    console.log('[EditorChat] 🔧 Component mounting...');\n    \n    // 初始化时检测当前活跃会话\n    this.detectPCTerminalChat();\n    \n    // 检查VSCode服务是否可用\n    console.log('[EditorChat] 🔧 Checking VSCode services availability:');\n    console.log('- $vscode:', !!this.$vscode);\n    console.log('- $vscode type:', typeof this.$vscode);\n    console.log('- $vscode.get:', !!this.$vscode?.get);\n    console.log('- SharedServicesAccessor:', !!window.SharedServicesAccessor);\n    console.log('- SharedServicesAccessor.getChatThreadsService:', !!window.SharedServicesAccessor?.getChatThreadsService);\n    console.log('- SharedServicesAccessor.saveFileToWorkspace:', !!window.SharedServicesAccessor?.saveFileToWorkspace);\n    \n    // 修复VSCode服务访问问题\n    this.fixVSCodeServices();\n    \n    // 🔧 立即测试统一会话服务访问\n    this.testUnifiedSessionServiceAccess();\n    \n    // 检查事件总线\n    console.log('[EditorChat] 🔧 Checking event bus:');\n    console.log('- $bus:', !!this.$bus);\n    console.log('- $eventBus:', !!this.$eventBus);\n    \n    // 初始化思维会话\n    this.initializeThinkingSession()\n    \n    // 设置通用事件监听\n    this.setupEventListeners()\n    \n    // 🆕 添加文件拖拽支持\n    this.setupFileDragDrop();\n    \n    // 设置文件事件监听\n    if (this.$bus) {\n      this.$bus.$on('chat:file:send', this.handleFileSend);\n      this.$bus.$on('chat:file:upload', this.handleFileSend);\n      console.log('[EditorChat] File event listeners registered on $bus');\n    } else {\n      console.warn('[EditorChat] $bus not available, cannot register file event listeners');\n    }\n    \n    // 如果有$eventBus，也在那里监听\n    if (this.$eventBus) {\n      this.$eventBus.$on('chat:file:send', this.handleFileSend);\n      this.$eventBus.$on('chat:file:upload', this.handleFileSend);\n      console.log('[EditorChat] File event listeners registered on $eventBus');\n    }\n    \n    console.log('[EditorChat] 🔧 Component mounted, all event listeners initialized');\n  },\n  beforeDestroy() {\n    // 清理通用事件监听\n    this.cleanupEventListeners()\n    \n    // 🔧 清理统一的拖拽监听器\n    this.removeGlobalDragListeners();\n    \n    // 清理文件事件监听\n    if (this.$bus) {\n      this.$bus.$off('chat:file:send', this.handleFileSend);\n      this.$bus.$off('chat:file:upload', this.handleFileSend);\n    }\n  },\n  watch: {\n    'chatStore.activeChat': {\n      handler() {\n        // 当活跃会话改变时，重新检测\n        this.detectPCTerminalChat();\n      },\n      immediate: true\n    },\n    chatData: {\n      handler(newChatData) {\n        if (newChatData) {\n          this.activateChatData(newChatData);\n        }\n      },\n      immediate: true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.chat-page {\n  height: 100% !important;\n  background-color: #f1f1f1;\n  position: relative;\n  \n  // 重写Element UI的el-container样式\n  &.el-container {\n    height: 100% !important;\n    flex-direction: row;\n  }\n  \n  // 🆕 文件拖拽样式\n  &.file-drag-over {\n    background: rgba(0, 122, 255, 0.1) !important;\n    \n    &::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      border: 3px dashed #007AFF;\n      border-radius: 8px;\n      pointer-events: none;\n      z-index: 999;\n    }\n  }\n  \n  .chat-box {\n    flex: 1;\n    height: 100% !important;\n    \n    // 重写Element UI的el-container样式\n    &.el-container {\n      height: 100% !important;\n      flex-direction: column;\n    }\n  }\n\n  .thinking-panel {\n    height: 100% !important;\n    border-left: 1px solid #e8eaec;\n    background: white;\n    \n    // 重写Element UI的el-aside样式\n    &.el-aside {\n      height: 100% !important;\n    }\n\n    .panel-tabs {\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n\n      .tabs-header {\n        display: flex;\n        border-bottom: 1px solid #e8eaec;\n        background: #f8f9fa;\n\n        .tab-btn {\n          flex: 1;\n          padding: 12px 8px;\n          border: none;\n          background: transparent;\n          cursor: pointer;\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 4px;\n          transition: all 0.2s;\n\n          &:hover {\n            background: #e9ecef;\n          }\n\n          &.active {\n            background: white;\n            border-bottom: 2px solid #007bff;\n            color: #007bff;\n          }\n\n          .tab-icon {\n            font-size: 16px;\n          }\n\n          .tab-label {\n            font-size: 11px;\n            font-weight: 500;\n          }\n        }\n      }\n\n      .tabs-content {\n        flex: 1;\n        overflow: hidden;\n\n        .tab-panel {\n          height: 100%;\n          overflow-y: auto;\n        }\n      }\n    }\n  }\n\n  .panel-toggle {\n    position: absolute;\n    right: 12px;\n    top: 50%;\n    transform: translateY(-50%);\n    background: #007bff;\n    color: white;\n    padding: 8px 12px;\n    border-radius: 20px;\n    cursor: pointer;\n    box-shadow: 0 2px 8px rgba(0,123,255,0.3);\n    transition: all 0.3s ease;\n    z-index: 100;\n\n    &:hover {\n      background: #0056b3;\n      transform: translateY(-50%) scale(1.05);\n    }\n\n    .toggle-icon {\n      margin-right: 6px;\n    }\n\n    .toggle-text {\n      font-size: 12px;\n      font-weight: 500;\n    }\n  }\n}\n\n// AI助手面板样式\n.ai-assistant-panel {\n  padding: 16px;\n  height: 100%;\n  overflow-y: auto;\n\n  .assistant-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 20px;\n\n    h3 {\n      margin: 0;\n      font-size: 16px;\n      font-weight: 600;\n      color: #2c3e50;\n    }\n\n    .assistant-status {\n      font-size: 12px;\n      padding: 4px 8px;\n      border-radius: 12px;\n      font-weight: 500;\n\n      &.active {\n        background: #d4edda;\n        color: #155724;\n      }\n      &.idle {\n        background: #fff3cd;\n        color: #856404;\n      }\n      &.analyzing {\n        background: #cce5ff;\n        color: #004085;\n      }\n    }\n  }\n\n  .quick-actions {\n    margin-bottom: 24px;\n\n    h4 {\n      margin: 0 0 12px 0;\n      font-size: 14px;\n      font-weight: 600;\n      color: #495057;\n    }\n\n    .action-buttons {\n      display: grid;\n      grid-template-columns: 1fr 1fr;\n      gap: 8px;\n\n      .action-btn {\n        padding: 8px 12px;\n        border: 1px solid #dee2e6;\n        border-radius: 6px;\n        background: white;\n        color: #495057;\n        cursor: pointer;\n        font-size: 12px;\n        text-align: center;\n        transition: all 0.2s;\n\n        &:hover {\n          background: #f8f9fa;\n          border-color: #adb5bd;\n        }\n      }\n    }\n  }\n\n  .ai-insights {\n    margin-bottom: 24px;\n\n    h4 {\n      margin: 0 0 12px 0;\n      font-size: 14px;\n      font-weight: 600;\n      color: #495057;\n    }\n\n    .insights-list {\n      .insight-item {\n        display: flex;\n        gap: 12px;\n        padding: 12px;\n        margin-bottom: 8px;\n        background: #f8f9fa;\n        border-radius: 8px;\n        border-left: 3px solid #dee2e6;\n\n        &.priority-high {\n          border-left-color: #dc3545;\n        }\n        &.priority-medium {\n          border-left-color: #ffc107;\n        }\n        &.priority-low {\n          border-left-color: #28a745;\n        }\n\n        .insight-icon {\n          font-size: 16px;\n          flex-shrink: 0;\n        }\n\n        .insight-content {\n          flex: 1;\n\n          .insight-title {\n            font-weight: 500;\n            font-size: 13px;\n            color: #2c3e50;\n            margin-bottom: 4px;\n          }\n\n          .insight-description {\n            font-size: 12px;\n            color: #6c757d;\n            line-height: 1.4;\n          }\n        }\n      }\n    }\n  }\n\n  .learning-feedback {\n    h4 {\n      margin: 0 0 12px 0;\n      font-size: 14px;\n      font-weight: 600;\n      color: #495057;\n    }\n\n    .feedback-form {\n      .feedback-input {\n        width: 100%;\n        min-height: 80px;\n        padding: 8px 12px;\n        border: 1px solid #dee2e6;\n        border-radius: 6px;\n        resize: vertical;\n        font-size: 12px;\n        line-height: 1.4;\n        margin-bottom: 8px;\n\n        &:focus {\n          outline: none;\n          border-color: #007bff;\n        }\n      }\n\n      .submit-btn {\n        width: 100%;\n        padding: 8px 12px;\n        border: 1px solid #007bff;\n        border-radius: 6px;\n        background: #007bff;\n        color: white;\n        cursor: pointer;\n        font-size: 12px;\n        transition: all 0.2s;\n\n        &:hover {\n          background: #0056b3;\n        }\n      }\n    }\n  }\n}\n\n// 设置面板样式\n.settings-panel {\n  padding: 16px;\n  height: 100%;\n  overflow-y: auto;\n\n  .settings-header {\n    margin-bottom: 20px;\n\n    h3 {\n      margin: 0;\n      font-size: 16px;\n      font-weight: 600;\n      color: #2c3e50;\n    }\n  }\n\n  .settings-sections {\n    .setting-section {\n      margin-bottom: 24px;\n\n      h4 {\n        margin: 0 0 12px 0;\n        font-size: 14px;\n        font-weight: 600;\n        color: #495057;\n        border-bottom: 1px solid #e9ecef;\n        padding-bottom: 6px;\n      }\n\n      .setting-item {\n        margin-bottom: 12px;\n\n        .setting-label {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          font-size: 13px;\n          color: #495057;\n          cursor: pointer;\n\n          input[type=\"checkbox\"] {\n            margin: 0;\n          }\n\n          select {\n            margin-left: auto;\n            padding: 4px 8px;\n            border: 1px solid #dee2e6;\n            border-radius: 4px;\n            font-size: 12px;\n          }\n        }\n      }\n    }\n  }\n\n  .settings-actions {\n    display: flex;\n    gap: 8px;\n    margin-top: 20px;\n\n    .reset-btn, .save-btn {\n      flex: 1;\n      padding: 8px 12px;\n      border: 1px solid #dee2e6;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 12px;\n      text-align: center;\n      transition: all 0.2s;\n    }\n\n    .reset-btn {\n      background: white;\n      color: #6c757d;\n\n      &:hover {\n        background: #f8f9fa;\n      }\n    }\n\n    .save-btn {\n      background: #28a745;\n      color: white;\n      border-color: #28a745;\n\n      &:hover {\n        background: #218838;\n      }\n    }\n  }\n}\n\n// 空状态样式\n.empty-state {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(255, 255, 255, 0.9);\n  z-index: 1000;\n\n  .empty-content {\n    text-align: center;\n\n    .empty-icon {\n      font-size: 48px;\n      color: #6c757d;\n      margin-bottom: 16px;\n    }\n\n    h3 {\n      margin: 0;\n      font-size: 18px;\n      font-weight: 600;\n      color: #333;\n    }\n\n    p {\n      margin: 8px 0 0 0;\n      font-size: 14px;\n      color: #6c757d;\n    }\n  }\n}\n\n// 🆕 拖拽提示浮层样式\n.file-drag-hint {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.7);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  pointer-events: none;\n  \n  .drag-hint-content {\n    background: white;\n    border-radius: 12px;\n    padding: 32px;\n    text-align: center;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\n    transform: scale(0.95);\n    animation: dragHintShow 0.2s ease-out forwards;\n    \n    .drag-hint-icon {\n      font-size: 48px;\n      margin-bottom: 16px;\n    }\n    \n    .drag-hint-text {\n      font-size: 18px;\n      font-weight: 600;\n      color: #2c3e50;\n      margin-bottom: 8px;\n    }\n    \n    .drag-hint-session {\n      font-size: 14px;\n      color: #6c757d;\n      padding: 6px 12px;\n      background: #f8f9fa;\n      border-radius: 6px;\n      display: inline-block;\n    }\n  }\n}\n\n@keyframes dragHintShow {\n  from {\n    opacity: 0;\n    transform: scale(0.9);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorChatPlugin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorChatPlugin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./EditorChatPlugin.vue?vue&type=template&id=65028289\"\nimport script from \"./EditorChatPlugin.vue?vue&type=script&lang=js\"\nexport * from \"./EditorChatPlugin.vue?vue&type=script&lang=js\"\nimport style0 from \"./EditorChatPlugin.vue?vue&type=style&index=0&id=65028289&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"plugin-chat-container\">\n    <!-- 返回按钮 -->\n    <div class=\"back-button-container\">\n      <el-button \n        type=\"primary\" \n        icon=\"el-icon-arrow-left\" \n        @click=\"goBack\"\n        size=\"small\"\n        class=\"back-button\"\n      >\n        返回\n      </el-button>\n    </div>\n    \n    <!-- 聊天内容 -->\n    <div class=\"chat-content\" v-if=\"isShowingChat\">\n      <editor-chat v-if=\"uiStore.viewCode === 1\" :chatData=\"currentChatData\"></editor-chat>\n      <editor-friend v-if=\"uiStore.viewCode === 2\" @startChat=\"handleStartChat\"></editor-friend>\n      <editor-group v-if=\"uiStore.viewCode === 3\"></editor-group>\n    </div>\n    \n    <!-- 好友详情内容 -->\n    <div class=\"friend-content\" v-if=\"isShowingFriend\">\n      <editor-friend :friendData=\"friendData\" @startChat=\"handleStartChat\"></editor-friend>\n    </div>\n  </div>\n</template>\n<script>\nimport EditorChat from \"./EditorChatPlugin.vue\";\nimport EditorFriend from \"./EditorFriend.vue\";\nimport EditorGroup from \"./EditorGroup.vue\";\n\nexport default {\n  name: \"PluginChat\",\n  components: {\n    EditorChat,\n    EditorFriend,\n    EditorGroup,\n  },\n  props: {\n    chatData: {\n      type: Object,\n      default: () => ({})\n    },\n    friendData: {\n      type: Object,\n      default: () => null\n    }\n  },\n  data() {\n    return {\n      searchText: \"\",\n      messageContent: \"\",\n      group: {},\n      groupMembers: [],\n      currentMode: 'default', // 'default' | 'chat' | 'friend'\n      currentChatData: null, // 当前聊天数据\n    };\n  },\n  methods: {\n    onTop(chatIdx) {\n      this.$store.commit(\"moveTop\", chatIdx);\n    },\n    // 返回到InboxPlugin视图\n    goBack() {\n      // 如果当前在聊天模式，返回到好友详情\n      if (this.currentMode === 'chat' && this.friendData) {\n        this.switchToFriendMode();\n      } else {\n        // 否则返回到收件箱\n        this.$emit('backToInbox');\n      }\n    },\n    // 处理开始聊天事件\n    handleStartChat(chatData) {\n      console.log('[PluginChat] 开始聊天:', chatData);\n      this.currentChatData = chatData;\n      this.currentMode = 'chat';\n      // 设置UI状态为聊天模式\n      this.$store.commit(\"changeViewCode\", 1);\n    },\n    // 切换到好友模式\n    switchToFriendMode() {\n      console.log('[PluginChat] 切换到好友模式');\n      this.currentMode = 'friend';\n      this.currentChatData = null;\n      // 设置UI状态为好友详情模式\n      this.$store.commit(\"changeViewCode\", 2);\n    },\n  },\n  computed: {\n\t\tuiStore() {\n\t\t\treturn this.$store.state.uiStore;\n\t\t},\n    chatStore() {\n      return this.$store.state.chatStore;\n    },\n    loading() {\n      return this.chatStore.loadingGroupMsg || this.chatStore.loadingPrivateMsg;\n    },\n    // 判断是否显示聊天内容\n    isShowingChat() {\n      // 如果有传入的chatData且没有friendData，或者当前模式是chat\n      return (this.chatData && Object.keys(this.chatData).length > 0 && !this.friendData) || \n             (this.currentMode === 'chat');\n    },\n    // 判断是否显示好友详情\n    isShowingFriend() {\n      // 如果有friendData且当前模式不是chat\n      return this.friendData && Object.keys(this.friendData).length > 0 && this.currentMode !== 'chat';\n    }\n  },\n  watch: {\n    // 监听好友数据变化，设置UI状态\n    friendData: {\n      handler(newFriendData) {\n        if (newFriendData && Object.keys(newFriendData).length > 0) {\n          console.log('接收到好友数据:', newFriendData);\n          this.currentMode = 'friend';\n          this.currentChatData = null;\n          // 设置UI状态为好友详情模式\n          this.$store.commit(\"changeViewCode\", 2);\n          // 设置活跃好友\n          this.$store.commit(\"setActiveFriend\", newFriendData);\n        }\n      },\n      immediate: true\n    },\n    // 监听聊天数据变化\n    chatData: {\n      handler(newChatData) {\n        if (newChatData && Object.keys(newChatData).length > 0 && !this.friendData) {\n          console.log('接收到聊天数据:', newChatData);\n          this.currentMode = 'default';\n          this.currentChatData = newChatData;\n        }\n      },\n      immediate: true\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.plugin-chat-container {\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  \n  .back-button-container {\n    padding: 10px;\n    background: var(--im-color-primary-light-9);\n    border-bottom: 1px solid #e4e7ed;\n    \n    .back-button {\n      font-size: 14px;\n    }\n  }\n  \n  .chat-content, .friend-content {\n    flex: 1;\n    overflow: hidden;\n  }\n}\n</style>\n\n<style lang=\"scss\">\n.chat-page {\n  .chat-list-box {\n    display: flex;\n    flex-direction: column;\n    background: var(--im-background);\n\n    .chat-list-header {\n      height: 50px;\n      display: flex;\n      align-items: center;\n      padding: 0 8px;\n    }\n\n    .chat-list-loading {\n      height: 50px;\n      background-color: #eee;\n\n      .el-icon-loading {\n        font-size: 24px;\n        color: var(--im-text-color-light);\n      }\n\n      .el-loading-text {\n        color: var(--im-text-color-light);\n      }\n\n      .chat-loading-box {\n        height: 100%;\n      }\n    }\n\n    .chat-list-items {\n      flex: 1;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PluginChat.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PluginChat.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./PluginChat.vue?vue&type=template&id=bc1e3166&scoped=true\"\nimport script from \"./PluginChat.vue?vue&type=script&lang=js\"\nexport * from \"./PluginChat.vue?vue&type=script&lang=js\"\nimport style0 from \"./PluginChat.vue?vue&type=style&index=0&id=bc1e3166&prod&lang=scss&scoped=true\"\nimport style1 from \"./PluginChat.vue?vue&type=style&index=1&id=bc1e3166&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bc1e3166\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"plugin-container\">\n    <keep-alive>\n      <component \n        :is=\"currentComponent\" \n        :chatData=\"selectedChatData\"\n        :friendData=\"selectedFriendData\"\n        @showChat=\"showChatView\"\n        @showFriend=\"showFriendView\"\n        @backToInbox=\"backToInbox\"\n        ref=\"currentComponentRef\"\n      />\n    </keep-alive>\n  </div>\n</template>\n\n<script>\nimport InboxPlugin from \"./InboxPlugin.vue\";\nimport PluginChat from \"./PluginChat.vue\";\n\nexport default {\n  name: \"Plugin\",\n  components: {\n    InboxPlugin,\n    PluginChat\n  },\n  data() {\n    return {\n      currentView: 'inbox', // 当前显示的视图: 'inbox' | 'chat' | 'friend'\n      selectedChatData: null, // 选中的聊天数据\n      selectedFriendData: null, // 选中的好友数据\n    };\n  },\n  computed: {\n    currentComponent() {\n      if (this.currentView === 'inbox') {\n        return 'InboxPlugin';\n      } else {\n        return 'PluginChat';\n      }\n    }\n  },\n  methods: {\n    // 显示聊天视图\n    showChatView(chatData) {\n      console.log('切换到聊天视图:', chatData);\n      this.selectedChatData = chatData;\n      this.selectedFriendData = null;\n      this.currentView = 'chat';\n    },\n    \n    // 显示好友详情视图\n    showFriendView(friendData) {\n      console.log('切换到好友详情视图:', friendData);\n      this.selectedFriendData = friendData;\n      this.selectedChatData = null;\n      this.currentView = 'friend';\n    },\n    \n    // 回退到收件箱视图\n    backToInbox() {\n      console.log('回退到收件箱视图');\n      this.currentView = 'inbox';\n      this.selectedChatData = null;\n      this.selectedFriendData = null;\n    }\n  },\n  \n  // 组件创建时默认显示收件箱\n  created() {\n    console.log('Plugin组件已创建，默认显示收件箱');\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.plugin-container {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plugin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??ref--13-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./plugin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./plugin.vue?vue&type=template&id=61bdadf0&scoped=true\"\nimport script from \"./plugin.vue?vue&type=script&lang=js\"\nexport * from \"./plugin.vue?vue&type=script&lang=js\"\nimport style0 from \"./plugin.vue?vue&type=style&index=0&id=61bdadf0&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"61bdadf0\",\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Login from '../view/Login'\nimport Register from '../view/Register'\nimport Home from '../view/Home'\nimport Vscode from '../view/Vscode'\nimport Plugin from '../view/plugin'\n// 安装路由\nVue.use(VueRouter); \n\n// 配置导出路由\nexport default new VueRouter({\n  routes: [{\n    path: \"/\",\n    redirect: \"/login\"\n  },\n  {\n    name: \"Login\",\n    path: '/login',\n    component: Login\n  },\n  {\n    name: \"Register\",\n    path: '/register',\n    component: Register\n  },\n  {\n    name: \"Vscode\",\n    path: '/vscode',\n    component: Vscode\n  },\n  {\n    name: \"Plugin\",\n    path: '/plugin',\n    component: Plugin\n  },\n  {\n    name: \"Home\",\n    path: '/home',\n    component: Home,\n    children: [\n      {\n        name: \"Chat\",\n        path: \"/home/chat\",\n        component: () => import(\"../view/Chat\"),\n      },\n      {\n        name: \"Friend\",\n        path: \"/home/friend\",\n        component: () => import(\"../view/Friend\"),\n      },\n      {\n        name: \"GROUP\",\n        path: \"/home/group\",\n        component: () => import(\"../view/Group\"),\n      }\n    ]\n  },\n  {\n    name: \"MessageRendererDemo\",\n    path: '/demo/message-renderer',\n    component: () => import(\"../components/message/MessageRendererDemo\"),\n  },\n  {\n    name: \"TestMermaid\",\n    path: '/test-mermaid',\n    component: () => import(\"../views/TestMermaid\"),\n  }\n  ]\n\n});\n","var websock = null;\nlet rec; //断线重连后，延迟5秒重新创建WebSocket连接  rec用来存储延迟请求的代码\nlet isConnect = false; //连接标识 避免重复连接\nlet connectCallBack = null;\nlet messageCallBack = null;\nlet closeCallBack = null\n\n\nlet connect = (wsurl, accessToken) => {\n\ttry {\n\t\tif (isConnect) {\n\t\t\treturn;\n\t\t}\n\t\tconsole.log(\"连接WebSocket\");\n\t\twebsock = new WebSocket(wsurl);\n\t\twebsock.onmessage = function (e) {\n\t\t\tlet sendInfo = JSON.parse(e.data)\n\t\t\tif (sendInfo.cmd == 0) {\n\t\t\t\theartCheck.start()\n\t\t\t\t// 登录成功才算真正完成连接\n\t\t\t\tconnectCallBack && connectCallBack();\n\t\t\t\tconsole.log('WebSocket登录成功')\n\t\t\t} else if (sendInfo.cmd == 1) {\n\t\t\t\t// 重新开启心跳定时\n\t\t\t\theartCheck.reset();\n\t\t\t} else if (sendInfo.cmd == 2) {\n\t\t\t\t// 强制下线消息\n\t\t\t\tconsole.log('收到强制下线通知:', sendInfo.data);\n\t\t\t\t// 主动关闭连接，不触发重连\n\t\t\t\twebsock.close(1000);\n\t\t\t\t// 通知上层应用处理强制下线\n\t\t\t\tmessageCallBack && messageCallBack(sendInfo.cmd, sendInfo.data);\n\t\t\t} else if (sendInfo.cmd == 11) {\n\t\t\t\t// LLM_STREAM_CHUNK - LLM流式数据块\n\t\t\t\tconsole.log('收到LLM流式数据块:', sendInfo.data);\n\t\t\t\tmessageCallBack && messageCallBack(sendInfo.cmd, sendInfo.data);\n\t\t\t} else if (sendInfo.cmd == 12) {\n\t\t\t\t// LLM_STREAM_END - LLM流式结束\n\t\t\t\tconsole.log('LLM流式传输结束:', sendInfo.data);\n\t\t\t\tmessageCallBack && messageCallBack(sendInfo.cmd, sendInfo.data);\n\t\t\t} else if (sendInfo.cmd == 13) {\n\t\t\t\t// LLM_STREAM_ERROR - LLM流式错误\n\t\t\t\tconsole.error('LLM流式传输错误:', sendInfo.data);\n\t\t\t\tmessageCallBack && messageCallBack(sendInfo.cmd, sendInfo.data);\n\t\t\t} else {\n\t\t\t\t// 其他消息转发出去\n\t\t\t\tconsole.log(\"收到消息:\", sendInfo);\n\t\t\t\tmessageCallBack && messageCallBack(sendInfo.cmd, sendInfo.data)\n\t\t\t}\n\t\t}\n\t\twebsock.onclose = function (e) {\n\t\t\tconsole.log('WebSocket连接关闭')\n\t\t\tisConnect = false; //断开后修改标识\n\t\t\tcloseCallBack && closeCallBack(e);\n\t\t}\n\t\twebsock.onopen = function () {\n\t\t\tconsole.log(\"WebSocket连接成功\");\n\t\t\tisConnect = true;\n\t\t\t// 发送登录命令\n\t\t\tlet loginInfo = {\n\t\t\t\tcmd: 0,\n\t\t\t\tdata: {\n\t\t\t\t\taccessToken: accessToken\n\t\t\t\t}\n\t\t\t};\n\t\t\twebsock.send(JSON.stringify(loginInfo));\n\t\t}\n\n\t\t// 连接发生错误的回调方法\n\t\twebsock.onerror = function () {\n\t\t\tconsole.log('WebSocket连接发生错误')\n\t\t\tisConnect = false; //连接断开修改标识\n\t\t\treconnect(wsurl, accessToken);\n\t\t}\n\t} catch (e) {\n\t\tconsole.log(\"尝试创建连接失败\");\n\t\treconnect(wsurl, accessToken); //如果无法连接上webSocket 那么重新连接！可能会因为服务器重新部署，或者短暂断网等导致无法创建连接\n\t}\n};\n\n//定义重连函数\nlet reconnect = (wsurl, accessToken) => {\n\tconsole.log(\"尝试重新连接\");\n\tif (isConnect) {\n\t\t//如果已经连上就不在重连了\n\t\treturn;\n\t}\n\trec && clearTimeout(rec);\n\trec = setTimeout(function () { // 延迟5秒重连  避免过多次过频繁请求重连\n\t\tconnect(wsurl, accessToken);\n\t}, 15000);\n};\n//设置关闭连接\nlet close = (code) => {\n\twebsock && websock.close(code);\n};\n\n\n//心跳设置\nlet heartCheck = {\n\ttimeout: 5000, //每段时间发送一次心跳包 这里设置为20s\n\ttimeoutObj: null, //延时发送消息对象（启动心跳新建这个对象，收到消息后重置对象）\n\tstart: function () {\n\t\tif (isConnect) {\n\t\t\tconsole.log('发送WebSocket心跳')\n\t\t\tlet heartBeat = {\n\t\t\t\tcmd: 1,\n\t\t\t\tdata: {}\n\t\t\t};\n\t\t\twebsock.send(JSON.stringify(heartBeat))\n\t\t}\n\t},\n\n\treset: function () {\n\t\tclearTimeout(this.timeoutObj);\n\t\tthis.timeoutObj = setTimeout(function () {\n\t\t\theartCheck.start();\n\t\t}, this.timeout);\n\n\t}\n};\n\n\n\n// 实际调用的方法\nlet sendMessage = (agentData) => {\n\tif (websock.readyState === websock.OPEN) {\n\t\t// 若是ws开启状态\n\t\twebsock.send(JSON.stringify(agentData))\n\t} else if (websock.readyState === websock.CONNECTING) {\n\t\t// 若是 正在开启状态，则等待1s后重新调用\n\t\tsetTimeout(function () {\n\t\t\tsendMessage(agentData)\n\t\t}, 1000)\n\t} else {\n\t\t// 若未开启 ，则等待1s后重新调用\n\t\tsetTimeout(function () {\n\t\t\tsendMessage(agentData)\n\t\t}, 1000)\n\t}\n}\n\nlet onConnect = (callback) => {\n\tconnectCallBack = callback;\n}\n\nlet onMessage = (callback) => {\n\tmessageCallBack = callback;\n}\n\n\nlet onClose = (callback) => {\n\tcloseCallBack = callback;\n}\n\n// 获取当前的消息回调\nlet getMessageCallBack = () => {\n\treturn messageCallBack;\n}\n\n// 设置消息回调\nlet setMessageCallBack = (callback) => {\n\tmessageCallBack = callback;\n}\n\n// 将方法暴露出去\nexport {\n\tconnect,\n\treconnect,\n\tclose,\n\tsendMessage,\n\tonConnect,\n\tonMessage,\n\tonClose,\n\tgetMessageCallBack,\n\tsetMessageCallBack\n}\n","\n// 是否普通消息\nlet isNormal = function (type) {\n\treturn type >= 0 && type < 10;\n}\n\n// 是否状态消息\nlet isStatus = function (type) {\n\treturn type >= 10 && type < 20;\n}\n\n// 是否提示消息\nlet isTip = function (type) {\n\treturn type >= 20 && type < 30;\n}\n\n// 操作交互类消息\nlet isAction = function (type) {\n\treturn type >= 40 && type < 50;\n}\n\n// 单人通话信令\nlet isRtcPrivate = function (type) {\n\treturn type >= 100 && type < 200;\n}\n\n// 多人通话信令\nlet isRtcGroup = function (type) {\n\treturn type >= 200 && type < 300;\n}\n\n\nexport {\n\tisNormal,\n\tisStatus,\n\tisTip,\n\tisAction,\n\tisRtcPrivate,\n\tisRtcGroup\n}","const emoTextList = ['憨笑', '媚眼', '开心', '坏笑', '可怜', '爱心', '笑哭', '拍手', '惊喜', '打气',\n\t'大哭', '流泪', '饥饿', '难受', '健身', '示爱', '色色', '眨眼', '暴怒', '惊恐',\n\t'思考', '头晕', '大吐', '酷笑', '翻滚', '享受', '鼻涕', '快乐', '雀跃', '微笑',\n\t'贪婪', '红心', '粉心', '星星', '大火', '眼睛', '音符', \"叹号\", \"问号\", \"绿叶\",\n\t\"燃烧\", \"喇叭\", \"警告\", \"信封\", \"房子\", \"礼物\", \"点赞\", \"举手\", \"拍手\", \"点头\",\n\t\"摇头\", \"偷瞄\", \"庆祝\", \"疾跑\", \"打滚\", \"惊吓\", \"起跳\"\n];\n\n\nlet transform = (content, extClass) => {\n\treturn content.replace(/\\#[\\u4E00-\\u9FA5]{1,3}\\;/gi, (text) => textToImg(text, extClass));\n}\n\n// 将匹配结果替换表情图片\nlet textToImg = (emoText, extClass) => {\n\tlet word = emoText.replace(/\\#|\\;/gi, '');\n\tlet idx = emoTextList.indexOf(word);\n\tif (idx == -1) {\n\t\treturn emoText;\n\t}\n\tlet url = require(`@/assets/emoji/${idx}.gif`);\n\treturn `<img src=\"${url}\" class=\"${extClass}\" />`\n}\n\nlet textToUrl = (emoText) => {\n\tlet word = emoText.replace(/\\#|\\;/gi, '');\n\tlet idx = emoTextList.indexOf(word);\n\tif (idx == -1) {\n\t\treturn \"\";\n\t}\n\tlet url = require(`@/assets/emoji/${idx}.gif`);\n\treturn url;\n}\n\nexport default {\n\temoTextList,\n\ttransform,\n\ttextToImg,\n\ttextToUrl\n}\n","let replaceURLWithHTMLLinks = (content, color) => {\n\t// 使用正则表达式匹配更广泛的URL格式(此正则由deepseek生成)\n\tconst urlRegex = /(\\b(https?|ftp|file):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|]|\\bwww\\.[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/ig;\n\treturn content.replace(urlRegex, (url) => {\n\t    // 如果URL不以http(s)://开头，则添加http://前缀\n\t    if (!url.startsWith(\"http\")) {\n\t        url = \"http://\" + url;\n\t    }\n\t    return `<a href=\"${url}\" target=\"_blank\" style=\"color: ${color};text-decoration: underline;\">${url}</a>`;\n\t});\n}\n\nexport default {\n\treplaceURLWithHTMLLinks\n}","let fixTop = (e) => {\n\tvar offset = e.offsetTop\n\tif (e.offsetParent != null) {\n\t\toffset += fixTop(e.offsetParent)\n\t}\n\treturn offset\n}\n\nlet fixLeft = (e) => {\n\tvar offset = e.offsetLeft\n\tif (e.offsetParent != null) {\n\t\toffset += fixLeft(e.offsetParent)\n\t}\n\treturn offset\n}\n\nlet setTitleTip = (tip) => {\n\tlet title = process.env.VUE_APP_NAME;\n\tif (tip) {\n\t\ttitle = `(${tip})${title}`;\n\t}\n\tdocument.title = title;\n\n}\n\nexport default {\n\tfixTop,\n\tfixLeft,\n\tsetTitleTip\n}\n","const MESSAGE_TYPE = {\n\tTEXT: 0,\n\tIMAGE: 1,\n\tFILE: 2,\n\tAUDIO: 3,\n\tVIDEO: 4,\n\tRECALL: 10,\n\tREADED: 11,\n\tRECEIPT: 12,\n\tTIP_TIME: 20,\n\tTIP_TEXT: 21,\n\tLOADING: 30,\n\tACT_RT_VOICE: 40,\n\tACT_RT_VIDEO: 41,\n\tUSER_BANNED: 50,\n\tFRIEND_NEW: 80,\n\tFRIEND_DEL: 81,\n\tGROUP_NEW: 90,\n\tGROUP_DEL: 91,\n\tRTC_CALL_VOICE: 100,\n\tRTC_CALL_VIDEO: 101,\n\tRTC_ACCEPT: 102,\n\tRTC_REJECT: 103,\n\tRTC_CANCEL: 104,\n\tRTC_FAILED: 105,\n\tRTC_HANDUP: 106,\n\tRTC_CANDIDATE: 107,\n\tRTC_GROUP_SETUP: 200,\n\tRTC_GROUP_ACCEPT: 201,\n\tRTC_GROUP_REJECT: 202,\n\tRTC_GROUP_FAILED: 203,\n\tRTC_GROUP_CANCEL: 204,\n\tRTC_GROUP_QUIT: 205,\n\tRTC_GROUP_INVITE: 206,\n\tRTC_GROUP_JOIN: 207,\n\tRTC_GROUP_OFFER: 208,\n\tRTC_GROUP_ANSWER: 209,\n\tRTC_GROUP_CANDIDATE: 210,\n\tRTC_GROUP_DEVICE: 211\n}\n\nconst RTC_STATE = {\n\tFREE: 0, //空闲，可以被呼叫\n\tWAIT_CALL: 1, // 呼叫后等待\n\tWAIT_ACCEPT: 2, // 被呼叫后等待\n\tACCEPTED: 3, // 已接受聊天，等待建立连接\n\tCHATING: 4 // 聊天中\n}\n\nconst TERMINAL_TYPE = {\n\tWEB: 0,       // 傻蛋网页端\n\tAPP: 1,       // 傻蛋精灵App\n\tVSCODE: 2,    // 我的电脑(VSCode)\n\tPC: 3,        // 我的云电脑\n\tPLUGIN: 4,    // 傻蛋浏览器插件\n\tMCP: 5        // MCP端\n}\n\nconst MESSAGE_STATUS = {\n\tUNSEND: 0,\n\tSENDED: 1,\n\tRECALL: 2,\n\tREADED: 3\n}\n\n\nexport {\n\tMESSAGE_TYPE,\n\tRTC_STATE,\n\tTERMINAL_TYPE,\n\tMESSAGE_STATUS\n}","import http from '../api/httpRequest.js'\nimport { RTC_STATE } from \"../api/enums.js\"\nexport default {\n\n\tstate: {\n\t\tisLoggedIn: false,\n\t\tuserInfo: {\n\t\t\tid: -1,\n\t\t\tusername: '',\n\t\t\tnickName: '',\n\t\t\tavatar: '',\n\t\t\tterminal: null  // 新增：当前登录终端 (0:傻蛋网页端, 1:傻蛋精灵App, 2:我的电脑, 3:我的云电脑, 4:傻蛋浏览器, 5:MCP)\n\t\t},\n\t\trtcInfo: {\n\t\t\tfriend: {},  // 好友信息\n\t\t\tmode: \"video\", // 模式 video:视频 voice:语音\n\t\t\tstate: RTC_STATE.FREE // FREE:空闲  WAIT_CALL:呼叫方等待 WAIT_ACCEPT: 被呼叫方等待接听  CHATING:聊天中 \n\t\t}\n\t},\n\t\n\tgetters: {\n\t\t// 获取当前用户终端\n\t\tcurrentTerminal: (state) => {\n\t\t\treturn state.userInfo.terminal;\n\t\t},\n\t\t\n\t\t// 获取终端名称\n\t\tterminalName: (state) => {\n\t\t\tconst terminalMap = {\n\t\t\t\t0: '傻蛋网页端',\n\t\t\t\t1: '傻蛋精灵App',\n\t\t\t\t2: '我的电脑',\n\t\t\t\t3: '我的云电脑',\n\t\t\t\t4: '傻蛋浏览器',\n\t\t\t\t5: 'MCP'\n\t\t\t};\n\t\t\treturn terminalMap[state.userInfo.terminal] || '未知终端';\n\t\t}\n\t},\n\n\tmutations: {\n\t\tsetIsLoggedIn(state, isLoggedIn) {\n\t\t\tconsole.log('[Store] setIsLoggedIn:', isLoggedIn);\n\t\t\tstate.isLoggedIn = isLoggedIn;\n\t\t},\n\t\tsetUserInfo(state, userInfo) {\n\t\t\tconsole.log('[Store] setUserInfo:', userInfo);\n\t\t\tstate.userInfo = userInfo\n\t\t},\n\t\tupdateUserInfo(state, userInfo) {\n\t\t\t// 合并更新用户信息，保留现有字段\n\t\t\tstate.userInfo = { ...state.userInfo, ...userInfo };\n\t\t},\n\t\tsetTerminal(state, terminal) {\n\t\t\tconsole.log('[Store] setTerminal:', terminal);\n\t\t\tstate.userInfo.terminal = terminal;\n\t\t\t// 持久化存储\n\t\t\tif (typeof terminal === 'number') {\n\t\t\t\tlocalStorage.setItem('userTerminal', terminal.toString());\n\t\t\t}\n\t\t},\n\t\tsetRtcInfo(state, rtcInfo) {\n\t\t\tstate.rtcInfo = rtcInfo;\n\t\t},\n\t\tsetRtcState(state, rtcState) {\n\t\t\tstate.rtcInfo.state = rtcState;\n\t\t},\n\t\tclear(state) {\n\t\t\tstate.isLoggedIn = false;\n\t\t\tstate.userInfo = {};\n\t\t\tstate.rtcInfo = {\n\t\t\t\tfriend: {},\n\t\t\t\tmode: \"video\",\n\t\t\t\tstate: RTC_STATE.FREE\n\t\t\t};\n\t\t}\n\t},\n\tactions: {\n\t\tloadUser(context) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\thttp({\n\t\t\t\t\turl: '/user/self',\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t}).then((userInfo) => {\n\t\t\t\t\tcontext.commit(\"setUserInfo\", userInfo);\n\t\t\t\t\t\n\t\t\t\t\t// 尝试从 localStorage 恢复 terminal\n\t\t\t\t\tconst savedTerminal = localStorage.getItem('userTerminal');\n\t\t\t\t\tif (savedTerminal !== null) {\n\t\t\t\t\t\tcontext.commit('setTerminal', parseInt(savedTerminal));\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((res) => {\n\t\t\t\t\treject(res);\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\t\n\t\t// 初始化终端信息（从环境推断）\n\t\tinitTerminal(context) {\n\t\t\t// 如果已经有终端信息，不重复初始化\n\t\t\tif (context.state.userInfo.terminal !== null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 尝试从 localStorage 恢复\n\t\t\tconst savedTerminal = localStorage.getItem('userTerminal');\n\t\t\tif (savedTerminal !== null) {\n\t\t\t\tcontext.commit('setTerminal', parseInt(savedTerminal));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 根据环境推断默认终端\n\t\t\tlet terminal = 0; // 默认：傻蛋网页端\n\t\t\t\n\t\t\tif (window.vscodeServices) {\n\t\t\t\tterminal = 2; // VS Code 环境：我的电脑\n\t\t\t} else if (window.electronAPI) {\n\t\t\t\tterminal = 2; // Electron 环境：我的电脑\n\t\t\t} else if (navigator.userAgent.includes('Mobile')) {\n\t\t\t\tterminal = 1; // 移动设备：傻蛋精灵App\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('[UserStore] 推断终端类型:', terminal);\n\t\t\tcontext.commit('setTerminal', terminal);\n\t\t},\n\t\tsetIsLoggedIn(context, isLoggedIn) {\n\t\t\tconsole.log('[UserStore Action] setIsLoggedIn:', isLoggedIn);\n\t\t\tcontext.commit('setIsLoggedIn', isLoggedIn);\n\t\t}\n\t}\n}","/**\n * Vue侧VSCode存储适配器\n * 负责Vue chatStore从localForage迁移到VSCode SQLite的桥接\n */\n\nimport userStore from './userStore';\n\n/**\n * VSCode存储适配器类\n */\nclass VSCodeStorageAdapter {\n\tconstructor() {\n\t\tthis.isVSCodeEnvironment = typeof window !== 'undefined' && window.SharedServicesAccessor;\n\t\tthis.isInitialized = false;\n\t\tthis.migrationStatus = {\n\t\t\tisCompleted: false,\n\t\t\tlastMigrationTime: 0,\n\t\t\tmigratedCount: 0,\n\t\t\ttotalCount: 0\n\t\t};\n\t\t\n\t\tconsole.log('[VSCodeStorageAdapter] 初始化', {\n\t\t\tisVSCodeEnvironment: this.isVSCodeEnvironment\n\t\t});\n\t}\n\n\t/**\n\t * 检查是否在VSCode环境中\n\t */\n\tisInVSCodeEnvironment() {\n\t\treturn this.isVSCodeEnvironment;\n\t}\n\n\t/**\n\t * 获取SharedServicesAccessor实例\n\t */\n\tgetSharedServicesAccessor() {\n\t\ttry {\n\t\t\tif (!window.SharedServicesAccessor) {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] SharedServicesAccessor不存在');\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet accessor;\n\t\t\tif (typeof window.SharedServicesAccessor.getInstance === 'function') {\n\t\t\t\taccessor = window.SharedServicesAccessor.getInstance();\n\t\t\t} else if (typeof window.SharedServicesAccessor === 'object') {\n\t\t\t\taccessor = window.SharedServicesAccessor;\n\t\t\t} else {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] SharedServicesAccessor格式不正确');\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn accessor;\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] 获取SharedServicesAccessor失败:', error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * 初始化适配器\n\t */\n\tasync initialize() {\n\t\tif (this.isInitialized) {\n\t\t\treturn true;\n\t\t}\n\n\t\ttry {\n\t\t\tif (!this.isVSCodeEnvironment) {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 不在VSCode环境中，跳过初始化');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// 等待VSCode服务可用\n\t\t\t// await this.waitForVSCodeServices();\n\t\t\t\n\t\t\tthis.isInitialized = true;\n\t\t\tconsole.log('[VSCodeStorageAdapter] 初始化完成');\n\t\t\treturn true;\n\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] 初始化失败:', error);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * 等待VSCode服务可用\n\t */\n\tasync waitForVSCodeServices(maxWaitTime = 5000) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst startTime = Date.now();\n\t\t\t\n\t\t\tconst checkServices = () => {\n\t\t\t\ttry {\n\t\t\t\t\t// 检查SharedServicesAccessor是否存在\n\t\t\t\t\tif (!window.SharedServicesAccessor) {\n\t\t\t\t\t\tif (Date.now() - startTime > maxWaitTime) {\n\t\t\t\t\t\t\treject(new Error('SharedServicesAccessor不存在，等待超时'));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetTimeout(checkServices, 100);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 获取实例\n\t\t\t\t\tlet accessor;\n\t\t\t\t\tif (typeof window.SharedServicesAccessor.getInstance === 'function') {\n\t\t\t\t\t\taccessor = window.SharedServicesAccessor.getInstance();\n\t\t\t\t\t} else if (typeof window.SharedServicesAccessor === 'object') {\n\t\t\t\t\t\taccessor = window.SharedServicesAccessor;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (Date.now() - startTime > maxWaitTime) {\n\t\t\t\t\t\t\treject(new Error('SharedServicesAccessor格式不正确'));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetTimeout(checkServices, 100);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// 检查是否已初始化\n\t\t\t\t\tif (accessor && typeof accessor.isInitialized === 'function' && accessor.isInitialized()) {\n\t\t\t\t\t\tresolve(true);\n\t\t\t\t\t} else if (Date.now() - startTime > maxWaitTime) {\n\t\t\t\t\t\treject(new Error('VSCode服务等待超时'));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(checkServices, 100);\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (Date.now() - startTime > maxWaitTime) {\n\t\t\t\t\t\treject(new Error(`VSCode服务检查失败: ${error.message}`));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetTimeout(checkServices, 100);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\t\n\t\t\tcheckServices();\n\t\t});\n\t}\n\n\t/**\n\t * 保存Vue聊天会话到VSCode存储\n\t */\n\tasync saveVueChatSession(chat, userId = null) {\n\t\ttry {\n\t\t\tif (!this.isInitialized) {\n\t\t\t\tawait this.initialize();\n\t\t\t}\n\n\t\t\tif (!this.isVSCodeEnvironment) {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 不在VSCode环境，无法保存会话');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst actualUserId = userId || userStore.state.userInfo?.id;\n\t\t\tif (!actualUserId || actualUserId === 'default') {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 用户ID无效，跳过保存操作，避免数据污染');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 转换Vue chat格式为适配器格式\n\t\t\tconst adaptedChat = this.adaptVueChatFormat(chat);\n\t\t\t\n\t\t\t// 获取SharedServicesAccessor实例\n\t\t\tconst accessor = this.getSharedServicesAccessor();\n\t\t\tif (!accessor || typeof accessor.syncVueChatsToVSCode !== 'function') {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] syncVueChatsToVSCode方法不可用');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 通过SharedServicesAccessor保存\n\t\t\tconst result = await accessor.syncVueChatsToVSCode([adaptedChat], actualUserId);\n\t\t\t\n\t\t\tconsole.log('[VSCodeStorageAdapter] Vue会话保存结果:', result);\n\t\t\treturn result;\n\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] 保存Vue会话失败:', error);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * 批量保存Vue聊天会话\n\t */\n\tasync saveMultipleVueChats(chats, userId = null) {\n\t\ttry {\n\t\t\tif (!this.isInitialized) {\n\t\t\t\tawait this.initialize();\n\t\t\t}\n\n\t\t\tif (!this.isVSCodeEnvironment || !chats || chats.length === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst actualUserId = userId || userStore.state.userInfo?.id;\n\t\t\tif (!actualUserId || actualUserId === 'default') {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 用户ID无效，跳过批量保存操作，避免数据污染');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 转换所有聊天格式\n\t\t\tconst adaptedChats = chats.map(chat => this.adaptVueChatFormat(chat));\n\t\t\t\n\t\t\t// 获取SharedServicesAccessor实例\n\t\t\tconst accessor = this.getSharedServicesAccessor();\n\t\t\tif (!accessor || typeof accessor.syncVueChatsToVSCode !== 'function') {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] syncVueChatsToVSCode方法不可用');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 批量保存\n\t\t\tconst result = await accessor.syncVueChatsToVSCode(adaptedChats, actualUserId);\n\t\t\t\n\t\t\tconsole.log(`[VSCodeStorageAdapter] 批量保存${adaptedChats.length}个Vue会话:`, result);\n\t\t\treturn result;\n\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] 批量保存Vue会话失败:', error);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * 从VSCode存储加载Vue聊天数据\n\t */\n\tasync loadVueChatsFromVSCode(userId = null) {\n\t\ttry {\n\t\t\tif (!this.isInitialized) {\n\t\t\t\tawait this.initialize();\n\t\t\t}\n\n\t\t\tif (!this.isVSCodeEnvironment) {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 不在VSCode环境，无法加载聊天数据');\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst actualUserId = userId || userStore.state.userInfo?.id;\n\t\t\tif (!actualUserId || actualUserId === 'default') {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 用户ID无效，跳过加载操作');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\t// 获取SharedServicesAccessor实例\n\t\t\tconst accessor = this.getSharedServicesAccessor();\n\t\t\tif (!accessor || typeof accessor.loadVueChatsFromVSCode !== 'function') {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] loadVueChatsFromVSCode方法不可用');\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\t\n\t\t\t// 从VSCode存储加载Vue聊天数据\n\t\t\tconst result = await accessor.loadVueChatsFromVSCode(actualUserId);\n\t\t\t\n\t\t\tconsole.log(`[VSCodeStorageAdapter] 从VSCode存储加载Vue聊天数据:`, result);\n\t\t\treturn result;\n\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] 从VSCode存储加载Vue聊天数据失败:', error);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * 新增：保存完整的Vue聊天数据到VSCode存储\n\t */\n\tasync saveVueChatsDataToVSCode(chatsData, userId = null) {\n\t\ttry {\n\t\t\tif (!this.isInitialized) {\n\t\t\t\tawait this.initialize();\n\t\t\t}\n\n\t\t\tif (!this.isVSCodeEnvironment) {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 不在VSCode环境，无法保存聊天数据');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst actualUserId = userId || userStore.state.userInfo?.id;\n\t\t\tif (!actualUserId || actualUserId === 'default') {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 用户ID无效，跳过保存操作，避免数据污染');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 获取SharedServicesAccessor实例\n\t\t\tconst accessor = this.getSharedServicesAccessor();\n\t\t\tif (!accessor || typeof accessor.saveVueChatsToVSCode !== 'function') {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] saveVueChatsToVSCode方法不可用');\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 构建完整的聊天数据结构\n\t\t\tconst completeChatsData = {\n\t\t\t\tchats: chatsData.chats || [],\n\t\t\t\tprivateMsgMaxId: chatsData.privateMsgMaxId || 0,\n\t\t\t\tgroupMsgMaxId: chatsData.groupMsgMaxId || 0,\n\t\t\t\tlastSync: Date.now()\n\t\t\t};\n\t\t\t\n\t\t\t// 保存到VSCode存储\n\t\t\tconst result = await accessor.saveVueChatsToVSCode(actualUserId, completeChatsData);\n\t\t\t\n\t\t\tconsole.log(`[VSCodeStorageAdapter] 保存Vue聊天数据到VSCode存储:`, result);\n\t\t\treturn result;\n\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] 保存Vue聊天数据到VSCode存储失败:', error);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * 转换Vue chat格式为适配器期望的格式\n\t */\n\tadaptVueChatFormat(chat) {\n\t\treturn {\n\t\t\ttargetId: chat.targetId,\n\t\t\ttype: chat.type || 'PRIVATE',\n\t\t\tshowName: chat.showName || chat.targetId,\n\t\t\theadImage: chat.headImage || '',\n\t\t\tlastContent: chat.lastContent || '',\n\t\t\tlastSendTime: chat.lastSendTime || Date.now(),\n\t\t\tunreadCount: chat.unreadCount || 0,\n\t\t\tmessages: chat.messages || []\n\t\t};\n\t}\n\n\t/**\n\t * 搜索所有消息（跨Vue和React平台）\n\t */\n\tasync searchAllMessages(query, options = {}) {\n\t\ttry {\n\t\t\tif (!this.isInitialized) {\n\t\t\t\tawait this.initialize();\n\t\t\t}\n\n\t\t\tif (!this.isVSCodeEnvironment) {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 不在VSCode环境，无法搜索');\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\t// 获取SharedServicesAccessor实例\n\t\t\tconst accessor = this.getSharedServicesAccessor();\n\t\t\tif (!accessor || typeof accessor.searchAllMessages !== 'function') {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] searchAllMessages方法不可用');\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst results = await accessor.searchAllMessages(query, options);\n\t\t\t\n\t\t\tconsole.log(`[VSCodeStorageAdapter] 搜索\"${query}\"找到${results.length}条结果`);\n\t\t\treturn results;\n\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] 搜索消息失败:', error);\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t/**\n\t * 从localForage迁移数据到VSCode存储\n\t */\n\tasync migrateFromLocalForage(localForageData) {\n\t\ttry {\n\t\t\tconsole.log('[VSCodeStorageAdapter] 开始从localForage迁移数据...');\n\t\t\t\n\t\t\tif (!this.isInitialized) {\n\t\t\t\tawait this.initialize();\n\t\t\t}\n\n\t\t\tif (!this.isVSCodeEnvironment) {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 不在VSCode环境，跳过迁移');\n\t\t\t\treturn { success: false, message: '不在VSCode环境中' };\n\t\t\t}\n\n\t\t\t// 检查是否已经迁移过\n\t\t\tif (this.migrationStatus.isCompleted) {\n\t\t\t\tconsole.log('[VSCodeStorageAdapter] 数据已迁移，跳过重复迁移');\n\t\t\t\treturn { \n\t\t\t\t\tsuccess: true, \n\t\t\t\t\tmessage: '数据已迁移', \n\t\t\t\t\t...this.migrationStatus \n\t\t\t\t};\n\t\t\t}\n\n\t\t\t// 修复：确保有真实的用户ID，避免使用默认值覆盖数据\n\t\t\tconst userId = userStore.state.userInfo?.id;\n\t\t\tif (!userId || userId === 'default') {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 用户ID无效，跳过迁移操作，避免数据污染');\n\t\t\t\treturn { success: false, message: '用户ID无效，无法执行迁移' };\n\t\t\t}\n\t\t\t\n\t\t\t// 提取聊天数据\n\t\t\tconst chats = this.extractChatsFromLocalForage(localForageData);\n\t\t\t\n\t\t\tif (chats.length === 0) {\n\t\t\t\tconsole.log('[VSCodeStorageAdapter] 没有发现需要迁移的聊天数据');\n\t\t\t\treturn { success: true, message: '没有数据需要迁移', migratedCount: 0, totalCount: 0 };\n\t\t\t}\n\n\t\t\t// 批量迁移到VSCode存储\n\t\t\tconst migrationResult = await this.saveMultipleVueChats(chats, userId);\n\t\t\t\n\t\t\tif (migrationResult) {\n\t\t\t\t// 更新迁移状态\n\t\t\t\tthis.migrationStatus = {\n\t\t\t\t\tisCompleted: true,\n\t\t\t\t\tlastMigrationTime: Date.now(),\n\t\t\t\t\tmigratedCount: chats.length,\n\t\t\t\t\ttotalCount: chats.length\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 保存迁移状态到localStorage\n\t\t\t\tlocalStorage.setItem('vscode_migration_status', JSON.stringify(this.migrationStatus));\n\t\t\t\t\n\t\t\t\tconsole.log('[VSCodeStorageAdapter] localForage迁移完成:', this.migrationStatus);\n\t\t\t\treturn { \n\t\t\t\t\tsuccess: true, \n\t\t\t\t\tmessage: '迁移成功', \n\t\t\t\t\t...this.migrationStatus \n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tconsole.error('[VSCodeStorageAdapter] localForage迁移失败');\n\t\t\t\treturn { success: false, message: '迁移失败', migratedCount: 0, totalCount: chats.length };\n\t\t\t}\n\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] localForage迁移异常:', error);\n\t\t\treturn { success: false, message: error.message, migratedCount: 0, totalCount: 0 };\n\t\t}\n\t}\n\n\t/**\n\t * 从localForage数据中提取聊天会话\n\t */\n\textractChatsFromLocalForage(localForageData) {\n\t\tconst chats = [];\n\t\t\n\t\ttry {\n\t\t\t// localForage数据可能是各种格式，尝试解析\n\t\t\tif (Array.isArray(localForageData)) {\n\t\t\t\t// 如果是数组格式\n\t\t\t\tchats.push(...localForageData);\n\t\t\t} else if (localForageData && typeof localForageData === 'object') {\n\t\t\t\t// 如果是对象格式，尝试提取聊天数据\n\t\t\t\tif (localForageData.chats && Array.isArray(localForageData.chats)) {\n\t\t\t\t\tchats.push(...localForageData.chats);\n\t\t\t\t} else {\n\t\t\t\t\t// 遍历对象的值，寻找聊天数据\n\t\t\t\t\tObject.values(localForageData).forEach(value => {\n\t\t\t\t\t\tif (value && typeof value === 'object' && value.targetId) {\n\t\t\t\t\t\t\tchats.push(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 过滤和验证聊天数据\n\t\t\treturn chats.filter(chat => \n\t\t\t\tchat && \n\t\t\t\tchat.targetId && \n\t\t\t\ttypeof chat.targetId === 'string'\n\t\t\t).map(chat => this.adaptVueChatFormat(chat));\n\t\t\t\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] 提取聊天数据失败:', error);\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t/**\n\t * 获取迁移状态\n\t */\n\tgetMigrationStatus() {\n\t\t// 尝试从localStorage获取迁移状态\n\t\ttry {\n\t\t\tconst stored = localStorage.getItem('vscode_migration_status');\n\t\t\tif (stored) {\n\t\t\t\tthis.migrationStatus = { ...this.migrationStatus, ...JSON.parse(stored) };\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.warn('[VSCodeStorageAdapter] 获取迁移状态失败:', error);\n\t\t}\n\t\t\n\t\treturn { ...this.migrationStatus };\n\t}\n\n\t/**\n\t * 重置迁移状态\n\t */\n\tresetMigrationStatus() {\n\t\tthis.migrationStatus = {\n\t\t\tisCompleted: false,\n\t\t\tlastMigrationTime: 0,\n\t\t\tmigratedCount: 0,\n\t\t\ttotalCount: 0\n\t\t};\n\t\t\n\t\ttry {\n\t\t\tlocalStorage.removeItem('vscode_migration_status');\n\t\t} catch (error) {\n\t\t\tconsole.warn('[VSCodeStorageAdapter] 清除迁移状态失败:', error);\n\t\t}\n\t\t\n\t\tconsole.log('[VSCodeStorageAdapter] 迁移状态已重置');\n\t}\n\n\t/**\n\t * 获取FTS索引统计信息\n\t */\n\tasync getFTSIndexStats() {\n\t\ttry {\n\t\t\tif (!this.isInitialized) {\n\t\t\t\tawait this.initialize();\n\t\t\t}\n\n\t\t\tif (!this.isVSCodeEnvironment) {\n\t\t\t\treturn { totalMessages: 0, indexSize: 0, lastUpdated: 0 };\n\t\t\t}\n\n\t\t\tconst stats = await window.SharedServicesAccessor.getFTSIndexStats();\n\t\t\tconsole.log('[VSCodeStorageAdapter] FTS索引统计:', stats);\n\t\t\treturn stats;\n\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] 获取FTS统计失败:', error);\n\t\t\treturn { totalMessages: 0, indexSize: 0, lastUpdated: 0 };\n\t\t}\n\t}\n\n\t/**\n\t * 重建FTS索引\n\t */\n\tasync rebuildFTSIndex() {\n\t\ttry {\n\t\t\tif (!this.isInitialized) {\n\t\t\t\tawait this.initialize();\n\t\t\t}\n\n\t\t\tif (!this.isVSCodeEnvironment) {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 不在VSCode环境，无法重建索引');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tawait window.SharedServicesAccessor.rebuildFTSIndex();\n\t\t\tconsole.log('[VSCodeStorageAdapter] FTS索引重建完成');\n\t\t\treturn true;\n\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] 重建FTS索引失败:', error);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * 同步React线程数据\n\t */\n\tasync syncReactThreads() {\n\t\ttry {\n\t\t\tif (!this.isInitialized) {\n\t\t\t\tawait this.initialize();\n\t\t\t}\n\n\t\t\tif (!this.isVSCodeEnvironment) {\n\t\t\t\tconsole.warn('[VSCodeStorageAdapter] 不在VSCode环境，无法同步React线程');\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst result = await window.SharedServicesAccessor.syncReactThreadsToVSCode();\n\t\t\tconsole.log('[VSCodeStorageAdapter] React线程同步结果:', result);\n\t\t\treturn result;\n\n\t\t} catch (error) {\n\t\t\tconsole.error('[VSCodeStorageAdapter] React线程同步失败:', error);\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\n// 创建全局单例\nconst vscodeStorageAdapter = new VSCodeStorageAdapter();\n\nexport default vscodeStorageAdapter; ","import { MESSAGE_TYPE, MESSAGE_STATUS } from \"../api/enums.js\"\nimport userStore from './userStore';\nimport localForage from 'localforage';\nimport vscodeStorageAdapter from './vscodeStorageAdapter.js';\nimport http from '../api/httpRequest.js';\nimport { ZeroWidthEncoder, MentionHelper } from \"../utils/zeroWidthEncoder\";\n\n/* 为了加速拉取离线消息效率，拉取时消息暂时存储到cacheChats,等\n待所有离线消息拉取完成后，再统一放至vuex中进行渲染*/\nlet cacheChats = [];\n\n// 保存防抖计时器（放在模块级别）\nlet saveTimer = null;\n\nexport default {\n\tstate: {\n\t\tactiveChat: null,\n\t\tprivateMsgMaxId: 0,\n\t\tgroupMsgMaxId: 0,\n\t\tloadingPrivateMsg: false,\n\t\tloadingGroupMsg: false,\n\t\tchats: [],\n\t\t// 防重复加载状态\n\t\tisLoadingChat: false\n\t},\n\n\tmutations: {\n\t\tinitChats(state, chatsData) {\n\t\t\tif (chatsData && chatsData.chats) {\n\t\t\t\t// 基本的聊天数据清理\n\t\t\t\tconst cleanedChats = chatsData.chats.filter(chat => {\n\t\t\t\t\tif (!chat || !Array.isArray(chat.messages)) {\n\t\t\t\t\t\tif (chat) {\n\t\t\t\t\t\t\tchat.messages = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn chat !== null && chat !== undefined;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 防止图片一直处在加载中状态\n\t\t\t\t\tchat.messages.forEach(msg => {\n\t\t\t\t\t\tif (msg && msg.loadStatus === \"loading\") {\n\t\t\t\t\t\t\tmsg.loadStatus = \"fail\";\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 🔧 修复数据：处理showName为undefined的会话（特别是自己给自己的会话）\n\t\t\t\tconst currentUser = userStore.state.userInfo;\n\t\t\t\tlet fixedCount = 0;\n\t\t\t\t\n\t\t\t\tcleanedChats.forEach(chat => {\n\t\t\t\t\tif (chat && chat.type === 'PRIVATE' && !chat.showName) {\n\t\t\t\t\t\tconsole.log(`[ChatStore] 🔧 发现无效会话，targetId: ${chat.targetId}，开始修复...`);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 如果是当前用户自己\n\t\t\t\t\t\tif (currentUser && currentUser.id == chat.targetId) {\n\t\t\t\t\t\t\tchat.showName = currentUser.nickName || \"我\";\n\t\t\t\t\t\t\tchat.headImage = currentUser.headImageThumb || currentUser.headImage || \"\";\n\t\t\t\t\t\t\tchat.stored = false; // 标记需要重新保存\n\t\t\t\t\t\t\tfixedCount++;\n\t\t\t\t\t\t\tconsole.log(`[ChatStore] ✅ 修复自己的会话，showName: ${chat.showName}`);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// 其他用户的会话（虽然可能性较小，但也修复一下）\n\t\t\t\t\t\t\tchat.showName = \"未知用户\";\n\t\t\t\t\t\t\tchat.stored = false;\n\t\t\t\t\t\t\tfixedCount++;\n\t\t\t\t\t\t\tconsole.log(`[ChatStore] ✅ 修复未知用户会话，targetId: ${chat.targetId}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif (fixedCount > 0) {\n\t\t\t\t\tconsole.log(`[ChatStore] 🔧 数据修复完成，修复了 ${fixedCount} 个无效会话`);\n\t\t\t\t}\n\t\t\t\tconsole.log(`[ChatStore] 🔧 设置state.chats ${cleanedChats} `);\n\t\t\t\tstate.chats = cleanedChats;\n\t\t\t\t\n\t\t\t\t// 从存储的数据中恢复最大ID（如果有）\n\t\t\t\tif (chatsData.privateMsgMaxId) {\n\t\t\t\t\tstate.privateMsgMaxId = chatsData.privateMsgMaxId;\n\t\t\t\t}\n\t\t\t\tif (chatsData.groupMsgMaxId) {\n\t\t\t\t\tstate.groupMsgMaxId = chatsData.groupMsgMaxId;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 重新计算实际的最大消息ID（基于当前的消息）\n\t\t\t\tlet actualPrivateMaxId = 0;\n\t\t\t\tlet actualGroupMaxId = 0;\n\t\t\t\t\n\t\t\t\tcleanedChats.forEach(chat => {\n\t\t\t\t\tif (chat.messages && chat.messages.length > 0) {\n\t\t\t\t\t\tchat.messages.forEach(msg => {\n\t\t\t\t\t\t\tif (msg && msg.id) {\n\t\t\t\t\t\t\t\tconst msgId = typeof msg.id === 'string' ? parseInt(msg.id) : msg.id;\n\t\t\t\t\t\t\t\tif (!isNaN(msgId)) {\n\t\t\t\t\t\t\t\t\tif (chat.type === 'PRIVATE' && msgId > actualPrivateMaxId) {\n\t\t\t\t\t\t\t\t\t\tactualPrivateMaxId = msgId;\n\t\t\t\t\t\t\t\t\t} else if (chat.type === 'GROUP' && msgId > actualGroupMaxId) {\n\t\t\t\t\t\t\t\t\t\tactualGroupMaxId = msgId;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 如果计算出的实际最大ID大于存储的值，更新它\n\t\t\t\tif (actualPrivateMaxId > state.privateMsgMaxId) {\n\t\t\t\t\tconsole.log(`[ChatStore] 更新privateMsgMaxId: ${state.privateMsgMaxId} -> ${actualPrivateMaxId}`);\n\t\t\t\t\tstate.privateMsgMaxId = actualPrivateMaxId;\n\t\t\t\t}\n\t\t\t\tif (actualGroupMaxId > state.groupMsgMaxId) {\n\t\t\t\t\tconsole.log(`[ChatStore] 更新groupMsgMaxId: ${state.groupMsgMaxId} -> ${actualGroupMaxId}`);\n\t\t\t\t\tstate.groupMsgMaxId = actualGroupMaxId;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log(`[ChatStore] 最大消息ID - 私聊: ${state.privateMsgMaxId}, 群聊: ${state.groupMsgMaxId}`);\n\t\t\t\t\n\t\t\t\t// 🔧 初始化后立即清理重复会话\n\t\t\t\tthis.commit(\"cleanDuplicateChats\");\n\t\t\t\t\n\t\t\t\t// 🔧 如果修复了数据，自动保存到存储\n\t\t\t\tif (fixedCount > 0) {\n\t\t\t\t\tthis.commit(\"saveToStorage\");\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log(`[ChatStore] ✅ 聊天数据初始化完成，有效聊天数量: ${state.chats.length}`);\n\t\t\t} else {\n\t\t\t\tconsole.log('[ChatStore] 📭 无聊天数据需要初始化');\n\t\t\t}\n\t\t},\n\t\topenChat(state, chatInfo) {\n\t\t\t\n\t\t\tlet chats = this.getters.findChats()\n\t\t\tlet chat = null;\n\t\t\t\n\t\t\t// 🔧 增强调试：检查现有会话\n\t\t\tconsole.log(`🔧 [openChat] 检查现有${chats.length}个会话...`,chats);\n\t\t\t\n\t\t\tfor (let idx in chats) {\n\t\t\t\tconst existingChat = chats[idx];\n\t\t\t\tconst isSame = this.getters.isSameChat(existingChat, chatInfo);\n\t\t\t\t\n\t\t\t\t// 🔧 优化：只在找到匹配时输出终端会话日志\n\t\t\t\tif ((chatInfo.isTerminalChat || existingChat.isTerminalChat) && isSame) {\n\t\t\t\t\tconsole.log(`🔧 [openChat] 终端会话匹配 [${idx}]: ${existingChat.showName} (${existingChat.targetId})`);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (isSame) {\n\t\t\t\t\tchat = existingChat;\n\t\t\t\t\tconsole.log(`✅ [openChat] 找到现有会话，移到顶部: ${chat.showName}`);\n\t\t\t\t\t// 放置头部\n\t\t\t\t\tthis.commit(\"moveTop\", idx)\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 创建会话\n\t\t\tif (chat == null) {\n\t\t\t\tconsole.log(`➕ [openChat] 创建新会话: ${chatInfo.showName || chatInfo.targetId}`);\n\t\t\t\tchat = {\n\t\t\t\t\ttargetId: chatInfo.targetId,\n\t\t\t\t\ttype: chatInfo.type,\n\t\t\t\t\tshowName: chatInfo.showName,\n\t\t\t\t\theadImage: chatInfo.headImage,\n\t\t\t\t\tlastContent: \"\",\n\t\t\t\t\tlastSendTime: new Date().getTime(),\n\t\t\t\t\tunreadCount: 0,\n\t\t\t\t\tmessages: [],\n\t\t\t\t\tatMe: false,\n\t\t\t\t\tatAll: false,\n\t\t\t\t\tstored: false,\n\t\t\t\t\tdelete: false,\n\t\t\t\t\t// 🔧 修正：终端会话标识（目标终端模式）\n\t\t\t\t\tsenderTerminal: chatInfo.senderTerminal,\n\t\t\t\t\ttargetTerminal: chatInfo.targetTerminal,\n\t\t\t\t\tisTerminalChat: chatInfo.isTerminalChat || false,\n\t\t\t\t\t// 🔧 兼容性：保留旧字段以防其他代码使用\n\t\t\t\t\treceivingTerminal: chatInfo.receivingTerminal,\n\t\t\t\t\tisTerminalInbox: chatInfo.isTerminalInbox || false,\n\t\t\t\t\t// 🔧 保留lastTimeTip，避免插入不必要的时间提示\n\t\t\t\t\tlastTimeTip: chatInfo.lastTimeTip || null\n\t\t\t\t};\n\t\t\t\tchats.unshift(chat);\n\t\t\t\t\n\t\t\t\tconsole.log(`✅ [openChat] 新会话已创建，当前会话总数: ${chats.length}`);\n\t\t\t}\n\t\t},\n\t\tactiveChat(state, idx) {\n\t\t\tconsole.log(state)\n\t\t\tlet chats = this.getters.findChats();\n\t\t\tstate.activeChat = chats[idx];\n\t\t},\n\t\tclearActiveChat(state) {\n\t\t\tstate.activeChat = null;\n\t\t},\n\t\tresetUnreadCount(state, chatInfo) {\n\t\t\tlet chats = this.getters.findChats();\n\t\t\tfor (let idx in chats) {\n\t\t\t\tif (chats[idx].type == chatInfo.type &&\n\t\t\t\t\tchats[idx].targetId == chatInfo.targetId) {\n\t\t\t\t\tchats[idx].unreadCount = 0;\n\t\t\t\t\tchats[idx].atMe = false;\n\t\t\t\t\tchats[idx].atAll = false;\n\t\t\t\t\tchats[idx].stored = false;\n\t\t\t\t\tthis.commit(\"saveToStorage\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\treadedMessage(state, pos) {\n\t\t\tlet chat = this.getters.findChatByFriend(pos.friendId);\n\t\t\tif (!chat) return;\n\t\t\tchat.messages.forEach((m) => {\n\t\t\t\tif (m.id && m.selfSend && m.status < MESSAGE_STATUS.RECALL) {\n\t\t\t\t\t// pos.maxId为空表示整个会话已读\n\t\t\t\t\tif (!pos.maxId || m.id <= pos.maxId) {\n\t\t\t\t\t\tm.status = MESSAGE_STATUS.READED\n\t\t\t\t\t\tchat.stored = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.commit(\"saveToStorage\");\n\t\t},\n\t\tremoveChat(state, idx) {\n\t\t\tlet chats = this.getters.findChats();\n\t\t\tif (chats[idx] == state.activeChat) {\n\t\t\t\tstate.activeChat = null;\n\t\t\t}\n\t\t\tchats[idx].delete = true;\n\t\t\tchats[idx].stored = false;\n\t\t\tthis.commit(\"saveToStorage\");\n\t\t},\n\t\tremovePrivateChat(state, friendId) {\n\t\t\tlet chats = this.getters.findChats();\n\t\t\tfor (let idx in chats) {\n\t\t\t\tif (chats[idx].type == 'PRIVATE' &&\n\t\t\t\t\tchats[idx].targetId === friendId) {\n\t\t\t\t\tthis.commit(\"removeChat\", idx)\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tremoveGroupChat(state, groupId) {\n\t\t\tlet chats = this.getters.findChats();\n\t\t\tfor (let idx in chats) {\n\t\t\t\tif (chats[idx].type == 'GROUP' &&\n\t\t\t\t\tchats[idx].targetId === groupId) {\n\t\t\t\t\tthis.commit(\"removeChat\", idx)\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmoveTop(state, idx) {\n\t\t\t// 加载中不移动，很耗性能\n\t\t\tif (this.getters.isLoading()) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (idx > 0) {\n\t\t\t\tlet chats = this.getters.findChats();\n\t\t\t\tlet chat = chats[idx];\n\t\t\t\t\n\t\t\t\t// 如果是终端会话，不移动（它们应该始终在顶部）\n\t\t\t\tif (chat.isTerminalInbox) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 找到第一个非终端会话的位置\n\t\t\t\tlet firstNormalChatIndex = 0;\n\t\t\t\tfor (let i = 0; i < chats.length; i++) {\n\t\t\t\t\tif (!chats[i].isTerminalInbox) {\n\t\t\t\t\t\tfirstNormalChatIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 将会话移到普通会话的顶部（但在终端会话之后）\n\t\t\t\tchats.splice(idx, 1);\n\t\t\t\tchats.splice(firstNormalChatIndex, 0, chat);\n\t\t\t\tchat.lastSendTime = new Date().getTime();\n\t\t\t\tchat.stored = false;\n\t\t\t\tthis.commit(\"saveToStorage\");\n\t\t\t}\n\t\t},\n\t\thandleRooCodeMentions(state, text) {\n\t\t\tconsole.log('[ChatStore] handleRooCodeMentions 被调用，文本:', text);\n\t\t\tconsole.log('[ChatStore] 文本长度:', text.length);\n\t\t\t\n\t\t\t// 首先尝试提取零宽编码的参数\n\t\t\tconst zeroWidthParams = ZeroWidthEncoder.extractAllFromText(text);\n\t\t\tconsole.log('[ChatStore] 提取的零宽编码参数:', zeroWidthParams);\n\t\t\t\n\t\t\tif (zeroWidthParams.length > 0) {\n\t\t\t\t// 使用零宽编码的完整参数\n\t\t\t\tconsole.log('[ChatStore] 检测到零宽编码参数:', zeroWidthParams);\n\t\t\t\t\n\t\t\t\t// 清理文本，获取纯净的显示内容\n\t\t\t\tconst cleanText = ZeroWidthEncoder.cleanText(text);\n\t\t\t\t\n\t\t\t\tfor (const { params } of zeroWidthParams) {\n\t\t\t\t\tif (params.type === 'task') {\n\t\t\t\t\t\t// 提取任务提及后的内容作为指令\n\t\t\t\t\t\tconst taskMentionPattern = /@任务\\[([^\\]]+)\\]/;\n\t\t\t\t\t\tconst taskMatch = cleanText.match(taskMentionPattern);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (taskMatch) {\n\t\t\t\t\t\t\tconst startIndex = taskMatch.index + taskMatch[0].length;\n\t\t\t\t\t\t\tlet endIndex = cleanText.length;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 查找下一个 @ 符号的位置\n\t\t\t\t\t\t\tconst nextAtIndex = cleanText.indexOf('@', startIndex);\n\t\t\t\t\t\t\tif (nextAtIndex !== -1) {\n\t\t\t\t\t\t\t\tendIndex = nextAtIndex;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst taskContent = cleanText.substring(startIndex, endIndex).trim();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (taskContent) {\n\t\t\t\t\t\t\t\t// 重要：需要从原始text中提取包含零宽编码的内容\n\t\t\t\t\t\t\t\tconst originalTaskMatch = text.match(taskMentionPattern);\n\t\t\t\t\t\t\t\tlet fullContent = text; // 默认使用完整原始文本\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (originalTaskMatch) {\n\t\t\t\t\t\t\t\t\tconst originalStartIndex = originalTaskMatch.index + originalTaskMatch[0].length;\n\t\t\t\t\t\t\t\t\tlet originalEndIndex = text.length;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 检查是否有下一个@提及\n\t\t\t\t\t\t\t\t\tconst nextAtIndex = text.indexOf('@', originalStartIndex);\n\t\t\t\t\t\t\t\t\tif (nextAtIndex !== -1) {\n\t\t\t\t\t\t\t\t\t\toriginalEndIndex = nextAtIndex;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 提取包含零宽编码的原始内容\n\t\t\t\t\t\t\t\t\tfullContent = text.substring(originalStartIndex, originalEndIndex).trim();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconsole.log(`[ChatStore] 处理任务命令（零宽编码）:`, {\n\t\t\t\t\t\t\t\t\ttaskName: params.name,\n\t\t\t\t\t\t\t\t\ttaskId: params.id,\n\t\t\t\t\t\t\t\t\tcontent: taskContent,\n\t\t\t\t\t\t\t\t\tfullContentLength: fullContent.length,\n\t\t\t\t\t\t\t\t\thasZeroWidth: fullContent.length > taskContent.length\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 调用 Roo-Code 的 executeTask 命令\n\t\t\t\t\t\t\t\tif (window.vscodeServices && window.vscodeServices.get) {\n\t\t\t\t\t\t\t\t\tconst commandService = window.vscodeServices.get('ICommandService');\n\t\t\t\t\t\t\t\t\tif (commandService) {\n\t\t\t\t\t\t\t\t\t\t// 传递包含零宽编码的完整内容\n\t\t\t\t\t\t\t\t\t\tconst commandParams = {\n\t\t\t\t\t\t\t\t\t\t\tcontent: fullContent  // 使用包含零宽编码的原始内容\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// 只有存在taskId时才添加\n\t\t\t\t\t\t\t\t\t\tif (params.id) {\n\t\t\t\t\t\t\t\t\t\t\tcommandParams.taskId = params.id;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// 只有存在元数据时才添加（后续扩展用）\n\t\t\t\t\t\t\t\t\t\tif (params.metadata && Object.keys(params.metadata).length > 0) {\n\t\t\t\t\t\t\t\t\t\t\tcommandParams.metadata = params.metadata;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tcommandService.executeCommand('roo-cline.executeTask', commandParams)\n\t\t\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('[ChatStore] 成功执行任务命令（零宽编码）');\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.error('[ChatStore] 执行任务命令失败（零宽编码）:', err);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (params.type === 'agent') {\n\t\t\t\t\t\t// 提取智能体提及后的内容作为指令\n\t\t\t\t\t\tconst agentMentionPattern = /@智能体\\[([^\\]]+)\\]/;\n\t\t\t\t\t\tconst agentMatch = cleanText.match(agentMentionPattern);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (agentMatch) {\n\t\t\t\t\t\t\tconst startIndex = agentMatch.index + agentMatch[0].length;\n\t\t\t\t\t\t\tlet endIndex = cleanText.length;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst nextAtIndex = cleanText.indexOf('@', startIndex);\n\t\t\t\t\t\t\tif (nextAtIndex !== -1) {\n\t\t\t\t\t\t\t\tendIndex = nextAtIndex;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst agentContent = cleanText.substring(startIndex, endIndex).trim();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif (agentContent) {\n\t\t\t\t\t\t\t\t// 重要：需要从原始text中提取包含零宽编码的内容\n\t\t\t\t\t\t\t\t// 找到智能体提及在原始文本中的位置\n\t\t\t\t\t\t\t\tconst originalAgentMatch = text.match(agentMentionPattern);\n\t\t\t\t\t\t\t\tlet fullContent = text; // 默认使用完整原始文本\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (originalAgentMatch) {\n\t\t\t\t\t\t\t\t\tconst originalStartIndex = originalAgentMatch.index + originalAgentMatch[0].length;\n\t\t\t\t\t\t\t\t\tlet originalEndIndex = text.length;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 检查是否有下一个@提及\n\t\t\t\t\t\t\t\t\tconst nextAtIndex = text.indexOf('@', originalStartIndex);\n\t\t\t\t\t\t\t\t\tif (nextAtIndex !== -1) {\n\t\t\t\t\t\t\t\t\t\toriginalEndIndex = nextAtIndex;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 提取包含零宽编码的原始内容\n\t\t\t\t\t\t\t\t\tfullContent = text.substring(originalStartIndex, originalEndIndex).trim();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconsole.log(`[ChatStore] 处理智能体命令（零宽编码）:`, {\n\t\t\t\t\t\t\t\t\tagentName: params.name,\n\t\t\t\t\t\t\t\t\tmodeId: params.modeId,\n\t\t\t\t\t\t\t\t\tcontent: agentContent,\n\t\t\t\t\t\t\t\t\tfullContentLength: fullContent.length,\n\t\t\t\t\t\t\t\t\thasZeroWidth: fullContent.length > agentContent.length\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 调用 Roo-Code 的 executeTaskWithMode 命令\n\t\t\t\t\t\t\t\tif (window.vscodeServices && window.vscodeServices.get) {\n\t\t\t\t\t\t\t\t\tconst commandService = window.vscodeServices.get('ICommandService');\n\t\t\t\t\t\t\t\t\tif (commandService) {\n\t\t\t\t\t\t\t\t\t\t// 传递包含零宽编码的完整内容\n\t\t\t\t\t\t\t\t\t\tconst commandParams = {\n\t\t\t\t\t\t\t\t\t\t\tmodeId: params.modeId,\n\t\t\t\t\t\t\t\t\t\t\tcontent: fullContent  // 使用包含零宽编码的原始内容\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// 只有存在配置时才添加（后续扩展用）\n\t\t\t\t\t\t\t\t\t\tif (params.config && Object.keys(params.config).length > 0) {\n\t\t\t\t\t\t\t\t\t\t\tcommandParams.config = params.config;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\tcommandService.executeCommand('roo-cline.executeTaskWithMode', commandParams)\n\t\t\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('[ChatStore] 成功执行智能体命令（零宽编码）');\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\t\t\t\t\tconsole.error('[ChatStore] 执行智能体命令失败（零宽编码）:', err);\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 如果已经处理了零宽编码，就返回，不再处理传统格式\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 兼容传统文本格式（向后兼容）\n\t\t\t// 匹配 @任务[任务名] 或 @任务[任务名:任务ID]\n\t\t\tconst taskPattern = /@任务\\[([^\\]]+)\\]/g;\n\t\t\tconst taskMatches = text.matchAll(taskPattern);\n\t\t\t\n\t\t\tfor (const match of taskMatches) {\n\t\t\t\tconst taskInfo = match[1];\n\t\t\t\tconst [taskName, taskId] = taskInfo.split(':');\n\t\t\t\t\n\t\t\t\t// 提取任务后的实际内容作为指令\n\t\t\t\tconst startIndex = match.index + match[0].length;\n\t\t\t\tlet endIndex = text.length;\n\t\t\t\t\n\t\t\t\t// 查找下一个 @ 符号的位置\n\t\t\t\tconst nextAtIndex = text.indexOf('@', startIndex);\n\t\t\t\tif (nextAtIndex !== -1) {\n\t\t\t\t\tendIndex = nextAtIndex;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst taskContent = text.substring(startIndex, endIndex).trim();\n\t\t\t\t\n\t\t\t\tif (taskContent) {\n\t\t\t\t\tconsole.log(`[ChatStore] 检测到@任务命令（传统格式）: ${taskName}, ID: ${taskId}, 内容: ${taskContent}`);\n\t\t\t\t\t\n\t\t\t\t\t// 调用 Roo-Code 的 executeTask 命令\n\t\t\t\t\tif (window.vscodeServices && window.vscodeServices.get) {\n\t\t\t\t\t\tconst commandService = window.vscodeServices.get('ICommandService');\n\t\t\t\t\t\tif (commandService) {\n\t\t\t\t\t\t\tconst params = taskId \n\t\t\t\t\t\t\t\t? { taskId, content: taskContent }\n\t\t\t\t\t\t\t\t: { content: `${taskName}: ${taskContent}` };\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcommandService.executeCommand('roo-cline.executeTask', params)\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\tconsole.log('[ChatStore] ✅ 成功调用 executeTask 命令');\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\t\tconsole.error('[ChatStore] ❌ 调用 executeTask 命令失败:', err);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 匹配 @智能体[智能体名称]\n\t\t\tconst agentPattern = /@智能体\\[([^\\]]+)\\]/g;\n\t\t\tconst agentMatches = text.matchAll(agentPattern);\n\t\t\t\n\t\t\tfor (const match of agentMatches) {\n\t\t\t\tconst agentName = match[1];\n\t\t\t\t\n\t\t\t\t// 提取智能体后的实际内容作为指令\n\t\t\t\tconst startIndex = match.index + match[0].length;\n\t\t\t\tlet endIndex = text.length;\n\t\t\t\t\n\t\t\t\t// 查找下一个 @ 符号的位置\n\t\t\t\tconst nextAtIndex = text.indexOf('@', startIndex);\n\t\t\t\tif (nextAtIndex !== -1) {\n\t\t\t\t\tendIndex = nextAtIndex;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst agentContent = text.substring(startIndex, endIndex).trim();\n\t\t\t\t\n\t\t\t\tif (agentContent) {\n\t\t\t\t\tconsole.log(`[ChatStore] 检测到@智能体命令: ${agentName}, 内容: ${agentContent}`);\n\t\t\t\t\t\n\t\t\t\t\t// 调用 Roo-Code 的 executeTaskWithMode 命令\n\t\t\t\t\tif (window.vscodeServices && window.vscodeServices.get) {\n\t\t\t\t\t\tconst commandService = window.vscodeServices.get('ICommandService');\n\t\t\t\t\t\tif (commandService) {\n\t\t\t\t\t\t\t// 将智能体名称映射到 mode ID\n\t\t\t\t\t\t\tconst mappings = {\n\t\t\t\t\t\t\t\t'编码助手': 'code',\n\t\t\t\t\t\t\t\t'架构师': 'architect',\n\t\t\t\t\t\t\t\t'测试工程师': 'test',\n\t\t\t\t\t\t\t\t'代码': 'code',\n\t\t\t\t\t\t\t\t'架构': 'architect',\n\t\t\t\t\t\t\t\t'测试': 'test',\n\t\t\t\t\t\t\t\t// 可以添加更多映射\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tconst modeId = mappings[agentName] || agentName.toLowerCase().replace(/\\s+/g, '-');\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcommandService.executeCommand('roo-cline.executeTaskWithMode', {\n\t\t\t\t\t\t\t\tmodeId: modeId,\n\t\t\t\t\t\t\t\tcontent: agentContent\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tconsole.log('[ChatStore] ✅ 成功调用 executeTaskWithMode 命令');\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\t\t\tconsole.error('[ChatStore] ❌ 调用 executeTaskWithMode 命令失败:', err);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tinsertMessage(state, [msgInfo, chatInfo]) {\n\t\t\tif (!msgInfo || !chatInfo) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconsole.log(\"===insertMessage===\",msgInfo,chatInfo);\n\t\t\t// 🔧 增强调试：记录插入操作\n\t\t\tconst messageId = msgInfo.id || msgInfo.tmpId || 'no-id';\n\t\t\tconsole.log(`📦 [insertMessage] 插入消息: ${messageId}`, {\n\t\t\t\tid: msgInfo.id,\n\t\t\t\ttmpId: msgInfo.tmpId,\n\t\t\t\tcontent: msgInfo.content?.substring(0, 50),\n\t\t\t\tchatType: chatInfo.type,\n\t\t\t\tchatTargetId: chatInfo.targetId\n\t\t\t});\n\t\t\t\n\t\t\t// 确保消息有ID标识\n\t\t\tif (!msgInfo.id && !msgInfo.tmpId) {\n\t\t\t\tmsgInfo.tmpId = `temp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\t\t\t}\n\t\t\t\n\t\t\tlet type = chatInfo.type;\n\t\t\t// 记录消息的最大id\n\t\t\tif (msgInfo.id && type == \"PRIVATE\" && msgInfo.id > state.privateMsgMaxId) {\n\t\t\t\tstate.privateMsgMaxId = msgInfo.id;\n\t\t\t}\n\t\t\tif (msgInfo.id && type == \"GROUP\" && msgInfo.id > state.groupMsgMaxId) {\n\t\t\t\tstate.groupMsgMaxId = msgInfo.id;\n\t\t\t}\n\t\t\t\n\t\t\t// 如果是已存在消息，则覆盖旧的消息数据\n\t\t\tlet chat = this.getters.findChat(chatInfo);\n\t\t\tconsole.log(\"===chat===\",chat);\n\t\t\tif (!chat) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 确保messages数组存在\n\t\t\tif (!Array.isArray(chat.messages)) {\n\t\t\t\tchat.messages = [];\n\t\t\t}\n\t\t\t\n\t\t\tlet message = this.getters.findMessage(chat, msgInfo);\n\t\t\tconsole.log(\"===message===\",message);\n\t\t\tif (message) {\n\t\t\t\tconsole.log(`🔄 [insertMessage] 更新现有消息: ${messageId}`, {\n\t\t\t\t\t原有id: message.id,\n\t\t\t\t\t原有tmpId: message.tmpId,\n\t\t\t\t\t新id: msgInfo.id,\n\t\t\t\t\t新tmpId: msgInfo.tmpId\n\t\t\t\t});\n\t\t\t\tObject.assign(message, msgInfo);\n\t\t\t\tchat.stored = false;\n\t\t\t\tthis.commit(\"saveToStorage\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log(`➕ [insertMessage] 插入新消息: ${messageId}`);\n\t\t\t\n\t\t\t// 插入新的数据\n\t\t\tif (msgInfo.type == MESSAGE_TYPE.IMAGE) {\n\t\t\t\tchat.lastContent = \"[图片]\";\n\t\t\t} else if (msgInfo.type == MESSAGE_TYPE.FILE) {\n\t\t\t\tchat.lastContent = \"[文件]\";\n\t\t\t} else if (msgInfo.type == MESSAGE_TYPE.AUDIO) {\n\t\t\t\tchat.lastContent = \"[语音]\";\n\t\t\t} else if (msgInfo.type == MESSAGE_TYPE.ACT_RT_VOICE) {\n\t\t\t\tchat.lastContent = \"[语音通话]\";\n\t\t\t} else if (msgInfo.type == MESSAGE_TYPE.ACT_RT_VIDEO) {\n\t\t\t\tchat.lastContent = \"[视频通话]\";\n\t\t\t} else if (msgInfo.type == MESSAGE_TYPE.TEXT ||\n\t\t\t\tmsgInfo.type == MESSAGE_TYPE.RECALL ||\n\t\t\t\tmsgInfo.type == MESSAGE_TYPE.TIP_TEXT) {\n\t\t\t\tchat.lastContent = msgInfo.content;\n\t\t\t}\n\t\t\tchat.lastSendTime = msgInfo.sendTime;\n\t\t\tchat.sendNickName = msgInfo.sendNickName;\n\t\t\t\n\t\t\t// 未读加1\n\t\t\tif (!msgInfo.selfSend && msgInfo.status != MESSAGE_STATUS.READED &&\n\t\t\t\tmsgInfo.status != MESSAGE_STATUS.RECALL && msgInfo.type != MESSAGE_TYPE.TIP_TEXT) {\n\t\t\t\tchat.unreadCount++;\n\t\t\t}\n\t\t\t\n\t\t\t// 是否有人@我\n\t\t\tif (!msgInfo.selfSend && chat.type == \"GROUP\" && msgInfo.atUserIds &&\n\t\t\t\tmsgInfo.status != MESSAGE_STATUS.READED) {\n\t\t\t\tconst userInfo = userStore.state.userInfo;\n\t\t\t\tif (userInfo && userInfo.id) {\n\t\t\t\t\tlet userId = userInfo.id;\n\t\t\t\t\tif (msgInfo.atUserIds.indexOf(userId) >= 0) {\n\t\t\t\t\t\tchat.atMe = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (msgInfo.atUserIds.indexOf(-1) >= 0) {\n\t\t\t\t\tchat.atAll = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 间隔大于10分钟插入时间显示\n\t\t\t// 但是系统消息（type=21）和时间消息本身（type=20）不需要插入时间提示\n\t\t\tif (msgInfo.type !== MESSAGE_TYPE.TIP_TEXT && msgInfo.type !== MESSAGE_TYPE.TIP_TIME &&\n\t\t\t\t(!chat.lastTimeTip || (chat.lastTimeTip < msgInfo.sendTime - 600 * 1000))) {\n\t\t\t\tconst timeMessage = {\n\t\t\t\t\tsendTime: msgInfo.sendTime,\n\t\t\t\t\ttype: MESSAGE_TYPE.TIP_TIME,\n\t\t\t\t\tid: `time-${msgInfo.sendTime}-${Math.random().toString(36).substr(2, 6)}`, // 🔧 增加随机后缀确保唯一\n\t\t\t\t};\n\t\t\t\tconsole.log(`⏰ [insertMessage] 插入时间消息: ${timeMessage.id}`);\n\t\t\t\tchat.messages.push(timeMessage);\n\t\t\t\tchat.lastTimeTip = msgInfo.sendTime;\n\t\t\t}\n\t\t\t\n\t\t\t// 根据id顺序插入，防止消息乱序\n\t\t\tlet insertPos = chat.messages.length;\n\t\t\tif (msgInfo.id && msgInfo.id > 0) {\n\t\t\t\tfor (let idx = 0; idx < chat.messages.length; idx++) {\n\t\t\t\t\tconst message = chat.messages[idx];\n\t\t\t\t\tif (message && message.id && msgInfo.id < message.id) {\n\t\t\t\t\t\tinsertPos = idx;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 插入消息\n\t\t\tchat.messages.splice(insertPos, 0, msgInfo);\n\t\t\t\n\t\t\t// 添加调试日志\n\t\t\tconsole.log('[ChatStore] insertMessage - 消息信息:', {\n\t\t\t\tselfSend: msgInfo.selfSend,\n\t\t\t\ttype: msgInfo.type,\n\t\t\t\tMESSAGE_TYPE_TEXT: MESSAGE_TYPE.TEXT,\n\t\t\t\tcontent: msgInfo.content,\n\t\t\t\tcontentLength: msgInfo.content ? msgInfo.content.length : 0\n\t\t\t});\n\t\t\t\n\t\t\t// 检查并处理 @任务 和 @智能体 命令\n\t\t\t// 对于终端消息：只要targetTerminal是当前终端，就执行任务（不管是谁发送的）\n\t\t\t// 对于普通消息：保持原有逻辑（只处理自己发送的）\n\t\t\tconst terminal = window.terminal ? window.terminal : 2;\n\t\t\t\n\t\t\tif (msgInfo.targetTerminal == terminal) {\n\t\t\t\tconsole.log('[ChatStore] 执行roo-code命令，执行终端：'+msgInfo.targetTerminal);\n\t\t\t\t// this.commit(\"handleRooCodeMentions\", msgInfo.content);\n\t\t\t}\n\t\t\t\n\t\t\tchat.stored = false;\n\t\t\tthis.commit(\"saveToStorage\");\n\t\t},\n\t\t\n\t\t// 🔧 新增：批量插入消息方法，避免频繁保存\n\t\tbatchInsertMessages(state, { messages, chatInfo }) {\n\t\t\tif (!messages || !messages.length || !chatInfo) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log(`📦 [batchInsertMessages] 批量插入${messages.length}条消息到${chatInfo.showName || chatInfo.targetId}`);\n\t\t\t\n\t\t\tlet chat = this.getters.findChat(chatInfo);\n\t\t\tif (!chat) {\n\t\t\t\tconsole.warn('[batchInsertMessages] 找不到目标会话');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 确保messages数组存在\n\t\t\tif (!Array.isArray(chat.messages)) {\n\t\t\t\tchat.messages = [];\n\t\t\t}\n\t\t\t\n\t\t\t// 批量插入消息（跳过重复检查，提高性能）\n\t\t\tlet lastMessage = null;\n\t\t\tlet newMessagesCount = 0;\n\t\t\t\n\t\t\tmessages.forEach(msgInfo => {\n\t\t\t\t// 确保消息有ID标识\n\t\t\t\tif (!msgInfo.id && !msgInfo.tmpId) {\n\t\t\t\t\tmsgInfo.tmpId = `temp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 更新最大ID\n\t\t\t\tif (msgInfo.id && chatInfo.type == \"PRIVATE\" && msgInfo.id > state.privateMsgMaxId) {\n\t\t\t\t\tstate.privateMsgMaxId = msgInfo.id;\n\t\t\t\t}\n\t\t\t\tif (msgInfo.id && chatInfo.type == \"GROUP\" && msgInfo.id > state.groupMsgMaxId) {\n\t\t\t\t\tstate.groupMsgMaxId = msgInfo.id;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 插入时间消息（简化判断）\n\t\t\t\tif (!chat.lastTimeTip || (chat.lastTimeTip < msgInfo.sendTime - 600 * 1000)) {\n\t\t\t\t\tconst timeMessage = {\n\t\t\t\t\t\tsendTime: msgInfo.sendTime,\n\t\t\t\t\t\ttype: MESSAGE_TYPE.TIP_TIME,\n\t\t\t\t\t\tid: `time-${msgInfo.sendTime}-${Math.random().toString(36).substr(2, 6)}`,\n\t\t\t\t\t};\n\t\t\t\t\tchat.messages.push(timeMessage);\n\t\t\t\t\tchat.lastTimeTip = msgInfo.sendTime;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 直接插入消息到末尾（历史消息通常按时间顺序）\n\t\t\t\tchat.messages.push(msgInfo);\n\t\t\t\tlastMessage = msgInfo;\n\t\t\t\tnewMessagesCount++;\n\t\t\t});\n\t\t\t\n\t\t\t// 更新会话信息\n\t\t\tif (lastMessage) {\n\t\t\t\tif (lastMessage.type == MESSAGE_TYPE.IMAGE) {\n\t\t\t\t\tchat.lastContent = \"[图片]\";\n\t\t\t\t} else if (lastMessage.type == MESSAGE_TYPE.FILE) {\n\t\t\t\t\tchat.lastContent = \"[文件]\";\n\t\t\t\t} else if (lastMessage.type == MESSAGE_TYPE.AUDIO) {\n\t\t\t\t\tchat.lastContent = \"[语音]\";\n\t\t\t\t} else {\n\t\t\t\t\tchat.lastContent = lastMessage.content;\n\t\t\t\t}\n\t\t\t\tchat.lastSendTime = lastMessage.sendTime;\n\t\t\t\tchat.sendNickName = lastMessage.sendNickName;\n\t\t\t}\n\t\t\t\n\t\t\t// 标记需要保存并保存一次\n\t\t\tchat.stored = false;\n\t\t\tthis.commit(\"saveToStorage\");\n\t\t\t\n\t\t\tconsole.log(`✅ [batchInsertMessages] 批量插入完成，新增${newMessagesCount}条消息`);\n\t\t},\n\t\t\n\t\tupdateMessage(state, [msgInfo, chatInfo]) {\n\t\t\t// 获取对方id或群id\n\t\t\tlet chat = this.getters.findChat(chatInfo);\n\t\t\tlet message = this.getters.findMessage(chat, msgInfo);\n\t\t\tif (message) {\n\t\t\t\t// 属性拷贝\n\t\t\t\tObject.assign(message, msgInfo);\n\t\t\t\tchat.stored = false;\n\t\t\t\tthis.commit(\"saveToStorage\");\n\t\t\t}\n\t\t},\n\t\tdeleteMessage(state, [msgInfo, chatInfo]) {\n\t\t\tlet chat = this.getters.findChat(chatInfo);\n\t\t\tfor (let idx in chat.messages) {\n\t\t\t\t// 已经发送成功的，根据id删除\n\t\t\t\tif (chat.messages[idx].id && chat.messages[idx].id == msgInfo.id) {\n\t\t\t\t\tchat.messages.splice(idx, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t// 正在发送中的消息可能没有id，只有临时id\n\t\t\t\tif (chat.messages[idx].tmpId && chat.messages[idx].tmpId == msgInfo.tmpId) {\n\t\t\t\t\tchat.messages.splice(idx, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tchat.stored = false;\n\t\t\tthis.commit(\"saveToStorage\");\n\t\t},\n\t\trecallMessage(state, [msgInfo, chatInfo]) {\n\t\t\tlet chat = this.getters.findChat(chatInfo);\n\t\t\tif (!chat) return;\n\t\t\t// 要撤回的消息id\n\t\t\tlet id = msgInfo.content;\n\t\t\tlet name = msgInfo.selfSend ? '你' : chat.type == 'PRIVATE' ? '对方' : msgInfo.sendNickName;\n\t\t\tfor (let idx in chat.messages) {\n\t\t\t\tlet m = chat.messages[idx];\n\t\t\t\tif (m.id && m.id == id) {\n\t\t\t\t\t// 改造成一条提示消息\n\t\t\t\t\tm.status = MESSAGE_STATUS.RECALL;\n\t\t\t\t\tm.content = name + \"撤回了一条消息\";\n\t\t\t\t\tm.type = MESSAGE_TYPE.TIP_TEXT\n\t\t\t\t\t// 会话列表\n\t\t\t\t\tchat.lastContent = m.content;\n\t\t\t\t\tchat.lastSendTime = msgInfo.sendTime;\n\t\t\t\t\tchat.sendNickName = '';\n\t\t\t\t\tif (!msgInfo.selfSend && msgInfo.status != MESSAGE_STATUS.READED) {\n\t\t\t\t\t\tchat.unreadCount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// 被引用的消息也要撤回\n\t\t\t\tif (m.quoteMessage && m.quoteMessage.id == msgInfo.id) {\n\t\t\t\t\tm.quoteMessage.content = \"引用内容已撤回\";\n\t\t\t\t\tm.quoteMessage.status = MESSAGE_STATUS.RECALL;\n\t\t\t\t\tm.quoteMessage.type = MESSAGE_TYPE.TIP_TEXT\n\t\t\t\t}\n\t\t\t}\n\t\t\tchat.stored = false;\n\t\t\tthis.commit(\"saveToStorage\");\n\t\t},\n\t\t// 创建或获取智能体会话（简化版）\n\t\tensureAgentChat(state, { parentChat, agent, ownerId }) {\n\t\t\t// 新的ID规则：包含父级类型和targetId，避免PRIVATE和GROUP的ID冲突\n\t\t\tconst targetId = `${parentChat.type}_${parentChat.targetId}_agent_${agent.id}`;\n\t\t\t\n\t\t\t// 查找是否已存在\n\t\t\tlet agentChat = state.chats.find(c => \n\t\t\t\tc.type === 'AGENT' && \n\t\t\t\tc.targetId === targetId\n\t\t\t);\n\t\t\t\n\t\t\tif (!agentChat) {\n\t\t\t\t// 创建新的智能体会话\n\t\t\t\tagentChat = {\n\t\t\t\t\ttype: \"AGENT\",\n\t\t\t\t\ttargetId: targetId,  // 这就是存储键，也是会话标识\n\t\t\t\t\tagentId: agent.id,   // 只保存智能体ID\n\t\t\t\t\tparentId: parentChat.targetId,  // 父级会话ID\n\t\t\t\t\tparentType: parentChat.type,    // 父级会话类型\n\t\t\t\t\tshowName: `${parentChat.showName} > ${agent.name}`,\n\t\t\t\t\theadImage: agent.avatar || '/img/agent-default.png',\n\t\t\t\t\tmessages: [],\n\t\t\t\t\tlastContent: \"\",\n\t\t\t\t\tlastSendTime: Date.now(),\n\t\t\t\t\tunreadCount: 0,\n\t\t\t\t\tstored: false,\n\t\t\t\t\tskipGeneralStorage: true  // 标记不通过通用存储保存\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 添加到chats列表\n\t\t\t\tstate.chats.push(agentChat);\n\t\t\t\t\n\t\t\t\t// 保存到存储\n\t\t\t\tthis.commit(\"saveToStorage\");\n\t\t\t}\n\t\t\t\n\t\t\treturn agentChat;\n\t\t},\n\t\t\n\t\t// 保存智能体会话\n\t\tasync saveAgentChat(state, agentChat) {\n\t\t\tconst userId = userStore.state.userInfo.id;\n\t\t\tconst key = `chats-${userId}-AGENT-${agentChat.parentType}_${agentChat.parentId}_${agentChat.agentId}`;\n\t\t\t\n\t\t\tagentChat.stored = true;\n\t\t\ttry {\n\t\t\t\tawait localForage.setItem(key, agentChat);\n\t\t\t\tconsole.log('[AgentChat] 已保存会话:', key);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[AgentChat] 保存会话失败:', error);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 加载用户的所有智能体会话\n\t\tasync loadAgentChats(state) {\n\t\t\tconst userId = userStore.state.userInfo.id;\n\t\t\ttry {\n\t\t\t\tconst keys = await localForage.keys();\n\t\t\t\tconst agentKeys = keys.filter(k => k.startsWith(`chats-${userId}-AGENT-`));\n\t\t\t\t\n\t\t\t\tconsole.log(`[AgentChat] 发现 ${agentKeys.length} 个智能体会话`);\n\t\t\t\t\n\t\t\t\tfor (const key of agentKeys) {\n\t\t\t\t\tconst agentChat = await localForage.getItem(key);\n\t\t\t\t\tif (agentChat) {\n\t\t\t\t\t\tconst exists = state.chats.find(c => \n\t\t\t\t\t\t\tc.type === 'AGENT' && \n\t\t\t\t\t\t\tc.targetId === agentChat.targetId\n\t\t\t\t\t\t);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (!exists) {\n\t\t\t\t\t\t\tstate.chats.push(agentChat);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[AgentChat] 加载智能体会话失败:', error);\n\t\t\t}\n\t\t},\n\t\t\n\t\tupdateChatFromFriend(state, friend) {\n\t\t\tlet chat = this.getters.findChatByFriend(friend.id);\n\t\t\t// 更新会话中的群名和头像\n\t\t\tif (chat && (chat.headImage != friend.headImage ||\n\t\t\t\t\tchat.showName != friend.nickName)) {\n\t\t\t\tchat.headImage = friend.headImage;\n\t\t\t\tchat.showName = friend.nickName;\n\t\t\t\tchat.stored = false;\n\t\t\t\tthis.commit(\"saveToStorage\")\n\t\t\t}\n\t\t},\n\t\tupdateChatFromUser(user) {\n\t\t\tlet chat = this.getters.findChatByFriend(user.id);\n\t\t\t// 更新会话中的昵称和头像\n\t\t\tif (chat && (chat.headImage != user.headImageThumb ||\n\t\t\t\t\tchat.showName != user.nickName)) {\n\t\t\t\tchat.headImage = user.headImageThumb;\n\t\t\t\tchat.showName = user.nickName;\n\t\t\t\tchat.stored = false;\n\t\t\t\tthis.commit(\"saveToStorage\");\n\t\t\t}\n\t\t},\n\t\tupdateChatFromGroup(state, group) {\n\t\t\tlet chat = this.getters.findChatByGroup(group.id);\n\t\t\tif (chat && (chat.headImage != group.headImageThumb ||\n\t\t\t\t\tchat.showName != group.showGroupName)) {\n\t\t\t\t// 更新会话中的群名称和头像\n\t\t\t\tchat.headImage = group.headImageThumb;\n\t\t\t\tchat.showName = group.showGroupName;\n\t\t\t\tchat.stored = false;\n\t\t\t\tthis.commit(\"saveToStorage\")\n\t\t\t}\n\t\t},\n\t\tloadingPrivateMsg(state, loading) {\n\t\t\tstate.loadingPrivateMsg = loading;\n\t\t\t// 修复：只有在有缓存数据时才刷新聊天列表\n\t\t\tif (!this.getters.isLoading() && cacheChats && cacheChats.length > 0) {\n\t\t\t\tconsole.log('[ChatStore] loadingPrivateMsg完成，刷新聊天列表');\n\t\t\t\tthis.commit(\"refreshChats\");\n\t\t\t} else if (!this.getters.isLoading()) {\n\t\t\t\tconsole.log('[ChatStore] loadingPrivateMsg完成，但无缓存数据，跳过刷新');\n\t\t\t}\n\t\t},\n\t\tloadingGroupMsg(state, loading) {\n\t\t\tstate.loadingGroupMsg = loading;\n\t\t\t// 修复：只有在有缓存数据时才刷新聊天列表\n\t\t\tif (!this.getters.isLoading() && cacheChats && cacheChats.length > 0) {\n\t\t\t\tconsole.log('[ChatStore] loadingGroupMsg完成，刷新聊天列表');\n\t\t\t\tthis.commit(\"refreshChats\");\n\t\t\t} else if (!this.getters.isLoading()) {\n\t\t\t\tconsole.log('[ChatStore] loadingGroupMsg完成，但无缓存数据，跳过刷新');\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 新增：设置聊天加载状态的mutation\n\t\tsetLoadingChatState(state, loading) {\n\t\t\tstate.isLoadingChat = loading;\n\t\t},\n\t\t\n\t\t// 🔧 新增：标记会话为已存储状态\n\t\tmarkChatsAsStored(state, chatIndices) {\n\t\t\tchatIndices.forEach(index => {\n\t\t\t\tif (state.chats[index]) {\n\t\t\t\t\tstate.chats[index].stored = true;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 清理会话中的空消息\n\t\tcleanEmptyMessages(state) {\n\t\t\tconsole.log('[ChatStore] 开始清理空消息');\n\t\t\tstate.chats.forEach(chat => {\n\t\t\t\tif (chat.messages && chat.messages.length > 0) {\n\t\t\t\t\tconst beforeCount = chat.messages.length;\n\t\t\t\t\t// 过滤掉空消息：没有content或content为空的消息\n\t\t\t\t\tchat.messages = chat.messages.filter(msg => {\n\t\t\t\t\t\t// 必须有消息对象和类型\n\t\t\t\t\t\tif (!msg || msg.type === undefined || msg.type === null) {\n\t\t\t\t\t\t\tconsole.log('[ChatStore] 过滤无效消息对象:', msg);\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 时间消息（type=7）保留 - 这个是MESSAGE_TYPE.TIP_TIME的旧值\n\t\t\t\t\t\tif (msg.type === 7) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 时间提示消息（type=20）也应该保留，但需要检查内容\n\t\t\t\t\t\tif (msg.type === 20) {\n\t\t\t\t\t\t\t// 对于终端会话的初始时间消息，如果是第一条消息且紧跟着系统消息，则过滤掉\n\t\t\t\t\t\t\treturn true; // 暂时保留，后续会在终端会话中特殊处理\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 系统提示消息（type=8或21）必须有内容\n\t\t\t\t\t\tif (msg.type === 8 || msg.type === 21) {\n\t\t\t\t\t\t\tconst hasContent = msg.content && msg.content.trim() !== '';\n\t\t\t\t\t\t\tif (!hasContent) {\n\t\t\t\t\t\t\t\tconsole.log('[ChatStore] 过滤空系统消息:', msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn hasContent;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 文本消息（type=0）必须有内容\n\t\t\t\t\t\tif (msg.type === 0) {\n\t\t\t\t\t\t\tconst hasContent = msg.content && msg.content.trim() !== '';\n\t\t\t\t\t\t\tif (!hasContent) {\n\t\t\t\t\t\t\t\tconsole.log('[ChatStore] 过滤空文本消息:', msg);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn hasContent;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 图片消息（type=1）、文件消息（type=2）、语音消息（type=3）等\n\t\t\t\t\t\t// 这些消息即使content为空也可能是有效的（content可能包含JSON数据）\n\t\t\t\t\t\tif (msg.type === 1 || msg.type === 2 || msg.type === 3 || \n\t\t\t\t\t\t\tmsg.type === 4 || msg.type === 5 || msg.type === 6) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 撤回消息等其他类型，保留\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t\t\tconst afterCount = chat.messages.length;\n\t\t\t\t\tif (beforeCount !== afterCount) {\n\t\t\t\t\t\tconsole.log(`[ChatStore] 清理了 ${chat.showName} 的 ${beforeCount - afterCount} 条空消息`);\n\t\t\t\t\t\tchat.stored = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t// 将终端会话置顶\n\t\tsortTerminalChatsToTop(state) {\n\t\t\tconsole.log('[ChatStore] 执行终端会话置顶排序');\n\t\t\t\n\t\t\t// 分离终端会话和普通会话\n\t\t\tconst terminalChats = [];\n\t\t\tconst normalChats = [];\n\t\t\t\n\t\t\tstate.chats.forEach(chat => {\n\t\t\t\tif (chat.isTerminalInbox && !chat.delete) {\n\t\t\t\t\tterminalChats.push(chat);\n\t\t\t\t} else if (!chat.delete) {\n\t\t\t\t\tnormalChats.push(chat);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tconsole.log(`[ChatStore] 找到 ${terminalChats.length} 个终端会话，${normalChats.length} 个普通会话`);\n\t\t\t\n\t\t\t// 终端会话按终端类型排序（Web、App、VSCode、PC、插件）\n\t\t\tterminalChats.sort((a, b) => {\n\t\t\t\tconst aTerminal = a.receivingTerminal || 0;\n\t\t\t\tconst bTerminal = b.receivingTerminal || 0;\n\t\t\t\treturn aTerminal - bTerminal;\n\t\t\t});\n\t\t\t\n\t\t\t// 普通会话保持原有顺序或按时间排序\n\t\t\tnormalChats.sort((chat1, chat2) => {\n\t\t\t\treturn (chat2.lastSendTime || 0) - (chat1.lastSendTime || 0);\n\t\t\t});\n\t\t\t\n\t\t\t// 重新组合：终端会话在前，普通会话在后\n\t\t\tstate.chats = [...terminalChats, ...normalChats];\n\t\t\t\n\t\t\tconsole.log('[ChatStore] 终端会话置顶完成');\n\t\t},\n\t\trefreshChats(state) {\n\t\t\t// 修复：避免清空已有聊天数据\n\t\t\tif (!cacheChats || cacheChats.length === 0) {\n\t\t\t\tconsole.log('[ChatStore] refreshChats: 缓存为空，保持当前聊天数据不变');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log(`[ChatStore] refreshChats: 从缓存恢复${cacheChats.length}个聊天`);\n\t\t\t\n\t\t\t// 分离终端会话和普通会话\n\t\t\tconst terminalChats = [];\n\t\t\tconst normalChats = [];\n\t\t\t\n\t\t\tcacheChats.forEach(chat => {\n\t\t\t\tif (chat.isTerminalInbox && !chat.delete) {\n\t\t\t\t\tterminalChats.push(chat);\n\t\t\t\t} else if (!chat.delete) {\n\t\t\t\t\tnormalChats.push(chat);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// 终端会话按终端类型排序（Web、App、VSCode、PC、插件）\n\t\t\tterminalChats.sort((a, b) => {\n\t\t\t\tconst aTerminal = a.receivingTerminal || 0;\n\t\t\t\tconst bTerminal = b.receivingTerminal || 0;\n\t\t\t\treturn aTerminal - bTerminal;\n\t\t\t});\n\t\t\t\n\t\t\t// 普通会话按最后发送时间排序\n\t\t\tnormalChats.sort((chat1, chat2) => {\n\t\t\t\treturn chat2.lastSendTime - chat1.lastSendTime;\n\t\t\t});\n\t\t\t\n\t\t\t// 重新组合：终端会话在前，普通会话在后\n\t\t\tstate.chats = [...terminalChats, ...normalChats];\n\t\t\t\n\t\t\t// 清空缓存\n\t\t\tcacheChats = null;\n\t\t\t\n\t\t\tconsole.log('[ChatStore] refreshChats完成，终端会话已置顶');\n\t\t\tthis.commit(\"saveToStorage\");\n\t\t},\n\t\t// 🔧 修复后的防抖保存方法\n\t\tsaveToStorage(state) {\n\t\t\t// 清除之前的定时器\n\t\t\tif (saveTimer) {\n\t\t\t\tclearTimeout(saveTimer);\n\t\t\t}\n\t\t\t\n\t\t\t// 🔧 立即标记需要保存的会话为已存储（在mutation中同步执行）\n\t\t\tconst chatsToSave = [];\n\t\t\tstate.chats.forEach((chat, index) => {\n\t\t\t\tif (!chat.stored) {\n\t\t\t\t\t// 立即标记为已存储，避免在异步回调中修改状态\n\t\t\t\t\tchat.stored = true;\n\t\t\t\t\tchatsToSave.push({ ...chat, index });\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// 🔧 修复：即使没有聊天需要保存，也要检查是否需要保存maxId\n\t\t\t// 移除这个早期返回，让maxId总是能被保存\n\t\t\t// if (chatsToSave.length === 0) {\n\t\t\t// \treturn;\n\t\t\t// }\n\t\t\t\n\t\t\t// 设置防抖延迟，300ms内的多次调用只执行最后一次\n\t\t\tsaveTimer = setTimeout(() => {\n\t\t\t\t// 执行实际的存储操作（不涉及状态修改）\n\t\t\t\tconsole.log('[ChatStore] 防抖保存触发');\n\t\t\t\t\n\t\t\t\tconst userInfo = userStore.state.userInfo;\n\t\t\t\tif (!userInfo || !userInfo.id) {\n\t\t\t\t\tconsole.warn('[ChatStore] 保存失败：用户信息不完整');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 防护：避免保存空的聊天数据\n\t\t\t\tif (!state.chats || state.chats.length === 0) {\n\t\t\t\t\tconsole.warn('[ChatStore] ⚠️ 检测到空的聊天数据，跳过保存操作以防数据丢失');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet userId = userInfo.id;\n\t\t\t\tconsole.log(`[ChatStore] 🔧 防抖保存聊天数据，用户ID: ${userId}, 聊天数: ${state.chats.length}`);\n\t\t\t\t\n\t\t\t\t// 异步保存到VSCode存储\n\t\t\t\tPromise.resolve().then(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (vscodeStorageAdapter.isInVSCodeEnvironment()) {\n\t\t\t\t\t\t\tconst completeChatsData = {\n\t\t\t\t\t\t\t\tchats: state.chats,\n\t\t\t\t\t\t\t\tprivateMsgMaxId: state.privateMsgMaxId,\n\t\t\t\t\t\t\t\tgroupMsgMaxId: state.groupMsgMaxId,\n\t\t\t\t\t\t\t\tlastSync: Date.now()\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst result = await vscodeStorageAdapter.saveVueChatsDataToVSCode(completeChatsData, userId);\n\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\tconsole.log(`[ChatStore] ✅ 防抖保存到VSCode存储成功，聊天数: ${state.chats.length}`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.warn('[ChatStore] VSCode存储同步失败:', error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 同步保存到localForage\n\t\t\t\tlet key = \"chats-\" + userId;\n\t\t\t\t\n\t\t\t\t// 🔥 关键修复：使用Promise避免在mutation中使用await\n\t\t\t\tlocalForage.getItem(key).then(existingData => {\n\t\t\t\t\tlet chatKeys = existingData?.chatKeys || [];\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(`[ChatStore] 🔧 保存前检查：现有chatKeys数量: ${chatKeys.length}, 当前chats数量: ${state.chats.length}`);\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 保留现有的智能体会话键（它们不在state.chats中）\n\t\t\t\t\tconst agentChatKeys = chatKeys.filter(key => key.includes('_agent_'));\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 只有当有实际聊天数据需要保存时，才重新构建chatKeys\n\t\t\t\t\tif (state.chats && state.chats.length > 0) {\n\t\t\t\t\t\tconsole.log(`[ChatStore] 🔧 重新构建chatKeys，因为有${state.chats.length}个聊天需要保存，保留${agentChatKeys.length}个智能体会话`);\n\t\t\t\t\t\tchatKeys = [...agentChatKeys]; // 保留智能体会话键\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 关键修复：检查并移除重复会话\n\t\t\t\t\tconst uniqueChatKeys = new Set();\n\t\t\t\t\tconst duplicateChats = [];\n\t\t\t\t\t\n\t\t\t\t\tstate.chats.forEach((chat, index) => {\n\t\t\t\t\t// 跳过标记为不通过通用存储保存的会话（如智能体会话）\n\t\t\t\t\tif (chat.skipGeneralStorage) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet chatKey = `${key}-${chat.type}-${chat.targetId}`;\n\t\t\t\t\t\n\t\t\t\t\t// if (uniqueChatKeys.has(chatKey)) {\n\t\t\t\t\t// \tduplicateChats.push({ index, chatKey, chat });\n\t\t\t\t\t// \tconsole.warn(`🚨 [保存] 发现重复会话: ${chatKey}`, {\n\t\t\t\t\t// \t\tindex: index,\n\t\t\t\t\t// \t\tmessagesCount: chat.messages?.length || 0,\n\t\t\t\t\t// \t\tshowName: chat.showName\n\t\t\t\t\t// \t});\n\t\t\t\t\t// \treturn; // 跳过重复会话\n\t\t\t\t\t// }\n\t\t\t\t\t\n\t\t\t\t\tuniqueChatKeys.add(chatKey);\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 增强调试：记录终端会话保存\n\t\t\t\t\tif (chat.isTerminalInbox) {\n\t\t\t\t\t\tconsole.log(`💾 [保存终端会话] ${chatKey}`, {\n\t\t\t\t\t\t\ttype: chat.type,\n\t\t\t\t\t\t\ttargetId: chat.targetId,\n\t\t\t\t\t\t\tisTerminalInbox: chat.isTerminalInbox,\n\t\t\t\t\t\t\tisTerminalChat: chat.isTerminalChat,\n\t\t\t\t\t\t\treceivingTerminal: chat.receivingTerminal,\n\t\t\t\t\t\t\tmessagesCount: chat.messages?.length || 0,\n\t\t\t\t\t\t\tshowName: chat.showName,\n\t\t\t\t\t\t\tstored: chat.stored,\n\t\t\t\t\t\t\tdelete: chat.delete,\n\t\t\t\t\t\t\tindex: index\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif (chat.delete) {\n\t\t\t\t\t\tlocalForage.removeItem(chatKey);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocalForage.setItem(chatKey, chat);\n\t\t\t\t\t}\n\t\t\t\t\tchatKeys.push(chatKey);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 🔧 如果发现重复会话，记录警告\n\t\t\t\tif (duplicateChats.length > 0) {\n\t\t\t\t\tconsole.warn(`🚨 [保存] 跳过了${duplicateChats.length}个重复会话:`, duplicateChats);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\t\t// 🔧 对chatKeys数组进行去重\n\t\t\t\t\t\tconst originalLength = chatKeys.length;\n\t\t\t\t\t\tchatKeys = [...new Set(chatKeys)];\n\t\t\t\t\t\tif (originalLength !== chatKeys.length) {\n\t\t\t\t\t\t\tconsole.warn(`🔧 [保存] chatKeys去重：${originalLength} -> ${chatKeys.length}，去除了${originalLength - chatKeys.length}个重复项`);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 即使没有普通聊天数据，也要保留智能体会话键\n\t\t\t\t\t\tconst currentAgentKeys = chatKeys.filter(key => key.includes('_agent_'));\n\t\t\t\t\t\tif (currentAgentKeys.length > 0) {\n\t\t\t\t\t\t\tconsole.log(`[ChatStore] 🔧 防抖保存：保持现有chatKeys (${chatKeys.length}个)，其中包含${currentAgentKeys.length}个智能体会话`);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.log(`[ChatStore] 🔧 防抖保存：保持现有chatKeys (${chatKeys.length}个)，因为当前无聊天数据需要保存`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 📊 保存数据到IndexedDB\n\t\t\t\t\tconsole.log(`[ChatStore] 🔧 最终保存：chatKeys数量: ${chatKeys.length}, privateMsgMaxId: ${state.privateMsgMaxId}, groupMsgMaxId: ${state.groupMsgMaxId}`);\n\t\t\t\t\tlocalForage.setItem(key, {\n\t\t\t\t\t\tprivateMsgMaxId: state.privateMsgMaxId,\n\t\t\t\t\t\tgroupMsgMaxId: state.groupMsgMaxId,\n\t\t\t\t\t\tchatKeys: chatKeys\n\t\t\t\t\t});\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tconsole.error('[ChatStore] 获取现有chatKeys失败:', error);\n\t\t\t\t\t// 发生错误时，至少保存maxId\n\t\t\t\t\tlocalForage.setItem(key, {\n\t\t\t\t\t\tprivateMsgMaxId: state.privateMsgMaxId,\n\t\t\t\t\t\tgroupMsgMaxId: state.groupMsgMaxId,\n\t\t\t\t\t\tchatKeys: []\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}, 300);\n\t\t},\n\t\t\n\t\t// 立即保存方法（保留但简化）\n\t\tsaveToStorageImmediate(state) {\n\t\t\t// 加载中不保存，防止卡顿\n\t\t\tif (this.getters.isLoading()) {\n\t\t\t\tconsole.log('[ChatStore] 加载中，跳过保存操作');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 安全获取用户ID\n\t\t\tconst userInfo = userStore.state.userInfo;\n\t\t\tif (!userInfo || !userInfo.id) {\n\t\t\t\tconsole.warn('[ChatStore] 用户信息未加载，无法保存聊天数据');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 防护：避免保存空的聊天数据\n\t\t\tif (!state.chats || state.chats.length === 0) {\n\t\t\t\tconsole.warn('[ChatStore] ⚠️ 检测到空的聊天数据，跳过保存操作以防数据丢失');\n\t\t\t\tconsole.warn('[ChatStore] 当前状态:', {\n\t\t\t\t\tchatsLength: state.chats?.length || 0,\n\t\t\t\t\tuserId: userInfo.id,\n\t\t\t\t\thasChats: !!state.chats\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tlet userId = userInfo.id;\n\t\t\tlet key = \"chats-\" + userId;\n\t\t\t\n\t\t\tconsole.log(`[ChatStore] 🔧 开始立即保存聊天数据，用户ID: ${userId}, 聊天数: ${state.chats.length}`);\n\t\t\t\n\t\t\t// 同时保存到VSCode存储（如果在VSCode环境中）\n\t\t\t// 注意：在mutation中不能调用异步操作，所以使用Promise.resolve包装\n\t\t\tPromise.resolve().then(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tif (vscodeStorageAdapter.isInVSCodeEnvironment()) {\n\t\t\t\t\t\t// 再次验证数据有效性\n\t\t\t\t\t\tif (!state.chats || state.chats.length === 0) {\n\t\t\t\t\t\t\tconsole.warn('[ChatStore] ⚠️ 保存时再次检测到空数据，跳过VSCode存储保存');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 保存完整的聊天数据结构到VSCode存储\n\t\t\t\t\t\tconst completeChatsData = {\n\t\t\t\t\t\t\tchats: state.chats,\n\t\t\t\t\t\t\tprivateMsgMaxId: state.privateMsgMaxId,\n\t\t\t\t\t\t\tgroupMsgMaxId: state.groupMsgMaxId,\n\t\t\t\t\t\t\tlastSync: Date.now()\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log(`[ChatStore] 📤 准备保存到VSCode存储，数据概览:`, {\n\t\t\t\t\t\t\tchatsCount: completeChatsData.chats.length,\n\t\t\t\t\t\t\tprivateMsgMaxId: completeChatsData.privateMsgMaxId,\n\t\t\t\t\t\t\tgroupMsgMaxId: completeChatsData.groupMsgMaxId\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\t// const result = await vscodeStorageAdapter.saveVueChatsDataToVSCode(completeChatsData, userId);\n\t\t\t\t\t\t// if (result) {\n\t\t\t\t\t\t// \tconsole.log(`[ChatStore] ✅ 完整聊天数据已保存到VSCode存储，聊天数: ${state.chats.length}`);\n\t\t\t\t\t\t// } else {\n\t\t\t\t\t\t// \tconsole.warn('[ChatStore] ⚠️ VSCode存储保存失败');\n\t\t\t\t\t\t// }\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.warn('[ChatStore] VSCode存储同步失败:', error);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// 🔥 关键修复：获取现有chatKeys后再进行保存\n\t\t\tlocalForage.getItem(key).then(existingData => {\n\t\t\t\tlet chatKeys = existingData?.chatKeys || [];\n\t\t\t\t\n\t\t\t\tconsole.log(`[ChatStore] 🔧 立即保存前检查：现有chatKeys数量: ${chatKeys.length}, 当前chats数量: ${state.chats.length}`);\n\t\t\t\t\n\t\t\t\t// 🔧 保留现有的智能体会话键（它们不在state.chats中）\n\t\t\t\tconst agentChatKeys = chatKeys.filter(key => key.includes('_agent_'));\n\t\t\t\t\n\t\t\t\t// 🔧 只有当有实际聊天数据需要保存时，才重新构建chatKeys\n\t\t\t\tif (state.chats && state.chats.length > 0) {\n\t\t\t\t\tconsole.log(`[ChatStore] 🔧 立即保存：重新构建chatKeys，因为有${state.chats.length}个聊天需要保存，保留${agentChatKeys.length}个智能体会话`);\n\t\t\t\t\tchatKeys = [...agentChatKeys]; // 保留智能体会话键\n\t\t\t\t\t\n\t\t\t\t\t// 按会话为单位存储\n\t\t\t\t\tstate.chats.forEach((chat) => {\n\t\t\t\t\t\t// 跳过标记为不通过通用存储保存的会话（如智能体会话）\n\t\t\t\t\t\tif (chat.skipGeneralStorage) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 只存储有改动的会话\n\t\t\t\t\t\tlet chatKey = `${key}-${chat.type}-${chat.targetId}`\n\t\t\t\t\t\tif (!chat.stored) {\n\t\t\t\t\t\t\tif (chat.delete) {\n\t\t\t\t\t\t\t\tlocalForage.removeItem(chatKey);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlocalForage.setItem(chatKey, chat);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tchat.stored = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchatKeys.push(chatKey);\n\t\t\t\t\t})\n\t\t\t\t} else {\n\t\t\t\t\t// 即使没有普通聊天数据，也要保留智能体会话键\n\t\t\t\t\tconst currentAgentKeys = chatKeys.filter(key => key.includes('_agent_'));\n\t\t\t\t\tif (currentAgentKeys.length > 0) {\n\t\t\t\t\t\tconsole.log(`[ChatStore] 🔧 立即保存：保持现有chatKeys (${chatKeys.length}个)，其中包含${currentAgentKeys.length}个智能体会话`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log(`[ChatStore] 🔧 立即保存：保持现有chatKeys (${chatKeys.length}个)，因为当前无聊天数据需要保存`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 🔧 对chatKeys数组进行去重\n\t\t\t\tconst originalLength = chatKeys.length;\n\t\t\t\tchatKeys = [...new Set(chatKeys)];\n\t\t\t\tif (originalLength !== chatKeys.length) {\n\t\t\t\t\tconsole.warn(`🔧 [立即保存] chatKeys去重：${originalLength} -> ${chatKeys.length}，去除了${originalLength - chatKeys.length}个重复项`);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 存储会话key列表\n\t\t\t\tlocalForage.setItem(key, {\n\t\t\t\t\tprivateMsgMaxId: state.privateMsgMaxId,\n\t\t\t\t\tgroupMsgMaxId: state.groupMsgMaxId,\n\t\t\t\t\tchatKeys: chatKeys\n\t\t\t\t});\n\t\t\t}).catch(error => {\n\t\t\t\tconsole.error('[ChatStore] 立即保存获取现有chatKeys失败:', error);\n\t\t\t});\n\t\t},\n\t\tclear(state) {\n\t\t\tconsole.log('[ChatStore] 🔧 开始清除聊天数据');\n\t\t\t// 修复：清除时重置为null而不是空数组，避免误用\n\t\t\tcacheChats = null;\n\t\t\t// 保留智能体会话（它们有skipGeneralStorage标记）\n\t\t\tconst agentChats = state.chats.filter(chat => chat.skipGeneralStorage);\n\t\t\tstate.chats = agentChats; // 保留智能体会话\n\t\t\tstate.activeChat = null;\n\t\t\tthis.privateMsgMaxId = 0;\n\t\t\tthis.groupMsgMaxId = 0;\t\n\t\t},\n\t\t\n\t\t// 🔧 新增：更新privateMsgMaxId的mutation\n\t\tupdatePrivateMsgMaxId(state, msgId) {\n\t\t\tif (msgId && msgId > state.privateMsgMaxId) {\n\t\t\t\tconsole.log(`[ChatStore] 更新privateMsgMaxId: ${state.privateMsgMaxId} -> ${msgId}`);\n\t\t\t\tstate.privateMsgMaxId = msgId;\n\t\t\t\t// 立即保存maxId到IndexedDB，不等待防抖\n\t\t\t\tthis.commit(\"saveMaxIdImmediate\");\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 🔧 新增：立即保存maxId到IndexedDB\n\t\tsaveMaxIdImmediate(state) {\n\t\t\tconst userInfo = userStore.state.userInfo;\n\t\t\tif (!userInfo || !userInfo.id) {\n\t\t\t\tconsole.warn('[ChatStore] 无法保存maxId：用户信息不完整');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconst userId = userInfo.id;\n\t\t\tconst key = \"chats-\" + userId;\n\t\t\t\n\t\t\t// 立即获取当前的chatKeys\n\t\t\tlocalForage.getItem(key).then(existingData => {\n\t\t\t\tconst chatKeys = existingData?.chatKeys || [];\n\t\t\t\t\n\t\t\t\t// 保存更新后的maxId\n\t\t\t\tconst updatedData = {\n\t\t\t\t\tprivateMsgMaxId: state.privateMsgMaxId,\n\t\t\t\t\tgroupMsgMaxId: state.groupMsgMaxId,\n\t\t\t\t\tchatKeys: chatKeys\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tlocalForage.setItem(key, updatedData).then(() => {\n\t\t\t\t\tconsole.log(`[ChatStore] ✅ maxId已立即保存到IndexedDB: privateMsgMaxId=${state.privateMsgMaxId}`);\n\t\t\t\t}).catch(error => {\n\t\t\t\t\tconsole.error('[ChatStore] 保存maxId失败:', error);\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 清理重复会话（特别是终端会话）\n\t\tcleanDuplicateChats(state) {\n\t\t\tconsole.log(`🔧 [cleanDuplicateChats] 开始清理重复会话...`);\n\t\t\t\n\t\t\tconst uniqueChats = [];\n\t\t\tconst duplicates = [];\n\t\t\tconst seenKeys = new Set();\n\t\t\t\n\t\t\tstate.chats.forEach((chat, index) => {\n\t\t\t\tlet chatKey;\n\t\t\t\t\n\t\t\t\t// 为终端会话和普通会话生成不同的key\n\t\t\t\tif (chat.isTerminalInbox) {\n\t\t\t\t\tchatKey = `terminal-${chat.receivingTerminal}`;\n\t\t\t\t} else {\n\t\t\t\t\tchatKey = `${chat.type}-${chat.targetId}`;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (seenKeys.has(chatKey)) {\n\t\t\t\t\tduplicates.push({ index, chatKey, chat });\n\t\t\t\t\tconsole.warn(`🚨 [cleanDuplicateChats] 发现重复会话: ${chatKey}`, {\n\t\t\t\t\t\tshowName: chat.showName,\n\t\t\t\t\t\tmessagesCount: chat.messages?.length || 0,\n\t\t\t\t\t\tlastSendTime: chat.lastSendTime\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tseenKeys.add(chatKey);\n\t\t\t\t\tuniqueChats.push(chat);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif (duplicates.length > 0) {\n\t\t\t\tconsole.warn(`🧹 [cleanDuplicateChats] 清理了${duplicates.length}个重复会话:`, duplicates);\n\t\t\t\tstate.chats = uniqueChats;\n\t\t\t\t\n\t\t\t\t// 如果当前激活的会话被删除了，需要清空激活状态\n\t\t\t\tif (state.activeChat && !uniqueChats.includes(state.activeChat)) {\n\t\t\t\t\tconsole.warn(`⚠️ [cleanDuplicateChats] 当前激活会话被清理，重置激活状态`);\n\t\t\t\t\tstate.activeChat = null;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 触发保存\n\t\t\t\tthis.commit(\"saveToStorage\");\n\t\t\t} else {\n\t\t\t\tconsole.log(`✅ [cleanDuplicateChats] 未发现重复会话，数据结构正常`);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 终端间通信方法\n\t\t\n\t\t// 生成会话存储Key（兼容VSCode端targetId为数值的要求）\n\t\tgenerateChatKey(state, chatInfo) {\n\t\t\tif (chatInfo.isTerminalInbox) {\n\t\t\t\t// 终端收件箱：chats-{userId}-PRIVATE-{userId}_{receivingTerminal}\n\t\t\t\tconst userId = userStore.state.userInfo?.id;\n\t\t\t\treturn `chats-${userId}-PRIVATE-${userId}_${chatInfo.receivingTerminal}`;\n\t\t\t} else {\n\t\t\t\t// 普通私聊群聊：保持原有格式\n\t\t\t\tconst userId = userStore.state.userInfo?.id;\n\t\t\t\treturn `chats-${userId}-${chatInfo.type}-${chatInfo.targetId}`;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 从存储Key解析targetId（兼容VSCode端）\n\t\tparseTargetIdFromKey(state, chatKey) {\n\t\t\tif (chatKey.includes('_')) {\n\t\t\t\t// 终端收件箱：返回接收终端编号\n\t\t\t\tconst parts = chatKey.split('_');\n\t\t\t\treturn parseInt(parts[parts.length - 1]);\n\t\t\t} else {\n\t\t\t\t// 普通会话：返回原targetId\n\t\t\t\tconst parts = chatKey.split('-');\n\t\t\t\treturn parseInt(parts[parts.length - 1]);\n\t\t\t}\n\t\t}\n\t},\n\tactions: {\n                // 统一会话切换 - 所有会话类型使用相同的激活流程\n                async switchToChat(context, chatIndex) {\n                        const chats = context.getters.findChats();\n                        const chat = chats[chatIndex];\n                        \n                        if (!chat) {\n                                console.warn(`[ChatStore] 会话索引 ${chatIndex} 无效`);\n                                return;\n                        }\n                        \n                        // 统一处理：直接切换到目标会话\n                        context.commit(\"activeChat\", chatIndex);\n                        console.log(`[ChatStore] ✅ 切换到会话: ${chat.showName || chat.name}，消息数: ${chat.messages?.length || 0}`);\n                },\n\t\tasync loadChat(context) {\n\t\t\tconsole.log('[ChatStore] 🔧 开始加载聊天数据');\n\t\t\t// 防重复加载检查\n\t\t\tif (context.state.isLoadingChat) {\n\t\t\t\tconsole.log('[ChatStore] 🛡️ 检测到正在加载聊天数据，跳过重复请求');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 检查是否已经有数据，避免不必要的重复加载\n\t\t\tif (context.state.chats && context.state.chats.length > 0) {\n\t\t\t\tconsole.log(`[ChatStore] 🛡️ 已有${context.state.chats.length}个聊天会话，跳过重复加载`);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 设置加载状态\n\t\t\tcontext.commit(\"setLoadingChatState\", true);\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 等待用户信息加载完成\n\t\t\t\tconst userInfo = userStore.state.userInfo;\n\t\t\t\tif (!userInfo || !userInfo.id) {\n\t\t\t\t\tconsole.warn('[ChatStore] 等待用户信息超时或失败，无法加载聊天数据');\n\t\t\t\t\treturn; // 不抛出错误，允许应用继续运行\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tlet userId = userInfo.id;\n\t\t\t\tlet key = \"chats-\" + userId;\n\t\t\t\t\n\t\t\t\tconsole.log(`[ChatStore] 用户信息已加载，用户ID: ${userId}，开始加载聊天数据`);\n\t\t\t\tconsole.log(\"===key===\")\n\t\t\t\t// 备用方案：从localForage加载数据\n\t\t\t\tconst chatsData = await localForage.getItem(key);\n\n\t\t\t\tconsole.log(\"===key===\", key,chatsData);\n\t\t\t\t\n\t\t\t\tif (!chatsData) {\n\t\t\t\t\tconsole.log('[ChatStore] 没有找到本地聊天数据');\n\t\t\t\t\tcontext.state.privateMsgMaxId = 0;\n\t\t\t\t\tcontext.state.groupMsgMaxId = 0;\n\t\t\t\t\tcontext.state.terminalMsgMaxId = 0;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (chatsData.chats) {\n\t\t\t\t\t// 兼容旧版本\n\t\t\t\t\tconsole.log(`[ChatStore] 从localForage加载到${chatsData.chats.length}个聊天会话`);\n\t\t\t\t\tcontext.commit(\"initChats\", chatsData);\n\t\t\t\t\tcontext.commit(\"setLoadingChatState\", false); // 重置加载状态\n\t\t\t\t\treturn;\n\t\t\t\t} else if (chatsData.chatKeys) {\n\t\t\t\t\tconst promises = [];\n\t\t\t\t\tchatsData.chatKeys.forEach(key => {\n\t\t\t\t\t\tpromises.push(localForage.getItem(key))\n\t\t\t\t\t})\n\t\t\t\t\tconst chats = await Promise.all(promises);\n\t\t\t\t\t\n\t\t\t\t\t// 处理加载的数据，区分普通会话和智能体会话\n\t\t\t\t\tconst filteredChats = [];\n\t\t\t\t\tfor (let i = 0; i < chatsData.chatKeys.length; i++) {\n\t\t\t\t\t\tconst key = chatsData.chatKeys[i];\n\t\t\t\t\t\tconst chat = chats[i];\n\t\t\t\t\t\tif (!chat) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 检查是否是智能体会话（新格式：chatType_parentId_agent_agentId）\n\t\t\t\t\t\tif (key.includes('_agent_') && !key.startsWith('chats-')) {\n\t\t\t\t\t\t\t// 这是智能体会话的独立存储，需要转换格式\n\t\t\t\t\t\t\tconst parts = key.split('_agent_');\n\t\t\t\t\t\t\tif (parts.length === 2) {\n\t\t\t\t\t\t\t\tconst parentPart = parts[0]; // 包含 chatType_parentId\n\t\t\t\t\t\t\t\tconst agentId = parts[1] || chat.agentId;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 从parentPart中提取chatType和parentId\n\t\t\t\t\t\t\t\tlet parentType = 'PRIVATE';  // 默认类型\n\t\t\t\t\t\t\t\tlet parentId = parentPart;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 尝试解析新格式\n\t\t\t\t\t\t\t\tconst typeParts = parentPart.split('_');\n\t\t\t\t\t\t\t\tif (typeParts.length >= 2 && (typeParts[0] === 'PRIVATE' || typeParts[0] === 'GROUP')) {\n\t\t\t\t\t\t\t\t\tparentType = typeParts[0];\n\t\t\t\t\t\t\t\t\tparentId = typeParts.slice(1).join('_'); // 处理ID中可能包含下划线的情况\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 使用保存的名称信息，如果没有则尝试查找\n\t\t\t\t\t\t\t\tlet parentName = chat.parentName || '会话';\n\t\t\t\t\t\t\t\tif (!chat.parentName) {\n\t\t\t\t\t\t\t\t\tconst parentChat = filteredChats.find(c => c.targetId === parentId && c.type === parentType) || \n\t\t\t\t\t\t\t\t\t                  context.state.chats.find(c => c.targetId === parentId && c.type === parentType);\n\t\t\t\t\t\t\t\t\tif (parentChat) {\n\t\t\t\t\t\t\t\t\t\tparentName = parentChat.showName || parentChat.name || '会话';\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 使用保存的智能体名称\n\t\t\t\t\t\t\t\tconst agentName = chat.agentName || `智能体`;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 创建智能体会话对象\n\t\t\t\t\t\t\t\tconst agentChat = {\n\t\t\t\t\t\t\t\t\ttype: 'AGENT',\n\t\t\t\t\t\t\t\t\ttargetId: key,\n\t\t\t\t\t\t\t\t\tagentId: agentId,\n\t\t\t\t\t\t\t\t\tparentId: parentId,\n\t\t\t\t\t\t\t\t\tparentType: parentType,\n\t\t\t\t\t\t\t\t\tshowName: `${parentName} > ${agentName}`, // 使用层级格式\n\t\t\t\t\t\t\t\theadImage: '/img/agent-default.png',\n\t\t\t\t\t\t\t\tmessages: chat.messages || [],\n\t\t\t\t\t\t\t\tlastContent: chat.messages?.length > 0 ? chat.messages[chat.messages.length - 1].content : '',\n\t\t\t\t\t\t\t\tlastSendTime: chat.startTime || Date.now(),\n\t\t\t\t\t\t\t\tunreadCount: 0,\n\t\t\t\t\t\t\t\tskipGeneralStorage: true\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tfilteredChats.push(agentChat);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (chat) {\n\t\t\t\t\t\t\t// 普通会话（必须有type属性）\n\t\t\t\t\t\t\tif (chat.type) {\n\t\t\t\t\t\t\t\tfilteredChats.push(chat);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tchatsData.chats = filteredChats;\n\t\t\t\t\tconsole.log(`[ChatStore] 从localForage chatKeys加载到${chatsData.chats.length}个聊天会话`);\n\t\t\t\t\tcontext.commit(\"initChats\", chatsData);\n\t\t\t\t\tcontext.commit(\"setLoadingChatState\", false); // 重置加载状态\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(\"加载消息失败:\", error);\n\t\t\t\tthrow error;\n\t\t\t} finally {\n\t\t\t\t// 确保加载状态被重置\n\t\t\t\tcontext.commit(\"setLoadingChatState\", false);\n\t\t\t}\n\t\t},\n\n\t\t// 新增：迁移到VSCode存储（如果需要）\n\t\tasync migrateToVSCodeIfNeeded(context) {\n\t\t\ttry {\n\t\t\t\tconst migrationStatus = vscodeStorageAdapter.getMigrationStatus();\n\t\t\t\t\n\t\t\t\tif (migrationStatus.isCompleted) {\n\t\t\t\t\tconsole.log('[ChatStore] 数据已迁移到VSCode存储');\n\t\t\t\t\treturn migrationStatus;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 安全获取用户ID - 此时用户信息应该已经加载完成\n\t\t\t\tconst userInfo = userStore.state.userInfo;\n\t\t\t\tif (!userInfo || !userInfo.id) {\n\t\t\t\t\tconsole.warn('[ChatStore] 用户信息仍未加载，无法执行迁移');\n\t\t\t\t\treturn { success: false, message: '用户信息未加载' };\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 获取localForage中的所有聊天数据\n\t\t\t\tconst userId = userInfo.id;\n\t\t\t\tconst key = \"chats-\" + userId;\n\t\t\t\tconst chatsData = await localForage.getItem(key);\n\t\t\t\t\n\t\t\t\tconsole.log(`[ChatStore] 检查迁移数据，key: ${key}, 数据:`, chatsData);\n\t\t\t\t\n\t\t\t\tif (!chatsData) {\n\t\t\t\t\tconsole.log('[ChatStore] 没有localForage数据需要迁移');\n\t\t\t\t\t// 即使没有数据也标记迁移完成，避免重复检查\n\t\t\t\t\tvscodeStorageAdapter.migrationStatus.isCompleted = true;\n\t\t\t\t\tlocalStorage.setItem('vscode_migration_status', JSON.stringify(vscodeStorageAdapter.migrationStatus));\n\t\t\t\t\treturn { success: true, message: '没有数据需要迁移' };\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 收集所有聊天数据\n\t\t\t\tlet allChats = [];\n\t\t\t\tif (chatsData.chats) {\n\t\t\t\t\tallChats = chatsData.chats;\n\t\t\t\t} else if (chatsData.chatKeys) {\n\t\t\t\t\tconsole.log(`[ChatStore] 发现 chatKeys 格式数据，开始加载 ${chatsData.chatKeys.length} 个聊天`);\n\t\t\t\t\tconst promises = chatsData.chatKeys.map(key => localForage.getItem(key));\n\t\t\t\t\tconst chats = await Promise.all(promises);\n\t\t\t\t\tallChats = chats.filter(chat => chat);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (allChats.length > 0) {\n\t\t\t\t\tconsole.log(`[ChatStore] 开始迁移${allChats.length}个聊天会话到VSCode存储...`);\n\t\t\t\t\tconst result = await vscodeStorageAdapter.migrateFromLocalForage({ chats: allChats });\n\t\t\t\t\tconsole.log('[ChatStore] VSCode存储迁移结果:', result);\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('[ChatStore] 没有有效的聊天数据需要迁移');\n\t\t\t\t\t// 标记迁移完成\n\t\t\t\t\tvscodeStorageAdapter.migrationStatus.isCompleted = true;\n\t\t\t\t\tlocalStorage.setItem('vscode_migration_status', JSON.stringify(vscodeStorageAdapter.migrationStatus));\n\t\t\t\t\treturn { success: true, message: '没有有效数据需要迁移' };\n\t\t\t\t}\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatStore] VSCode存储迁移失败:', error);\n\t\t\t\treturn { success: false, message: error.message };\n\t\t\t}\n\t\t},\n\n\t\t// 新增：搜索所有消息（跨平台）\n\t\tasync searchAllMessages(context, { query, options = {} }) {\n\t\t\ttry {\n\t\t\t\tif (vscodeStorageAdapter.isInVSCodeEnvironment()) {\n\t\t\t\t\t// 在VSCode环境中，使用FTS搜索\n\t\t\t\t\tconst results = await vscodeStorageAdapter.searchAllMessages(query, options);\n\t\t\t\t\tconsole.log(`[ChatStore] FTS搜索\"${query}\"找到${results.length}条结果`);\n\t\t\t\t\treturn results;\n\t\t\t\t} else {\n\t\t\t\t\t// 非VSCode环境，使用本地搜索\n\t\t\t\t\treturn context.dispatch('searchLocalMessages', { query, options });\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatStore] 搜索消息失败:', error);\n\t\t\t\treturn [];\n\t\t\t}\n\t\t},\n\n\t\t// 新增：本地消息搜索（备用方案）\n\t\tsearchLocalMessages(context, { query, options = {} }) {\n\t\t\tconst lowercaseQuery = query.toLowerCase();\n\t\t\tconst results = [];\n\t\t\t\n\t\t\t// 搜索当前已加载的聊天数据\n\t\t\tcontext.state.chats.forEach(chat => {\n\t\t\t\tif (chat.messages) {\n\t\t\t\t\tchat.messages.forEach(message => {\n\t\t\t\t\t\tif (message.content && message.content.toLowerCase().includes(lowercaseQuery)) {\n\t\t\t\t\t\t\tresults.push({\n\t\t\t\t\t\t\t\tmessageId: message.id || message.tmpId,\n\t\t\t\t\t\t\t\tsessionId: chat.targetId,\n\t\t\t\t\t\t\t\tsessionType: 'vue-im',\n\t\t\t\t\t\t\t\tsessionTitle: chat.showName || chat.targetId,\n\t\t\t\t\t\t\t\tcontent: message.content,\n\t\t\t\t\t\t\t\tsender: message.selfSend ? '我' : (message.sendNickName || '对方'),\n\t\t\t\t\t\t\t\ttimestamp: message.sendTime,\n\t\t\t\t\t\t\t\thighlightedContent: message.content // 简单高亮，可以后续优化\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\treturn results.slice(0, options.limit || 50);\n\t\t},\n\n\t\t// 新增：获取FTS统计信息\n\t\tasync getFTSStats(context) {\n\t\t\ttry {\n\t\t\t\tif (vscodeStorageAdapter.isInVSCodeEnvironment()) {\n\t\t\t\t\treturn await vscodeStorageAdapter.getFTSIndexStats();\n\t\t\t\t} else {\n\t\t\t\t\t// 计算本地统计\n\t\t\t\t\tlet messageCount = 0;\n\t\t\t\t\tcontext.state.chats.forEach(chat => {\n\t\t\t\t\t\tif (chat.messages) {\n\t\t\t\t\t\t\tmessageCount += chat.messages.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttotalMessages: messageCount,\n\t\t\t\t\t\tindexSize: messageCount * 100, // 估算\n\t\t\t\t\t\tlastUpdated: Date.now()\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatStore] 获取FTS统计失败:', error);\n\t\t\t\treturn { totalMessages: 0, indexSize: 0, lastUpdated: 0 };\n\t\t\t}\n\t\t},\n\n\t\t// 🔧 修正：发送消息到目标终端（目标终端模式）- 支持文件消息\n\t\tasync sendToTargetTerminal(context, { content, targetTerminal, type = 0, fileInfo = null }) {\n\t\t\tconst currentTerminal = this.getters.getCurrentTerminal();\n\t\t\tconst currentUserId = userStore.state.userInfo?.id;\n\n\t\t\tif (!currentUserId) {\n\t\t\t\tthrow new Error('用户未登录');\n\t\t\t}\n\n\t\t\t// 🔧 验证不能发送给当前终端\n\t\t\tif (targetTerminal === currentTerminal) {\n\t\t\t\tthrow new Error('不能发送消息给当前终端');\n\t\t\t}\n\n\t\t\t// 🔧 处理文件消息内容\n\t\t\tlet messageContent = content;\n\t\t\tif (type === 2 && fileInfo) { // MESSAGE_TYPE.FILE = 2\n\t\t\t\tmessageContent = JSON.stringify({\n\t\t\t\t\tname: fileInfo.name,\n\t\t\t\t\tsize: fileInfo.size,\n\t\t\t\t\turl: fileInfo.url\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst messageData = {\n\t\t\t\trecvId: currentUserId,\n\t\t\t\tcontent: messageContent,\n\t\t\t\ttype: type, // 支持不同消息类型：0-文本，1-图片，2-文件\n\t\t\t\ttargetTerminal: targetTerminal,     // 🔧 修正：目标终端\n\t\t\t\tsenderTerminal: currentTerminal     // 🔧 修正：发送端\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\t// 检查是否有accessToken\n\t\t\t\tconst accessToken = sessionStorage.getItem(\"accessToken\");\n\t\t\t\tif (!accessToken) {\n\t\t\t\t\tthrow new Error('用户未登录，请先登录');\n\t\t\t\t}\n\n\t\t\t\t// 调用后端API发送消息\n\t\t\t\tconst response = await http({\n\t\t\t\t\turl: '/message/private/send-to-terminal',\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: messageData,\n\t\t\t\t\theaders: {\n\t\t\t\t\t\taccessToken: encodeURIComponent(accessToken)\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t// 🔧 修正：发送成功后将消息添加到本地的\"目标终端会话\"\n\t\t\t\tif (response && response.id) {\n\t\t\t\t\t// 创建/更新目标终端的会话（在本端显示为\"目标终端\"）\n\t\t\t\t\tconst chatInfo = {\n\t\t\t\t\t\ttype: 'PRIVATE',\n\t\t\t\t\t\ttargetId: `${currentUserId}_${targetTerminal}`, // 目标终端会话ID\n\t\t\t\t\t\tsenderTerminal: currentTerminal,  // 🔧 修正：记录发送端\n\t\t\t\t\t\ttargetTerminal: targetTerminal,   // 🔧 修正：记录目标端\n\t\t\t\t\t\tshowName: `${this.getters.getTerminalName(targetTerminal)}端`,\n\t\t\t\t\t\theadImage: this.getters.getTerminalIcon(targetTerminal),\n\t\t\t\t\t\tisTerminalChat: true  // 🔧 修正：使用新的标识\n\t\t\t\t\t};\n\n\t\t\t\t\tcontext.commit('openChat', chatInfo);\n\n\t\t\t\t\t\t\t\t\t// 🔧 将发送的消息添加到本地聊天记录\n\t\t\t\tconst userInfo = userStore.state.userInfo;\n\t\t\t\tconst localMessage = {\n\t\t\t\t\tid: response.id,\n\t\t\t\t\tcontent: messageContent, // 使用处理后的消息内容（文件消息是JSON字符串）\n\t\t\t\t\ttype: type, // 使用传入的消息类型\n\t\t\t\t\tsendId: currentUserId,\n\t\t\t\t\trecvId: currentUserId,\n\t\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\t\tsendNickName: userInfo?.nickName || '我',\n\t\t\t\t\tselfSend: true, // 🔧 发送的消息，在发送端显示为自己发送的\n\t\t\t\t\tstatus: 1, // 已发送\n\t\t\t\t\tsenderTerminal: currentTerminal,\n\t\t\t\t\ttargetTerminal: targetTerminal\n\t\t\t\t};\n\n\t\t\t\t\t// 插入消息到会话\n\t\t\t\t\tcontext.commit('insertMessage', [localMessage, chatInfo]);\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 将会话移到顶部（有新消息）\n\t\t\t\t\tconst chatIdx = context.getters.findChatIdx(chatInfo);\n\t\t\t\t\tif (chatIdx > 0) {\n\t\t\t\t\t\tcontext.commit('moveTop', chatIdx);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconsole.log(`[ChatStore] 🔧 终端消息发送成功，发送到 ${this.getters.getTerminalName(targetTerminal)}端`);\n\t\t\t\t}\n\n\t\t\t\treturn response;\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('发送终端间消息失败:', error);\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\n\t\t// 🔧 修正：加载来自指定发送端的历史消息（目标终端模式）\n\t\tasync loadTerminalChatHistory(context, { senderTerminal, page = 1, size = 20 }) {\n\t\t\ttry {\n\t\t\t\t// 检查是否有accessToken\n\t\t\t\tconst accessToken = sessionStorage.getItem(\"accessToken\");\n\t\t\t\tif (!accessToken) {\n\t\t\t\t\tthrow new Error('用户未登录，请先登录');\n\t\t\t\t}\n\n\t\t\t\tconst response = await http({\n\t\t\t\t\turl: '/message/private/terminal-chat-history',\n\t\t\t\t\tmethod: 'get',\n\t\t\t\t\tparams: { senderTerminal, page, size },\n\t\t\t\t\theaders: {\n\t\t\t\t\t\taccessToken: encodeURIComponent(accessToken)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn response || [];\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('加载终端聊天历史失败:', error);\n\t\t\t\treturn [];\n\t\t\t}\n\t\t},\n\n\t\t// 🔧 修正：获取来自所有其他终端的最新消息\n\t\tasync loadTerminalChatLatestMessages(context) {\n\t\t\ttry {\n\t\t\t\t// 检查是否有accessToken\n\t\t\t\tconst accessToken = sessionStorage.getItem(\"accessToken\");\n\t\t\t\tif (!accessToken) {\n\t\t\t\t\tthrow new Error('用户未登录，请先登录');\n\t\t\t\t}\n\n\t\t\t\tconst response = await http({\n\t\t\t\t\turl: '/message/private/terminal-chat-latest',\n\t\t\t\t\tmethod: 'get',\n\t\t\t\t\theaders: {\n\t\t\t\t\t\taccessToken: encodeURIComponent(accessToken)\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn response || {};\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('获取终端聊天最新消息失败:', error);\n\t\t\t\treturn {};\n\t\t\t}\n\t\t},\n\n\t\t// 🔧 修正：初始化其他终端会话（目标终端模式）\n\t\tasync initializeTerminalChats(context) {\n\t\t\tconsole.log(`🔧 [initializeTerminalChats] 开始初始化其他终端会话...`);\n\t\t\t\n\t\t\tconst latestMessages = await context.dispatch('loadTerminalChatLatestMessages');\n\t\t\tconst currentUserId = userStore.state.userInfo?.id;\n\t\t\tconst currentTerminal = this.getters.getCurrentTerminal();\n\n\t\t\tconsole.log(`🔧 [initializeTerminalChats] 当前用户ID: ${currentUserId}, 当前终端: ${currentTerminal}`);\n\t\t\tconsole.log(`🔧 [initializeTerminalChats] 来自其他终端的最新消息:`, latestMessages);\n\n\t\t\tif (!currentUserId) {\n\t\t\t\tconsole.warn(`⚠️ [initializeTerminalChats] 用户ID为空，跳过初始化`);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// 🔧 为每个有消息的其他终端创建会话（显示为\"某端会话\"）\n\t\t\tObject.entries(latestMessages).forEach(([senderTerminal, message]) => {\n\t\t\t\tconst senderTerminalCode = parseInt(senderTerminal);\n\t\t\t\t\n\t\t\t\t// 跳过当前终端（不显示自己的会话）\n\t\t\t\tif (senderTerminalCode === currentTerminal) {\n\t\t\t\t\tconsole.log(`🔧 [initializeTerminalChats] 跳过当前终端: ${senderTerminalCode}`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst chatInfo = {\n\t\t\t\t\ttype: 'PRIVATE',\n\t\t\t\t\ttargetId: `${currentUserId}_${senderTerminalCode}`,  // 🔧 修正：使用发送端标识\n\t\t\t\t\tsenderTerminal: senderTerminalCode,  // 🔧 修正：记录发送端\n\t\t\t\t\tshowName: `${context.getters.getTerminalName(senderTerminalCode)}端`,\n\t\t\t\t\theadImage: context.getters.getTerminalIcon(senderTerminalCode),\n\t\t\t\t\tisTerminalChat: true,  // 🔧 修正：使用新的标识\n\t\t\t\t\tlastContent: message.content,\n\t\t\t\t\tlastSendTime: new Date(message.sendTime).getTime()\n\t\t\t\t};\n\n\t\t\t\tconsole.log(`🔧 [initializeTerminalChats] 为${context.getters.getTerminalName(senderTerminalCode)}端创建会话:`, chatInfo);\n\t\t\t\tcontext.commit('openChat', chatInfo);\n\t\t\t});\n\t\t\t\n\t\t\tconsole.log(`✅ [initializeTerminalChats] 其他终端会话初始化完成`);\n\t\t}\n\t},\n\tgetters: {\n\t\tisLoading: (state) => () => {\n\t\t\treturn state.loadingPrivateMsg || state.loadingGroupMsg\n\t\t},\n\t\tfindChats: (state, getters) => () => {\n\t\t\t// 修复：只有在真正加载中且缓存有数据时才使用缓存\n\t\t\tif (cacheChats && cacheChats.length > 0 && getters.isLoading()) {\n\t\t\t\tconsole.log(\"===缓存cacheChats===\",cacheChats);\n\t\t\t\treturn cacheChats;\n\t\t\t}\n\t\t\tconsole.log(\"===state.chats===\",state.chats);\n\t\t\treturn state.chats;\n\t\t},\n\t\t// 🔧 修正：会话比较方法（目标终端模式）\n\t\tisSameChat: (state, getters) => (chat1, chat2) => {\n\t\t\t// 基本类型比较\n\t\t\tif (chat1.type !== chat2.type) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// 所有相同类型的会话都通过targetId比较\n\t\t\t// 终端会话的targetId格式为: userId_terminalType\n\t\t\t// 普通会话的targetId就是对方的userId或groupId\n\t\t\treturn chat1.targetId === chat2.targetId;\n\t\t},\n\t\t// 分离AI会话和人类IM会话\n\t\tseparatedChats: (state, getters) => {\n\t\t\tconst allChats = getters.findChats();\n\t\t\treturn {\n\t\t\t\taiChats: allChats.filter(chat => chat.type === 'AI'),\n\t\t\t\thumanChats: allChats.filter(chat => chat.type !== 'AI')\n\t\t\t\t\t.sort((a, b) => b.lastSendTime - a.lastSendTime) // 按最后消息时间倒序\n\t\t\t};\n\t\t},\n\t\tfindChatIdx: (state, getters) => (chat) => {\n\t\t\tlet chats = getters.findChats();\n\t\t\tfor (let idx in chats) {\n\t\t\t\t// 使用新的会话比较逻辑\n\t\t\t\tif (getters.isSameChat(chats[idx], chat)) {\n\t\t\t\t\treturn idx;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tfindChat: (state, getters) => (chat) => {\n\t\t\tlet chats = getters.findChats();\n\t\t\tlet idx = getters.findChatIdx(chat);\n\t\t\treturn chats[idx];\n\t\t},\n\t\tfindChatByFriend: (state, getters) => (fid) => {\n\t\t\tlet chats = getters.findChats();\n\t\t\treturn chats.find(chat => chat.type == 'PRIVATE' &&\n\t\t\t\t!chat.isTerminalInbox && chat.targetId == fid)\n\t\t},\n\t\tfindChatByGroup: (state, getters) => (gid) => {\n\t\t\tlet chats = getters.findChats();\n\t\t\treturn chats.find(chat => chat.type == 'GROUP' &&\n\t\t\t\tchat.targetId == gid)\n\t\t},\n\t\t\n\t\t// 查找智能体会话\n\t\tfindAgentChat: (state) => (parentType, parentId, agentId) => {\n\t\t\treturn state.chats.find(c => \n\t\t\t\tc.type === 'AGENT' && \n\t\t\t\tc.parentType === parentType &&\n\t\t\t\tc.parentId === parentId &&\n\t\t\t\tc.agentId === agentId\n\t\t\t);\n\t\t},\n\t\t\n\t\t// 获取某个会话的所有智能体会话\n\t\tgetChatAgents: (state) => (chat) => {\n\t\t\treturn state.chats.filter(c => \n\t\t\t\tc.type === 'AGENT' && \n\t\t\t\tc.parentType === chat.type &&\n\t\t\t\tc.parentId === chat.targetId\n\t\t\t);\n\t\t},\n\t\tfindMessage: (state) => (chat, msgInfo) => {\n\t\t\tif (!chat) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tfor (let idx in chat.messages) {\n\n\t\t\t\t// 通过id判断\n\t\t\t\tif (msgInfo.id && chat.messages[idx].id == msgInfo.id) {\n\t\t\t\t\treturn chat.messages[idx];\n\t\t\t\t}\n\t\t\t\t// 正在发送中的消息可能没有id,只有tmpId\n\t\t\t\tif (msgInfo.tmpId && chat.messages[idx].tmpId &&\n\t\t\t\t\tchat.messages[idx].tmpId == msgInfo.tmpId) {\n\t\t\t\t\treturn chat.messages[idx];\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t// 终端间通信工具方法\n\t\tgetTerminalName: (state) => (terminal) => {\n\t\t\tconst terminalNames = {\n\t\t\t\t0: '傻蛋网页',\n\t\t\t\t1: '傻蛋精灵App',\n\t\t\t\t2: '我的电脑',\n\t\t\t\t3: '我的云电脑',\n\t\t\t\t4: '傻蛋浏览器',\n\t\t\t\t5: 'MCP'\n\t\t\t};\n\t\t\treturn terminalNames[terminal] || '未知';\n\t\t},\n\n\t\tgetTerminalIcon: (state) => (terminal) => {\n\t\t\tconst terminalIcons = {\n\t\t\t\t0: '🌐',  // 傻蛋网页端\n\t\t\t\t1: '📱',  // 傻蛋精灵App\n\t\t\t\t2: '💻',  // 我的电脑\n\t\t\t\t3: '🖥️',   // 我的云电脑\n\t\t\t\t4: '🔌',  // 傻蛋浏览器\n\t\t\t\t5: '🤖'   // MCP端\n\t\t\t};\n\t\t\treturn terminalIcons[terminal] || '❓';\n\t\t},\n\n\t\tgetCurrentTerminal: (state) => () => {\n\t\t\t// 根据环境判断当前终端类型\n\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\tif (window.isVSCodeEnvironment) return 2; // VSCode\n\t\t\t\treturn 0; // Web\n\t\t\t}\n\t\t\treturn 1; // App或其他\n\t\t}\n\t}\n}\n","import http from '../api/httpRequest.js'\nimport { TERMINAL_TYPE } from \"../api/enums.js\"\n\nexport default {\n\n\tstate: {\n\t\tfriends: [],\n\t\ttimer: null,\n\t\tactiveFriend: {}\n\t},\n\tmutations: {\n\t\tsetFriends(state, friends) {\n\t\t\tfriends.forEach((f) => {\n\t\t\t\tf.online = false;\n\t\t\t\tf.onlineWeb = false;\n\t\t\t\tf.onlineApp = false;\n\t\t\t})\n\t\t\tstate.friends = friends;\n\t\t\t\n\t\t\t// 同步到 Roo-Code 扩展\n\t\t\ttry {\n\t\t\t\tif (window.vscodeServices?.get('ICommandService')) {\n\t\t\t\t\tconst groups = this.state.groupStore?.groups || [];\n\t\t\t\t\tconst userInfo = this.state.userStore?.userInfo;\n\t\t\t\t\tconst userId = userInfo?.id ? String(userInfo.id) : null;\n\t\t\t\t\t\n\t\t\t\t\tif (userId) {\n\t\t\t\t\t\twindow.vscodeServices.get('ICommandService').executeCommand('roo-cline.updateImContacts', {\n\t\t\t\t\t\t\tuserId: userId,\n\t\t\t\t\t\t\tfriends: state.friends,\n\t\t\t\t\t\t\tgroups: groups\n\t\t\t\t\t\t}).catch(err => console.warn('Failed to sync friends to Roo-Code:', err));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.warn('VSCode ICommandService not available for syncing friends:', error);\n\t\t\t}\n\t\t},\n\t\tsetActiveFriend(state, friend) {\n\t\t\tstate.activeFriend = friend;\n\t\t},\n\t\tupdateFriend(state, friend) {\n\t\t\tstate.friends.forEach((f, index) => {\n\t\t\t\tif (f.id == friend.id) {\n\t\t\t\t\t// 拷贝属性\n\t\t\t\t\tlet online = state.friends[index].online;\n\t\t\t\t\tObject.assign(state.friends[index], friend);\n\t\t\t\t\tstate.friends[index].online = online;\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tremoveFriend(state, id) {\n\t\t\tstate.friends.filter(f => f.id == id).forEach(f => f.deleted = true);\n\t\t\t\n\t\t\t// 同步到 Roo-Code 扩展\n\t\t\ttry {\n\t\t\t\tif (window.vscodeServices?.get('ICommandService')) {\n\t\t\t\t\tconst groups = this.state.groupStore?.groups || [];\n\t\t\t\t\tconst userInfo = this.state.userStore?.userInfo;\n\t\t\t\t\tconst userId = userInfo?.id ? String(userInfo.id) : null;\n\t\t\t\t\t\n\t\t\t\t\tif (userId) {\n\t\t\t\t\t\twindow.vscodeServices.get('ICommandService').executeCommand('roo-cline.updateImContacts', {\n\t\t\t\t\t\t\tuserId: userId,\n\t\t\t\t\t\t\tfriends: state.friends,\n\t\t\t\t\t\t\tgroups: groups\n\t\t\t\t\t\t}).catch(err => console.warn('Failed to sync friends to Roo-Code:', err));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.warn('VSCode ICommandService not available for syncing friends:', error);\n\t\t\t}\n\t\t},\n\t\taddFriend(state, friend) {\n\t\t\tif (state.friends.some((f) => f.id == friend.id)) {\n\t\t\t\tthis.commit(\"updateFriend\", friend)\n\t\t\t} else {\n\t\t\t\tstate.friends.unshift(friend);\n\t\t\t}\n\t\t\t\n\t\t\t// 同步到 Roo-Code 扩展\n\t\t\ttry {\n\t\t\t\tif (window.vscodeServices?.get('ICommandService')) {\n\t\t\t\t\tconst groups = this.state.groupStore?.groups || [];\n\t\t\t\t\tconst userInfo = this.state.userStore?.userInfo;\n\t\t\t\t\tconst userId = userInfo?.id ? String(userInfo.id) : null;\n\t\t\t\t\t\n\t\t\t\t\tif (userId) {\n\t\t\t\t\t\twindow.vscodeServices.get('ICommandService').executeCommand('roo-cline.updateImContacts', {\n\t\t\t\t\t\t\tuserId: userId,\n\t\t\t\t\t\t\tfriends: state.friends,\n\t\t\t\t\t\t\tgroups: groups\n\t\t\t\t\t\t}).catch(err => console.warn('Failed to sync friends to Roo-Code:', err));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.warn('VSCode ICommandService not available for syncing friends:', error);\n\t\t\t}\n\t\t},\n\t\trefreshOnlineStatus(state) {\n\t\t\tif (sessionStorage.getItem(\"accessToken\") == null) {\n\t\t\t\treturn ;\n\t\t\t}\n\t\t\tlet userIds = state.friends.filter((f) => !f.deleted).map((f) => f.id);\n\t\t\tif (userIds.length == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\thttp({\n\t\t\t\turl: '/user/terminal/online',\n\t\t\t\tmethod: 'get',\n\t\t\t\tparams: { userIds: userIds.join(',') }\n\t\t\t}).then((onlineTerminals) => {\n\t\t\t\tthis.commit(\"setOnlineStatus\", onlineTerminals);\n\t\t\t})\n\t\t\t// 30s后重新拉取\n\t\t\tstate.timer && clearTimeout(state.timer);\n\t\t\tstate.timer = setTimeout(() => {\n\t\t\t\tthis.commit(\"refreshOnlineStatus\");\n\t\t\t}, 30000)\n\t\t},\n\t\tsetOnlineStatus(state, onlineTerminals) {\n\t\t\tstate.friends.forEach((f) => {\n\t\t\t\tlet userTerminal = onlineTerminals.find((o) => f.id == o.userId);\n\t\t\t\tif (userTerminal) {\n\t\t\t\t\tf.online = true;\n\t\t\t\t\tf.onlineWeb = userTerminal.terminals.indexOf(TERMINAL_TYPE.WEB) >= 0\n\t\t\t\t\tf.onlineApp = userTerminal.terminals.indexOf(TERMINAL_TYPE.APP) >= 0\n\t\t\t\t} else {\n\t\t\t\t\tf.online = false;\n\t\t\t\t\tf.onlineWeb = false;\n\t\t\t\t\tf.onlineApp = false;\n\t\t\t\t}\n\t\t\t});\n\t\t\t// 在线的在前面\n\t\t\tstate.friends.sort((f1, f2) => {\n\t\t\t\tif (f1.online && !f2.online) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (f2.online && !f1.online) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\t\t},\n\t\tclear(state) {\n\t\t\tstate.timer && clearTimeout(state.timer);\n\t\t\tstate.friends = [];\n\t\t\tstate.timer = null;\n\t\t}\n\t},\n\tactions: {\n\t\tloadFriend(context) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\thttp({\n\t\t\t\t\turl: '/friend/list',\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t}).then((friends) => {\n\t\t\t\t\tcontext.commit(\"setFriends\", friends);\n\t\t\t\t\tcontext.commit(\"refreshOnlineStatus\");\n\t\t\t\t\tresolve()\n\t\t\t\t}).catch(() => {\n\t\t\t\t\treject();\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t},\n\tgetters: {\n\t\tisFriend: (state) => (userId) => {\n\t\t\treturn state.friends.filter((f) => !f.deleted).some((f) => f.id == userId);\n\t\t},\n\t\tfindFriend: (state) => (userId) => {\n\t\t\treturn state.friends.find((f) => f.id == userId);\n\t\t}\n\t}\n}\n","import http from '../api/httpRequest.js'\n\nexport default {\n\tstate: {\n\t\tgroups: [],\n\t\tactiveGroup: {}\n\t},\n\tmutations: {\n\t\tsetGroups(state, groups) {\n\t\t\tstate.groups = groups;\n\t\t\t\n\t\t\t// 同步到 Roo-Code 扩展\n\t\t\ttry {\n\t\t\t\tif (window.vscodeServices?.get('ICommandService')) {\n\t\t\t\t\tconst friends = this.state.friendStore?.friends || [];\n\t\t\t\t\tconst userInfo = this.state.userStore?.userInfo;\n\t\t\t\t\tconst userId = userInfo?.id ? String(userInfo.id) : null;\n\t\t\t\t\t\n\t\t\t\t\tif (userId) {\n\t\t\t\t\t\twindow.vscodeServices.get('ICommandService').executeCommand('roo-cline.updateImContacts', {\n\t\t\t\t\t\t\tuserId: userId,\n\t\t\t\t\t\t\tfriends: friends,\n\t\t\t\t\t\t\tgroups: state.groups\n\t\t\t\t\t\t}).catch(err => console.warn('Failed to sync groups to Roo-Code:', err));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.warn('VSCode ICommandService not available for syncing groups:', error);\n\t\t\t}\n\t\t},\n\t\taddGroup(state, group) {\n\t\t\tif (state.groups.some((g) => g.id == group.id)) {\n\t\t\t\tthis.commit(\"updateGroup\", group)\n\t\t\t} else {\n\t\t\t\tstate.groups.unshift(group);\n\t\t\t}\n\t\t\t\n\t\t\t// 同步到 Roo-Code 扩展\n\t\t\ttry {\n\t\t\t\tif (window.vscodeServices?.get('ICommandService')) {\n\t\t\t\t\tconst friends = this.state.friendStore?.friends || [];\n\t\t\t\t\tconst userInfo = this.state.userStore?.userInfo;\n\t\t\t\t\tconst userId = userInfo?.id ? String(userInfo.id) : null;\n\t\t\t\t\t\n\t\t\t\t\tif (userId) {\n\t\t\t\t\t\twindow.vscodeServices.get('ICommandService').executeCommand('roo-cline.updateImContacts', {\n\t\t\t\t\t\t\tuserId: userId,\n\t\t\t\t\t\t\tfriends: friends,\n\t\t\t\t\t\t\tgroups: state.groups\n\t\t\t\t\t\t}).catch(err => console.warn('Failed to sync groups to Roo-Code:', err));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.warn('VSCode ICommandService not available for syncing groups:', error);\n\t\t\t}\n\t\t},\n\t\tremoveGroup(state, id) {\n\t\t\tstate.groups.filter(g => g.id == id).forEach(g => g.quit = true);\n\t\t\t\n\t\t\t// 同步到 Roo-Code 扩展\n\t\t\ttry {\n\t\t\t\tif (window.vscodeServices?.get('ICommandService')) {\n\t\t\t\t\tconst friends = this.state.friendStore?.friends || [];\n\t\t\t\t\tconst userInfo = this.state.userStore?.userInfo;\n\t\t\t\t\tconst userId = userInfo?.id ? String(userInfo.id) : null;\n\t\t\t\t\t\n\t\t\t\t\tif (userId) {\n\t\t\t\t\t\twindow.vscodeServices.get('ICommandService').executeCommand('roo-cline.updateImContacts', {\n\t\t\t\t\t\t\tuserId: userId,\n\t\t\t\t\t\t\tfriends: friends,\n\t\t\t\t\t\t\tgroups: state.groups\n\t\t\t\t\t\t}).catch(err => console.warn('Failed to sync groups to Roo-Code:', err));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.warn('VSCode ICommandService not available for syncing groups:', error);\n\t\t\t}\n\t\t},\n\t\tupdateGroup(state, group) {\n\t\t\tstate.groups.forEach((g, idx) => {\n\t\t\t\tif (g.id == group.id) {\n\t\t\t\t\t// 拷贝属性\n\t\t\t\t\tObject.assign(state.groups[idx], group);\n\t\t\t\t}\n\t\t\t})\n\t\t\t\n\t\t\t// 同步到 Roo-Code 扩展\n\t\t\ttry {\n\t\t\t\tif (window.vscodeServices?.get('ICommandService')) {\n\t\t\t\t\tconst friends = this.state.friendStore?.friends || [];\n\t\t\t\t\tconst userInfo = this.state.userStore?.userInfo;\n\t\t\t\t\tconst userId = userInfo?.id ? String(userInfo.id) : null;\n\t\t\t\t\t\n\t\t\t\t\tif (userId) {\n\t\t\t\t\t\twindow.vscodeServices.get('ICommandService').executeCommand('roo-cline.updateImContacts', {\n\t\t\t\t\t\t\tuserId: userId,\n\t\t\t\t\t\t\tfriends: friends,\n\t\t\t\t\t\t\tgroups: state.groups\n\t\t\t\t\t\t}).catch(err => console.warn('Failed to sync groups to Roo-Code:', err));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.warn('VSCode ICommandService not available for syncing groups:', error);\n\t\t\t}\n\t\t},\n\t\tclear(state) {\n\t\t\tstate.groups = [];\n\t\t},\n\t\tsetActiveGroup(state, group) {\n\t\t\tstate.activeGroup = group;\n\t\t}\n\t},\n\tactions: {\n\t\tloadGroup(context) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\thttp({\n\t\t\t\t\turl: '/group/list',\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t}).then((groups) => {\n\t\t\t\t\tcontext.commit(\"setGroups\", groups);\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((res) => {\n\t\t\t\t\treject(res);\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t},\n\tgetters: {\n\t\tfindGroup: (state) => (id) => {\n\t\t\treturn state.groups.find((g) => g.id == id);\n\t\t}\n\t}\n}","import http from '../api/httpRequest.js'\n\nexport default {\n\tstate: {\n\t\twebrtc: {}\n\t},\n\tmutations: {\n\t\tsetConfig(state, config) {\n\t\t\tstate.webrtc = config.webrtc;\n\t\t},\n\t\tclear(state) {\n\t\t\tstate.webrtc = {};\n\t\t}\n\t},\n\tactions: {\n\t\tloadConfig(context) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\thttp({\n\t\t\t\t\turl: '/system/config',\n\t\t\t\t\tmethod: 'GET'\n\t\t\t\t}).then((config) => {\n\t\t\t\t\tconsole.log(\"系统配置\", config)\n\t\t\t\t\tcontext.commit(\"setConfig\", config);\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((res) => {\n\t\t\t\t\treject(res);\n\t\t\t\t});\n\t\t\t})\n\t\t}\n\t}\n\n}","export default {\n\tstate: {\n\t\tuserInfo: { // 用户信息窗口\n\t\t\tshow: false,\n\t\t\tuser: {},\n\t\t\tpos: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0\n\t\t\t}\n\t\t},\n\t\tfullImage: { // 全屏大图\n\t\t\tshow: false,\n\t\t\turl: \"\"\n\t\t},\n\t\tviewCode: 1\n\t},\n\tmutations: {\n\t\tshowUserInfoBox(state, user) {\n\t\t\tstate.userInfo.show = true;\n\t\t\tstate.userInfo.user = user;\n\n\t\t},\n\t\tsetUserInfoBoxPos(state, pos) {\n\t\t\tlet w = document.documentElement.clientWidth;\n\t\t\tlet h = document.documentElement.clientHeight;\n\t\t\tstate.userInfo.pos.x = Math.min(pos.x, w - 350);\n\t\t\tstate.userInfo.pos.y = Math.min(pos.y, h - 200);\n\t\t},\n\t\tcloseUserInfoBox(state) {\n\t\t\tstate.userInfo.show = false;\n\t\t},\n\t\tshowFullImageBox(state, url) {\n\t\t\tstate.fullImage.show = true;\n\t\t\tstate.fullImage.url = url;\n\t\t},\n\t\tcloseFullImageBox(state) {\n\t\t\tstate.fullImage.show = false;\n\t\t},\n\t\tchangeViewCode(state, code) {\n\t\t\tstate.viewCode = code;\n\t\t},\n\t\tclear(state) {\n\t\t\t// 重置UI状态到初始值\n\t\t\tstate.userInfo = {\n\t\t\t\tshow: false,\n\t\t\t\tuser: {},\n\t\t\t\tpos: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t}\n\t\t\t};\n\t\t\tstate.fullImage = {\n\t\t\t\tshow: false,\n\t\t\t\turl: \"\"\n\t\t\t};\n\t\t\tstate.viewCode = 1;\n\t\t}\n\t}\n}","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport chatStore from './chatStore.js';\nimport friendStore from './friendStore.js';\nimport userStore from './userStore.js';\nimport groupStore from './groupStore.js';\nimport configStore from './configStore.js';\nimport uiStore from './uiStore.js';\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n\tmodules: { chatStore, friendStore, userStore, groupStore, configStore, uiStore },\n\tstate: {},\n\tmutations: {\n\t\t// 全局clear mutation，清理所有模块的状态\n\t\tclear(state) {\n\t\t\tconsole.log('[Store] Executing global clear mutation');\n\t\t\t\n\t\t\t// 清理各个模块的状态\n\t\t\tif (state.userStore) {\n\t\t\t\tthis.commit('userStore/clear');\n\t\t\t}\n\t\t\tif (state.chatStore) {\n\t\t\t\tthis.commit('chatStore/clear');\n\t\t\t}\n\t\t\tif (state.friendStore) {\n\t\t\t\tthis.commit('friendStore/clear');\n\t\t\t}\n\t\t\tif (state.groupStore) {\n\t\t\t\tthis.commit('groupStore/clear');\n\t\t\t}\n\t\t\tif (state.configStore) {\n\t\t\t\tthis.commit('configStore/clear');\n\t\t\t}\n\t\t\tif (state.uiStore) {\n\t\t\t\tthis.commit('uiStore/clear');\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('[Store] All modules cleared');\n\t\t}\n\t},\n\tgetters: {\n\t\t// 🔥 全局登录状态getter\n\t\tisLoggedIn: (state) => {\n\t\t\treturn state.userStore.isLoggedIn;\n\t\t}\n\t},\n\tactions: {\n\t\tload(context) {\n\t\t\treturn this.dispatch(\"loadUser\").then(() => {\n\t\t\t\tconst promises = [];\n\t\t\t\tpromises.push(this.dispatch(\"loadFriend\"));\n\t\t\t\tpromises.push(this.dispatch(\"loadGroup\"));\n\t\t\t\tpromises.push(this.dispatch(\"loadChat\"));\n\t\t\t\tpromises.push(this.dispatch(\"loadConfig\"));\n\t\t\t\treturn Promise.all(promises).then(() => {\n\t\t\t\t\t// 数据加载完成后，同步到 RooCode\n\t\t\t\t\tthis.dispatch('syncToRooCode');\n\t\t\t\t});\n\t\t\t})\n\t\t},\n\t\tunload(context) {\n\t\t\t// 修复：指定清空特定模块，避免误清空聊天数据\n\t\t\t// context.commit(\"clear\"); // 这会清空所有模块包括聊天数据\n\t\t\tcontext.commit(\"clear\");\n\t\t\tcontext.commit(\"configStore/clear\");\n\t\t\t// 注意：不清空 chatStore，避免意外丢失聊天记录\n\t\t},\n\t\t\n\t\t// 🔥 新增：VSCode用户状态同步\n\t\tsyncUserState({ commit }, vscodeUserState) {\n\t\t\tconsole.log('[Store] Syncing VSCode user state:', vscodeUserState);\n\t\t\t\n\t\t\tif (vscodeUserState && (vscodeUserState.userId || vscodeUserState.id)) {\n\t\t\t\t// 标准化用户信息\n\t\t\t\tconst normalizedUser = {\n\t\t\t\t\t...vscodeUserState,\n\t\t\t\t\tuserId: vscodeUserState.userId || vscodeUserState.id\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 同步用户信息到userStore模块\n\t\t\t\tcommit('setUserInfo', normalizedUser);\n\t\t\t\t// 设置登录状态\n\t\t\t\tcommit('setIsLoggedIn', true);\n\t\t\t\t\n\t\t\t\t// 同步vscode侧的accessToken到sessionStorage，保持vue原有逻辑实现\n\t\t\t\tsessionStorage.setItem('accessToken', normalizedUser.accessToken);\n\t\t\t\t// 保存到localStorage（保持现有逻辑）\n\t\t\t\tlocalStorage.setItem('userInfo', JSON.stringify(normalizedUser));\n\t\t\t\t\n\t\t\t\tconsole.log('[Store] User state synced successfully, userInfo:', normalizedUser);\n\t\t\t} \n\t\t},\n\t\t\n\t\t// 🔥 新增：登录action\n\t\tlogin({ commit }, userInfo) {\n\t\t\tconsole.log('[Store] User login:', userInfo);\n\t\t\t\n\t\t\tif (userInfo) {\n\t\t\t\tcommit('setUserInfo', userInfo);\n\t\t\t\tlocalStorage.setItem('userInfo', JSON.stringify(userInfo));\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 🔥 新增：登出action  \n\t\tlogout({ commit }) {\n\t\t\tconsole.log('[Store] User logout');\n\t\t\t\n\t\t\tcommit('clear');\n\t\t\tlocalStorage.removeItem('userInfo');\n\t\t},\n\t\t\n\t\t// 同步数据到 RooCode\n\t\tsyncToRooCode({ state }) {\n\t\t\ttry {\n\t\t\t\tif (!window.vscodeServices?.get('ICommandService')) {\n\t\t\t\t\tconsole.log('[Store] VSCode ICommandService not available');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst userInfo = state.userStore?.userInfo;\n\t\t\t\tif (!userInfo?.id) {\n\t\t\t\t\tconsole.log('[Store] No user info available for sync');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconst userId = String(userInfo.id);\n\t\t\t\tconst friends = state.friendStore?.friends || [];\n\t\t\t\tconst groups = state.groupStore?.groups || [];\n\t\t\t\t\n\t\t\t\tconsole.log('[Store] Syncing to RooCode:', {\n\t\t\t\t\tuserId,\n\t\t\t\t\tfriendsCount: friends.length,\n\t\t\t\t\tgroupsCount: groups.length\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 同步用户状态\n\t\t\t\twindow.vscodeServices.get('ICommandService').executeCommand('roo-cline.onUserSwitch', {\n\t\t\t\t\tuserId: userId,\n\t\t\t\t\tuserName: userInfo.nickName || userInfo.username,\n\t\t\t\t\t// VoidBridge期望terminalNo字段，固定为0（账号隔离标识）\n\t\t\t\t\tterminalNo: 0,\n\t\t\t\t\t// 同时传递terminal字段，VSCode环境下为2\n\t\t\t\t\tterminal: window.terminal ? window.terminal : 2,\n\t\t\t\t\t// 传递apiToken\n\t\t\t\t\tapiToken: userInfo.apiToken\n\t\t\t\t}).catch(err => console.warn('Failed to sync user state to RooCode:', err));\n\t\t\t\t\n\t\t\t\t// 同步联系人数据\n\t\t\t\twindow.vscodeServices.get('ICommandService').executeCommand('roo-cline.updateImContacts', {\n\t\t\t\t\tuserId: userId,\n\t\t\t\t\tfriends: friends.filter(f => !f.deleted),\n\t\t\t\t\tgroups: groups.filter(g => !g.quit)\n\t\t\t\t}).catch(err => console.warn('Failed to sync contacts to RooCode:', err));\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[Store] Failed to sync to RooCode:', error);\n\t\t\t}\n\t\t}\n\t},\n\tstrict: process.env.NODE_ENV !== 'production'\n})\n","let toTimeText = (timeStamp, simple) => {\n\tvar dateTime = new Date(timeStamp)\n\tvar currentTime = Date.parse(new Date()); //当前时间\n\tvar timeDiff = currentTime - dateTime; //与当前时间误差\n\tvar timeText = '';\n\tif (timeDiff <= 60000) { //一分钟内\n\t\ttimeText = '刚刚';\n\t} else if (timeDiff > 60000 && timeDiff < 3600000) {\n\t\t//1小时内\n\t\ttimeText = Math.floor(timeDiff / 60000) + '分钟前';\n\t} else if (timeDiff >= 3600000 && timeDiff < 86400000 && !isYestday(dateTime)) {\n\t\t//今日\n\t\ttimeText = formatDateTime(dateTime).substr(11, 5);\n\t} else if (isYestday(dateTime)) {\n\t\t//昨天\n\t\ttimeText = '昨天' + formatDateTime(dateTime).substr(11, 5);\n\t} else if (isYear(dateTime)) {\n\t\t//今年\n\t\ttimeText = formatDateTime(dateTime).substr(5, simple ? 5 : 14);\n\t} else {\n\t\t//不属于今年\n\t\ttimeText = formatDateTime(dateTime);\n\t\tif (simple) {\n\t\t\ttimeText = timeText.substr(2, 8);\n\t\t}\n\t}\n\treturn timeText;\n}\n\nlet isYestday = (date) => {\n\tif (!date) return false;\n\tvar yesterday = new Date(new Date() - 1000 * 60 * 60 * 24);\n\treturn yesterday.getFullYear() === date.getFullYear() &&\n\t\tyesterday.getMonth() === date.getMonth() &&\n\t\tyesterday.getDate() === date.getDate();\n}\n\nlet isYear = (date) => {\n\tif (!date) return false;\n\treturn date.getFullYear() === new Date().getFullYear();\n}\n\nlet formatDateTime = (date) => {\n\tif (date === '' || !date) {\n\t\treturn ''\n\t}\n\tvar dateObject = new Date(date)\n\tvar y = dateObject.getFullYear()\n\tvar m = dateObject.getMonth() + 1\n\tm = m < 10 ? ('0' + m) : m\n\tvar d = dateObject.getDate()\n\td = d < 10 ? ('0' + d) : d\n\tvar h = dateObject.getHours()\n\th = h < 10 ? ('0' + h) : h\n\tvar minute = dateObject.getMinutes()\n\tminute = minute < 10 ? ('0' + minute) : minute\n\tvar second = dateObject.getSeconds()\n\tsecond = second < 10 ? ('0' + second) : second\n\treturn y + '/' + m + '/' + d + ' ' + h + ':' + minute + ':' + second\n}\n\n\nexport {\n\ttoTimeText,\n\tisYestday,\n\tisYear,\n\tformatDateTime\n}","import Vue from 'vue'\n\n// v-dialogDrag: 弹窗拖拽\nVue.directive('dialogDrag', {\n    bind(el, binding, vnode, oldVnode) {\n        const dialogHeaderEl = el.querySelector('.el-dialog__header')\n        const dragDom = el.querySelector('.el-dialog')\n        dialogHeaderEl.style.cursor = 'move'\n\n        // 获取原有属性 ie dom元素.currentStyle 火狐谷歌 window.getComputedStyle(dom元素, null);\n        const sty = dragDom.currentStyle || window.getComputedStyle(dragDom, null)\n\n        dialogHeaderEl.onmousedown = (e) => {\n            // 鼠标按下，计算当前元素距离可视区的距离\n            const disX = e.clientX - dialogHeaderEl.offsetLeft\n            const disY = e.clientY - dialogHeaderEl.offsetTop\n            const screenWidth = document.body.clientWidth; // body当前宽度\n            const screenHeight = document.documentElement.clientHeight; // 可见区域高度(应为body高度，可某些环境下无法获取)\n            const dragDomWidth = dragDom.offsetWidth; // 对话框宽度\n            const dragDomheight = dragDom.offsetHeight; // 对话框高度\n            const minDragDomLeft = dragDom.offsetLeft;\n            const maxDragDomLeft = screenWidth - dragDom.offsetLeft - dragDomWidth;\n            const minDragDomTop = dragDom.offsetTop;\n            const maxDragDomTop = screenHeight - dragDom.offsetTop - dragDomheight;\n\n            // 获取到的值带px 正则匹配替换\n            let styL, styT\n\n            // 注意在ie中 第一次获取到的值为组件自带50% 移动之后赋值为px\n            if (sty.left.includes('%')) {\n                styL = +document.body.clientWidth * (+sty.left.replace(/\\%/g, '') / 100)\n                styT = +document.body.clientHeight * (+sty.top.replace(/\\%/g, '') / 100)\n            } else {\n                styL = +sty.left.replace(/\\px/g, '')\n                styT = +sty.top.replace(/\\px/g, '')\n            }\n\n            document.onmousemove = function (e) {\n                // 获取body的页面可视宽高\n                // var clientHeight = document.documentElement.clientHeight || document.body.clientHeight\n                // var clientWidth = document.documentElement.clientWidth || document.body.clientWidth\n\n                // 通过事件委托，计算移动的距离\n                var l = e.clientX - disX\n                var t = e.clientY - disY\n\n                // 边界处理\n                if (-l > minDragDomLeft) {\n                    l = -minDragDomLeft;\n                } else if (l > maxDragDomLeft) {\n                    l = maxDragDomLeft;\n                }\n                if (-t > minDragDomTop) {\n                    t = -minDragDomTop;\n                } else if (t > maxDragDomTop) {\n                    t = maxDragDomTop;\n                }\n                // 移动当前元素\n                dragDom.style.left = `${l + styL}px`\n                dragDom.style.top = `${t + styT}px`\n\n                // 将此时的位置传出去\n                // binding.value({x:e.pageX,y:e.pageY})\n            }\n\n            document.onmouseup = function (e) {\n                document.onmousemove = null\n                document.onmouseup = null\n            }\n        }\n    }\n})\n","import Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport ElementUI from 'element-ui';\nimport './assets/style/im.scss';\nimport './assets/iconfont/iconfont.css';\n\nimport httpRequest from './api/httpRequest';\nimport * as socketApi from './api/wssocket';\nimport * as messageType from './api/messageType';\nimport emotion from './api/emotion.js';\nimport url from './api/url.js';\nimport element from './api/element.js';\nimport store from './store';\nimport * as  enums from './api/enums.js';\nimport * as  date from './api/date.js';\nimport './utils/directive/dialogDrag';\n\nVue.use(ElementUI);\n// 挂载全局\nVue.prototype.$wsApi = socketApi;\nVue.prototype.$msgType = messageType\nVue.prototype.$date = date;\nVue.prototype.$http = httpRequest // http请求方法\nVue.prototype.$emo = emotion; // emo表情\nVue.prototype.$url = url; // url转换\nVue.prototype.$elm = element; // 元素操作\nVue.prototype.$enums = enums; // 枚举\nVue.prototype.$eventBus = new Vue(); // 全局事件\n// 添加$bus别名，确保与组件中的使用保持一致\nVue.prototype.$bus = Vue.prototype.$eventBus;\nVue.config.productionTip = false;\n\nnew Vue({\n  el: '#app',\n  // 配置路由\n  router,\n  store,\n  render: h => h(App)\n})\n\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"container-manager\",class:{ collapsed: _vm.isCollapsed }},[_c('div',{staticClass:\"collapse-btn\",on:{\"click\":_vm.toggleCollapse}},[_c('i',{class:_vm.isCollapsed ? 'el-icon-arrow-left' : 'el-icon-arrow-right'})]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isCollapsed),expression:\"!isCollapsed\"}],staticClass:\"container-status\"},[_c('div',{staticClass:\"status-header\"},[_c('div',{staticClass:\"status-info\"},[_c('span',{staticClass:\"status-icon\",class:_vm.statusClass},[_vm._v(\" \"+_vm._s(_vm.statusIcon)+\" \")]),_c('span',{staticClass:\"status-text\"},[_vm._v(_vm._s(_vm.statusText))])]),_c('div',{staticClass:\"status-actions\"},[(!_vm.podInfo)?[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"loading\":_vm.loading},on:{\"click\":_vm.createPod}},[_vm._v(\" 启动云电脑 \")])]:[_c('el-dropdown',{attrs:{\"trigger\":\"click\"},on:{\"command\":_vm.handleCommand}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\" 云电脑操作 \"),_c('i',{staticClass:\"el-icon-arrow-down el-icon--right\"})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"vnc\",\"disabled\":!(_vm.podInfo.access_info?.vnc?.novnc_url || _vm.podInfo.vnc_url)}},[_c('i',{staticClass:\"el-icon-monitor\"}),_vm._v(\" 查看云电脑 \")]),_c('el-dropdown-item',{attrs:{\"command\":\"copyVnc\",\"disabled\":!(_vm.podInfo.access_info?.vnc?.novnc_url || _vm.podInfo.vnc_url)}},[_c('i',{staticClass:\"el-icon-copy-document\"}),_vm._v(\" 复制VNC链接 \")]),_c('el-dropdown-item',{attrs:{\"command\":\"copySsh\",\"disabled\":!(_vm.podInfo.access_info?.ssh?.command || _vm.podInfo.ssh_command)}},[_c('i',{staticClass:\"el-icon-connection\"}),_vm._v(\" 复制SSH命令 \")]),_c('el-dropdown-item',{attrs:{\"divided\":\"\",\"command\":\"restart\"}},[_c('i',{staticClass:\"el-icon-refresh\"}),_vm._v(\" 重启云电脑 \")]),_c('el-dropdown-item',{attrs:{\"command\":\"stop\"}},[_c('i',{staticClass:\"el-icon-video-pause\"}),_vm._v(\" 停止云电脑 \")]),_c('el-dropdown-item',{attrs:{\"command\":\"delete\",\"divided\":\"\"}},[_c('span',{staticStyle:{\"color\":\"#f56c6c\"}},[_c('i',{staticClass:\"el-icon-delete\"}),_vm._v(\" 删除云电脑 \")])])],1)],1),_c('el-button',{attrs:{\"size\":\"small\",\"circle\":\"\",\"loading\":_vm.loading,\"title\":\"刷新状态\"},on:{\"click\":_vm.refreshStatus}},[_c('i',{staticClass:\"el-icon-refresh\"})])]],2)]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.podInfo)?_c('div',{staticClass:\"pod-details\"},[_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"detail-label\"},[_vm._v(\"云电脑名称：\")]),_c('span',{staticClass:\"detail-value\"},[_vm._v(_vm._s(_vm.podInfo.name))])]),_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"detail-label\"},[_vm._v(\"状态：\")]),_c('span',{staticClass:\"detail-value\",class:'status-' + _vm.podStatus},[_vm._v(\" \"+_vm._s(_vm.podStatus)+\" \")])]),(_vm.podInfo.resources)?_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"detail-label\"},[_vm._v(\"资源配置：\")]),_c('span',{staticClass:\"detail-value\"},[_vm._v(\" CPU: \"+_vm._s(_vm.podInfo.resources.cpu || 'N/A')+\" | 内存: \"+_vm._s(_vm.podInfo.resources.memory || 'N/A')+\" | 存储: \"+_vm._s(_vm.podInfo.resources.storage || 'N/A')+\" \")])]):_vm._e(),(_vm.vncPassword || _vm.podInfo.vnc_password || _vm.podInfo.access_info?.credentials?.password)?_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"detail-label\"},[_vm._v(\"云电脑密码：\")]),_c('span',{staticClass:\"detail-value\"},[_vm._v(\" \"+_vm._s(_vm.vncPassword || _vm.podInfo.vnc_password || '使用创建时提供的密码')+\" \"),(_vm.vncPassword || _vm.podInfo.vnc_password)?_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.copyToClipboard(_vm.vncPassword || _vm.podInfo.vnc_password, '云电脑密码已复制')}}},[_c('i',{staticClass:\"el-icon-copy-document\"}),_vm._v(\" 复制 \")]):_vm._e()],1)]):_vm._e(),(_vm.podInfo.access_info?.vnc?.novnc_url || _vm.podInfo.vnc_url)?_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"detail-label\"},[_vm._v(\"云电脑访问：\")]),_c('span',{staticClass:\"detail-value\",staticStyle:{\"font-size\":\"12px\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.openVNC}},[_c('i',{staticClass:\"el-icon-monitor\"}),_vm._v(\" 查看工作台 \")]),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":_vm.copyVNCLink}},[_c('i',{staticClass:\"el-icon-copy-document\"}),_vm._v(\" 复制链接 \")])],1)]):_vm._e(),(_vm.podInfo.access_info?.ssh?.command || _vm.podInfo.ssh_command)?_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"detail-label\"},[_vm._v(\"SSH访问：\")]),_c('span',{staticClass:\"detail-value\",staticStyle:{\"font-size\":\"12px\",\"word-break\":\"break-all\"}},[_c('code',[_vm._v(_vm._s(_vm.podInfo.access_info?.ssh?.command || _vm.podInfo.ssh_command))]),_c('el-button',{staticStyle:{\"margin-left\":\"10px\"},attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":_vm.copySSHCommand}},[_c('i',{staticClass:\"el-icon-copy-document\"}),_vm._v(\" 复制 \")])],1)]):_vm._e(),(_vm.podInfo.created_at || _vm.podInfo.start_time)?_c('div',{staticClass:\"detail-item\"},[_c('span',{staticClass:\"detail-label\"},[_vm._v(\"创建时间：\")]),_c('span',{staticClass:\"detail-value\"},[_vm._v(\" \"+_vm._s(_vm.formatTime(_vm.podInfo.created_at || _vm.podInfo.start_time))+\" \")])]):_vm._e()]):_vm._e()]),_c('transition',{attrs:{\"name\":\"fade\"}},[(_vm.errorMessage)?_c('div',{staticClass:\"error-message\"},[_c('i',{staticClass:\"el-icon-warning\"}),_vm._v(\" \"+_vm._s(_vm.errorMessage)+\" \")]):_vm._e()])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isCollapsed),expression:\"isCollapsed\"}],staticClass:\"collapsed-content\"},[_c('div',{staticClass:\"collapsed-status\"},[_c('span',{staticClass:\"status-icon\",class:_vm.statusClass},[_vm._v(_vm._s(_vm.statusIcon))]),_c('span',{staticClass:\"collapsed-text\"},[_vm._v(\"云电脑管理\")])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container-manager\" :class=\"{ collapsed: isCollapsed }\">\n    <div class=\"collapse-btn\" @click=\"toggleCollapse\">\n      <i :class=\"isCollapsed ? 'el-icon-arrow-left' : 'el-icon-arrow-right'\"></i>\n    </div>\n    <div class=\"container-status\" v-show=\"!isCollapsed\">\n      <div class=\"status-header\">\n        <div class=\"status-info\">\n          <span class=\"status-icon\" :class=\"statusClass\">\n            {{ statusIcon }}\n          </span>\n          <span class=\"status-text\">{{ statusText }}</span>\n        </div>\n        <div class=\"status-actions\">\n          <template v-if=\"!podInfo\">\n            <el-button\n              type=\"primary\"\n              size=\"small\"\n              @click=\"createPod\"\n              :loading=\"loading\"\n            >\n              启动云电脑\n            </el-button>\n          </template>\n          <template v-else>\n            <el-dropdown trigger=\"click\" @command=\"handleCommand\">\n              <el-button type=\"primary\" size=\"small\">\n                云电脑操作\n                <i class=\"el-icon-arrow-down el-icon--right\"></i>\n              </el-button>\n              <el-dropdown-menu slot=\"dropdown\">\n                <el-dropdown-item \n                  command=\"vnc\"\n                  :disabled=\"!(podInfo.access_info?.vnc?.novnc_url || podInfo.vnc_url)\"\n                >\n                  <i class=\"el-icon-monitor\"></i> 查看云电脑\n                </el-dropdown-item>\n                <el-dropdown-item \n                  command=\"copyVnc\"\n                  :disabled=\"!(podInfo.access_info?.vnc?.novnc_url || podInfo.vnc_url)\"\n                >\n                  <i class=\"el-icon-copy-document\"></i> 复制VNC链接\n                </el-dropdown-item>\n                <el-dropdown-item \n                  command=\"copySsh\"\n                  :disabled=\"!(podInfo.access_info?.ssh?.command || podInfo.ssh_command)\"\n                >\n                  <i class=\"el-icon-connection\"></i> 复制SSH命令\n                </el-dropdown-item>\n                <el-dropdown-item divided command=\"restart\">\n                  <i class=\"el-icon-refresh\"></i> 重启云电脑\n                </el-dropdown-item>\n                <el-dropdown-item command=\"stop\">\n                  <i class=\"el-icon-video-pause\"></i> 停止云电脑\n                </el-dropdown-item>\n                <el-dropdown-item command=\"delete\" divided>\n                  <span style=\"color: #f56c6c;\">\n                    <i class=\"el-icon-delete\"></i> 删除云电脑\n                  </span>\n                </el-dropdown-item>\n              </el-dropdown-menu>\n            </el-dropdown>\n            <el-button\n              size=\"small\"\n              circle\n              @click=\"refreshStatus\"\n              :loading=\"loading\"\n              title=\"刷新状态\"\n            >\n              <i class=\"el-icon-refresh\"></i>\n            </el-button>\n          </template>\n        </div>\n      </div>\n      \n      <transition name=\"fade\">\n        <div v-if=\"podInfo\" class=\"pod-details\">\n          <div class=\"detail-item\">\n            <span class=\"detail-label\">云电脑名称：</span>\n            <span class=\"detail-value\">{{ podInfo.name }}</span>\n          </div>\n          <div class=\"detail-item\">\n            <span class=\"detail-label\">状态：</span>\n            <span class=\"detail-value\" :class=\"'status-' + podStatus\">\n              {{ podStatus }}\n            </span>\n          </div>\n        <div class=\"detail-item\" v-if=\"podInfo.resources\">\n          <span class=\"detail-label\">资源配置：</span>\n          <span class=\"detail-value\">\n            CPU: {{ podInfo.resources.cpu || 'N/A' }} | \n            内存: {{ podInfo.resources.memory || 'N/A' }} | \n            存储: {{ podInfo.resources.storage || 'N/A' }}\n          </span>\n        </div>\n        <div class=\"detail-item\" v-if=\"vncPassword || podInfo.vnc_password || podInfo.access_info?.credentials?.password\">\n          <span class=\"detail-label\">云电脑密码：</span>\n          <span class=\"detail-value\">\n            {{ vncPassword || podInfo.vnc_password || '使用创建时提供的密码' }}\n            <el-button \n              type=\"text\" \n              size=\"mini\" \n              @click=\"copyToClipboard(vncPassword || podInfo.vnc_password, '云电脑密码已复制')\"\n              style=\"margin-left: 10px;\"\n              v-if=\"vncPassword || podInfo.vnc_password\"\n            >\n              <i class=\"el-icon-copy-document\"></i> 复制\n            </el-button>\n          </span>\n        </div>\n        <div class=\"detail-item\" v-if=\"podInfo.access_info?.vnc?.novnc_url || podInfo.vnc_url\">\n          <span class=\"detail-label\">云电脑访问：</span>\n          <span class=\"detail-value\" style=\"font-size: 12px;\">\n            <el-button type=\"primary\" size=\"mini\" @click=\"openVNC\">\n              <i class=\"el-icon-monitor\"></i> 查看工作台\n            </el-button>\n            <el-button type=\"text\" size=\"mini\" @click=\"copyVNCLink\">\n              <i class=\"el-icon-copy-document\"></i> 复制链接\n            </el-button>\n          </span>\n        </div>\n        <div class=\"detail-item\" v-if=\"podInfo.access_info?.ssh?.command || podInfo.ssh_command\">\n          <span class=\"detail-label\">SSH访问：</span>\n          <span class=\"detail-value\" style=\"font-size: 12px; word-break: break-all;\">\n            <code>{{ podInfo.access_info?.ssh?.command || podInfo.ssh_command }}</code>\n            <el-button \n              type=\"text\" \n              size=\"mini\" \n              @click=\"copySSHCommand\"\n              style=\"margin-left: 10px;\"\n            >\n              <i class=\"el-icon-copy-document\"></i> 复制\n            </el-button>\n          </span>\n        </div>\n        <div class=\"detail-item\" v-if=\"podInfo.created_at || podInfo.start_time\">\n          <span class=\"detail-label\">创建时间：</span>\n          <span class=\"detail-value\">\n            {{ formatTime(podInfo.created_at || podInfo.start_time) }}\n          </span>\n        </div>\n      </div>\n      </transition>\n      \n      <transition name=\"fade\">\n        <div v-if=\"errorMessage\" class=\"error-message\">\n          <i class=\"el-icon-warning\"></i>\n          {{ errorMessage }}\n        </div>\n      </transition>\n    </div>\n    <!-- 收起状态下的简化显示 -->\n    <div class=\"collapsed-content\" v-show=\"isCollapsed\">\n      <div class=\"collapsed-status\">\n        <span class=\"status-icon\" :class=\"statusClass\">{{ statusIcon }}</span>\n        <span class=\"collapsed-text\">云电脑管理</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ContainerManager',\n  data() {\n    return {\n      podInfo: null,\n      loading: false,\n      errorMessage: '',\n      checkInterval: null,\n      apiUrl: 'https://api.vnc.service.thinkgs.cn',\n      apiToken: '',\n      vncPassword: '', // 存储VNC密码\n      isCollapsed: false, // 收起/展开状态\n      lastCheckTime: 0, // 上次检查时间\n      checkIntervalTime: 30000, // 默认30秒检查间隔\n      cachedPodInfo: null, // 缓存Pod信息\n      lastSuccessfulFetch: 0 // 上次成功获取数据的时间\n    };\n  },\n  computed: {\n    // 获取Pod的实际状态（兼容列表和详情两种数据格式）\n    podStatus() {\n      if (!this.podInfo) return null;\n      // 详情API返回phase，列表API返回status\n      return this.podInfo.phase || this.podInfo.status;\n    },\n    statusClass() {\n      if (this.loading) return 'loading';\n      if (this.podStatus) {\n        switch(this.podStatus) {\n          case 'Running': return 'running';\n          case 'Pending': return 'pending';\n          case 'Failed': return 'failed';\n          case 'Stopped': return 'stopped';\n          default: return 'unknown';\n        }\n      }\n      return 'offline';\n    },\n    statusIcon() {\n      if (this.loading) return '⏳';\n      if (this.podStatus) {\n        switch(this.podStatus) {\n          case 'Running': return '✅';\n          case 'Pending': return '⏱️';\n          case 'Failed': return '❌';\n          case 'Stopped': return '⏸️';\n          default: return '❓';\n        }\n      }\n      return '⭕';\n    },\n    statusText() {\n      if (this.loading) return '处理中...';\n      if (this.podStatus) {\n        switch(this.podStatus) {\n          case 'Running': return '云电脑运行中';\n          case 'Pending': return '云电脑启动中';\n          case 'Failed': return '云电脑异常';\n          case 'Stopped': return '云电脑已停止';\n          default: return '状态未知';\n        }\n      }\n      return '云电脑未启动';\n    }\n  },\n  methods: {\n    toggleCollapse() {\n      this.isCollapsed = !this.isCollapsed;\n      // 保存状态到 localStorage\n      localStorage.setItem('container-manager-collapsed', this.isCollapsed);\n    },\n    async callAPI(endpoint, method = 'GET', body = null) {\n      // 使用组件中的 apiToken\n      const token = this.apiToken;\n      \n      const options = {\n        method: method,\n        headers: {\n          'Authorization': `Bearer ${token}`,\n          'Content-Type': 'application/json'\n        }\n      };\n      \n      if (body && method !== 'GET') {\n        options.body = JSON.stringify(body);\n      }\n      \n      console.log('[ContainerManager] API调用:', {\n        url: `${this.apiUrl}${endpoint}`,\n        method: method,\n        token: token.substring(0, 20) + '...',\n        body: body\n      });\n      \n      try {\n        const response = await fetch(`${this.apiUrl}${endpoint}`, options);\n        const data = await response.json();\n        \n        console.log('[ContainerManager] API响应:', {\n          status: response.status,\n          data: data\n        });\n        \n        return { status: response.status, data: data };\n      } catch (error) {\n        console.error('[ContainerManager] API错误:', error);\n        return { status: 'error', data: { error: error.message } };\n      }\n    },\n    \n    async checkPodStatus(isRefresh = false) {\n      // 确保有token\n      if (!this.apiToken) {\n        console.error('[ContainerManager] Token未配置，无法检查Pod状态');\n        this.errorMessage = 'Token未配置';\n        return;\n      }\n      \n      // 如果有缓存且距离上次成功获取不到5秒，直接使用缓存\n      const now = Date.now();\n      if (this.cachedPodInfo && (now - this.lastSuccessfulFetch) < 5000) {\n        console.log('[ContainerManager] 使用缓存的Pod信息');\n        this.podInfo = this.cachedPodInfo;\n        return;\n      }\n      \n      console.log('[ContainerManager] 检查Pod状态，使用Token:', this.apiToken.substring(0, 20) + '...');\n      \n      // 只在刷新时显示loading，初始加载和定时刷新不显示\n      if (isRefresh) {\n        this.loading = true;\n      }\n      \n      this.errorMessage = '';\n      const result = await this.callAPI('/api/v1/pods');\n      \n      if (result.status === 200 && result.data.pods) {\n        const pods = result.data.pods;\n        if (pods.length > 0) {\n          const podName = pods[0].name;\n          console.log('[ContainerManager] Pod列表获取成功，找到Pod:', podName);\n          \n          // 获取Pod详细信息\n          if (podName) {\n            await this.getPodDetail(podName, pods[0]);\n          }\n        } else {\n          this.podInfo = null;\n          this.cachedPodInfo = null;\n          console.log('[ContainerManager] 没有找到Pod');\n        }\n      } else if (result.status === 401) {\n        this.errorMessage = 'Token无效或已过期';\n        console.error('[ContainerManager] 401错误，Token可能无效:', this.apiToken.substring(0, 20) + '...');\n      } else {\n        console.error('[ContainerManager] 获取Pod状态失败:', result);\n      }\n      \n      if (isRefresh) {\n        this.loading = false;\n      }\n    },\n    \n    async getPodDetail(podName, basicInfo = null) {\n      console.log('[ContainerManager] 获取Pod详情:', podName);\n      \n      const result = await this.callAPI(`/api/v1/pods/${podName}`);\n      \n      if (result.status === 200) {\n        // 合并基本信息和详细信息，避免闪烁\n        const newPodInfo = {\n          ...(basicInfo || this.podInfo || {}),\n          ...result.data\n        };\n        \n        // 只有当数据真正改变时才更新，避免不必要的重新渲染\n        if (JSON.stringify(this.podInfo) !== JSON.stringify(newPodInfo)) {\n          this.podInfo = newPodInfo;\n          // 更新缓存\n          this.cachedPodInfo = newPodInfo;\n          this.lastSuccessfulFetch = Date.now();\n          \n          // 更新全局缓存\n          window.__containerManagerCache = {\n            podInfo: newPodInfo,\n            vncPassword: this.vncPassword,\n            timestamp: Date.now()\n          };\n          \n          console.log('[ContainerManager] Pod详情获取成功:', this.podInfo);\n        }\n        \n        // 如果详情中包含VNC密码，保存它\n        if (result.data.vnc_password && !this.vncPassword) {\n          this.vncPassword = result.data.vnc_password;\n        }\n      } else {\n        // 如果获取详情失败，至少保留基本信息\n        if (basicInfo && !this.podInfo) {\n          this.podInfo = basicInfo;\n          // 也更新缓存\n          this.cachedPodInfo = basicInfo;\n          this.lastSuccessfulFetch = Date.now();\n        }\n        console.error('[ContainerManager] 获取Pod详情失败:', result);\n      }\n    },\n    \n    async createPod() {\n      this.loading = true;\n      this.errorMessage = '';\n      \n      const body = {\n        cpu_limit: '2',\n        memory_limit: '4Gi',\n        storage_size: '20Gi'\n      };\n      \n      const result = await this.callAPI('/api/v1/pods', 'POST', body);\n      this.loading = false;\n      \n      if (result.status === 200 || result.status === 201) {\n        // 保存VNC密码\n        if (result.data.vnc_password) {\n          this.vncPassword = result.data.vnc_password;\n          \n          // 显示VNC密码给用户\n          this.$alert(`云电脑创建成功！<br><br>VNC密码: <strong>${result.data.vnc_password}</strong><br><br>请妥善保存此密码，用于访问VNC远程桌面。`, '创建成功', {\n            dangerouslyUseHTMLString: true,\n            confirmButtonText: '复制密码',\n            callback: () => {\n              this.copyToClipboard(result.data.vnc_password, 'VNC密码已复制');\n            }\n          });\n        } else {\n          this.$message.success('云电脑创建成功');\n        }\n        \n        // 获取创建的Pod名称并获取详情\n        if (result.data.pod_name || result.data.name) {\n          const podName = result.data.pod_name || result.data.name;\n          setTimeout(() => {\n            this.getPodDetail(podName);\n          }, 2000);\n        } else {\n          setTimeout(() => this.checkPodStatus(), 2000);\n        }\n      } else {\n        this.errorMessage = result.data.message || '创建失败';\n        this.$message.error(this.errorMessage);\n      }\n    },\n    \n    async performAction(action, podName) {\n      this.loading = true;\n      this.errorMessage = '';\n      \n      let endpoint = '';\n      let method = 'POST';\n      \n      switch(action) {\n        case 'stop':\n        case 'restart':\n          endpoint = `/api/v1/pods/${podName}/${action}`;\n          break;\n        case 'delete':\n          endpoint = `/api/v1/pods/${podName}`;\n          method = 'DELETE';\n          break;\n      }\n      \n      const result = await this.callAPI(endpoint, method);\n      this.loading = false;\n      \n      if (result.status === 200) {\n        this.$message.success(`操作成功：${action}`);\n        setTimeout(() => this.checkPodStatus(), 2000);\n      } else {\n        this.errorMessage = result.data.message || '操作失败';\n        this.$message.error(this.errorMessage);\n      }\n    },\n    \n    handleCommand(command) {\n      if (!this.podInfo) return;\n      \n      switch(command) {\n        case 'vnc':\n          this.openVNC();\n          break;\n        case 'copyVnc':\n          this.copyVNCLink();\n          break;\n        case 'copySsh':\n          this.copySSHCommand();\n          break;\n        case 'restart':\n          this.confirmAction('restart', '确定要重启云电脑吗？');\n          break;\n        case 'stop':\n          this.confirmAction('stop', '确定要停止云电脑吗？');\n          break;\n        case 'delete':\n          this.confirmAction('delete', '确定要删除云电脑吗？此操作不可恢复！');\n          break;\n      }\n    },\n    \n    openVNC() {\n      // 优先使用详情API返回的access_info\n      if (this.podInfo?.access_info?.vnc?.novnc_url) {\n        window.open(this.podInfo.access_info.vnc.novnc_url, '_blank');\n      } else if (this.podInfo?.vnc_url) {\n        // 兼容列表API的数据格式\n        const vncUrl = this.podInfo.vnc_url\n          .replace('/novnc/vnc.html', '/vnc.html?path=user/' + \n            this.podInfo.name.replace('vnc-', '') + '/websockify')\n        window.open(vncUrl, '_blank');\n      } else {\n        this.$message.warning('VNC链接不可用');\n      }\n    },\n    \n    copyVNCLink() {\n      // 优先使用详情API返回的access_info\n      if (this.podInfo?.access_info?.vnc?.novnc_url) {\n        this.copyToClipboard(this.podInfo.access_info.vnc.novnc_url, 'VNC链接已复制');\n      } else if (this.podInfo?.vnc_url) {\n        // 兼容列表API的数据格式\n        const vncUrl = this.podInfo.vnc_url\n          .replace('/novnc/vnc.html', '/vnc.html?path=user/' + \n            this.podInfo.name.replace('vnc-', '') + '/websockify')\n        this.copyToClipboard(vncUrl, 'VNC链接已复制');\n      } else {\n        this.$message.warning('VNC链接不可用');\n      }\n    },\n    \n    copySSHCommand() {\n      // 优先使用详情API返回的access_info\n      if (this.podInfo?.access_info?.ssh?.command) {\n        this.copyToClipboard(this.podInfo.access_info.ssh.command, 'SSH命令已复制');\n      } else if (this.podInfo?.ssh_command) {\n        // 兼容列表API的数据格式\n        this.copyToClipboard(this.podInfo.ssh_command, 'SSH命令已复制');\n      } else {\n        this.$message.warning('SSH命令不可用');\n      }\n    },\n    \n    copyToClipboard(text, message) {\n      const textarea = document.createElement('textarea');\n      textarea.value = text;\n      document.body.appendChild(textarea);\n      textarea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textarea);\n      this.$message.success(message);\n    },\n    \n    confirmAction(action, message) {\n      this.$confirm(message, '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.performAction(action, this.podInfo.name);\n      }).catch(() => {\n        this.$message.info('已取消操作');\n      });\n    },\n    \n    refreshStatus() {\n      this.checkPodStatus(true);  // 手动刷新时传递isRefresh=true\n    },\n    \n    formatTime(timestamp) {\n      return new Date(timestamp).toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    \n    initApiToken() {\n      // 优先从 sessionStorage 获取 tokenKey\n      let tokenKey = sessionStorage.getItem('tokenKey');\n      \n      // 如果 sessionStorage 中没有，尝试从 localStorage 的 userinfo 中获取\n      if (!tokenKey) {\n        try {\n          const userInfoStr = localStorage.getItem('userInfo');\n          if (userInfoStr) {\n            const userInfo = JSON.parse(userInfoStr);\n            tokenKey = userInfo.apiKey || null;\n            console.log('[ContainerManager] 从localStorage获取apiKey:', {\n              hasApiKey: !!tokenKey,\n              apiKeyPreview: tokenKey ? tokenKey.substring(0, 20) + '...' : 'none'\n            });\n          }\n        } catch (error) {\n          console.error('[ContainerManager] 解析userinfo失败:', error);\n        }\n      }\n      \n      console.log('[ContainerManager] 检查Token:', {\n        hasTokenKey: !!tokenKey,\n        tokenKeyPreview: tokenKey ? tokenKey.substring(0, 20) + '...' : 'none',\n        currentToken: this.apiToken ? 'exists' : 'none',\n        source: sessionStorage.getItem('tokenKey') ? 'sessionStorage' : 'localStorage'\n      });\n      \n      if (tokenKey) {\n        // 如果 token 没变，不需要重新初始化\n        if (this.apiToken === tokenKey) {\n          console.log('[ContainerManager] Token未变化，跳过初始化');\n          return;\n        }\n        \n        this.apiToken = tokenKey;\n        const source = sessionStorage.getItem('tokenKey') ? 'sessionStorage' : 'localStorage';\n        console.log(`[ContainerManager] Token从${source}设置成功:`, this.apiToken.substring(0, 20) + '...');\n        \n        // 清除之前的定时器\n        if (this.checkInterval) {\n          clearInterval(this.checkInterval);\n        }\n        \n        // 立即检查状态\n        this.checkPodStatus();\n        \n        // 设置智能刷新\n        this.setupSmartRefresh();\n        \n        // 清除错误信息\n        this.errorMessage = '';\n      } else {\n        console.warn('[ContainerManager] sessionStorage中没有tokenKey');\n        this.errorMessage = '等待用户登录...';\n      }\n    },\n    \n    setupSmartRefresh() {\n      // 清除旧的定时器\n      if (this.checkInterval) {\n        clearInterval(this.checkInterval);\n      }\n      \n      // 根据Pod状态动态调整刷新间隔\n      this.checkInterval = setInterval(() => {\n        // 如果组件被收起，减少刷新频率\n        if (this.isCollapsed) {\n          // 收起状态下，60秒刷新一次\n          if (Date.now() - this.lastCheckTime > 60000) {\n            this.checkPodStatus();\n            this.lastCheckTime = Date.now();\n          }\n        } else {\n          // 展开状态下，根据Pod状态调整刷新频率\n          let interval = this.checkIntervalTime;\n          \n          if (this.podStatus === 'Pending') {\n            // 启动中状态，10秒刷新一次\n            interval = 10000;\n          } else if (this.podStatus === 'Running') {\n            // 运行中状态，45秒刷新一次\n            interval = 45000;\n          } else if (this.podStatus === 'Failed' || this.podStatus === 'Stopped') {\n            // 失败或停止状态，60秒刷新一次\n            interval = 60000;\n          }\n          \n          if (Date.now() - this.lastCheckTime > interval) {\n            this.checkPodStatus();\n            this.lastCheckTime = Date.now();\n          }\n        }\n      }, 5000); // 每5秒检查一次是否需要刷新\n    }\n  },\n  mounted() {\n    console.log('[ContainerManager] 组件已挂载');\n    \n    // 从全局缓存恢复Pod信息\n    const globalCache = window.__containerManagerCache;\n    if (globalCache && globalCache.podInfo) {\n      const now = Date.now();\n      // 如果缓存不超过30秒，直接使用\n      if (now - globalCache.timestamp < 30000) {\n        console.log('[ContainerManager] 从全局缓存恢复Pod信息');\n        this.podInfo = globalCache.podInfo;\n        this.cachedPodInfo = globalCache.podInfo;\n        this.vncPassword = globalCache.vncPassword || '';\n        this.lastSuccessfulFetch = globalCache.timestamp;\n      }\n    }\n    \n    // 恢复收起/展开状态\n    const savedState = localStorage.getItem('container-manager-collapsed');\n    if (savedState !== null) {\n      this.isCollapsed = savedState === 'true';\n    }\n    // 立即尝试初始化\n    this.initApiToken();\n  },\n  beforeDestroy() {\n    // 保存Pod信息到全局缓存\n    if (this.podInfo) {\n      window.__containerManagerCache = {\n        podInfo: this.podInfo,\n        vncPassword: this.vncPassword,\n        timestamp: this.lastSuccessfulFetch || Date.now()\n      };\n      console.log('[ContainerManager] Pod信息已保存到全局缓存');\n    }\n    \n    if (this.checkInterval) {\n      clearInterval(this.checkInterval);\n    }\n  },\n  watch: {\n    '$store.state.userStore.userInfo': {\n      handler() {\n        // 当用户信息变化时（登录/登出），重新初始化 token\n        console.log('[ContainerManager] userInfo变化，触发Token检查');\n        this.initApiToken();\n      },\n      immediate: true\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.container-manager {\n  position: absolute;\n  top: 60px;\n  right: 20px;\n  width: 400px;\n  max-width: 90%;\n  background: #fff;\n  border-radius: 8px;\n  padding: 12px 16px;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 100;\n  transition: width 0.3s ease, padding 0.3s ease;\n  \n  &.collapsed {\n    width: auto;\n    min-width: 120px;\n    padding: 8px 12px;\n  }\n  \n  .collapse-btn {\n    position: absolute;\n    left: -12px;\n    top: 50%;\n    transform: translateY(-50%);\n    width: 24px;\n    height: 24px;\n    background: #fff;\n    border: 1px solid #dcdfe6;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    cursor: pointer;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n    transition: all 0.3s;\n    \n    &:hover {\n      background: #f5f7fa;\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    }\n    \n    i {\n      font-size: 12px;\n      color: #606266;\n    }\n  }\n  \n  .collapsed-content {\n    .collapsed-status {\n      display: flex;\n      align-items: center;\n      gap: 8px;\n      \n      .status-icon {\n        font-size: 18px;\n      }\n      \n      .collapsed-text {\n        font-size: 14px;\n        color: #303133;\n        white-space: nowrap;\n      }\n    }\n  }\n  \n  .container-status {\n    .status-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 12px;\n      \n      .status-info {\n        display: flex;\n        align-items: center;\n        gap: 10px;\n        \n        .status-icon {\n          font-size: 20px;\n          \n          &.running { color: #67c23a; }\n          &.pending { color: #e6a23c; }\n          &.failed { color: #f56c6c; }\n          &.stopped { color: #909399; }\n          &.offline { color: #c0c4cc; }\n          &.loading { \n            color: #409eff;\n            animation: rotate 1s linear infinite;\n          }\n        }\n        \n        .status-text {\n          font-size: 14px;\n          font-weight: 500;\n          color: #303133;\n        }\n      }\n      \n      .status-actions {\n        display: flex;\n        gap: 8px;\n      }\n    }\n    \n    .pod-details {\n      background: #f5f7fa;\n      border-radius: 4px;\n      padding: 10px;\n      \n      .detail-item {\n        display: flex;\n        align-items: center;\n        margin-bottom: 8px;\n        font-size: 13px;\n        \n        &:last-child {\n          margin-bottom: 0;\n        }\n        \n        .detail-label {\n          color: #909399;\n          min-width: 80px;\n        }\n        \n        .detail-value {\n          color: #606266;\n          \n          &.status-Running { color: #67c23a; }\n          &.status-Pending { color: #e6a23c; }\n          &.status-Failed { color: #f56c6c; }\n          &.status-Stopped { color: #909399; }\n        }\n      }\n    }\n    \n    .error-message {\n      margin-top: 10px;\n      padding: 8px 10px;\n      background: #fef0f0;\n      border-radius: 4px;\n      color: #f56c6c;\n      font-size: 13px;\n      display: flex;\n      align-items: center;\n      gap: 6px;\n    }\n  }\n  \n  @keyframes rotate {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n  \n  // 过渡动画\n  .fade-enter-active, .fade-leave-active {\n    transition: opacity 0.3s ease;\n  }\n  \n  .fade-enter, .fade-leave-to {\n    opacity: 0;\n  }\n}\n\n@media (max-width: 768px) {\n  .container-manager {\n    padding: 10px;\n    \n    .status-header {\n      flex-direction: column;\n      align-items: flex-start !important;\n      gap: 10px;\n      \n      .status-actions {\n        width: 100%;\n        justify-content: flex-end;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContainerManager.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContainerManager.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ContainerManager.vue?vue&type=template&id=118f200b&scoped=true\"\nimport script from \"./ContainerManager.vue?vue&type=script&lang=js\"\nexport * from \"./ContainerManager.vue?vue&type=script&lang=js\"\nimport style0 from \"./ContainerManager.vue?vue&type=style&index=0&id=118f200b&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"118f200b\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRecord.vue?vue&type=style&index=0&id=4f16842b&prod&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LLMStreamMessage.vue?vue&type=style&index=0&id=47c40186&prod&lang=scss&scoped=true\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":\"添加好友\",\"visible\":_vm.dialogVisible,\"width\":\"400px\",\"before-close\":_vm.onClose,\"custom-class\":\"add-friend-dialog\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"输入用户名或昵称按下enter搜索，最多展示20条\",\"size\":\"small\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.onSearch()}},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"suffix\"},on:{\"click\":function($event){return _vm.onSearch()}},slot:\"suffix\"})]),_c('el-scrollbar',{staticStyle:{\"height\":\"400px\"}},_vm._l((_vm.users),function(user){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(user.id != _vm.$store.state.userStore.userInfo.id),expression:\"user.id != $store.state.userStore.userInfo.id\"}],key:user.id},[_c('div',{staticClass:\"item\"},[_c('div',{staticClass:\"avatar\"},[_c('head-image',{attrs:{\"name\":user.nickName,\"url\":user.headImage,\"online\":user.online}})],1),_c('div',{staticClass:\"add-friend-text\"},[_c('div',{staticClass:\"nick-name\"},[_c('div',[_vm._v(_vm._s(user.nickName))]),_c('div',{class:user.online ? 'online-status  online' : 'online-status'},[_vm._v(_vm._s(user.online ? \"[在线]\" :\"[离线]\"))])]),_c('div',{staticClass:\"user-name\"},[_c('div',[_vm._v(\"用户名:\"+_vm._s(user.userName))])])]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isFriend(user.id)),expression:\"!isFriend(user.id)\"}],attrs:{\"type\":\"success\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.onAddFriend(user)}}},[_vm._v(\"添加\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isFriend(user.id)),expression:\"isFriend(user.id)\"}],attrs:{\"type\":\"info\",\"size\":\"mini\",\"plain\":\"\",\"disabled\":\"\"}},[_vm._v(\"已添加\")])],1)])}),0)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-dialog title=\"添加好友\" :visible.sync=\"dialogVisible\" width=\"400px\" :before-close=\"onClose\"\n\t\tcustom-class=\"add-friend-dialog\">\n\t\t<el-input placeholder=\"输入用户名或昵称按下enter搜索，最多展示20条\" class=\"input-with-select\" v-model=\"searchText\" size=\"small\"\n\t\t\t@keyup.enter.native=\"onSearch()\">\n\t\t\t<i class=\"el-icon-search el-input__icon\" slot=\"suffix\" @click=\"onSearch()\"> </i>\n\t\t</el-input>\n\t\t<el-scrollbar style=\"height:400px\">\n\t\t\t<div v-for=\"(user) in users\" :key=\"user.id\" v-show=\"user.id != $store.state.userStore.userInfo.id\">\n\t\t\t\t<div class=\"item\">\n\t\t\t\t\t<div class=\"avatar\">\n\t\t\t\t\t\t<head-image :name=\"user.nickName\" :url=\"user.headImage\" :online=\"user.online\"></head-image>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"add-friend-text\">\n\t\t\t\t\t\t<div class=\"nick-name\">\n\t\t\t\t\t\t\t<div>{{ user.nickName }}</div>\n\t\t\t\t\t\t\t<div :class=\"user.online ? 'online-status  online' : 'online-status'\">{{\n\t\t\t\t\t\t\t\tuser.online ? \"[在线]\" :\"[离线]\"}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"user-name\">\n\t\t\t\t\t\t\t<div>用户名:{{ user.userName }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<el-button type=\"success\" size=\"mini\" v-show=\"!isFriend(user.id)\"\n\t\t\t\t\t\t@click=\"onAddFriend(user)\">添加</el-button>\n\t\t\t\t\t<el-button type=\"info\" size=\"mini\" v-show=\"isFriend(user.id)\" plain disabled>已添加</el-button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</el-scrollbar>\n\t</el-dialog>\n</template>\n\n<script>\nimport HeadImage from '../common/HeadImage.vue'\n\n\nexport default {\n\tname: \"addFriend\",\n\tcomponents: { HeadImage },\n\tdata() {\n\t\treturn {\n\t\t\tusers: [],\n\t\t\tsearchText: \"\"\n\t\t}\n\t},\n\tprops: {\n\t\tdialogVisible: {\n\t\t\ttype: Boolean\n\t\t}\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.$emit(\"close\");\n\t\t},\n\t\tonSearch() {\n\t\t\tif (!this.searchText) {\n\t\t\t\tthis.users = [];\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$http({\n\t\t\t\turl: \"/user/findByName\",\n\t\t\t\tmethod: \"get\",\n\t\t\t\tparams: {\n\t\t\t\t\tname: this.searchText\n\t\t\t\t}\n\t\t\t}).then((data) => {\n\t\t\t\tthis.users = data;\n\t\t\t})\n\t\t},\n\t\tonAddFriend(user) {\n\t\t\tthis.$http({\n\t\t\t\turl: \"/friend/add\",\n\t\t\t\tmethod: \"post\",\n\t\t\t\tparams: {\n\t\t\t\t\tfriendId: user.id\n\t\t\t\t}\n\t\t\t}).then(() => {\n\t\t\t\tthis.$message.success(\"添加成功，对方已成为您的好友\");\n\t\t\t\tlet friend = {\n\t\t\t\t\tid: user.id,\n\t\t\t\t\tnickName: user.nickName,\n\t\t\t\t\theadImage: user.headImage,\n\t\t\t\t\tonline: user.online,\n\t\t\t\t\tdeleted: false\n\t\t\t\t}\n\t\t\t\tthis.$store.commit(\"addFriend\", friend);\n\t\t\t})\n\t\t},\n\t\tisFriend(userId) {\n\t\t\treturn this.$store.getters.isFriend(userId);\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.add-friend-dialog {\n\t.item {\n\t\theight: 65px;\n\t\tdisplay: flex;\n\t\tposition: relative;\n\t\tpadding-left: 15px;\n\t\talign-items: center;\n\t\tpadding-right: 25px;\n\n\t\t.add-friend-text {\n\t\t\tmargin-left: 15px;\n\t\t\tflex: 3;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\tflex-shrink: 0;\n\t\t\toverflow: hidden;\n\n\t\t\t.nick-name {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tfont-weight: 600;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tline-height: 25px;\n\n\t\t\t\t.online-status {\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\tfont-weight: 600;\n\n\t\t\t\t\t&.online {\n\t\t\t\t\t\tcolor: #5fb878;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.user-name {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-direction: row;\n\t\t\t\tfont-size: 12px;\n\t\t\t\tline-height: 20px;\n\t\t\t}\n\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddFriend.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddFriend.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AddFriend.vue?vue&type=template&id=3139e352\"\nimport script from \"./AddFriend.vue?vue&type=script&lang=js\"\nexport * from \"./AddFriend.vue?vue&type=script&lang=js\"\nimport style0 from \"./AddFriend.vue?vue&type=style&index=0&id=3139e352&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/21.ec8df612.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddFriend.vue?vue&type=style&index=0&id=3139e352&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/34.b4c0eba4.gif\";","module.exports = __webpack_public_path__ + \"img/48.20d1ce26.gif\";","module.exports = __webpack_public_path__ + \"img/28.52524722.gif\";","var map = {\n\t\"./0.gif\": \"f1c0\",\n\t\"./1.gif\": \"f320\",\n\t\"./10.gif\": \"d054\",\n\t\"./11.gif\": \"b1c1\",\n\t\"./12.gif\": \"4518\",\n\t\"./13.gif\": \"a79b\",\n\t\"./14.gif\": \"982d\",\n\t\"./15.gif\": \"6e1f\",\n\t\"./16.gif\": \"50a5\",\n\t\"./17.gif\": \"25a1\",\n\t\"./18.gif\": \"fd6e\",\n\t\"./19.gif\": \"32c6\",\n\t\"./2.gif\": \"34cb\",\n\t\"./20.gif\": \"d496\",\n\t\"./21.gif\": \"5f40\",\n\t\"./22.gif\": \"4fc8\",\n\t\"./23.gif\": \"f5d6\",\n\t\"./24.gif\": \"058c\",\n\t\"./25.gif\": \"3854\",\n\t\"./26.gif\": \"7a13\",\n\t\"./27.gif\": \"36a47\",\n\t\"./28.gif\": \"6318\",\n\t\"./29.gif\": \"df98\",\n\t\"./3.gif\": \"d370\",\n\t\"./30.gif\": \"5541\",\n\t\"./31.gif\": \"8bb4\",\n\t\"./32.gif\": \"cd82\",\n\t\"./33.gif\": \"8e89\",\n\t\"./34.gif\": \"6047\",\n\t\"./35.gif\": \"7e0f\",\n\t\"./36.gif\": \"846c\",\n\t\"./37.gif\": \"8959\",\n\t\"./38.gif\": \"ba6e\",\n\t\"./39.gif\": \"5347\",\n\t\"./4.gif\": \"3dfc\",\n\t\"./40.gif\": \"1a8f\",\n\t\"./41.gif\": \"3d2d\",\n\t\"./42.gif\": \"6430\",\n\t\"./43.gif\": \"a4d0\",\n\t\"./44.gif\": \"680b\",\n\t\"./45.gif\": \"829b\",\n\t\"./46.gif\": \"9aeb\",\n\t\"./47.gif\": \"37bf\",\n\t\"./48.gif\": \"61f2\",\n\t\"./49.gif\": \"b59b\",\n\t\"./5.gif\": \"28f3\",\n\t\"./50.gif\": \"e715\",\n\t\"./51.gif\": \"e0c4\",\n\t\"./52.gif\": \"4d66\",\n\t\"./53.gif\": \"7a4c\",\n\t\"./54.gif\": \"7449\",\n\t\"./55.gif\": \"9216\",\n\t\"./56.gif\": \"e769\",\n\t\"./6.gif\": \"81f6\",\n\t\"./7.gif\": \"ef96\",\n\t\"./8.gif\": \"0abc\",\n\t\"./9.gif\": \"3f29\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"642d\";","module.exports = __webpack_public_path__ + \"img/42.02d062c5.gif\";","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"icp\"},[_c('img',{staticClass:\"icp-icon\",attrs:{\"src\":require(\"../../assets/image/icp_logo.png\")}}),_c('a',{attrs:{\"target\":\"_blank\",\"href\":\"https://beian.miit.gov.cn/\"}},[_vm._v(\"粤ICP备xxxx号-1\")])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-drawer',{attrs:{\"title\":\"聊天历史记录\",\"size\":\"700px\",\"visible\":_vm.visible,\"direction\":\"rtl\",\"before-close\":_vm.onClose},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"chat-history\",attrs:{\"element-loading-text\":\"拼命加载中\"}},[_c('el-scrollbar',{ref:\"scrollbar\",staticClass:\"chat-history-scrollbar\",attrs:{\"id\":\"historyScrollbar\"}},[_c('ul',_vm._l((_vm.messages),function(msgInfo,idx){return _c('li',{key:`history-${msgInfo.id || idx}-${msgInfo.sendTime || idx}`},[_c('chat-message-item',{attrs:{\"mode\":2,\"mine\":msgInfo.sendId == _vm.mine.id,\"headImage\":_vm.headImage(msgInfo),\"showName\":_vm.showName(msgInfo),\"msgInfo\":msgInfo,\"menu\":false}})],1)}),0)])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-drawer title=\"聊天历史记录\" size=\"700px\" :visible.sync=\"visible\" direction=\"rtl\" :before-close=\"onClose\">\n\t\t<div class=\"chat-history\" v-loading=\"loading\" element-loading-text=\"拼命加载中\">\n\t\t\t<el-scrollbar class=\"chat-history-scrollbar\" ref=\"scrollbar\" id=\"historyScrollbar\">\n\t\t\t\t<ul>\n\t\t\t\t\t<li v-for=\"(msgInfo, idx) in messages\" :key=\"`history-${msgInfo.id || idx}-${msgInfo.sendTime || idx}`\">\n\t\t\t\t\t\t<chat-message-item :mode=\"2\" :mine=\"msgInfo.sendId == mine.id\" :headImage=\"headImage(msgInfo)\"\n\t\t\t\t\t\t\t:showName=\"showName(msgInfo)\" :msgInfo=\"msgInfo\" :menu=\"false\">\n\t\t\t\t\t\t</chat-message-item>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</el-scrollbar>\n\t\t</div>\n\t</el-drawer>\n</template>\n\n<script>\nimport ChatMessageItem from './ChatMessageItem.vue';\n\nexport default {\n\tname: 'chatHistory',\n\tcomponents: {\n\t\tChatMessageItem\n\t},\n\tprops: {\n\t\tvisible: {\n\t\t\ttype: Boolean\n\t\t},\n\t\tchat: {\n\t\t\ttype: Object\n\t\t},\n\t\tfriend: {\n\t\t\ttype: Object\n\t\t},\n\t\tgroup: {\n\t\t\ttype: Object\n\t\t},\n\t\tgroupMembers: {\n\t\t\ttype: Array,\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tpage: 1,\n\t\t\tsize: 10,\n\t\t\tmessages: [],\n\t\t\tloadAll: false,\n\t\t\tloading: false,\n\t\t\tlastScrollTime: new Date()\n\t\t}\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\tthis.page = 1;\n\t\t\tthis.messages = [];\n\t\t\tthis.loadAll = false;\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tonScroll() {\n\t\t\tlet high = this.$refs.scrollbar.$refs.wrap.scrollTop; //距离顶部的距离\n\t\t\tlet timeDiff = new Date().getTime() - this.lastScrollTime.getTime();\n\t\t\tif (high < 30 && timeDiff > 500) {\n\t\t\t\tthis.lastScrollTime = new Date();\n\t\t\t\tthis.loadMessages();\n\n\t\t\t}\n\t\t},\n\t\tloadMessages() {\n\t\t\tif (this.loadAll) {\n\t\t\t\treturn this.$message.success(\"已到达顶部\");\n\t\t\t}\n\t\t\tlet param = {\n\t\t\t\tpage: this.page++,\n\t\t\t\tsize: this.size\n\t\t\t}\n\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\tparam.groupId = this.group.id;\n\t\t\t} else {\n\t\t\t\tparam.friendId = this.friend.id;\n\t\t\t}\n\t\t\tthis.loading = true;\n\t\t\tthis.$http({\n\t\t\t\turl: this.histroyAction,\n\t\t\t\tmethod: 'get',\n\t\t\t\tparams: param\n\t\t\t}).then(messages => {\n\t\t\t\tmessages.forEach(m => this.messages.unshift(m));\n\t\t\t\tthis.loading = false;\n\t\t\t\tif (messages.length < this.size) {\n\t\t\t\t\tthis.loadAll = true;\n\t\t\t\t}\n\t\t\t\tthis.refreshScrollPos();\n\t\t\t}).catch(() => {\n\t\t\t\tthis.loading = false;\n\t\t\t})\n\t\t},\n\t\tshowName(msgInfo) {\n\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\treturn member ? member.showNickName : \"\";\n\t\t\t} else {\n\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.nickName : this.chat.showName\n\t\t\t}\n\t\t},\n\t\theadImage(msgInfo) {\n\t\t\tif (this.chat.type == 'GROUP') {\n\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\treturn member ? member.headImage : \"\";\n\t\t\t} else {\n\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.headImageThumb : this.chat.headImage\n\t\t\t}\n\t\t},\n\t\trefreshScrollPos() {\n\t\t\tlet scrollWrap = this.$refs.scrollbar.$refs.wrap;\n\t\t\tlet scrollHeight = scrollWrap.scrollHeight;\n\t\t\tlet scrollTop = scrollWrap.scrollTop;\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tlet offsetTop = scrollWrap.scrollHeight - scrollHeight;\n\t\t\t\tscrollWrap.scrollTop = scrollTop + offsetTop;\n\t\t\t\t// 滚动条没出来，继续加载\n\t\t\t\tif (scrollWrap.scrollHeight == scrollHeight) {\n\t\t\t\t\tthis.loadMessages();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\tcomputed: {\n\t\tmine() {\n\t\t\treturn this.$store.state.userStore.userInfo;\n\t\t},\n\t\thistroyAction() {\n\t\t\treturn `/message/${this.chat.type.toLowerCase()}/history`;\n\t\t}\n\t},\n\twatch: {\n\t\tvisible: {\n\t\t\thandler(newValue, oldValue) {\n\t\t\t\tif (newValue) {\n\t\t\t\t\tthis.loadMessages();\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tdocument.getElementById('historyScrollbar').addEventListener(\"mousewheel\", this.onScroll, true);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.chat-history {\n\tdisplay: flex;\n\theight: 100%;\n\n\t.chat-history-scrollbar {\n\t\tflex: 1;\n\n\t\t.el-scrollbar__thumb {\n\t\t\tbackground-color: #555555;\n\t\t}\n\n\t\tul {\n\t\t\tpadding: 20px;\n\n\t\t\tli {\n\t\t\t\tlist-style-type: none;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHistory.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHistory.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatHistory.vue?vue&type=template&id=16d82de5\"\nimport script from \"./ChatHistory.vue?vue&type=script&lang=js\"\nexport * from \"./ChatHistory.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatHistory.vue?vue&type=style&index=0&id=16d82de5&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Setting.vue?vue&type=style&index=0&id=8608c2fe&prod&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"unified-message-renderer\"},[(!_vm.enableMarkdown)?_c('div',{staticClass:\"message-text\",domProps:{\"innerHTML\":_vm._s(_vm.processedTextContent)}}):_c('div',{staticClass:\"message-markdown\"},[_c('markdown-renderer',{ref:\"markdownRenderer\",attrs:{\"content\":_vm.displayContent,\"enable-katex\":_vm.rendererConfig.katex,\"enable-mermaid\":_vm.rendererConfig.mermaid,\"enable-highlight\":_vm.rendererConfig.highlight,\"streaming\":_vm.streaming},on:{\"rendered\":_vm.onRendered}})],1),(_vm.showEnhancements)?_c('div',{staticClass:\"message-enhancements\"},[_vm._t(\"enhancements\")],2):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"unified-message-renderer\">\n    <!-- 纯文本消息 -->\n    <div v-if=\"!enableMarkdown\" class=\"message-text\" v-html=\"processedTextContent\"></div>\n    \n    <!-- Markdown 渲染内容 -->\n    <div v-else class=\"message-markdown\">\n      <!-- 使用自定义的 Markdown 渲染器 -->\n      <markdown-renderer\n        ref=\"markdownRenderer\"\n        :content=\"displayContent\"\n        :enable-katex=\"rendererConfig.katex\"\n        :enable-mermaid=\"rendererConfig.mermaid\"\n        :enable-highlight=\"rendererConfig.highlight\"\n        :streaming=\"streaming\"\n        @rendered=\"onRendered\"\n      />\n    </div>\n    \n    <!-- 代码复制按钮等增强功能 -->\n    <div v-if=\"showEnhancements\" class=\"message-enhancements\">\n      <slot name=\"enhancements\"></slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport MarkdownRenderer from './renderers/MarkdownRenderer.vue';\nimport MessageTypeAdapter from './MessageTypeAdapter';\n\nexport default {\n  name: 'UnifiedMessageRenderer',\n  \n  components: {\n    MarkdownRenderer\n  },\n  \n  props: {\n    // 消息对象\n    message: {\n      type: Object,\n      required: true\n    },\n    \n    // 是否正在流式传输\n    streaming: {\n      type: Boolean,\n      default: false\n    },\n    \n    // 强制使用的格式\n    forceFormat: {\n      type: String,\n      default: null\n    },\n    \n    // 是否显示增强功能\n    showEnhancements: {\n      type: Boolean,\n      default: true\n    },\n    \n    // 自定义配置\n    customConfig: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  \n  data() {\n    return {\n      // 内部内容缓存（用于流式更新）\n      internalContent: '',\n      // 渲染完成标记\n      renderComplete: false\n    };\n  },\n  \n  computed: {\n    // 适配后的消息\n    adaptedMessage() {\n      return MessageTypeAdapter.adapt(this.message);\n    },\n    \n    // 消息类型\n    messageType() {\n      if (this.forceFormat) {\n        return this.forceFormat;\n      }\n      \n      // 智能体消息默认使用 markdown\n      if (this.adaptedMessage.type === 'AGENT' || this.adaptedMessage.isAgent) {\n        return 'markdown';\n      }\n      \n      // 检查消息格式字段\n      if (this.adaptedMessage.format === 'markdown') {\n        return 'markdown';\n      }\n      \n      // 流式消息\n      if (this.adaptedMessage.streaming || this.streaming) {\n        return 'streaming';\n      }\n      \n      // 检测内容是否包含 Markdown 语法\n      if (this.hasMarkdownSyntax(this.adaptedMessage.content)) {\n        return 'markdown';\n      }\n      \n      return 'text';\n    },\n    \n    // 是否启用 Markdown 渲染\n    enableMarkdown() {\n      return this.messageType !== 'text';\n    },\n    \n    // 显示的内容\n    displayContent() {\n      return this.streaming ? this.internalContent : (this.adaptedMessage.content || '');\n    },\n    \n    // 处理后的文本内容（用于纯文本显示）\n    processedTextContent() {\n      let content = this.displayContent;\n      \n      // 转换换行符为 <br>\n      content = content.replace(/\\n/g, '<br>');\n      \n      // 处理链接\n      content = content.replace(\n        /(https?:\\/\\/[^\\s<]+)/g,\n        '<a href=\"$1\" target=\"_blank\" rel=\"noopener\">$1</a>'\n      );\n      \n      return content;\n    },\n    \n    // 渲染器配置\n    rendererConfig() {\n      const defaultConfig = {\n        markdown: this.enableMarkdown,\n        katex: false,\n        mermaid: false,\n        highlight: true\n      };\n      \n      // 根据消息类型自动配置\n      if (this.adaptedMessage.features) {\n        Object.assign(defaultConfig, this.adaptedMessage.features);\n      }\n      \n      // 智能检测内容特征\n      const content = this.displayContent;\n      if (content) {\n        defaultConfig.katex = this.hasLatex(content);\n        defaultConfig.mermaid = this.hasMermaid(content);\n        defaultConfig.highlight = this.hasCodeBlock(content);\n      }\n      \n      // 应用自定义配置\n      return Object.assign(defaultConfig, this.customConfig);\n    }\n  },\n  \n  watch: {\n    'message.content': {\n      handler(newContent) {\n        if (!this.streaming) {\n          this.internalContent = newContent || '';\n        }\n      },\n      immediate: true\n    }\n  },\n  \n  methods: {\n    // 检测是否包含 Markdown 语法\n    hasMarkdownSyntax(content) {\n      if (!content) return false;\n      \n      // 检测常见的 Markdown 语法\n      const patterns = [\n        /^#{1,6}\\s/m,           // 标题\n        /\\*\\*[^*]+\\*\\*/,        // 粗体\n        /\\*[^*]+\\*/,            // 斜体\n        /```[\\s\\S]*?```/,       // 代码块\n        /`[^`]+`/,              // 行内代码\n        /^\\s*[-*+]\\s/m,         // 无序列表\n        /^\\s*\\d+\\.\\s/m,         // 有序列表\n        /\\[([^\\]]+)\\]\\(([^)]+)\\)/, // 链接\n        /^\\|.*\\|$/m,            // 表格\n        /^>/m                   // 引用\n      ];\n      \n      return patterns.some(pattern => pattern.test(content));\n    },\n    \n    // 检测是否包含 LaTeX 公式\n    hasLatex(content) {\n      if (!content) return false;\n      // 检测 $ ... $ 或 $$ ... $$ 或 \\[ ... \\] 或 \\( ... \\)\n      return /\\$[^$]+\\$|\\$\\$[\\s\\S]+?\\$\\$|\\\\\\[[\\s\\S]+?\\\\\\]|\\\\\\([\\s\\S]+?\\\\\\)/.test(content);\n    },\n    \n    // 检测是否包含 Mermaid 图表\n    hasMermaid(content) {\n      if (!content) return false;\n      return /```mermaid[\\s\\S]*?```/.test(content);\n    },\n    \n    // 检测是否包含代码块\n    hasCodeBlock(content) {\n      if (!content) return false;\n      return /```[\\s\\S]*?```/.test(content);\n    },\n    \n    // 追加流式内容\n    appendContent(chunk) {\n      if (this.streaming) {\n        this.internalContent += chunk;\n        \n        // 通知 Markdown 渲染器更新\n        if (this.$refs.markdownRenderer) {\n          this.$refs.markdownRenderer.updateContent(this.internalContent);\n        }\n      }\n    },\n    \n    // 设置完整内容（用于流式结束）\n    setContent(content) {\n      this.internalContent = content;\n      if (this.$refs.markdownRenderer) {\n        this.$refs.markdownRenderer.updateContent(content);\n      }\n    },\n    \n    // 完成流式传输\n    finishStreaming() {\n      if (this.$refs.markdownRenderer) {\n        this.$refs.markdownRenderer.finishStreaming();\n      }\n    },\n    \n    // 渲染完成回调\n    onRendered() {\n      this.renderComplete = true;\n      this.$emit('rendered');\n    },\n    \n    // 获取渲染后的HTML（用于导出等）\n    getRenderedHTML() {\n      if (this.$refs.markdownRenderer) {\n        return this.$refs.markdownRenderer.getRenderedHTML();\n      }\n      return this.processedTextContent;\n    }\n  },\n  \n  mounted() {\n    // 初始化内容\n    if (this.message.content) {\n      this.internalContent = this.message.content;\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.unified-message-renderer {\n  // 使用CSS变量保持主题一致性\n  --msg-text-color: var(--im-text-primary, #333);\n  --msg-bg-color: var(--im-bg-primary, #fff);\n  --msg-link-color: var(--im-link-color, #0066cc);\n  --msg-code-bg: var(--im-code-bg, #f6f8fa);\n  --msg-code-color: var(--im-code-color, #032f62);\n  --msg-border-color: var(--im-border-color, #e1e4e8);\n  \n  color: var(--msg-text-color);\n  font-size: 14px;\n  line-height: 1.6;\n  word-break: break-word;\n  \n  // 纯文本样式\n  .message-text {\n    white-space: pre-wrap;\n    \n    ::v-deep a {\n      color: var(--msg-link-color);\n      text-decoration: none;\n      \n      &:hover {\n        text-decoration: underline;\n      }\n    }\n  }\n  \n  // Markdown 容器样式\n  .message-markdown {\n    // 样式将在 MarkdownRenderer 组件中定义\n  }\n  \n  // 增强功能区域\n  .message-enhancements {\n    margin-top: 8px;\n    padding-top: 8px;\n    border-top: 1px solid var(--msg-border-color);\n  }\n}\n\n// 暗色主题支持\n@media (prefers-color-scheme: dark) {\n  .unified-message-renderer {\n    --msg-text-color: #e1e4e8;\n    --msg-bg-color: #0d1117;\n    --msg-link-color: #58a6ff;\n    --msg-code-bg: #161b22;\n    --msg-code-color: #79c0ff;\n    --msg-border-color: #30363d;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnifiedMessageRenderer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UnifiedMessageRenderer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./UnifiedMessageRenderer.vue?vue&type=template&id=09d3c536&scoped=true\"\nimport script from \"./UnifiedMessageRenderer.vue?vue&type=script&lang=js\"\nexport * from \"./UnifiedMessageRenderer.vue?vue&type=script&lang=js\"\nimport style0 from \"./UnifiedMessageRenderer.vue?vue&type=style&index=0&id=09d3c536&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"09d3c536\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"group-item\",class:_vm.active ? 'active' : ''},[_c('div',{staticClass:\"group-avatar\"},[_c('head-image',{attrs:{\"size\":42,\"name\":_vm.group.showGroupName,\"url\":_vm.group.headImage}})],1),_c('div',{staticClass:\"group-name\"},[_c('div',[_vm._v(_vm._s(_vm.group.showGroupName))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"group-item\" :class=\"active ? 'active' : ''\">\n\t\t<div class=\"group-avatar\">\n\t\t\t<head-image :size=\"42\" :name=\"group.showGroupName\" :url=\"group.headImage\"> </head-image>\n\t\t</div>\n\t\t<div class=\"group-name\">\n\t\t\t<div>{{ group.showGroupName }}</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\nimport HeadImage from '../common/HeadImage.vue';\n\nexport default {\n\tname: \"groupItem\",\n\tcomponents: {\n\t\tHeadImage\n\t},\n\tdata() {\n\t\treturn {}\n\t},\n\tprops: {\n\t\tgroup: {\n\t\t\ttype: Object\n\t\t},\n\t\tactive: {\n\t\t\ttype: Boolean\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.group-item {\n\theight: 50px;\n\tdisplay: flex;\n\tposition: relative;\n\tpadding: 5px 10px;\n\talign-items: center;\n\twhite-space: nowrap;\n\tcursor: pointer;\n\n\t&:hover {\n\t\tbackground-color: var(--im-background-active);\n\t}\n\n\t&.active {\n\t\tbackground-color: var(--im-background-active-dark);\n\t}\n\n\t.group-name {\n\t\tpadding-left: 10px;\n\t\theight: 100%;\n\t\ttext-align: left;\n\t\tline-height: 50px;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\tfont-size: var(--im-font-size);\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupItem.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupItem.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./GroupItem.vue?vue&type=template&id=502d6557\"\nimport script from \"./GroupItem.vue?vue&type=script&lang=js\"\nexport * from \"./GroupItem.vue?vue&type=script&lang=js\"\nimport style0 from \"./GroupItem.vue?vue&type=style&index=0&id=502d6557&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/44.00ef8c19.gif\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Inbox.vue?vue&type=style&index=0&id=0d72d2a6&prod&scoped=true&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-box\",on:{\"click\":function($event){return _vm.closeRefBox()},\"mousemove\":function($event){return _vm.readedMessage()}}},[_c('el-container',[_c('el-header',{staticClass:\"chat-header\",attrs:{\"height\":\"50px\"}},[_c('div',{staticClass:\"chat-title\"},[(_vm.currentAgentChat)?[_c('span',{staticClass:\"parent-name clickable\",attrs:{\"title\":\"点击返回父级对话\"},on:{\"click\":_vm.returnToParentChat}},[_vm._v(\" \"+_vm._s(_vm.parentChatName)+\" \")]),_c('span',{staticClass:\"layer-separator\"},[_vm._v(\"›\")]),_c('span',{staticClass:\"agent-name\"},[_vm._v(_vm._s(_vm.currentAgentChat.agentName))])]:[_vm._v(\" \"+_vm._s(_vm.title)+\" \")]],2),_c('div',{staticClass:\"header-right\"},[(_vm.recentAgents.length > 0)?_c('div',{staticClass:\"agent-avatars-container\",class:{ collapsed: _vm.showSide || _vm.showAgentSide }},[_c('div',{staticClass:\"agent-avatars-animated\",class:{ expanded: _vm.avatarsExpanded },style:({ '--avatar-count': Math.min(_vm.recentAgents.length, 5) }),on:{\"mouseenter\":_vm.expandAvatars,\"mouseleave\":_vm.collapseAvatars}},_vm._l((_vm.recentAgents.slice(0, Math.min(_vm.recentAgents.length - 1, 4))),function(agent,index){return _c('div',{key:agent.id,staticClass:\"agent-avatar-mini\",style:({ '--avatar-index': index }),on:{\"mouseenter\":function($event){return _vm.handleAvatarMouseEnter(agent, $event)},\"mouseleave\":_vm.hideAgentCard,\"click\":function($event){return _vm.quickStartAgentChat(agent)}}},[(agent.avatar)?_c('img',{attrs:{\"src\":agent.avatar,\"alt\":agent.name}}):_c('div',{staticClass:\"agent-avatar-text\"},[_vm._v(_vm._s(agent.name.charAt(0)))])])}),0),_c('div',{staticClass:\"agent-avatar-fixed\",on:{\"mouseenter\":_vm.expandAvatars,\"mouseleave\":_vm.collapseAvatars}},[_c('div',{staticClass:\"agent-avatar-mini\",on:{\"mouseenter\":function($event){_vm.handleAvatarMouseEnter(_vm.recentAgents[Math.min(_vm.recentAgents.length - 1, 4)], $event)},\"mouseleave\":_vm.hideAgentCard,\"click\":function($event){_vm.quickStartAgentChat(_vm.recentAgents[Math.min(_vm.recentAgents.length - 1, 4)])}}},[(_vm.recentAgents[Math.min(_vm.recentAgents.length - 1, 4)].avatar)?_c('img',{attrs:{\"src\":_vm.recentAgents[Math.min(_vm.recentAgents.length - 1, 4)].avatar,\"alt\":_vm.recentAgents[Math.min(_vm.recentAgents.length - 1, 4)].name}}):_c('div',{staticClass:\"agent-avatar-text\"},[_vm._v(\" \"+_vm._s(_vm.recentAgents[Math.min(_vm.recentAgents.length - 1, 4)].name.charAt(0))+\" \")])])])]):_vm._e(),_c('i',{staticClass:\"el-icon-more header-btn\",attrs:{\"title\":\"更多\"},on:{\"click\":_vm.toggleSidePanel}})])]),(_vm.hoveredAgentCard)?_c('div',{staticClass:\"agent-hover-panel\",style:(_vm.agentCardStyle),on:{\"mouseenter\":_vm.onPanelEnter,\"mouseleave\":_vm.onPanelLeave}},[_c('div',{staticClass:\"panel-arrow\"}),_c('chat-agent-card',{attrs:{\"agent\":_vm.hoveredAgentCard.agent,\"show-actions\":true},on:{\"start-chat\":_vm.quickStartAgentChat}})],1):_vm._e(),_c('el-main',{staticStyle:{\"padding\":\"0\"}},[_c('el-container',[_c('el-container',{staticClass:\"content-box\"},[_c('el-main',{staticClass:\"im-chat-main\",attrs:{\"id\":\"chatScrollBox\"},on:{\"scroll\":_vm.onScroll}},[_c('div',{staticClass:\"im-chat-box\"},[(_vm.currentAgentChat && false)?_c('div',{staticStyle:{\"position\":\"fixed\",\"top\":\"100px\",\"right\":\"10px\",\"width\":\"300px\",\"background\":\"yellow\",\"z-index\":\"9999\",\"padding\":\"10px\",\"border\":\"2px solid red\"}},[_c('p',[_vm._v(\"调试面板：有\"+_vm._s(_vm.displayMessages.length)+\"条消息\")]),_vm._l((_vm.displayMessages),function(msg,i){return _c('div',{key:`debug-${i}`},[_c('p',[_vm._v(\"消息\"+_vm._s(i)+\": \"+_vm._s(msg.selfSend ? '我' : '智能体')+\" - \"+_vm._s(msg.content?.substring(0, 30)))])])})],2):_vm._e(),_c('ul',[(_vm.currentAgentChat)?_vm._l((_vm.displayMessages),function(msgInfo,idx){return _c('li',{key:msgInfo.tmpId || msgInfo.id || `agent-${idx}`},[_c('chat-message-item',{attrs:{\"mine\":_vm.isMineMessage(msgInfo),\"headImage\":_vm.headImage(msgInfo) || '',\"showName\":_vm.showName(msgInfo) || '未知',\"msgInfo\":msgInfo,\"groupMembers\":[]},on:{\"call\":function($event){return _vm.onCall(msgInfo.type)},\"delete\":_vm.deleteMessage,\"recall\":_vm.recallMessage}})],1)}):_vm._l((_vm.displayMessages),function(msgInfo,idx){return _c('li',{key:msgInfo.tmpId || msgInfo.id || idx},[(msgInfo.type === 'llm-stream' && idx >= _vm.showMinIdx)?_c('LLMStreamMessage',{ref:`llm-stream-${msgInfo.streamId}`,refInFor:true,attrs:{\"stream-id\":msgInfo.streamId,\"mine\":_vm.isMineMessage(msgInfo),\"head-image\":_vm.headImage(msgInfo),\"show-name\":_vm.showName(msgInfo),\"msg-info\":msgInfo},on:{\"completed\":_vm.onLLMStreamCompleted,\"error\":_vm.onLLMStreamError,\"need-scroll\":_vm.scrollToBottom}}):(idx >= _vm.showMinIdx)?_c('chat-message-item',{attrs:{\"mine\":_vm.isMineMessage(msgInfo),\"headImage\":_vm.headImage(msgInfo),\"showName\":_vm.showName(msgInfo),\"msgInfo\":msgInfo,\"groupMembers\":_vm.groupMembers},on:{\"call\":function($event){return _vm.onCall(msgInfo.type)},\"delete\":_vm.deleteMessage,\"recall\":_vm.recallMessage}}):_vm._e()],1)})],2)])]),_c('el-footer',{staticClass:\"im-chat-footer\",attrs:{\"height\":\"220px\"}},[_c('div',{staticClass:\"chat-tool-bar\"},[_c('div',{ref:\"emotion\",staticClass:\"icon iconfont icon-emoji\",attrs:{\"title\":\"表情\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showEmotionBox()}}}),_c('div',{attrs:{\"title\":\"发送图片\"}},[_c('file-upload',{attrs:{\"action\":'/image/upload',\"maxSize\":100 * 1024 * 1024,\"fileTypes\":['image/jpeg', 'image/png', 'image/jpg', 'image/webp', 'image/gif']},on:{\"before\":_vm.onImageBefore,\"success\":_vm.onImageSuccess,\"fail\":_vm.onImageFail}},[_c('i',{staticClass:\"el-icon-picture-outline\"})])],1),_c('div',{attrs:{\"title\":\"发送文件\"}},[_c('file-upload',{ref:\"fileUpload\",attrs:{\"action\":'/file/upload',\"maxSize\":10 * 1024 * 1024},on:{\"before\":_vm.onFileBefore,\"success\":_vm.onFileSuccess,\"fail\":_vm.onFileFail}},[_c('i',{staticClass:\"el-icon-wallet\"})])],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isGroup && _vm.memberSize <= 500),expression:\"isGroup && memberSize <= 500\"}],staticClass:\"icon iconfont icon-receipt\",class:_vm.isReceipt ? 'chat-tool-active' : '',attrs:{\"title\":\"回执消息\"},on:{\"click\":_vm.onSwitchReceipt}}),_c('div',{staticClass:\"el-icon-microphone\",attrs:{\"title\":\"发送语音\"},on:{\"click\":function($event){return _vm.showRecordBox()}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isPrivate),expression:\"isPrivate\"}],staticClass:\"el-icon-phone-outline\",attrs:{\"title\":\"语音通话\"},on:{\"click\":function($event){return _vm.showPrivateVideo('voice')}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isGroup),expression:\"isGroup\"}],staticClass:\"el-icon-phone-outline\",attrs:{\"title\":\"语音通话\"},on:{\"click\":function($event){return _vm.onGroupVideo()}}}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isPrivate),expression:\"isPrivate\"}],staticClass:\"el-icon-video-camera\",attrs:{\"title\":\"视频通话\"},on:{\"click\":function($event){return _vm.showPrivateVideo('video')}}}),_c('div',{staticClass:\"el-icon-chat-dot-round\",attrs:{\"title\":\"聊天记录\"},on:{\"click\":function($event){return _vm.showHistoryBox()}}})]),_c('div',{staticClass:\"send-content-area\"},[_c('ChatInput',{ref:\"chatInput\",attrs:{\"ownerId\":_vm.chat.type === 'GROUP' ? (_vm.group.ownerId || _vm.mine.id) : _vm.mine.id,\"targetUserId\":_vm.chat.type === 'PRIVATE' ? _vm.chat.targetId : null,\"group-members\":_vm.groupMembers},on:{\"submit\":_vm.sendMessage}}),_c('div',{staticClass:\"send-btn-area\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-s-promotion\"},on:{\"click\":function($event){return _vm.notifySend()}}},[_vm._v(\"发送\")])],1)],1)])],1),(_vm.showSide || _vm.showAgentSide)?_c('el-aside',{staticClass:\"chat-side-panel\",attrs:{\"width\":\"320px\"}},[(_vm.chat.type === 'GROUP' && _vm.showSide)?[_c('el-tabs',{staticClass:\"side-tabs\",attrs:{\"type\":\"card\"},model:{value:(_vm.activeSideTab),callback:function ($$v) {_vm.activeSideTab=$$v},expression:\"activeSideTab\"}},[_c('el-tab-pane',{attrs:{\"label\":\"智能体\",\"name\":\"agents\"}},[_c('chat-agent-side',{attrs:{\"chat\":_vm.chat,\"group\":_vm.group,\"groupMembers\":_vm.groupMembers},on:{\"start-agent-chat\":_vm.startAgentChat,\"edit-agent\":_vm.editAgent}})],1),_c('el-tab-pane',{attrs:{\"label\":\"群成员\",\"name\":\"members\"}},[_c('chat-group-side',{attrs:{\"group\":_vm.group,\"groupMembers\":_vm.groupMembers},on:{\"reload\":function($event){return _vm.loadGroup(_vm.group.id)}}})],1)],1)]:(_vm.showAgentSide)?[_c('chat-agent-side',{attrs:{\"chat\":_vm.chat,\"group\":_vm.group,\"groupMembers\":_vm.groupMembers},on:{\"start-agent-chat\":_vm.startAgentChat,\"edit-agent\":_vm.editAgent}})]:_vm._e()],2):_vm._e()],1)],1),_c('emotion',{ref:\"emoBox\",on:{\"emotion\":_vm.onEmotion}}),_c('chat-record',{attrs:{\"visible\":_vm.showRecord},on:{\"close\":_vm.closeRecordBox,\"send\":_vm.onSendRecord}}),_c('group-member-selector',{ref:\"rtcSel\",attrs:{\"group\":_vm.group},on:{\"complete\":_vm.onInviteOk}}),_c('rtc-group-join',{ref:\"rtcJoin\",attrs:{\"groupId\":_vm.group.id}}),_c('chat-history',{attrs:{\"visible\":_vm.showHistory,\"chat\":_vm.chat,\"friend\":_vm.friend,\"group\":_vm.group,\"groupMembers\":_vm.groupMembers},on:{\"close\":_vm.closeHistoryBox}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-agent-side\"},[_c('div',{staticClass:\"agent-side-search\"},[_c('el-input',{attrs:{\"placeholder\":\"搜索智能体\",\"size\":\"small\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('div',{staticClass:\"agent-side-scrollbar\"},[_c('el-scrollbar',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"height\":\"100%\"},attrs:{\"element-loading-text\":\"加载中...\"}},[_c('div',{staticClass:\"agent-side-list\"},[(_vm.filteredMyAgents.length > 0)?_c('div',{staticClass:\"agent-section\"},[_c('div',{staticClass:\"section-title\"},[_vm._v(_vm._s(_vm.agentSectionTitle))]),_vm._l((_vm.filteredMyAgents),function(agent){return _c('div',{key:agent.id},[_c('chat-agent-member',{staticClass:\"agent-side-member\",attrs:{\"agent\":agent,\"active\":_vm.selectedAgent?.id === agent.id},on:{\"start-chat\":_vm.handleStartChat},nativeOn:{\"click\":function($event){return _vm.selectAgent(agent)}}})],1)})],2):_vm._e(),(_vm.filteredSharedAgents.length > 0)?_c('div',{staticClass:\"agent-section\"},[_c('div',{staticClass:\"section-title\"},[_vm._v(\"共享智能体\")]),_vm._l((_vm.filteredSharedAgents),function(agent){return _c('div',{key:agent.id},[_c('chat-agent-member',{staticClass:\"agent-side-member\",attrs:{\"agent\":agent,\"active\":_vm.selectedAgent?.id === agent.id},on:{\"start-chat\":_vm.handleStartChat},nativeOn:{\"click\":function($event){return _vm.selectAgent(agent)}}})],1)})],2):_vm._e(),(!_vm.loading && _vm.filteredMyAgents.length === 0 && _vm.filteredSharedAgents.length === 0)?_c('div',{staticClass:\"empty-state\"},[_c('i',{staticClass:\"el-icon-user\"}),_c('p',[_vm._v(\"暂无可用智能体\")]),_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"text\"},on:{\"click\":_vm.refreshAgents}},[_vm._v(\"刷新\")])],1):_vm._e()])])],1),(_vm.selectedAgent)?_c('div',{staticClass:\"agent-detail-panel\"},[_c('el-divider',{attrs:{\"content-position\":\"center\"}},[_vm._v(\"智能体信息\")]),_c('el-form',{attrs:{\"label-position\":\"top\",\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"名称\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.selectedAgent.name),callback:function ($$v) {_vm.$set(_vm.selectedAgent, \"name\", $$v)},expression:\"selectedAgent.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"描述\"}},[_c('el-input',{attrs:{\"disabled\":\"\",\"type\":\"textarea\",\"rows\":3},model:{value:(_vm.selectedAgent.roleDescription),callback:function ($$v) {_vm.$set(_vm.selectedAgent, \"roleDescription\", $$v)},expression:\"selectedAgent.roleDescription\"}})],1),_c('el-form-item',{attrs:{\"label\":\"状态\"}},[_c('el-tag',{attrs:{\"type\":_vm.getStatusTagType(_vm.selectedAgent.status),\"size\":\"small\"}},[_vm._v(\" \"+_vm._s(_vm.getStatusText(_vm.selectedAgent.status))+\" \")])],1),_c('div',{staticClass:\"btn-group\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\",\"disabled\":_vm.selectedAgent.status !== 'online'},on:{\"click\":_vm.startAgentChat}},[_vm._v(\" 开始对话 \")]),(_vm.canManageAgent)?_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.editAgent}},[_vm._v(\"编辑\")]):_vm._e()],1)],1)],1):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-agent-member\",class:{ active: _vm.active, disabled: !_vm.isAvailable },on:{\"dblclick\":_vm.startChat}},[_c('div',{staticClass:\"agent-avatar\"},[_c('div',{staticClass:\"avatar-container\"},[_c('head-image',{style:({ borderRadius: '50%', border: '3px solid white' }),attrs:{\"size\":48,\"name\":_vm.agent.name,\"url\":_vm.agent.avatar}}),_c('div',{staticClass:\"status-indicators\"},[_c('div',{staticClass:\"status-primary\",class:_vm.primaryStatusClass,attrs:{\"title\":_vm.primaryStatusText}}),_c('div',{staticClass:\"status-deployment\",class:_vm.deploymentClass,attrs:{\"title\":_vm.deploymentText}})])],1)]),_c('div',{staticClass:\"agent-info\"},[_c('div',{staticClass:\"agent-header\"},[_c('span',{staticClass:\"agent-name\",attrs:{\"title\":_vm.agent.name}},[_vm._v(_vm._s(_vm.agent.name))]),_c('div',{staticClass:\"agent-badges\"},[(_vm.agent.isPublished)?_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"success\",\"effect\":\"plain\"}},[_vm._v(\"已发布\")]):_vm._e(),(!_vm.agent.isPrivate)?_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"info\",\"effect\":\"plain\"}},[_vm._v(\"共享\")]):_vm._e(),(_vm.isRecentlyActive)?_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"warning\",\"effect\":\"plain\"}},[_vm._v(\"活跃\")]):_vm._e()],1)]),_c('div',{staticClass:\"agent-description\",attrs:{\"title\":_vm.agent.roleDescription}},[_vm._v(\" \"+_vm._s(_vm.agent.roleDescription || '暂无描述')+\" \")]),_c('div',{staticClass:\"agent-meta\"},[_c('div',{staticClass:\"meta-item\"},[_c('i',{staticClass:\"el-icon-cpu\"}),_c('span',[_vm._v(_vm._s(_vm.modeText))])]),_c('div',{staticClass:\"meta-item\"},[_c('i',{staticClass:\"el-icon-connection\"}),_c('span',[_vm._v(_vm._s(_vm.serviceStatusText))])]),(_vm.agent.capabilities?.maxConcurrency)?_c('div',{staticClass:\"meta-item\"},[_c('i',{staticClass:\"el-icon-s-data\"}),_c('span',[_vm._v(_vm._s(_vm.agent.capabilities.maxConcurrency)+\"并发\")])]):_vm._e()]),(_vm.displayCapabilities.length > 0)?_c('div',{staticClass:\"agent-capabilities\"},_vm._l((_vm.displayCapabilities),function(capability){return _c('el-tag',{key:capability,attrs:{\"size\":\"mini\",\"effect\":\"plain\",\"type\":\"info\"}},[_vm._v(\" \"+_vm._s(capability)+\" \")])}),1):_vm._e()]),_c('div',{staticClass:\"agent-actions\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"disabled\":!_vm.isAvailable},on:{\"click\":function($event){$event.stopPropagation();return _vm.$emit('start-chat', _vm.agent)}}},[_vm._v(\" 开始对话 \")]),_c('el-dropdown',{attrs:{\"trigger\":\"click\",\"placement\":\"bottom-end\"},on:{\"command\":_vm.handleCommand}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"text\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_c('i',{staticClass:\"el-icon-more\"})]),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"command\":\"details\"}},[_c('i',{staticClass:\"el-icon-view\"}),_vm._v(\" 查看详情 \")]),(_vm.canEdit)?_c('el-dropdown-item',{attrs:{\"command\":\"edit\"}},[_c('i',{staticClass:\"el-icon-edit\"}),_vm._v(\" 编辑配置 \")]):_vm._e(),(_vm.canManage)?_c('el-dropdown-item',{attrs:{\"command\":\"restart\",\"disabled\":!_vm.isOnline}},[_c('i',{staticClass:\"el-icon-refresh\"}),_vm._v(\" 重启服务 \")]):_vm._e(),(_vm.canShare)?_c('el-dropdown-item',{attrs:{\"command\":\"share\",\"divided\":\"\"}},[_c('i',{staticClass:\"el-icon-share\"}),_vm._v(\" 分享设置 \")]):_vm._e(),(_vm.canEdit)?_c('el-dropdown-item',{attrs:{\"command\":\"delete\",\"divided\":\"\"}},[_c('i',{staticClass:\"el-icon-delete\"}),_vm._v(\" 删除 \")]):_vm._e()],1)],1)],1),(_vm.isOnline)?_c('div',{staticClass:\"heartbeat-indicator\",class:{ pulse: _vm.showPulse }}):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"chat-agent-member\" :class=\"{ active: active, disabled: !isAvailable }\" @dblclick=\"startChat\">\n    <!-- 智能体头像和状态 -->\n    <div class=\"agent-avatar\">\n      <div class=\"avatar-container\">\n        <head-image \n          :size=\"48\" \n          :name=\"agent.name\" \n          :url=\"agent.avatar\"\n          :style=\"{ borderRadius: '50%', border: '3px solid white' }\"\n        ></head-image>\n        \n        <!-- 多层状态指示器 -->\n        <div class=\"status-indicators\">\n          <!-- 主状态（在线/离线） -->\n          <div class=\"status-primary\" :class=\"primaryStatusClass\" :title=\"primaryStatusText\"></div>\n          <!-- 部署类型指示器 -->\n          <div class=\"status-deployment\" :class=\"deploymentClass\" :title=\"deploymentText\"></div>\n        </div>\n      </div>\n    </div>\n    \n    <!-- 智能体信息 -->\n    <div class=\"agent-info\">\n      <div class=\"agent-header\">\n        <span class=\"agent-name\" :title=\"agent.name\">{{ agent.name }}</span>\n        <div class=\"agent-badges\">\n          <el-tag v-if=\"agent.isPublished\" size=\"mini\" type=\"success\" effect=\"plain\">已发布</el-tag>\n          <el-tag v-if=\"!agent.isPrivate\" size=\"mini\" type=\"info\" effect=\"plain\">共享</el-tag>\n          <el-tag v-if=\"isRecentlyActive\" size=\"mini\" type=\"warning\" effect=\"plain\">活跃</el-tag>\n        </div>\n      </div>\n      \n      <div class=\"agent-description\" :title=\"agent.roleDescription\">\n        {{ agent.roleDescription || '暂无描述' }}\n      </div>\n      \n      <div class=\"agent-meta\">\n        <div class=\"meta-item\">\n          <i class=\"el-icon-cpu\"></i>\n          <span>{{ modeText }}</span>\n        </div>\n        <div class=\"meta-item\">\n          <i class=\"el-icon-connection\"></i>\n          <span>{{ serviceStatusText }}</span>\n        </div>\n        <div class=\"meta-item\" v-if=\"agent.capabilities?.maxConcurrency\">\n          <i class=\"el-icon-s-data\"></i>\n          <span>{{ agent.capabilities.maxConcurrency }}并发</span>\n        </div>\n      </div>\n      \n      <!-- 能力展示 -->\n      <div class=\"agent-capabilities\" v-if=\"displayCapabilities.length > 0\">\n        <el-tag \n          v-for=\"capability in displayCapabilities\" \n          :key=\"capability\"\n          size=\"mini\" \n          effect=\"plain\"\n          type=\"info\"\n        >\n          {{ capability }}\n        </el-tag>\n      </div>\n    </div>\n    \n    <!-- 操作按钮 -->\n    <div class=\"agent-actions\">\n      <!-- 开始对话按钮 - 更明显的样式 -->\n      <el-button \n        size=\"small\" \n        type=\"primary\"\n        :disabled=\"!isAvailable\"\n        @click.stop=\"$emit('start-chat', agent)\"\n      >\n        开始对话\n      </el-button>\n      \n      <!-- 更多操作 -->\n      <el-dropdown trigger=\"click\" @command=\"handleCommand\" placement=\"bottom-end\">\n        <el-button size=\"mini\" type=\"text\" @click.stop>\n          <i class=\"el-icon-more\"></i>\n        </el-button>\n        <el-dropdown-menu slot=\"dropdown\">\n          <el-dropdown-item command=\"details\">\n            <i class=\"el-icon-view\"></i> 查看详情\n          </el-dropdown-item>\n          <el-dropdown-item v-if=\"canEdit\" command=\"edit\">\n            <i class=\"el-icon-edit\"></i> 编辑配置\n          </el-dropdown-item>\n          <el-dropdown-item v-if=\"canManage\" command=\"restart\" :disabled=\"!isOnline\">\n            <i class=\"el-icon-refresh\"></i> 重启服务\n          </el-dropdown-item>\n          <el-dropdown-item v-if=\"canShare\" command=\"share\" divided>\n            <i class=\"el-icon-share\"></i> 分享设置\n          </el-dropdown-item>\n          <el-dropdown-item v-if=\"canEdit\" command=\"delete\" divided>\n            <i class=\"el-icon-delete\"></i> 删除\n          </el-dropdown-item>\n        </el-dropdown-menu>\n      </el-dropdown>\n    </div>\n    \n    <!-- 心跳指示器 -->\n    <div v-if=\"isOnline\" class=\"heartbeat-indicator\" :class=\"{ pulse: showPulse }\"></div>\n  </div>\n</template>\n\n<script>\nimport HeadImage from \"../common/HeadImage.vue\";\n\nexport default {\n  name: \"chatAgentMember\",\n  components: { HeadImage },\n  props: {\n    agent: {\n      type: Object,\n      required: true\n    },\n    active: {\n      type: Boolean,\n      default: false\n    },\n    height: {\n      type: Number,\n      default: 80\n    }\n  },\n  data() {\n    return {\n      showPulse: false,\n      pulseInterval: null\n    };\n  },\n  computed: {\n    isOnline() {\n      return this.agent.serviceStatus === 'online' && this.agent.isActive;\n    },\n    \n    isAvailable() {\n      return this.isOnline && this.agent.isPublished;\n    },\n    \n    isRecentlyActive() {\n      if (!this.agent.lastHeartbeat) return false;\n      const now = Date.now();\n      const lastHeartbeat = new Date(this.agent.lastHeartbeat).getTime();\n      return (now - lastHeartbeat) < 30000; // 30秒内有心跳\n    },\n    \n    primaryStatusClass() {\n      if (!this.agent.isActive) return 'status-inactive';\n      if (this.agent.serviceStatus === 'online') return 'status-online';\n      return 'status-offline';\n    },\n    \n    primaryStatusText() {\n      if (!this.agent.isActive) return '未激活';\n      if (this.agent.serviceStatus === 'online') return '在线服务';\n      return '离线';\n    },\n    \n    deploymentClass() {\n      const type = this.agent.deployment?.type || 'unknown';\n      return `deployment-${type}`;\n    },\n    \n    deploymentText() {\n      const typeMap = {\n        'pc': '本地PC',\n        'cloud': '云端',\n        'mobile': '移动端',\n        'web': 'Web端'\n      };\n      return typeMap[this.agent.deployment?.type] || '未知';\n    },\n    \n    serviceStatusText() {\n      const statusMap = {\n        'online': '服务在线',\n        'offline': '服务离线',\n        'starting': '启动中',\n        'error': '错误状态'\n      };\n      return statusMap[this.agent.serviceStatus] || '未知状态';\n    },\n    \n    modeText() {\n      const modeMap = {\n        'architect': '架构师',\n        'developer': '开发者', \n        'assistant': '助手',\n        'analyzer': '分析师',\n        'designer': '设计师',\n        'tester': '测试员'\n      };\n      return modeMap[this.agent.mode] || this.agent.mode || '通用';\n    },\n    \n    displayCapabilities() {\n      const caps = [];\n      if (this.agent.capabilities?.messageTypes?.includes('text')) caps.push('文本');\n      if (this.agent.capabilities?.messageTypes?.includes('json')) caps.push('结构化');\n      if (this.agent.capabilities?.taskTypes?.includes('execute')) caps.push('执行');\n      if (this.agent.capabilities?.taskTypes?.includes('query')) caps.push('查询');\n      return caps.slice(0, 3); // 最多显示3个\n    },\n    \n    canEdit() {\n      return this.agent.userId === this.currentUserId;\n    },\n    \n    canManage() {\n      return this.canEdit && this.agent.deployment?.type === 'pc';\n    },\n    \n    canShare() {\n      return this.canEdit && this.agent.shareScope !== 'none';\n    },\n    \n    currentUserId() {\n      return this.$store.state.userStore.userInfo.id?.toString();\n    }\n  },\n  methods: {\n    startChat() {\n      if (!this.isAvailable) {\n        this.$message.warning('智能体当前不可用');\n        return;\n      }\n      this.$emit('start-chat', this.agent);\n    },\n    \n    handleCommand(command) {\n      this.$emit('action', { command, agent: this.agent });\n    },\n    \n    startPulseAnimation() {\n      if (this.isOnline && this.isRecentlyActive) {\n        this.pulseInterval = setInterval(() => {\n          this.showPulse = true;\n          setTimeout(() => {\n            this.showPulse = false;\n          }, 1000);\n        }, 3000);\n      }\n    },\n    \n    stopPulseAnimation() {\n      if (this.pulseInterval) {\n        clearInterval(this.pulseInterval);\n        this.pulseInterval = null;\n      }\n    }\n  },\n  \n  mounted() {\n    this.startPulseAnimation();\n  },\n  \n  beforeDestroy() {\n    this.stopPulseAnimation();\n  },\n  \n  watch: {\n    isOnline() {\n      this.stopPulseAnimation();\n      this.$nextTick(() => {\n        this.startPulseAnimation();\n      });\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.chat-agent-member {\n  position: relative;\n  display: flex;\n  align-items: flex-start;\n  padding: 16px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  border-radius: 12px;\n  border: 2px solid transparent;\n  background: linear-gradient(white, white) padding-box,\n              linear-gradient(45deg, #f0f2f5, #e6e8ec) border-box;\n  margin-bottom: 12px;\n  \n  &:hover {\n    background: linear-gradient(#f8fafb, #f8fafb) padding-box,\n                linear-gradient(45deg, #1890ff, #36cfc9) border-box;\n    transform: translateY(-2px);\n    box-shadow: 0 8px 24px rgba(24, 144, 255, 0.12);\n  }\n  \n  &.active {\n    background: linear-gradient(#e6f7ff, #e6f7ff) padding-box,\n                linear-gradient(45deg, #1890ff, #40a9ff) border-box;\n    transform: translateY(-1px);\n    box-shadow: 0 6px 16px rgba(24, 144, 255, 0.15);\n  }\n  \n  &.disabled {\n    opacity: 0.6;\n    pointer-events: none;\n  }\n  \n  .agent-avatar {\n    margin-right: 16px;\n    flex-shrink: 0;\n    \n    .avatar-container {\n      position: relative;\n      width: 52px;\n      height: 52px;\n      \n      .status-indicators {\n        position: absolute;\n        bottom: -2px;\n        right: -2px;\n        display: flex;\n        flex-direction: column;\n        gap: 2px;\n        \n        .status-primary {\n          width: 16px;\n          height: 16px;\n          border-radius: 50%;\n          border: 3px solid white;\n          box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);\n          \n          &.status-online {\n            background: linear-gradient(45deg, #52c41a, #73d13d);\n          }\n          \n          &.status-offline {\n            background: linear-gradient(45deg, #d9d9d9, #bfbfbf);\n          }\n          \n          &.status-inactive {\n            background: linear-gradient(45deg, #ff4d4f, #ff7875);\n          }\n        }\n        \n        .status-deployment {\n          width: 10px;\n          height: 10px;\n          border-radius: 2px;\n          border: 2px solid white;\n          \n          &.deployment-pc {\n            background: #1890ff;\n          }\n          \n          &.deployment-cloud {\n            background: #722ed1;\n          }\n          \n          &.deployment-web {\n            background: #13c2c2;\n          }\n          \n          &.deployment-mobile {\n            background: #fa8c16;\n          }\n        }\n      }\n    }\n  }\n  \n  .agent-info {\n    flex: 1;\n    min-width: 0;\n    \n    .agent-header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      margin-bottom: 8px;\n      \n      .agent-name {\n        font-weight: 600;\n        font-size: 16px;\n        color: #262626;\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        max-width: 150px;\n      }\n      \n      .agent-badges {\n        display: flex;\n        gap: 4px;\n        flex-shrink: 0;\n      }\n    }\n    \n    .agent-description {\n      font-size: 13px;\n      color: #595959;\n      line-height: 1.4;\n      margin-bottom: 12px;\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n      word-break: break-word;\n    }\n    \n    .agent-meta {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 12px;\n      margin-bottom: 8px;\n      \n      .meta-item {\n        display: flex;\n        align-items: center;\n        gap: 4px;\n        font-size: 12px;\n        color: #8c8c8c;\n        \n        i {\n          font-size: 14px;\n          color: #bfbfbf;\n        }\n      }\n    }\n    \n    .agent-capabilities {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 4px;\n      \n      .el-tag {\n        font-size: 11px;\n        height: 20px;\n        line-height: 18px;\n        border-radius: 10px;\n      }\n    }\n  }\n  \n  .agent-actions {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    transition: all 0.3s ease;\n    margin-left: 12px;\n    \n    .el-button--primary {\n      background: linear-gradient(45deg, #1890ff, #40a9ff);\n      border: none;\n      box-shadow: 0 2px 8px rgba(24, 144, 255, 0.3);\n      \n      &:hover {\n        transform: scale(1.05);\n        box-shadow: 0 4px 12px rgba(24, 144, 255, 0.4);\n      }\n    }\n    \n    .el-button--text {\n      width: 32px;\n      height: 32px;\n      border-radius: 50%;\n    }\n  }\n  \n  .heartbeat-indicator {\n    position: absolute;\n    top: 24px;\n    right: 24px;\n    width: 8px;\n    height: 8px;\n    background: #52c41a;\n    border-radius: 50%;\n    \n    &.pulse {\n      animation: heartbeat 1s ease-in-out;\n    }\n  }\n}\n\n@keyframes heartbeat {\n  0% {\n    transform: scale(1);\n    opacity: 1;\n  }\n  50% {\n    transform: scale(1.5);\n    opacity: 0.7;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAgentMember.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAgentMember.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatAgentMember.vue?vue&type=template&id=e6fc3d06&scoped=true\"\nimport script from \"./ChatAgentMember.vue?vue&type=script&lang=js\"\nexport * from \"./ChatAgentMember.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatAgentMember.vue?vue&type=style&index=0&id=e6fc3d06&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e6fc3d06\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"chat-agent-side\">\n    <div class=\"agent-side-search\">\n      <el-input placeholder=\"搜索智能体\" v-model=\"searchText\" size=\"small\">\n        <i class=\"el-icon-search el-input__icon\" slot=\"prefix\"></i>\n      </el-input>\n    </div>\n    \n    <div class=\"agent-side-scrollbar\">\n      <el-scrollbar style=\"height: 100%;\" v-loading=\"loading\" element-loading-text=\"加载中...\">\n        <div class=\"agent-side-list\">\n          <!-- 用户智能体 -->\n          <div class=\"agent-section\" v-if=\"filteredMyAgents.length > 0\">\n            <div class=\"section-title\">{{ agentSectionTitle }}</div>\n            <div v-for=\"agent in filteredMyAgents\" :key=\"agent.id\">\n              <chat-agent-member \n                class=\"agent-side-member\" \n                :agent=\"agent\"\n                :active=\"selectedAgent?.id === agent.id\"\n                @click.native=\"selectAgent(agent)\"\n                @start-chat=\"handleStartChat\">\n              </chat-agent-member>\n            </div>\n          </div>\n          \n          <!-- 共享智能体 -->\n          <div class=\"agent-section\" v-if=\"filteredSharedAgents.length > 0\">\n            <div class=\"section-title\">共享智能体</div>\n            <div v-for=\"agent in filteredSharedAgents\" :key=\"agent.id\">\n              <chat-agent-member \n                class=\"agent-side-member\" \n                :agent=\"agent\"\n                :active=\"selectedAgent?.id === agent.id\"\n                @click.native=\"selectAgent(agent)\"\n                @start-chat=\"handleStartChat\">\n              </chat-agent-member>\n            </div>\n          </div>\n          \n          <!-- 空状态 -->\n          <div v-if=\"!loading && filteredMyAgents.length === 0 && filteredSharedAgents.length === 0\" class=\"empty-state\">\n            <i class=\"el-icon-user\"></i>\n            <p>暂无可用智能体</p>\n            <el-button size=\"small\" type=\"text\" @click=\"refreshAgents\">刷新</el-button>\n          </div>\n        </div>\n      </el-scrollbar>\n    </div>\n    \n    <!-- 智能体详情面板 -->\n    <div v-if=\"selectedAgent\" class=\"agent-detail-panel\">\n      <el-divider content-position=\"center\">智能体信息</el-divider>\n      <el-form label-position=\"top\" size=\"small\">\n        <el-form-item label=\"名称\">\n          <el-input v-model=\"selectedAgent.name\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"描述\">\n          <el-input v-model=\"selectedAgent.roleDescription\" disabled type=\"textarea\" :rows=\"3\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"状态\">\n          <el-tag :type=\"getStatusTagType(selectedAgent.status)\" size=\"small\">\n            {{ getStatusText(selectedAgent.status) }}\n          </el-tag>\n        </el-form-item>\n        <div class=\"btn-group\">\n          <el-button type=\"primary\" size=\"small\" @click=\"startAgentChat\" :disabled=\"selectedAgent.status !== 'online'\">\n            开始对话\n          </el-button>\n          <el-button v-if=\"canManageAgent\" size=\"small\" @click=\"editAgent\">编辑</el-button>\n        </div>\n      </el-form>\n    </div>\n    \n    <!-- 智能体对话框已移除，使用层级对话模式 -->\n  </div>\n</template>\n\n<script>\nimport ChatAgentMember from './ChatAgentMember.vue';\n\nexport default {\n  name: \"chatAgentSide\",\n  components: {\n    ChatAgentMember\n  },\n  props: {\n    chat: Object,\n    group: Object,\n    groupMembers: Array\n  },\n  data() {\n    return {\n      searchText: \"\",\n      myAgents: [],\n      sharedAgents: [],\n      selectedAgent: null,\n      loading: false\n    }\n  },\n  computed: {\n    filteredMyAgents() {\n      if (!this.searchText) return this.myAgents;\n      return this.myAgents.filter(agent => \n        agent.name.toLowerCase().includes(this.searchText.toLowerCase()) ||\n        (agent.roleDescription && agent.roleDescription.toLowerCase().includes(this.searchText.toLowerCase()))\n      );\n    },\n    \n    filteredSharedAgents() {\n      if (!this.searchText) return this.sharedAgents;\n      return this.sharedAgents.filter(agent => \n        agent.name.toLowerCase().includes(this.searchText.toLowerCase()) ||\n        (agent.roleDescription && agent.roleDescription.toLowerCase().includes(this.searchText.toLowerCase()))\n      );\n    },\n    \n    scrollHeight() {\n      const baseHeight = 300;\n      const itemCount = this.filteredMyAgents.length + this.filteredSharedAgents.length;\n      return Math.min(400, baseHeight + itemCount * 10);\n    },\n    \n    canManageAgent() {\n      return this.selectedAgent && this.selectedAgent.userId === this.currentUserId;\n    },\n    \n    currentUserId() {\n      return this.$store.state.userStore.userInfo.id;\n    },\n    \n    agentSectionTitle() {\n      if (!this.chat) return '智能体';\n      \n      if (this.chat.type === 'PRIVATE') {\n        // 私聊显示对方的智能体\n        return `${this.chat.targetName || '对方'}的智能体`;\n      } else if (this.chat.type === 'GROUP') {\n        // 群聊显示当前用户的智能体\n        return '我的智能体';\n      }\n      \n      return '智能体';\n    }\n  },\n  methods: {\n    async loadAgents() {\n      this.loading = true;\n      try {\n        // 获取用户智能体\n        await this.loadUserAgents();\n        \n        // 根据聊天类型加载相关智能体\n        if (this.chat.type === 'GROUP') {\n          await this.loadGroupSharedAgents();\n        } else {\n          await this.loadFriendSharedAgents();\n        }\n      } catch (error) {\n        console.error('Failed to load agents:', error);\n        this.$message.error('加载智能体失败');\n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    async loadUserAgents() {\n      try {\n        let targetUserId = this.currentUserId;\n        \n        // 根据聊天类型动态获取目标用户ID\n        if (this.chat.type === 'PRIVATE') {\n          // 私聊：获取对方用户的智能体\n          targetUserId = this.chat.targetId;\n        } else if (this.chat.type === 'GROUP') {\n          // 群聊：暂时显示当前用户的智能体，后续可扩展为显示群内所有成员的智能体\n          targetUserId = this.currentUserId;\n        }\n        \n        // 获取终端信息，构建完整的targetId\n        const terminal = this.$store.state.userStore?.userInfo?.terminal || 0;\n        const fullTargetId = `${targetUserId}_${terminal}`;\n        \n        console.log('Loading agents for:', { \n          chatType: this.chat.type, \n          targetUserId, \n          fullTargetId,\n          chatTargetId: this.chat.targetId \n        });\n        \n        // 直接调用后端API获取智能体数据\n        const agents = await this.$http.get(`/api/roocode/redis/agents/${fullTargetId}`);\n        \n        this.myAgents = (agents || []).map(agent => ({\n          ...agent,\n          status: agent.isActive ? 'online' : 'offline' // 根据isActive状态判断\n        }));\n        \n        console.log('Loaded user agents:', this.myAgents);\n      } catch (error) {\n        console.error('Failed to load user agents:', error);\n        this.myAgents = [];\n      }\n    },\n    \n    async loadGroupSharedAgents() {\n      if (!this.group || !this.groupMembers) return;\n      \n      try {\n        const result = await this.callRooCodeCommand('roo-cline.getSharedAgents', {\n          shareScope: 'groups',\n          allowedGroups: [this.group.id],\n          excludeUserId: this.currentUserId\n        });\n        \n        this.sharedAgents = (result.agents || []).map(agent => ({\n          ...agent,\n          status: agent.status || 'online'\n        }));\n      } catch (error) {\n        console.error('Failed to load group shared agents:', error);\n        this.sharedAgents = [];\n      }\n    },\n    \n    async loadFriendSharedAgents() {\n      if (!this.chat || this.chat.type !== 'PRIVATE') return;\n      \n      try {\n        const result = await this.callRooCodeCommand('roo-cline.getSharedAgents', {\n          shareScope: 'friends',\n          allowedUsers: [this.chat.targetId],\n          excludeUserId: this.currentUserId\n        });\n        \n        this.sharedAgents = (result.agents || []).map(agent => ({\n          ...agent,\n          status: agent.status || 'online'\n        }));\n      } catch (error) {\n        console.error('Failed to load friend shared agents:', error);\n        this.sharedAgents = [];\n      }\n    },\n    \n    selectAgent(agent) {\n      this.selectedAgent = agent;\n    },\n    \n    handleStartChat(agent) {\n      this.selectedAgent = agent;\n      this.startAgentChat();\n    },\n    \n    startAgentChat() {\n      if (!this.selectedAgent) return;\n      \n      if (!this.selectedAgent.isActive || this.selectedAgent.serviceStatus !== 'online') {\n        this.$message.warning('智能体当前不可用，无法开始对话');\n        return;\n      }\n      \n      // 触发父组件的层级对话模式\n      this.$emit('start-agent-chat', {\n        agent: this.selectedAgent,\n        chat: this.chat,\n        member: null  // 如果是自己的智能体，member为null\n      });\n    },\n    \n    editAgent() {\n      if (!this.selectedAgent) return;\n      \n      // 触发编辑智能体事件\n      this.$emit('edit-agent', this.selectedAgent);\n    },\n    \n    refreshAgents() {\n      this.loadAgents();\n    },\n    \n    getStatusTagType(status) {\n      switch (status) {\n        case 'online': return 'success';\n        case 'busy': return 'warning';\n        case 'offline': return 'info';\n        case 'error': return 'danger';\n        default: return 'success';\n      }\n    },\n    \n    getStatusText(status) {\n      switch (status) {\n        case 'online': return '在线';\n        case 'busy': return '忙碌';\n        case 'offline': return '离线';\n        case 'error': return '错误';\n        default: return '在线';\n      }\n    },\n    \n    async callRooCodeCommand(command, params) {\n      // 通过VSCode通信调用roo-code命令\n      return new Promise((resolve, reject) => {\n        const messageId = Date.now() + Math.random();\n        \n        const handler = (event) => {\n          if (event.data.id === messageId) {\n            window.removeEventListener('message', handler);\n            if (event.data.error) {\n              reject(new Error(event.data.error));\n            } else {\n              resolve(event.data.result || {});\n            }\n          }\n        };\n        \n        window.addEventListener('message', handler);\n        \n        // 设置超时\n        setTimeout(() => {\n          window.removeEventListener('message', handler);\n          reject(new Error('命令调用超时'));\n        }, 10000);\n        \n        window.parent.postMessage({\n          type: 'vscode-command',\n          command: command,\n          params: params,\n          id: messageId\n        }, '*');\n      });\n    }\n  },\n  \n  mounted() {\n    this.loadAgents();\n  },\n  \n  watch: {\n    chat: {\n      handler() {\n        if (this.chat) {\n          this.selectedAgent = null;\n          this.loadAgents();\n        }\n      },\n      immediate: true\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.chat-agent-side {\n  position: relative;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  background-color: #fafafa;\n\n  .agent-side-search {\n    padding: 10px;\n    flex-shrink: 0;\n  }\n\n  .agent-side-scrollbar {\n    flex: 1;\n    min-height: 0; // 重要：让flex子元素可以收缩\n    overflow: hidden;\n  }\n\n  .agent-side-list {\n    padding: 10px;\n    \n    .agent-section {\n      margin-bottom: 20px;\n      \n      .section-title {\n        font-size: 14px;\n        font-weight: bold;\n        color: #666;\n        margin-bottom: 10px;\n        padding: 8px 0;\n        border-bottom: 1px solid #f0f0f0;\n        display: flex;\n        align-items: center;\n        \n        &::before {\n          content: '';\n          width: 4px;\n          height: 14px;\n          background-color: #1890ff;\n          margin-right: 8px;\n          border-radius: 2px;\n        }\n      }\n      \n      .agent-side-member {\n        margin-bottom: 8px;\n        background-color: white;\n        border-radius: 6px;\n        border: 1px solid #f0f0f0;\n        \n        &:hover {\n          border-color: #d9d9d9;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.05);\n        }\n      }\n    }\n    \n    .empty-state {\n      text-align: center;\n      padding: 40px 20px;\n      color: #999;\n      \n      i {\n        font-size: 48px;\n        margin-bottom: 16px;\n        display: block;\n      }\n      \n      p {\n        margin: 0 0 16px 0;\n        font-size: 14px;\n      }\n    }\n  }\n\n  .agent-detail-panel {\n    padding: 15px;\n    border-top: 1px solid #f0f0f0;\n    flex-shrink: 0;\n    background-color: white;\n    max-height: 300px; // 限制详情面板最大高度\n    overflow-y: auto;\n    \n    .el-divider {\n      margin: 0 0 15px 0;\n      \n      .el-divider__text {\n        font-size: 13px;\n        color: #666;\n      }\n    }\n    \n    .el-form-item {\n      margin-bottom: 12px;\n      \n      .el-form-item__label {\n        font-size: 12px;\n        color: #666;\n        padding: 0 0 5px 0;\n      }\n    }\n    \n    .btn-group {\n      text-align: center;\n      margin-top: 15px;\n      \n      .el-button {\n        margin: 0 4px;\n      }\n    }\n  }\n  \n  // 加载状态样式\n  .el-loading-mask {\n    background-color: rgba(255, 255, 255, 0.8);\n    border-radius: 6px;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAgentSide.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAgentSide.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatAgentSide.vue?vue&type=template&id=791efdd4\"\nimport script from \"./ChatAgentSide.vue?vue&type=script&lang=js\"\nexport * from \"./ChatAgentSide.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatAgentSide.vue?vue&type=style&index=0&id=791efdd4&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-agent-card\"},[_c('div',{staticClass:\"card-avatar\"},[_c('head-image',{style:({ borderRadius: '50%', border: '2px solid white' }),attrs:{\"size\":48,\"name\":_vm.agent.name,\"url\":_vm.agent.avatar}}),_c('div',{staticClass:\"status-indicator\",class:_vm.statusClass,attrs:{\"title\":_vm.statusText}})],1),_c('div',{staticClass:\"card-info\"},[_c('div',{staticClass:\"card-header\"},[_c('h4',{staticClass:\"agent-name\"},[_vm._v(_vm._s(_vm.agent.name))]),_c('div',{staticClass:\"agent-badges\"},[(_vm.agent.isPublished)?_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"success\",\"effect\":\"plain\"}},[_vm._v(\"已发布\")]):_vm._e(),(_vm.isOnline)?_c('el-tag',{attrs:{\"size\":\"mini\",\"type\":\"warning\",\"effect\":\"plain\"}},[_vm._v(\"在线\")]):_vm._e()],1)]),_c('p',{staticClass:\"agent-description\"},[_vm._v(\" \"+_vm._s(_vm.agent.roleDescription || '暂无描述')+\" \")]),_c('div',{staticClass:\"agent-meta\"},[_c('div',{staticClass:\"meta-item\"},[_c('i',{staticClass:\"el-icon-cpu\"}),_c('span',[_vm._v(_vm._s(_vm.modeText))])]),_c('div',{staticClass:\"meta-item\"},[_c('i',{staticClass:\"el-icon-connection\"}),_c('span',[_vm._v(_vm._s(_vm.serviceStatusText))])])]),(_vm.displayCapabilities.length > 0)?_c('div',{staticClass:\"agent-capabilities\"},_vm._l((_vm.displayCapabilities),function(cap){return _c('el-tag',{key:cap,attrs:{\"size\":\"mini\",\"effect\":\"plain\",\"type\":\"info\"}},[_vm._v(\" \"+_vm._s(cap)+\" \")])}),1):_vm._e()]),(_vm.showActions)?_c('div',{staticClass:\"card-actions\"},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\",\"disabled\":!_vm.isAvailable,\"block\":\"\"},on:{\"click\":function($event){return _vm.$emit('start-chat', _vm.agent)}}},[_vm._v(\" 开始对话 \")])],1):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 智能体卡片共同业务逻辑 - 与UniApp版完全一致\nexport default {\n\tprops: {\n\t\tagent: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tshowActions: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tcomputed: {\n\t\tisOnline() {\n\t\t\treturn this.agent.serviceStatus === 'online' && this.agent.isActive;\n\t\t},\n\t\t\n\t\tisAvailable() {\n\t\t\treturn this.isOnline && this.agent.isPublished;\n\t\t},\n\t\t\n\t\tstatusClass() {\n\t\t\tif (!this.agent.isActive) return 'status-inactive';\n\t\t\tif (this.agent.serviceStatus === 'online') return 'status-online';\n\t\t\treturn 'status-offline';\n\t\t},\n\t\t\n\t\tstatusText() {\n\t\t\tif (!this.agent.isActive) return '未激活';\n\t\t\tif (this.agent.serviceStatus === 'online') return '在线';\n\t\t\treturn '离线';\n\t\t},\n\t\t\n\t\tserviceStatusText() {\n\t\t\tconst statusMap = {\n\t\t\t\t'online': '在线',\n\t\t\t\t'offline': '离线',\n\t\t\t\t'starting': '启动中',\n\t\t\t\t'error': '错误'\n\t\t\t};\n\t\t\treturn statusMap[this.agent.serviceStatus] || '未知';\n\t\t},\n\t\t\n\t\tmodeText() {\n\t\t\tconst modeMap = {\n\t\t\t\t'architect': '架构师',\n\t\t\t\t'developer': '开发者',\n\t\t\t\t'assistant': '助手',\n\t\t\t\t'analyzer': '分析师'\n\t\t\t};\n\t\t\treturn modeMap[this.agent.mode] || this.agent.mode || '通用';\n\t\t},\n\t\t\n\t\tdisplayCapabilities() {\n\t\t\tconst caps = [];\n\t\t\tif (this.agent.capabilities?.messageTypes?.includes('text')) caps.push('文本');\n\t\t\tif (this.agent.capabilities?.messageTypes?.includes('json')) caps.push('JSON');\n\t\t\tif (this.agent.capabilities?.taskTypes?.includes('execute')) caps.push('执行');\n\t\t\treturn caps.slice(0, 3);\n\t\t}\n\t}\n}","<template>\n  <div class=\"chat-agent-card\">\n    <!-- 智能体头像和状态 -->\n    <div class=\"card-avatar\">\n      <head-image \n        :size=\"48\" \n        :name=\"agent.name\" \n        :url=\"agent.avatar\"\n        :style=\"{ borderRadius: '50%', border: '2px solid white' }\"\n      ></head-image>\n      \n      <!-- 状态指示器 -->\n      <div class=\"status-indicator\" :class=\"statusClass\" :title=\"statusText\"></div>\n    </div>\n    \n    <!-- 智能体信息 -->\n    <div class=\"card-info\">\n      <div class=\"card-header\">\n        <h4 class=\"agent-name\">{{ agent.name }}</h4>\n        <div class=\"agent-badges\">\n          <el-tag v-if=\"agent.isPublished\" size=\"mini\" type=\"success\" effect=\"plain\">已发布</el-tag>\n          <el-tag v-if=\"isOnline\" size=\"mini\" type=\"warning\" effect=\"plain\">在线</el-tag>\n        </div>\n      </div>\n      \n      <p class=\"agent-description\">\n        {{ agent.roleDescription || '暂无描述' }}\n      </p>\n      \n      <div class=\"agent-meta\">\n        <div class=\"meta-item\">\n          <i class=\"el-icon-cpu\"></i>\n          <span>{{ modeText }}</span>\n        </div>\n        <div class=\"meta-item\">\n          <i class=\"el-icon-connection\"></i>\n          <span>{{ serviceStatusText }}</span>\n        </div>\n      </div>\n      \n      <!-- 能力标签 -->\n      <div class=\"agent-capabilities\" v-if=\"displayCapabilities.length > 0\">\n        <el-tag \n          v-for=\"cap in displayCapabilities\" \n          :key=\"cap\"\n          size=\"mini\"\n          effect=\"plain\"\n          type=\"info\"\n        >\n          {{ cap }}\n        </el-tag>\n      </div>\n    </div>\n    \n    <!-- 操作按钮 -->\n    <div class=\"card-actions\" v-if=\"showActions\">\n      <el-button \n        size=\"small\" \n        type=\"primary\"\n        :disabled=\"!isAvailable\"\n        @click=\"$emit('start-chat', agent)\"\n        block\n      >\n        开始对话\n      </el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport HeadImage from \"../common/HeadImage.vue\";\nimport agentCardMixin from \"../../mixins/agentCardMixin.js\";\n\nexport default {\n  name: \"ChatAgentCard\",\n  components: { HeadImage },\n  mixins: [agentCardMixin]\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.chat-agent-card {\n  background: white;\n  border-radius: 8px;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  // 禁用文本选择，避免hover时的选中效果\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  \n  .card-avatar {\n    position: relative;\n    width: 48px;\n    height: 48px;\n    margin: 0 auto;\n    \n    .status-indicator {\n      position: absolute;\n      bottom: 0;\n      right: 0;\n      width: 14px;\n      height: 14px;\n      border-radius: 50%;\n      border: 2px solid white;\n      \n      &.status-online {\n        background: #52c41a;\n        animation: pulse 2s infinite;\n      }\n      \n      &.status-offline {\n        background: #d9d9d9;\n      }\n      \n      &.status-inactive {\n        background: #ff4d4f;\n      }\n    }\n  }\n  \n  .card-info {\n    flex: 1;\n    \n    .card-header {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      margin-bottom: 8px;\n      \n      .agent-name {\n        margin: 0;\n        font-size: 15px;\n        font-weight: 600;\n        color: #303133;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      \n      .agent-badges {\n        display: flex;\n        gap: 4px;\n      }\n    }\n    \n    .agent-description {\n      color: #606266;\n      font-size: 13px;\n      line-height: 1.5;\n      margin: 0 0 12px 0;\n      display: -webkit-box;\n      -webkit-line-clamp: 2;\n      -webkit-box-orient: vertical;\n      overflow: hidden;\n    }\n    \n    .agent-meta {\n      display: flex;\n      gap: 12px;\n      margin-bottom: 8px;\n      \n      .meta-item {\n        display: flex;\n        align-items: center;\n        gap: 4px;\n        font-size: 12px;\n        color: #909399;\n        \n        i {\n          font-size: 14px;\n        }\n      }\n    }\n    \n    .agent-capabilities {\n      display: flex;\n      flex-wrap: wrap;\n      gap: 4px;\n    }\n  }\n  \n  .card-actions {\n    .el-button {\n      width: 100%;\n      // 防止自动聚焦\n      &:focus {\n        outline: none;\n      }\n    }\n  }\n  \n  // 防止描述文本被选中\n  .agent-description {\n    cursor: default;\n  }\n  \n  // 确保所有文本元素不可选择\n  * {\n    user-select: none;\n  }\n}\n\n@keyframes pulse {\n  0%, 100% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.6;\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAgentCard.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAgentCard.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatAgentCard.vue?vue&type=template&id=2571a6b5&scoped=true\"\nimport script from \"./ChatAgentCard.vue?vue&type=script&lang=js\"\nexport * from \"./ChatAgentCard.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatAgentCard.vue?vue&type=style&index=0&id=2571a6b5&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2571a6b5\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-msg-item\"},[_c('div',{staticClass:\"chat-msg-normal\",class:{ 'chat-msg-mine': _vm.mine }},[_c('div',{staticClass:\"head-image\"},[_c('head-image',{attrs:{\"name\":_vm.showName,\"size\":38,\"url\":_vm.headImage,\"id\":_vm.msgInfo.sendId}})],1),_c('div',{staticClass:\"chat-msg-content\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.msgInfo.groupId && !_vm.msgInfo.selfSend),expression:\"msgInfo.groupId && !msgInfo.selfSend\"}],staticClass:\"chat-msg-top\"},[_c('span',[_vm._v(_vm._s(_vm.showName))])]),_c('div',{staticClass:\"chat-msg-bottom\"},[_c('div',{ref:\"chatMsgBox\",staticClass:\"chat-msg-text\"},[_c('streaming-renderer',{ref:\"streamingRenderer\",attrs:{\"initial-message\":_vm.streamingMessage},on:{\"need-scroll\":_vm.scrollToBottom,\"streaming-finish\":_vm.onStreamingFinish,\"error\":_vm.handleError}})],1)])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"chat-msg-item\">\n    <div class=\"chat-msg-normal\" :class=\"{ 'chat-msg-mine': mine }\">\n      <div class=\"head-image\">\n        <head-image :name=\"showName\" :size=\"38\" :url=\"headImage\" :id=\"msgInfo.sendId\"></head-image>\n      </div>\n      <div class=\"chat-msg-content\">\n        <div v-show=\"msgInfo.groupId && !msgInfo.selfSend\" class=\"chat-msg-top\">\n          <span>{{ showName }}</span>\n        </div>\n        <div class=\"chat-msg-bottom\">\n          <div ref=\"chatMsgBox\" class=\"chat-msg-text\">\n            <!-- 使用流式渲染组件 -->\n            <streaming-renderer\n              ref=\"streamingRenderer\"\n              :initial-message=\"streamingMessage\"\n              @need-scroll=\"scrollToBottom\"\n              @streaming-finish=\"onStreamingFinish\"\n              @error=\"handleError\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport HeadImage from \"../common/HeadImage.vue\";\nimport { StreamingRenderer } from \"../message\";\n\nexport default {\n  name: 'LLMStreamMessage',\n  components: {\n    HeadImage,\n    StreamingRenderer\n  },\n  props: {\n    streamId: {\n      type: String,\n      required: true\n    },\n    msgInfo: {\n      type: Object,\n      required: true\n    },\n    mine: {\n      type: Boolean,\n      default: false\n    },\n    headImage: {\n      type: String,\n      default: ''\n    },\n    showName: {\n      type: String,\n      default: ''\n    }\n  },\n  data() {\n    return {\n      chunks: [],         // 存储所有接收到的文本块\n      content: '',        // 累积的完整内容\n      isStreaming: false, // 是否正在流式传输\n      isCompleted: false, // 是否已完成\n      startTime: null,    // 开始时间\n      endTime: null,      // 结束时间\n      sequence: 0,        // 当前序列号\n      error: null         // 错误信息\n    }\n  },\n  computed: {\n    // 构建流式消息对象\n    streamingMessage() {\n      return {\n        content: this.content,\n        type: 'AGENT',\n        format: 'markdown',\n        streaming: this.isStreaming,\n        isAgent: true,\n        streamId: this.streamId,\n        msgInfo: this.msgInfo\n      };\n    }\n  },\n  methods: {\n    // 开始流式传输\n    startStream() {\n      this.isStreaming = true;\n      this.isCompleted = false;\n      this.startTime = Date.now();\n      this.chunks = [];\n      this.content = '';\n      this.sequence = 0;\n      this.error = null;\n      \n      // 启动流式渲染组件\n      if (this.$refs.streamingRenderer) {\n        this.$refs.streamingRenderer.startStreaming('');\n      }\n    },\n    \n    // 添加文本块\n    addChunk(chunk, sequence) {\n      if (!this.isStreaming) {\n        this.startStream();\n      }\n      \n      // 确保按序列号顺序添加\n      if (sequence !== undefined) {\n        // 如果序列号不连续，可能丢失了一些块，记录警告\n        if (sequence > this.sequence + 1) {\n          console.warn(`[LLMStream] 序列号不连续: 期望 ${this.sequence + 1}, 收到 ${sequence}`);\n        }\n        this.sequence = sequence;\n      }\n      \n      this.chunks.push(chunk);\n      this.content += chunk;\n      \n      // 使用流式渲染组件添加内容\n      if (this.$refs.streamingRenderer) {\n        this.$refs.streamingRenderer.appendChunk(chunk);\n      }\n    },\n    \n    // 结束流式传输\n    endStream() {\n      this.isStreaming = false;\n      this.isCompleted = true;\n      this.endTime = Date.now();\n      \n      // 结束流式渲染\n      if (this.$refs.streamingRenderer) {\n        this.$refs.streamingRenderer.finishStreaming();\n      }\n    },\n    \n    // 流式完成回调\n    onStreamingFinish(data) {\n      // 触发完成事件\n      this.$emit('completed', {\n        streamId: this.streamId,\n        content: data.content,\n        chunks: this.chunks.length,\n        duration: this.endTime - this.startTime,\n        stats: data.stats\n      });\n    },\n    \n    // 处理错误\n    handleError(errorData) {\n      this.isStreaming = false;\n      this.isCompleted = true;\n      this.error = errorData.error || errorData;\n      this.endTime = Date.now();\n      console.error(`[LLMStream] 流式传输错误: ${this.streamId}`, this.error);\n      \n      // 触发错误事件\n      this.$emit('error', {\n        streamId: this.streamId,\n        error: this.error\n      });\n    },\n    \n    // 滚动到底部\n    scrollToBottom() {\n      // 让父组件处理滚动\n      this.$emit('need-scroll');\n    },\n    \n    // 清空内容\n    clear() {\n      this.chunks = [];\n      this.content = '';\n      this.isStreaming = false;\n      this.isCompleted = false;\n      this.startTime = null;\n      this.endTime = null;\n      this.sequence = 0;\n      this.error = null;\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.chat-msg-item {\n\t.chat-msg-tip {\n\t\tline-height: 50px;\n\t\tfont-size: var(--im-font-size-small);\n\t\tcolor: var(--im-text-color-light);\n\t\ttext-align: center;\n\t}\n\t.chat-msg-normal {\n\t\tposition: relative;\n\t\tfont-size: 0;\n\t\tpadding-left: 48px;\n\t\tmin-height: 50px;\n\t\tmargin-top: 10px;\n\t\t.head-image {\n\t\t\tposition: absolute;\n\t\t\twidth: 40px;\n\t\t\theight: 40px;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t}\n\t\t.chat-msg-content {\n\t\t\ttext-align: left;\n\t\t\t.send-fail {\n\t\t\t\tcolor: #e60c0c;\n\t\t\t\tfont-size: 30px;\n\t\t\t\tcursor: pointer;\n\t\t\t\tmargin: 0 20px;\n\t\t\t}\n\t\t\t.chat-msg-top {\n\t\t\t\tdisplay: flex;\n\t\t\t\tflex-wrap: nowrap;\n\t\t\t\tcolor: var(--im-text-color-light);\n\t\t\t\tfont-size: var(--im-font-size);\n\t\t\t\tline-height: 20px;\n\t\t\t\tspan {\n\t\t\t\t\tmargin-right: 12px;\n\t\t\t\t}\n\t\t\t}\n\t\t\t.chat-msg-bottom {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\tpadding-right: 300px;\n\t\t\t\tpadding-left: 5px;\n\t\t\t\t.chat-msg-text {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\tposition: relative;\n\t\t\t\t\tline-height: 1.6;\n\t\t\t\t\tpadding: 10px 14px;\n\t\t\t\t\tbackground-color: var(--im-background);\n\t\t\t\t\tborder-radius: 10px;\n\t\t\t\t\tfont-size: var(--im-font-size);\n\t\t\t\t\ttext-align: left;\n\t\t\t\t\t\n\t\t\t\t\t// 确保文本可选择\n\t\t\t\t\tuser-select: text !important;\n\t\t\t\t\t-webkit-user-select: text !important;\n\t\t\t\t\t-moz-user-select: text !important;\n\t\t\t\t\t-ms-user-select: text !important;\n\t\t\t\t\t\n\t\t\t\t\t&:after {\n\t\t\t\t\t\tcontent: \"\";\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tleft: -10px;\n\t\t\t\t\t\ttop: 13px;\n\t\t\t\t\t\twidth: 0;\n\t\t\t\t\t\theight: 0;\n\t\t\t\t\t\tborder-style: solid dashed dashed;\n\t\t\t\t\t\tborder-color: var(--im-background) transparent transparent;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tborder-width: 10px;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// Markdown内容样式覆盖\n\t\t\t\t\t::v-deep {\n\t\t\t\t\t\t.unified-message-renderer {\n\t\t\t\t\t\t\t.message-markdown {\n\t\t\t\t\t\t\t\t.markdown-body {\n\t\t\t\t\t\t\t\t\tbackground: transparent !important;\n\t\t\t\t\t\t\t\t\tpadding: 0 !important;\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 调整代码块样式\n\t\t\t\t\t\t\t\t\t.code-block-wrapper {\n\t\t\t\t\t\t\t\t\t\tmargin: 8px 0;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t.code-block-content {\n\t\t\t\t\t\t\t\t\t\t\tpre {\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: rgba(0, 0, 0, 0.05);\n\t\t\t\t\t\t\t\t\t\t\t\tpadding: 8px 12px;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 调整段落间距\n\t\t\t\t\t\t\t\t\tp {\n\t\t\t\t\t\t\t\t\t\tmargin-top: 0;\n\t\t\t\t\t\t\t\t\t\tmargin-bottom: 8px;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t&:last-child {\n\t\t\t\t\t\t\t\t\t\t\tmargin-bottom: 0;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 列表样式\n\t\t\t\t\t\t\t\t\tul, ol {\n\t\t\t\t\t\t\t\t\t\tmargin: 8px 0;\n\t\t\t\t\t\t\t\t\t\tpadding-left: 20px;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 标题样式\n\t\t\t\t\t\t\t\t\th1, h2, h3, h4, h5, h6 {\n\t\t\t\t\t\t\t\t\t\tmargin-top: 12px;\n\t\t\t\t\t\t\t\t\t\tmargin-bottom: 8px;\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t&:first-child {\n\t\t\t\t\t\t\t\t\t\t\tmargin-top: 0;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t&.chat-msg-mine {\n\t\t\ttext-align: right;\n\t\t\tpadding-left: 0;\n\t\t\tpadding-right: 48px;\n\t\t\t.head-image {\n\t\t\t\tleft: auto;\n\t\t\t\tright: 0;\n\t\t\t}\n\t\t\t.chat-msg-content {\n\t\t\t\ttext-align: right;\n\t\t\t\t.chat-msg-top {\n\t\t\t\t\tflex-direction: row-reverse;\n\t\t\t\t\tspan {\n\t\t\t\t\t\tmargin-left: 12px;\n\t\t\t\t\t\tmargin-right: 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t.chat-msg-bottom {\n\t\t\t\t\tpadding-left: 180px;\n\t\t\t\t\tpadding-right: 5px;\n\t\t\t\t\t.chat-msg-text {\n\t\t\t\t\t\tmargin-left: 10px;\n\t\t\t\t\t\tbackground-color: var(--im-color-primary-light-2);\n\t\t\t\t\t\tcolor: #fff;\n\t\t\t\t\t\t&:after {\n\t\t\t\t\t\t\tleft: auto;\n\t\t\t\t\t\t\tright: -10px;\n\t\t\t\t\t\t\tborder-top-color: var(--im-color-primary-light-2);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LLMStreamMessage.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LLMStreamMessage.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./LLMStreamMessage.vue?vue&type=template&id=47c40186&scoped=true\"\nimport script from \"./LLMStreamMessage.vue?vue&type=script&lang=js\"\nexport * from \"./LLMStreamMessage.vue?vue&type=script&lang=js\"\nimport style0 from \"./LLMStreamMessage.vue?vue&type=style&index=0&id=47c40186&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47c40186\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"chat-box\" @click=\"closeRefBox()\" @mousemove=\"readedMessage()\">\n\t\t<el-container>\n\t\t\t<el-header height=\"50px\" class=\"chat-header\">\n\t\t\t\t<!-- 左侧标题 -->\n\t\t\t\t<div class=\"chat-title\">\n\t\t\t\t\t<template v-if=\"currentAgentChat\">\n\t\t\t\t\t\t<!-- 智能体会话：显示可点击的层级结构 -->\n\t\t\t\t\t\t<span class=\"parent-name clickable\" @click=\"returnToParentChat\" title=\"点击返回父级对话\">\n\t\t\t\t\t\t\t{{ parentChatName }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"layer-separator\">›</span>\n\t\t\t\t\t\t<span class=\"agent-name\">{{ currentAgentChat.agentName }}</span>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<!-- 普通会话，直接显示标题 -->\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<!-- 右侧操作区 -->\n\t\t\t\t<div class=\"header-right\">\n\t\t\t\t\t<!-- 智能体快速访问 - 新的实现：固定最右侧头像 -->\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass=\"agent-avatars-container\"\n\t\t\t\t\t\t:class=\"{ collapsed: showSide || showAgentSide }\"\n\t\t\t\t\t\tv-if=\"recentAgents.length > 0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<!-- 可动画的头像容器（除了最后一个） -->\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"agent-avatars-animated\"\n\t\t\t\t\t\t\t:class=\"{ expanded: avatarsExpanded }\"\n\t\t\t\t\t\t\t:style=\"{ '--avatar-count': Math.min(recentAgents.length, 5) }\"\n\t\t\t\t\t\t\t@mouseenter=\"expandAvatars\"\n\t\t\t\t\t\t\t@mouseleave=\"collapseAvatars\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tv-for=\"(agent, index) in recentAgents.slice(0, Math.min(recentAgents.length - 1, 4))\" \n\t\t\t\t\t\t\t\t:key=\"agent.id\"\n\t\t\t\t\t\t\t\tclass=\"agent-avatar-mini\"\n\t\t\t\t\t\t\t\t:style=\"{ '--avatar-index': index }\"\n\t\t\t\t\t\t\t\t@mouseenter=\"handleAvatarMouseEnter(agent, $event)\"\n\t\t\t\t\t\t\t\t@mouseleave=\"hideAgentCard\"\n\t\t\t\t\t\t\t\t@click=\"quickStartAgentChat(agent)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img v-if=\"agent.avatar\" :src=\"agent.avatar\" :alt=\"agent.name\" />\n\t\t\t\t\t\t\t\t<div v-else class=\"agent-avatar-text\">{{ agent.name.charAt(0) }}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- 固定的最右侧头像（永不移动） -->\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"agent-avatar-fixed\"\n\t\t\t\t\t\t\t@mouseenter=\"expandAvatars\"\n\t\t\t\t\t\t\t@mouseleave=\"collapseAvatars\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"agent-avatar-mini\"\n\t\t\t\t\t\t\t\t@mouseenter=\"handleAvatarMouseEnter(recentAgents[Math.min(recentAgents.length - 1, 4)], $event)\"\n\t\t\t\t\t\t\t\t@mouseleave=\"hideAgentCard\"\n\t\t\t\t\t\t\t\t@click=\"quickStartAgentChat(recentAgents[Math.min(recentAgents.length - 1, 4)])\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<img v-if=\"recentAgents[Math.min(recentAgents.length - 1, 4)].avatar\" \n\t\t\t\t\t\t\t\t\t:src=\"recentAgents[Math.min(recentAgents.length - 1, 4)].avatar\" \n\t\t\t\t\t\t\t\t\t:alt=\"recentAgents[Math.min(recentAgents.length - 1, 4)].name\" />\n\t\t\t\t\t\t\t\t<div v-else class=\"agent-avatar-text\">\n\t\t\t\t\t\t\t\t\t{{ recentAgents[Math.min(recentAgents.length - 1, 4)].name.charAt(0) }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 更多按钮 -->\n\t\t\t\t\t<i class=\"el-icon-more header-btn\" title=\"更多\" @click=\"toggleSidePanel\"></i>\n\t\t\t\t</div>\n\t\t\t</el-header>\n\t\t\t\n\t\t\t<!-- 智能体悬停卡片 -->\n\t\t\t<div v-if=\"hoveredAgentCard\" \n\t\t\t\tclass=\"agent-hover-panel\" \n\t\t\t\t:style=\"agentCardStyle\"\n\t\t\t\t@mouseenter=\"onPanelEnter\"\n\t\t\t\t@mouseleave=\"onPanelLeave\">\n\t\t\t\t<!-- 指向箭头 -->\n\t\t\t\t<div class=\"panel-arrow\"></div>\n\t\t\t\t<!-- 使用统一的卡片组件 -->\n\t\t\t\t<chat-agent-card \n\t\t\t\t\t:agent=\"hoveredAgentCard.agent\"\n\t\t\t\t\t:show-actions=\"true\"\n\t\t\t\t\t@start-chat=\"quickStartAgentChat\">\n\t\t\t\t</chat-agent-card>\n\t\t\t</div>\n\t\t\t\n\t\t\t<el-main style=\"padding: 0;\">\n\t\t\t\t<el-container>\n\t\t\t\t\t<el-container class=\"content-box\">\n\t\t\t\t\t\t<el-main class=\"im-chat-main\" id=\"chatScrollBox\" @scroll=\"onScroll\">\n\t\t\t\t\t\t\t<div class=\"im-chat-box\">\n\t\t\t\t\t\t\t\t<!-- 调试：检查消息是否真的渲染 -->\n\t\t\t\t\t\t\t\t<div v-if=\"currentAgentChat && false\" style=\"position: fixed; top: 100px; right: 10px; width: 300px; background: yellow; z-index: 9999; padding: 10px; border: 2px solid red;\">\n\t\t\t\t\t\t\t\t\t<p>调试面板：有{{ displayMessages.length }}条消息</p>\n\t\t\t\t\t\t\t\t\t<div v-for=\"(msg, i) in displayMessages\" :key=\"`debug-${i}`\">\n\t\t\t\t\t\t\t\t\t\t<p>消息{{ i }}: {{ msg.selfSend ? '我' : '智能体' }} - {{ msg.content?.substring(0, 30) }}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t<!-- 智能体会话消息 - 简化渲染用于调试 -->\n\t\t\t\t\t\t\t\t\t<template v-if=\"currentAgentChat\">\n\t\t\t\t\t\t\t\t\t\t<li v-for=\"(msgInfo, idx) in displayMessages\" :key=\"msgInfo.tmpId || msgInfo.id || `agent-${idx}`\">\n\t\t\t\t\t\t\t\t\t\t\t<chat-message-item \n\t\t\t\t\t\t\t\t\t\t\t\t@call=\"onCall(msgInfo.type)\"\n\t\t\t\t\t\t\t\t\t\t\t\t:mine=\"isMineMessage(msgInfo)\" \n\t\t\t\t\t\t\t\t\t\t\t\t:headImage=\"headImage(msgInfo) || ''\"\n\t\t\t\t\t\t\t\t\t\t\t\t:showName=\"showName(msgInfo) || '未知'\"\n\t\t\t\t\t\t\t\t\t\t\t\t:msgInfo=\"msgInfo\"\n\t\t\t\t\t\t\t\t\t\t\t\t:groupMembers=\"[]\" \n\t\t\t\t\t\t\t\t\t\t\t\t@delete=\"deleteMessage\"\n\t\t\t\t\t\t\t\t\t\t\t\t@recall=\"recallMessage\">\n\t\t\t\t\t\t\t\t\t\t\t</chat-message-item>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<!-- 普通会话消息 -->\n\t\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t\t<li v-for=\"(msgInfo, idx) in displayMessages\" :key=\"msgInfo.tmpId || msgInfo.id || idx\">\n\t\t\t\t\t\t\t\t\t\t\t<!-- LLM流式消息 - 输出和chat-message-item完全一样的DOM结构 -->\n\t\t\t\t\t\t\t\t\t\t\t<LLMStreamMessage \n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"msgInfo.type === 'llm-stream' && idx >= showMinIdx\"\n\t\t\t\t\t\t\t\t\t\t\t\t:ref=\"`llm-stream-${msgInfo.streamId}`\"\n\t\t\t\t\t\t\t\t\t\t\t\t:stream-id=\"msgInfo.streamId\"\n\t\t\t\t\t\t\t\t\t\t\t\t:mine=\"isMineMessage(msgInfo)\"\n\t\t\t\t\t\t\t\t\t\t\t\t:head-image=\"headImage(msgInfo)\"\n\t\t\t\t\t\t\t\t\t\t\t\t:show-name=\"showName(msgInfo)\"\n\t\t\t\t\t\t\t\t\t\t\t\t:msg-info=\"msgInfo\"\n\t\t\t\t\t\t\t\t\t\t\t\t@completed=\"onLLMStreamCompleted\"\n\t\t\t\t\t\t\t\t\t\t\t\t@error=\"onLLMStreamError\"\n\t\t\t\t\t\t\t\t\t\t\t\t@need-scroll=\"scrollToBottom\">\n\t\t\t\t\t\t\t\t\t\t\t</LLMStreamMessage>\n\t\t\t\t\t\t\t\t\t\t\t<!-- 普通消息 -->\n\t\t\t\t\t\t\t\t\t\t\t<chat-message-item v-else-if=\"idx >= showMinIdx\" \n\t\t\t\t\t\t\t\t\t\t\t\t@call=\"onCall(msgInfo.type)\"\n\t\t\t\t\t\t\t\t\t\t\t\t:mine=\"isMineMessage(msgInfo)\" :headImage=\"headImage(msgInfo)\"\n\t\t\t\t\t\t\t\t\t\t\t\t:showName=\"showName(msgInfo)\" :msgInfo=\"msgInfo\"\n\t\t\t\t\t\t\t\t\t\t\t\t:groupMembers=\"groupMembers\" @delete=\"deleteMessage\"\n\t\t\t\t\t\t\t\t\t\t\t\t@recall=\"recallMessage\">\n\t\t\t\t\t\t\t\t\t\t\t</chat-message-item>\n\t\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-main>\n\t\t\t\t\t\t<el-footer height=\"220px\" class=\"im-chat-footer\">\n\t\t\t\t\t\t\t<div class=\"chat-tool-bar\">\n\t\t\t\t\t\t\t\t<div title=\"表情\" class=\"icon iconfont icon-emoji\" ref=\"emotion\"\n\t\t\t\t\t\t\t\t\t@click.stop=\"showEmotionBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送图片\">\n\t\t\t\t\t\t\t\t\t<file-upload :action=\"'/image/upload'\" :maxSize=\"100 * 1024 * 1024\"\n\t\t\t\t\t\t\t\t\t\t:fileTypes=\"['image/jpeg', 'image/png', 'image/jpg', 'image/webp', 'image/gif']\"\n\t\t\t\t\t\t\t\t\t\t@before=\"onImageBefore\" @success=\"onImageSuccess\" @fail=\"onImageFail\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-picture-outline\"></i>\n\t\t\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送文件\">\n\t\t\t\t\t\t\t\t\t<file-upload ref=\"fileUpload\" :action=\"'/file/upload'\" :maxSize=\"10 * 1024 * 1024\"\n\t\t\t\t\t\t\t\t\t\t@before=\"onFileBefore\" @success=\"onFileSuccess\" @fail=\"onFileFail\">\n\t\t\t\t\t\t\t\t\t\t<i class=\"el-icon-wallet\"></i>\n\t\t\t\t\t\t\t\t\t</file-upload>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"回执消息\" v-show=\"isGroup && memberSize <= 500\"\n\t\t\t\t\t\t\t\t\tclass=\"icon iconfont icon-receipt\" :class=\"isReceipt ? 'chat-tool-active' : ''\"\n\t\t\t\t\t\t\t\t\t@click=\"onSwitchReceipt\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"发送语音\" class=\"el-icon-microphone\" @click=\"showRecordBox()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"语音通话\" v-show=\"isPrivate\" class=\"el-icon-phone-outline\"\n\t\t\t\t\t\t\t\t\t@click=\"showPrivateVideo('voice')\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"语音通话\" v-show=\"isGroup\" class=\"el-icon-phone-outline\"\n\t\t\t\t\t\t\t\t\t@click=\"onGroupVideo()\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"视频通话\" v-show=\"isPrivate\" class=\"el-icon-video-camera\"\n\t\t\t\t\t\t\t\t\t@click=\"showPrivateVideo('video')\">\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div title=\"聊天记录\" class=\"el-icon-chat-dot-round\" @click=\"showHistoryBox()\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"send-content-area\">\n\t\t\t\t\t\t\t\t<ChatInput \n\t\t\t\t\t\t\t\t\tref=\"chatInput\"\n\t\t\t\t\t\t\t\t\t:ownerId=\"chat.type === 'GROUP' ? (group.ownerId || mine.id) : mine.id\" \n\t\t\t\t\t\t\t\t\t:targetUserId=\"chat.type === 'PRIVATE' ? chat.targetId : null\" \n\t\t\t\t\t\t\t\t\t:group-members=\"groupMembers\"\n\t\t\t\t\t\t\t\t\t@submit=\"sendMessage\" />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"send-btn-area\">\n\t\t\t\t\t\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-s-promotion\"\n\t\t\t\t\t\t\t\t\t\t@click=\"notifySend()\">发送</el-button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</el-footer>\n\t\t\t\t\t</el-container>\n\t\t\t\t\t<!-- 统一侧边栏：根据聊天类型显示不同内容 -->\n\t\t\t\t\t<el-aside class=\"chat-side-panel\" width=\"320px\" v-if=\"showSide || showAgentSide\">\n\t\t\t\t\t\t<!-- 群聊：显示Tab切换（智能体优先） -->\n\t\t\t\t\t\t<template v-if=\"chat.type === 'GROUP' && showSide\">\n\t\t\t\t\t\t\t<el-tabs v-model=\"activeSideTab\" type=\"card\" class=\"side-tabs\">\n\t\t\t\t\t\t\t\t<el-tab-pane label=\"智能体\" name=\"agents\">\n\t\t\t\t\t\t\t\t\t<chat-agent-side \n\t\t\t\t\t\t\t\t\t\t:chat=\"chat\" \n\t\t\t\t\t\t\t\t\t\t:group=\"group\" \n\t\t\t\t\t\t\t\t\t\t:groupMembers=\"groupMembers\" \n\t\t\t\t\t\t\t\t\t\t@start-agent-chat=\"startAgentChat\"\n\t\t\t\t\t\t\t\t\t\t@edit-agent=\"editAgent\">\n\t\t\t\t\t\t\t\t\t</chat-agent-side>\n\t\t\t\t\t\t\t\t</el-tab-pane>\n\t\t\t\t\t\t\t\t<el-tab-pane label=\"群成员\" name=\"members\">\n\t\t\t\t\t\t\t\t\t<chat-group-side \n\t\t\t\t\t\t\t\t\t\t:group=\"group\" \n\t\t\t\t\t\t\t\t\t\t:groupMembers=\"groupMembers\" \n\t\t\t\t\t\t\t\t\t\t@reload=\"loadGroup(group.id)\">\n\t\t\t\t\t\t\t\t\t</chat-group-side>\n\t\t\t\t\t\t\t\t</el-tab-pane>\n\t\t\t\t\t\t\t</el-tabs>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<!-- 私聊：只显示智能体 -->\n\t\t\t\t\t\t<template v-else-if=\"showAgentSide\">\n\t\t\t\t\t\t\t<chat-agent-side \n\t\t\t\t\t\t\t\t:chat=\"chat\" \n\t\t\t\t\t\t\t\t:group=\"group\" \n\t\t\t\t\t\t\t\t:groupMembers=\"groupMembers\" \n\t\t\t\t\t\t\t\t@start-agent-chat=\"startAgentChat\"\n\t\t\t\t\t\t\t\t@edit-agent=\"editAgent\">\n\t\t\t\t\t\t\t</chat-agent-side>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</el-aside>\n\t\t\t\t</el-container>\n\t\t\t</el-main>\n\t\t\t<emotion ref=\"emoBox\" @emotion=\"onEmotion\"></Emotion>\n\t\t\t<chat-record :visible=\"showRecord\" @close=\"closeRecordBox\" @send=\"onSendRecord\"></chat-record>\n\t\t\t<group-member-selector ref=\"rtcSel\" :group=\"group\" @complete=\"onInviteOk\"></group-member-selector>\n\t\t\t<rtc-group-join ref=\"rtcJoin\" :groupId=\"group.id\"></rtc-group-join>\n\t\t\t<chat-history :visible=\"showHistory\" :chat=\"chat\" :friend=\"friend\" :group=\"group\"\n\t\t\t\t:groupMembers=\"groupMembers\" @close=\"closeHistoryBox\"></chat-history>\n\t\t</el-container>\n\t</div>\n</template>\n\n<script>\nimport ChatGroupSide from \"./ChatGroupSide.vue\";\nimport ChatAgentSide from \"./ChatAgentSide.vue\";\nimport ChatAgentCard from \"./ChatAgentCard.vue\";\nimport ChatMessageItem from \"./ChatMessageItem.vue\";\nimport FileUpload from \"../common/FileUpload.vue\";\nimport Emotion from \"../common/Emotion.vue\";\nimport ChatRecord from \"./ChatRecord.vue\";\nimport ChatHistory from \"./ChatHistory.vue\";\nimport ChatAtBox from \"./ChatAtBox.vue\"\nimport GroupMemberSelector from \"../group/GroupMemberSelector.vue\"\nimport RtcGroupJoin from \"../rtc/RtcGroupJoin.vue\"\nimport ChatInput from \"./ChatInput\";\nimport LLMStreamMessage from \"./LLMStreamMessage\";\nimport localForage from 'localforage';\n\nexport default {\n\tname: \"chatPrivate\",\n\tcomponents: {\n\t\tChatInput,\n\t\tChatMessageItem,\n\t\tFileUpload,\n\t\tChatGroupSide,\n\t\tChatAgentSide,\n\t\tChatAgentCard,\n\t\tEmotion,\n\t\tChatRecord,\n\t\tChatHistory,\n\t\tChatAtBox,\n\t\tGroupMemberSelector,\n\t\tRtcGroupJoin,\n\t\tLLMStreamMessage\n\t},\n\tprops: {\n\t\tchat: {\n\t\t\ttype: Object\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tuserInfo: {},\n\t\t\tgroup: {},\n\t\t\tgroupMembers: [],\n\t\t\tsendImageUrl: \"\",\n\t\t\tsendImageFile: \"\",\n\t\t\tplaceholder: \"\",\n\t\t\tisReceipt: true,\n\t\t\tshowRecord: false, // 是否显示语音录制弹窗\n\t\t\tshowSide: false, // 是否显示侧边栏\n\t\t\tshowAgentSide: false, // 是否显示智能体侧边栏\n\t\t\tshowHistory: false, // 是否显示历史聊天记录\n\t\t\tactiveSideTab: 'agents', // 侧边栏活动tab（默认显示智能体）\n\t\t\tcurrentAgentChat: null, // 当前智能体会话\n\t\t\ta2aClient: null, // A2A客户端实例\n\t\t\tstreamingMessageId: null,  // 当前流式消息ID\n\t\t\trecentAgents: [], // 最近使用的智能体列表\n\t\t\thoveredAgentCard: null, // 悬停的智能体卡片\n\t\t\thoverCardTimeout: null, // 悬停卡片隐藏定时器\n\t\t\tavatarsExpanded: false, // 头像是否展开\n\t\t\tavatarsFullyExpanded: false, // 头像是否完全展开（动画完成）\n\t\t\tavatarExpandTimeout: null, // 头像展开延迟定时器\n\t\t\tavatarFullyExpandTimeout: null, // 头像完全展开定时器\n\t\t\tpendingHoverCard: null, // 待显示的hover卡片\n\t\t\thoverCheckTimeout: null, // hover检查定时器\n\t\t\tlockMessage: false, // 是否锁定发送，\n\t\t\tshowMinIdx: 0, // 下标低于showMinIdx的消息不显示，否则页面会很卡置\n\t\t\treqQueue: [],\n\t\t\tisSending: false,\n\t\t\t// LLM流式消息相关\n\t\t\tactiveLLMStream: null, // 当前活跃的LLM流\n\t\t\tllmStreams: new Map(), // 存储所有的LLM流，key为streamId\n\t\t\t// 智能体状态监控\n\t\t\tagentStatusTimer: null, // 智能体状态检查定时器\n\t\t\t// 无缝任务续问功能\n\t\t\tlastCompletedTask: null // 最后完成的任务信息 {name, id}\n\t\t}\n\t},\n\tmethods: {\n\t\tmoveChatToTop() {\n\t\t\tlet chatIdx = this.$store.getters.findChatIdx(this.chat);\n\t\t\tthis.$store.commit(\"moveTop\", chatIdx);\n\t\t},\n\t\tcloseRefBox() {\n\t\t\tthis.$refs.emoBox.close();\n\t\t\t// this.$refs.atBox.close();\n\t\t},\n\t\tonCall(type) {\n\t\t\tif (type == this.$enums.MESSAGE_TYPE.ACT_RT_VOICE) {\n\t\t\t\tthis.showPrivateVideo('voice');\n\t\t\t} else if (type == this.$enums.MESSAGE_TYPE.ACT_RT_VIDEO) {\n\t\t\t\tthis.showPrivateVideo('video');\n\t\t\t}\n\t\t},\n\t\tonSwitchReceipt() {\n\t\t\tthis.isReceipt = !this.isReceipt;\n\t\t\tthis.refreshPlaceHolder();\n\t\t},\n\t\tonImageSuccess(data, file) {\n\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\tmsgInfo.content = JSON.stringify(data);\n\t\t\tmsgInfo.receipt = this.isReceipt;\n\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\tmsgInfo.loadStatus = 'ok';\n\t\t\t\tmsgInfo.id = m.id;\n\t\t\t\tthis.isReceipt = false;\n\t\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, file.chat]);\n\t\t\t})\n\t\t},\n\t\tonImageFail(e, file) {\n\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\tmsgInfo.loadStatus = 'fail';\n\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, file.chat]);\n\t\t},\n\t\tonImageBefore(file) {\n\t\t\t// 被封禁提示\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet url = URL.createObjectURL(file);\n\t\t\tlet data = {\n\t\t\t\toriginUrl: url,\n\t\t\t\tthumbUrl: url\n\t\t\t}\n\t\t\tlet msgInfo = {\n\t\t\t\tid: 0,\n\t\t\t\ttmpId: this.generateId(),\n\t\t\t\tfileId: file.uid,\n\t\t\t\tsendId: this.mine.id,\n\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\tselfSend: true,\n\t\t\t\ttype: 1,\n\t\t\t\treadedCount: 0,\n\t\t\t\tloadStatus: \"loading\",\n\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t}\n\t\t\t// 填充对方id\n\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t// 插入消息\n\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t\t// 会话置顶\n\t\t\tthis.moveChatToTop();\n\t\t\t// 滚动到底部\n\t\t\tthis.scrollToBottom();\n\t\t\t// 借助file对象保存\n\t\t\tfile.msgInfo = msgInfo;\n\t\t\tfile.chat = this.chat;\n\t\t},\n\t\tonFileSuccess(url, file) {\n\t\t\tlet data = {\n\t\t\t\tname: file.name,\n\t\t\t\tsize: file.size,\n\t\t\t\turl: url\n\t\t\t}\n\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\tmsgInfo.content = JSON.stringify(data);\n\t\t\tmsgInfo.receipt = this.isReceipt\n\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\tmsgInfo.loadStatus = 'ok';\n\t\t\t\tmsgInfo.id = m.id;\n\t\t\t\tthis.isReceipt = false;\n\t\t\t\tthis.refreshPlaceHolder();\n\t\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, file.chat]);\n\t\t\t})\n\t\t},\n\t\tonFileFail(e, file) {\n\t\t\tlet msgInfo = JSON.parse(JSON.stringify(file.msgInfo));\n\t\t\tmsgInfo.loadStatus = 'fail';\n\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, file.chat]);\n\t\t},\n\t\tonFileBefore(file) {\n\t\t\t// 被封禁提示\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet url = URL.createObjectURL(file);\n\t\t\tlet data = {\n\t\t\t\tname: file.name,\n\t\t\t\tsize: file.size,\n\t\t\t\turl: url\n\t\t\t}\n\t\t\tlet msgInfo = {\n\t\t\t\tid: 0,\n\t\t\t\ttmpId: this.generateId(),\n\t\t\t\tsendId: this.mine.id,\n\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\tselfSend: true,\n\t\t\t\ttype: 2,\n\t\t\t\tloadStatus: \"loading\",\n\t\t\t\treadedCount: 0,\n\t\t\t\tstatus: this.$enums.MESSAGE_STATUS.UNSEND\n\t\t\t}\n\t\t\t// 填充对方id\n\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t// 插入消息\n\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t\t// 会话置顶\n\t\t\tthis.moveChatToTop();\n\t\t\t// 滚动到底部\n\t\t\tthis.scrollToBottom();\n\t\t\t// 借助file对象透传\n\t\t\tfile.msgInfo = msgInfo;\n\t\t\tfile.chat = this.chat;\n\t\t},\n\t\tonCloseSide() {\n\t\t\tthis.showSide = false;\n\t\t},\n\t\tonScrollToTop() {\n\t\t\t// 多展示10条信息\n\t\t\tthis.showMinIdx = this.showMinIdx > 10 ? this.showMinIdx - 10 : 0;\n\t\t},\n\t\tonScroll(e) {\n\t\t\tlet scrollElement = e.target;\n\t\t\tlet scrollTop;\n\n\t\t\t// 安全获取scrollTop属性\n\t\t\tif (window.vscodeVueChatUtils && window.vscodeVueChatUtils.safeGetProperty) {\n\t\t\t\tscrollTop = window.vscodeVueChatUtils.safeGetProperty(scrollElement, 'scrollTop');\n\t\t\t} else {\n\t\t\t\tscrollTop = scrollElement.scrollTop;\n\t\t\t}\n\n\t\t\tif (scrollTop < 30) { // 在顶部,不滚动的情况\n\t\t\t\t// 多展示20条信息\n\t\t\t\tthis.showMinIdx = this.showMinIdx > 20 ? this.showMinIdx - 20 : 0;\n\t\t\t}\n\t\t},\n\t\tshowEmotionBox() {\n\t\t\tlet width = this.$refs.emotion.offsetWidth;\n\t\t\tlet left = this.$elm.fixLeft(this.$refs.emotion);\n\t\t\tlet top = this.$elm.fixTop(this.$refs.emotion);\n\t\t\tthis.$refs.emoBox.open({\n\t\t\t\tx: left + width / 2,\n\t\t\t\ty: top\n\t\t\t})\n\t\t},\n\t\tonEmotion(emoText) {\n\t\t\tthis.$refs.chatInput.insertEmoji(emoText);\n\t\t},\n\t\tshowRecordBox() {\n\t\t\tthis.showRecord = true;\n\t\t},\n\t\tcloseRecordBox() {\n\t\t\tthis.showRecord = false;\n\t\t},\n\t\tshowPrivateVideo(mode) {\n\t\t\t// 检查是否被封禁\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet rtcInfo = {\n\t\t\t\tmode: mode,\n\t\t\t\tisHost: true,\n\t\t\t\tfriend: this.friend,\n\t\t\t}\n\t\t\t// 通过home.vue打开单人视频窗口\n\t\t\tthis.$eventBus.$emit(\"openPrivateVideo\", rtcInfo);\n\t\t},\n\t\tonGroupVideo() {\n\t\t\t// 检查是否被封禁\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 邀请成员发起通话\n\t\t\tlet ids = [this.mine.id];\n\t\t\tlet maxChannel = this.$store.state.configStore.webrtc.maxChannel;\n\t\t\tthis.$refs.rtcSel.open(maxChannel, ids, ids, []);\n\t\t},\n\t\tonInviteOk(members) {\n\t\t\tif (members.length < 2) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet userInfos = [];\n\t\t\tmembers.forEach(m => {\n\t\t\t\tuserInfos.push({\n\t\t\t\t\tid: m.userId,\n\t\t\t\t\tnickName: m.showNickName,\n\t\t\t\t\theadImage: m.headImage,\n\t\t\t\t\tisCamera: false,\n\t\t\t\t\tisMicroPhone: true\n\t\t\t\t})\n\t\t\t})\n\t\t\tlet rtcInfo = {\n\t\t\t\tisHost: true,\n\t\t\t\tgroupId: this.group.id,\n\t\t\t\tinviterId: this.mine.id,\n\t\t\t\tuserInfos: userInfos\n\t\t\t}\n\t\t\t// 通过home.vue打开多人视频窗口\n\t\t\tthis.$eventBus.$emit(\"openGroupVideo\", rtcInfo);\n\t\t},\n\t\tshowHistoryBox() {\n\t\t\tthis.showHistory = true;\n\t\t},\n\t\tcloseHistoryBox() {\n\t\t\tthis.showHistory = false;\n\t\t},\n\t\tonSendRecord(data) {\n\t\t\t// 检查是否被封禁\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet msgInfo = {\n\t\t\t\tcontent: JSON.stringify(data),\n\t\t\t\ttype: 3,\n\t\t\t\treceipt: this.isReceipt\n\t\t\t}\n\t\t\t// 填充对方id\n\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\tm.selfSend = true;\n\t\t\t\tthis.$store.commit(\"insertMessage\", [m, this.chat]);\n\t\t\t\t// 会话置顶\n\t\t\t\tthis.moveChatToTop();\n\t\t\t\t// 保持输入框焦点\n\t\t\t\tthis.$refs.chatInput.focus();\n\t\t\t\t// 滚动到底部\n\t\t\t\tthis.scrollToBottom();\n\t\t\t\t// 关闭录音窗口\n\t\t\t\tthis.showRecord = false;\n\t\t\t\tthis.isReceipt = false;\n\t\t\t\tthis.refreshPlaceHolder();\n\t\t\t})\n\t\t},\n\t\tfillTargetId(msgInfo, targetId) {\n\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\tmsgInfo.groupId = targetId;\n\t\t\t} else if (this.chat.isTerminalChat || this.chat.isTerminalInbox) {\n\t\t\t\t// 🔧 修正：终端会话处理（支持新旧格式）\n\t\t\t\tconst parts = targetId.split('_');\n\t\t\t\tconst userId = parseInt(parts[0]);\n\t\t\t\t\n\t\t\t\tmsgInfo.recvId = userId; // 用户自己的ID\n\t\t\t\t\n\t\t\t\t// 🔧 处理新的目标终端模式\n\t\t\t\tif (this.chat.isTerminalChat) {\n\t\t\t\t\tmsgInfo.targetTerminal = this.chat.senderTerminal; // 发送给发送端终端\n\t\t\t\t\tmsgInfo.senderTerminal = this.getCurrentTerminal(); // 当前终端作为发送端\n\t\t\t\t} \n\t\t\t\t// 🔧 兼容旧的终端收件箱模式\n\t\t\t\telse if (this.chat.isTerminalInbox) {\n\t\t\t\t\tconst receivingTerminal = parseInt(parts[1]);\n\t\t\t\t\tmsgInfo.targetTerminal = receivingTerminal; // 保持兼容性\n\t\t\t\t\tmsgInfo.senderTerminal = this.getCurrentTerminal();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmsgInfo.recvId = targetId;\n\t\t\t\tmsgInfo.senderTerminal = this.getCurrentTerminal();\n\t\t\t}\n\t\t},\n\t\tnotifySend() {\n\t\t\tthis.$refs.chatInput.submit();\n\t\t},\n\t\tasync sendMessage(fullList) {\n\t\t\tthis.resetEditor();\n\t\t\tthis.readedMessage();\n\t\t\t\n\t\t\t// 如果在智能体对话模式下，使用智能体发送逻辑\n\t\t\tif (this.currentAgentChat) {\n\t\t\t\tawait this.sendToAgent(fullList);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 检查是否被封禁\n\t\t\tif (this.isBanned) {\n\t\t\t\tthis.showBannedTip();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet sendText = this.isReceipt ? \"【回执消息】\" : \"\";\n\t\t\tlet promiseList = [];\n\t\t\tfor (let i = 0; i < fullList.length; i++) {\n\t\t\t\tlet msg = fullList[i];\n\t\t\t\tswitch (msg.type) {\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\tawait this.sendTextMessage(sendText + msg.content, msg.atUserIds);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"image\":\n\t\t\t\t\t\tawait this.sendImageMessage(msg.content.file);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"file\":\n\t\t\t\t\t\tawait this.sendFileMessage(msg.content.file);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// 触发消息发送完成事件\n\t\t\tthis.$emit('message-sent');\n\t\t},\n\t\tsendImageMessage(file) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.onImageBefore(file);\n\t\t\t\tlet formData = new FormData()\n\t\t\t\tformData.append('file', file)\n\t\t\t\tthis.$http.post(\"/image/upload\", formData, {\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t\t}\n\t\t\t\t}).then((data) => {\n\t\t\t\t\tthis.onImageSuccess(data, file);\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((res) => {\n\t\t\t\t\tthis.onImageFail(res, file);\n\t\t\t\t\treject();\n\t\t\t\t})\n\t\t\t\tthis.$nextTick(() => this.$refs.chatInput.focus());\n\t\t\t\tthis.scrollToBottom();\n\t\t\t});\n\t\t},\n\t\tsendTextMessage(sendText, atUserIds) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tif (!sendText.trim()) {\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t\tlet msgInfo = {\n\t\t\t\t\tcontent: sendText,\n\t\t\t\t\ttype: 0\n\t\t\t\t}\n\t\t\t\t// 填充对方id\n\t\t\t\tthis.fillTargetId(msgInfo, this.chat.targetId);\n\t\t\t\t// 被@人员列表\n\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\tmsgInfo.atUserIds = atUserIds;\n\t\t\t\t\tmsgInfo.receipt = this.isReceipt;\n\t\t\t\t}\n\t\t\t\tthis.lockMessage = true;\n\t\t\t\tthis.sendMessageRequest(msgInfo).then((m) => {\n\t\t\t\t\tm.selfSend = true;\n\t\t\t\t\tthis.$store.commit(\"insertMessage\", [m, this.chat]);\n\t\t\t\t\t// 会话置顶\n\t\t\t\t\tthis.moveChatToTop();\n\t\t\t\t}).finally(() => {\n\t\t\t\t\t// 解除锁定\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\tthis.isReceipt = false;\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tsendFileMessage(file) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet check = this.$refs.fileUpload.beforeUpload(file);\n\t\t\t\tif (check) {\n\t\t\t\t\tthis.$refs.fileUpload.onFileUpload({ file });\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tdeleteMessage(msgInfo) {\n\t\t\tthis.$confirm('确认删除消息?', '删除消息', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tthis.$store.commit(\"deleteMessage\", [msgInfo, this.chat]);\n\t\t\t});\n\t\t},\n\t\trecallMessage(msgInfo) {\n\t\t\tthis.$confirm('确认撤回消息?', '撤回消息', {\n\t\t\t\tconfirmButtonText: '确定',\n\t\t\t\tcancelButtonText: '取消',\n\t\t\t\ttype: 'warning'\n\t\t\t}).then(() => {\n\t\t\t\tlet url = `/message/${this.chat.type.toLowerCase()}/recall/${msgInfo.id}`\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: url,\n\t\t\t\t\tmethod: 'delete'\n\t\t\t\t}).then((m) => {\n\t\t\t\t\tthis.$message.success(\"消息已撤回\");\n\t\t\t\t\tm.selfSend = true;\n\t\t\t\t\tthis.$store.commit(\"recallMessage\", [m, this.chat]);\n\t\t\t\t})\n\t\t\t});\n\t\t},\n\t\treadedMessage() {\n\t\t\tif (this.chat.unreadCount == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$store.commit(\"resetUnreadCount\", this.chat)\n\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\tvar url = `/message/group/readed?groupId=${this.chat.targetId}`\n\t\t\t} else {\n\t\t\t\turl = `/message/private/readed?friendId=${this.chat.targetId}`\n\t\t\t}\n\t\t\tthis.$http({\n\t\t\t\turl: url,\n\t\t\t\tmethod: 'put'\n\t\t\t}).then(() => { })\n\t\t},\n\t\tloadReaded(fId) {\n\t\t\t// 跳过智能体会话（智能体ID包含\"agent_\"）\n\t\t\tif (fId && fId.toString().includes('agent_')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tthis.$http({\n\t\t\t\turl: `/message/private/maxReadedId?friendId=${fId}`,\n\t\t\t\tmethod: 'get'\n\t\t\t}).then((id) => {\n\t\t\t\tthis.$store.commit(\"readedMessage\", {\n\t\t\t\t\tfriendId: fId,\n\t\t\t\t\tmaxId: id\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tloadGroup(groupId) {\n\t\t\tthis.$http({\n\t\t\t\turl: `/group/find/${groupId}`,\n\t\t\t\tmethod: 'get'\n\t\t\t}).then((group) => {\n\t\t\t\tthis.group = group;\n\t\t\t\tthis.$store.commit(\"updateChatFromGroup\", group);\n\t\t\t\tthis.$store.commit(\"updateGroup\", group);\n\t\t\t});\n\n\t\t\tthis.$http({\n\t\t\t\turl: `/group/members/${groupId}`,\n\t\t\t\tmethod: 'get'\n\t\t\t}).then((groupMembers) => {\n\t\t\t\tthis.groupMembers = groupMembers;\n\t\t\t});\n\t\t},\n\t\tupdateFriendInfo() {\n\t\t\tif (this.isFriend) {\n\t\t\t\t// store的数据不能直接修改，深拷贝一份store的数据\n\t\t\t\tlet friend = JSON.parse(JSON.stringify(this.friend));\n\t\t\t\tfriend.headImage = this.userInfo.headImageThumb;\n\t\t\t\tfriend.nickName = this.userInfo.nickName;\n\t\t\t\tfriend.showNickName = friend.remarkNickName ? friend.remarkNickName : friend.nickName;\n\t\t\t\tthis.$store.commit(\"updateChatFromFriend\", friend);\n\t\t\t\tthis.$store.commit(\"updateFriend\", friend);\n\t\t\t} else {\n\t\t\t\tthis.$store.commit(\"updateChatFromUser\", this.userInfo);\n\t\t\t}\n\t\t},\n\t\tloadFriend(friendId) {\n\t\t\t// 跳过智能体会话（智能体ID包含\"agent_\"）\n\t\t\tif (friendId && friendId.toString().includes('agent_')) {\n\t\t\t\t// 对于智能体会话，设置一个默认的userInfo\n\t\t\t\tthis.userInfo = {\n\t\t\t\t\tid: friendId,\n\t\t\t\t\tnickName: this.chat.showName || '智能体',\n\t\t\t\t\theadImageThumb: this.chat.headImage\n\t\t\t\t};\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 获取好友信息\n\t\t\tthis.$http({\n\t\t\t\turl: `/user/find/${friendId}`,\n\t\t\t\tmethod: 'GET'\n\t\t\t}).then((userInfo) => {\n\t\t\t\tthis.userInfo = userInfo;\n\t\t\t\tthis.updateFriendInfo();\n\t\t\t})\n\t\t},\n\t\tshowName(msgInfo) {\n\t\t\tif (!msgInfo) {\n\t\t\t\treturn \"\"\n\t\t\t}\n\t\t\t// 如果消息有sendNickName字段，优先使用\n\t\t\tif (msgInfo.sendNickName) {\n\t\t\t\treturn msgInfo.sendNickName;\n\t\t\t}\n\t\t\tif (this.isGroup) {\n\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\treturn member ? member.showNickName : msgInfo.sendNickName || \"\";\n\t\t\t} else {\n\t\t\t\treturn msgInfo.selfSend ? this.mine.nickName : this.chat.showName\n\t\t\t}\n\t\t},\n\t\theadImage(msgInfo) {\n\t\t\t// 智能体会话特殊处理\n\t\t\tif (this.currentAgentChat) {\n\t\t\t\tif (msgInfo.selfSend) {\n\t\t\t\t\treturn this.mine.headImageThumb || this.mine.headImage || \"\";\n\t\t\t\t} else {\n\t\t\t\t\t// 智能体头像\n\t\t\t\t\treturn this.currentAgentChat.agent?.avatar || \"\";\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (this.isGroup) {\n\t\t\t\tlet member = this.groupMembers.find((m) => m.userId == msgInfo.sendId);\n\t\t\t\treturn member ? member.headImage : \"\";\n\t\t\t} else {\n\t\t\t\treturn msgInfo.sendId == this.mine.id ? this.mine.headImageThumb : this.chat.headImage\n\t\t\t}\n\t\t},\n\t\tresetEditor() {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tif (this.$refs.chatInput) {\n\t\t\t\t\tthis.$refs.chatInput.clear();\n\t\t\t\t\tthis.$refs.chatInput.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tscrollToBottom() {\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tlet div = document.getElementById(\"chatScrollBox\");\n\t\t\t\tdiv.scrollTop = div?.scrollHeight;\n\t\t\t});\n\t\t},\n\t\trefreshPlaceHolder() {\n\t\t\tif (this.isReceipt) {\n\t\t\t\tthis.placeholder = \"【回执消息】\"\n\t\t\t} else if (this.$refs.editBox && this.$refs.editBox.innerHTML) {\n\t\t\t\tthis.placeholder = \"\"\n\t\t\t} else {\n\t\t\t\tthis.placeholder = \"聊点什么吧~\";\n\t\t\t}\n\t\t},\n\t\tsendMessageRequest(msgInfo) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t// 请求入队列，防止请求\"后发先至\"，导致消息错序\n\t\t\t\tthis.reqQueue.push({ msgInfo, resolve, reject });\n\t\t\t\tthis.processReqQueue();\n\t\t\t})\n\t\t},\n\t\tprocessReqQueue() {\n\t\t\tif (this.reqQueue.length && !this.isSending) {\n\t\t\t\tthis.isSending = true;\n\t\t\t\tconst reqData = this.reqQueue.shift();\n\t\t\t\tthis.$http({\n\t\t\t\t\turl: this.messageAction,\n\t\t\t\t\tmethod: 'post',\n\t\t\t\t\tdata: reqData.msgInfo\n\t\t\t\t}).then((res) => {\n\t\t\t\t\treqData.resolve(res)\n\t\t\t\t}).catch((e) => {\n\t\t\t\t\treqData.reject(e)\n\t\t\t\t}).finally(() => {\n\t\t\t\t\tthis.isSending = false;\n\t\t\t\t\t// 发送下一条请求\n\t\t\t\t\tthis.processReqQueue();\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tshowBannedTip() {\n\t\t\tlet msgInfo = {\n\t\t\t\ttmpId: this.generateId(),\n\t\t\t\tsendId: this.mine.id,\n\t\t\t\tsendTime: new Date().getTime(),\n\t\t\t\ttype: this.$enums.MESSAGE_TYPE.TIP_TEXT\n\t\t\t}\n\t\t\tif (this.chat.type == \"PRIVATE\") {\n\t\t\t\tmsgInfo.recvId = this.mine.id\n\t\t\t\tmsgInfo.content = \"该用户已被管理员封禁,原因:\" + this.userInfo.reason\n\t\t\t} else {\n\t\t\t\tmsgInfo.groupId = this.group.id;\n\t\t\t\tmsgInfo.content = \"本群聊已被管理员封禁,原因:\" + this.group.reason\n\t\t\t}\n\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t},\n\t\tgenerateId() {\n\t\t\t// 生成临时id\n\t\t\treturn String(new Date().getTime()) + String(Math.floor(Math.random() * 1000));\n\t\t},\n\t\t\n\t\t// 节流函数 - 优化性能\n\t\tthrottle(func, delay) {\n\t\t\tlet timeoutId;\n\t\t\tlet lastExecTime = 0;\n\t\t\treturn function (...args) {\n\t\t\t\tconst currentTime = Date.now();\n\t\t\t\tif (currentTime - lastExecTime > delay) {\n\t\t\t\t\tfunc.apply(this, args);\n\t\t\t\t\tlastExecTime = currentTime;\n\t\t\t\t} else {\n\t\t\t\t\tclearTimeout(timeoutId);\n\t\t\t\t\ttimeoutId = setTimeout(() => {\n\t\t\t\t\t\tfunc.apply(this, args);\n\t\t\t\t\t\tlastExecTime = Date.now();\n\t\t\t\t\t}, delay - (currentTime - lastExecTime));\n\t\t\t\t}\n\t\t\t};\n\t\t},\n\t\t\n\t\t// 处理头像加载错误\n\t\thandleAvatarError(e) {\n\t\t\te.target.src = '/img/default-avatar.png';\n\t\t},\n\t\t\n\t\t// LLM流式消息处理方法\n\t\thandleLLMStreamRequest(data) {\n\t\t\t// 准备流式传输，不创建UI\n\t\t\t// 分析问题内容\n\t\t\t\n\t\t\t// 尝试从问题中提取任务名（用于续问功能）\n\t\t\tlet taskInfo = null;\n\t\t\tif (data.question) {\n\t\t\t\t// 查找是否包含@任务[任务名]格式\n\t\t\t\tconst taskMatch = data.question.match(/@任务\\[([^\\]]+)\\]/);\n\t\t\t\t// 任务匹配结果\n\t\t\t\t\n\t\t\t\tif (taskMatch) {\n\t\t\t\t\tconst taskName = taskMatch[1].trim();\n\t\t\t\t\t// 如果不是\"新建任务\"，则提取为任务信息\n\t\t\t\t\tif (taskName !== '新建任务') {\n\t\t\t\t\t\ttaskInfo = {\n\t\t\t\t\t\t\tname: taskName,\n\t\t\t\t\t\t\tid: data.streamId // 使用streamId作为临时id\n\t\t\t\t\t\t};\n\t\t\t\t\t\t// 从LLM_STREAM_REQUEST提取任务信息\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 跳过\"新建任务\"的任务信息提取\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// 未匹配到任务格式\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 仅创建流信息用于准备，不设置activeLLMStream（避免UI立即创建）\n\t\t\tconst streamInfo = {\n\t\t\t\tstreamId: data.streamId,\n\t\t\t\ttitle: data.question || 'AI 助手',\n\t\t\t\tstartTime: Date.now(),\n\t\t\t\ttaskInfo: taskInfo, // 缓存任务信息\n\t\t\t\tisStarted: false // 标记尚未开始\n\t\t\t};\n\t\t\t\n\t\t\t// 仅存储流信息，不设置为活跃流\n\t\t\tthis.llmStreams.set(data.streamId, streamInfo);\n\t\t\t// 流式传输已准备，等待第一个chunk创建UI\n\t\t},\n\t\t\n\t\thandleLLMStreamChunk(data) {\n\t\t\t\n\t\t\t// 获取流信息\n\t\t\tconst streamInfo = this.llmStreams.get(data.streamId);\n\t\t\tif (!streamInfo) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 如果是第一个chunk，创建activeLLMStream并触发UI创建\n\t\t\tif (!streamInfo.isStarted) {\n\t\t\t\t// 第一个chunk到达，开始创建LLM流式消息UI\n\t\t\t\tstreamInfo.isStarted = true;\n\t\t\t\tthis.activeLLMStream = streamInfo;\n\t\t\t\t\n\t\t\t\t// 等待组件渲染并初始化\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\tconst streamRef = this.$refs[`llm-stream-${data.streamId}`];\n\t\t\t\t\t\tif (streamRef) {\n\t\t\t\t\t\t\tconst component = Array.isArray(streamRef) ? streamRef[0] : streamRef;\n\t\t\t\t\t\t\tif (component && component.startStream) {\n\t\t\t\t\t\t\t\tcomponent.startStream();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t// 检查是否是当前活跃的流\n\t\t\tif (this.activeLLMStream && this.activeLLMStream.streamId === data.streamId) {\n\t\t\t\t// 添加文本块到流式消息组件\n\t\t\t\tconst streamRef = this.$refs[`llm-stream-${data.streamId}`];\n\t\t\t\tif (streamRef) {\n\t\t\t\t\tconst component = Array.isArray(streamRef) ? streamRef[0] : streamRef;\n\t\t\t\t\tif (component && component.addChunk) {\n\t\t\t\t\t\tcomponent.addChunk(data.chunk, data.sequence);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 立即滚动到底部\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t\n\t\thandleLLMStreamEnd(data) {\n\t\t\tconsole.error(`🔥🔥🔥 [ChatBox] [${new Date().toISOString()}] handleLLMStreamEnd 被调用了!!! 🔥🔥🔥`, data);\n\t\t\t// LLM流式传输结束\n\t\t\t// 检查任务信息\n\t\t\t\n\t\t\t// 检查是否是当前活跃的流\n\t\t\tif (this.activeLLMStream && this.activeLLMStream.streamId === data.streamId) {\n\t\t\t\t// 流式结束，获取真实任务信息\n\t\t\t\t\n\t\t\t\t// 从拆分的字段中重构任务信息\n\t\t\t\tlet taskInfo = null;\n\t\t\t\tif (data.taskName) {\n\t\t\t\t\ttaskInfo = {\n\t\t\t\t\t\tname: data.taskName,  // 这里的taskName已经包含零宽编码\n\t\t\t\t\t\tid: data.taskId\n\t\t\t\t\t};\n\t\t\t\t\t// 从拆分字段重构任务信息\n\t\t\t\t} else {\n\t\t\t\t\t// 后端未提供taskName\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 如果有有效的任务信息，设置续问\n\t\t\t\tif (taskInfo && taskInfo.name && taskInfo.name !== '新建任务') {\n\t\t\t\t\tthis.lastCompletedTask = taskInfo;\n\t\t\t\t\t// 设置任务续问信息\n\t\t\t\t\t\n\t\t\t\t\t// 通知 ChatInput 设置任务续问\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.setTaskContinuation(this.lastCompletedTask);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// 没有有效任务信息\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 结束流式传输\n\t\t\t\tconst streamRef = this.$refs[`llm-stream-${data.streamId}`];\n\t\t\t\tif (streamRef) {\n\t\t\t\t\tconst component = Array.isArray(streamRef) ? streamRef[0] : streamRef;\n\t\t\t\t\tif (component && component.endStream) {\n\t\t\t\t\t\tcomponent.endStream();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 无缝任务续问功能\n\t\tsetTaskContinuation(taskInfo) {\n\t\t\t// 设置任务续问\n\t\t\t// 获取 ChatInput 组件引用\n\t\t\tconst chatInputRef = this.$refs.chatInput;\n\t\t\tif (chatInputRef && chatInputRef.setTaskContinuation) {\n\t\t\t\tchatInputRef.setTaskContinuation(taskInfo);\n\t\t\t}\n\t\t},\n\t\t\n\t\thandleLLMStreamError(data) {\n\t\t\tconsole.error('[ChatBox] LLM流式传输错误:', data);\n\t\t\t\n\t\t\t// 检查是否是当前活跃的流\n\t\t\tif (this.activeLLMStream && this.activeLLMStream.streamId === data.streamId) {\n\t\t\t\t// 处理错误\n\t\t\t\tconst streamRef = this.$refs[`llm-stream-${data.streamId}`];\n\t\t\t\tif (streamRef) {\n\t\t\t\t\tconst component = Array.isArray(streamRef) ? streamRef[0] : streamRef;\n\t\t\t\t\tif (component && component.handleError) {\n\t\t\t\t\t\tcomponent.handleError(data.error || '流式传输错误');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\n\t\tonLLMStreamCompleted(result) {\n\t\t\t\n\t\t\t// 保存当前滚动位置\n\t\t\tconst scrollBox = document.getElementById('chatScrollBox');\n\t\t\tconst currentScroll = scrollBox ? scrollBox.scrollTop : 0;\n\t\t\t\n\t\t\t// 创建与流式消息完全相同的最终消息\n\t\t\tconst msgInfo = {\n\t\t\t\ttmpId: result.streamId, // 使用相同的ID，避免key变化导致的重新渲染\n\t\t\t\tsendId: 0, // 系统消息\n\t\t\t\tsendNickName: 'AI 助手',\n\t\t\t\tsendTime: this.activeLLMStream ? this.activeLLMStream.startTime : new Date().getTime(),\n\t\t\t\ttype: this.$enums.MESSAGE_TYPE.TEXT,\n\t\t\t\tcontent: result.content,\n\t\t\t\tselfSend: false\n\t\t\t};\n\n\t\t\t// 根据会话类型设置接收者\n\t\t\tif (this.chat.type === \"PRIVATE\") {\n\t\t\t\tmsgInfo.recvId = this.mine.id;\n\t\t\t} else {\n\t\t\t\tmsgInfo.groupId = this.group.id;\n\t\t\t}\n\n\t\t\t// 先清除活跃流（移除流式消息）\n\t\t\tthis.activeLLMStream = null;\n\t\t\tthis.llmStreams.delete(result.streamId);\n\t\t\t\n\t\t\t// 使用 nextTick 确保 DOM 更新完成后再插入新消息\n\t\t\tthis.$nextTick(() => {\n\t\t\t\t// 添加到消息列表（替换流式消息）\n\t\t\t\tthis.$store.commit(\"insertMessage\", [msgInfo, this.chat]);\n\t\t\t\t\n\t\t\t\t// 恢复滚动位置，避免跳动\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tif (scrollBox) {\n\t\t\t\t\t\tscrollBox.scrollTop = currentScroll;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t\n\t\tonLLMStreamError(error) {\n\t\t\t// console.error('[ChatBox] LLM流式消息错误:', error);\n\t\t\t\n\t\t\t// 显示错误提示\n\t\t\tthis.$message.error(`AI响应失败: ${error.error}`);\n\t\t\t\n\t\t\t// 调用错误处理方法\n\t\t\tif (this.activeLLMStream) {\n\t\t\t\tthis.handleLLMStreamError({ streamId: this.activeLLMStream.streamId, error: error.error });\n\t\t\t}\n\t\t},\n\n\t\tregisterLLMStreamHandlers() {\n\t\t\t// 注册WebSocket消息回调\n\t\t\tconst originalCallback = this.$wsApi.getMessageCallBack();\n\t\t\t\n\t\t\t// 设置新的消息回调，包装原有的回调\n\t\t\tthis.$wsApi.setMessageCallBack((cmd, data) => {\n\t\t\t\t// 处理LLM流式消息\n\t\t\t\tswitch(cmd) {\n\t\t\t\t\tcase 10: // LLM_STREAM_REQUEST\n\t\t\t\t\t\tthis.handleLLMStreamRequest(data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 11: // LLM_STREAM_CHUNK\n\t\t\t\t\t\tthis.handleLLMStreamChunk(data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 12: // LLM_STREAM_END\n\t\t\t\t\t\tthis.handleLLMStreamEnd(data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 13: // LLM_STREAM_ERROR\n\t\t\t\t\t\tthis.handleLLMStreamError(data);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 调用原有的回调\n\t\t\t\tif (originalCallback) {\n\t\t\t\t\toriginalCallback(cmd, data);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tgetCurrentTerminal() {\n\t\t\t// 根据环境判断当前终端类型\n\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\t// 检测VSCode环境 - 多种方式检测\n\t\t\t\tif (window.parent !== window || // 在iframe中\n\t\t\t\t\twindow.acquireVsCodeApi || // VSCode WebView API\n\t\t\t\t\twindow.SharedServicesAccessor || // 我们的VSCode服务\n\t\t\t\t\tnavigator.userAgent.includes('VSCode') || // User Agent\n\t\t\t\t\twindow.location.protocol === 'vscode-webview:') { // VSCode WebView协议\n\t\t\t\t\treturn 2; // VSCode\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 检测Electron环境\n\t\t\t\tif (window.require || \n\t\t\t\t\twindow.process?.type || \n\t\t\t\t\twindow.isElectron ||\n\t\t\t\t\tnavigator.userAgent.includes('Electron')) {\n\t\t\t\t\treturn 3; // PC客户端\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 检测移动端App环境\n\t\t\t\tif (window.cordova || \n\t\t\t\t\twindow.PhoneGap || \n\t\t\t\t\twindow.phonegap ||\n\t\t\t\t\tnavigator.userAgent.includes('wv') || // WebView\n\t\t\t\t\tnavigator.userAgent.includes('Mobile')) {\n\t\t\t\t\treturn 1; // App\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn 0; // Web\n\t\t\t}\n\t\t\treturn 0; // 默认Web\n\t\t},\n\t\t\n\t\tisMineMessage(msgInfo) {\n\t\t\t// 如果有selfSend字段，直接使用\n\t\t\tif (msgInfo.selfSend !== undefined) {\n\t\t\t\treturn msgInfo.selfSend;\n\t\t\t}\n\t\t\t\n\t\t\t// 首先判断是否为同一用户，修复在拖拽发送生成的消息中sendId为\"123\"的问题\n\t\t\tif (parseInt(msgInfo.sendId) !== parseInt(this.mine.id)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t\n\t\t\t// 对于终端会话，需要额外判断终端类型\n\t\t\tif (this.chat.isTerminalChat || this.chat.isTerminalInbox) {\n\t\t\t\tconst currentTerminal = this.getCurrentTerminal();\n\t\t\t\t// 如果消息有senderTerminal字段，比较终端类型\n\t\t\t\tif (msgInfo.senderTerminal !== undefined) {\n\t\t\t\t\treturn msgInfo.senderTerminal === currentTerminal;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 普通会话或没有终端信息的消息，只判断用户ID\n\t\t\treturn true;\n\t\t},\n\t\t\n\t\t// ===== 智能体相关方法 =====\n\t\t\n\t\t// 初始化A2A客户端\n\t\tasync initA2AClient(agent) {\n\t\t\tif (!this.a2aClient) {\n\t\t\t\t// 在 void 环境中，需要使用全局的 A2AClient\n\t\t\t\t// 尝试多个全局位置\n\t\t\t\tlet A2AClient;\n\t\t\t\t\n\t\t\t\t// 首先检查 window.BoxIM.A2AClient\n\t\t\t\tif (window.BoxIM && window.BoxIM.A2AClient) {\n\t\t\t\t\tA2AClient = window.BoxIM.A2AClient;\n\t\t\t\t\tconsole.log('[ChatBox] ✅ Using global A2AClient from window.BoxIM.A2AClient');\n\t\t\t\t}\n\t\t\t\t// 然后检查 window.BoxIMComponents.A2AClient\n\t\t\t\telse if (window.BoxIMComponents && window.BoxIMComponents.A2AClient) {\n\t\t\t\t\tA2AClient = window.BoxIMComponents.A2AClient;\n\t\t\t\t\tconsole.log('[ChatBox] ✅ Using global A2AClient from window.BoxIMComponents.A2AClient');\n\t\t\t\t}\n\t\t\t\t// 最后尝试动态导入（在开发环境中）\n\t\t\t\telse {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconsole.log('[ChatBox] 尝试动态导入 A2AClient...');\n\t\t\t\t\t\tconst module = await import('../../utils/A2AClient.js');\n\t\t\t\t\t\tA2AClient = module.A2AClient || module.default;\n\t\t\t\t\t\tconsole.log('[ChatBox] ✅ Loaded A2AClient via dynamic import');\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error('[ChatBox] ❌ Failed to load A2AClient:', error);\n\t\t\t\t\t\t// 最后的尝试：检查是否已经在某个地方定义了\n\t\t\t\t\t\tif (typeof A2AClient !== 'undefined') {\n\t\t\t\t\t\t\tconsole.log('[ChatBox] ⚠️ Found A2AClient in global scope');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow new Error('无法加载 A2A 客户端模块 - 请确保已正确构建');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('[ChatBox] 创建 A2AClient 实例...');\n\t\t\t\tthis.a2aClient = new A2AClient();\n\t\t\t\tconsole.log('[ChatBox] ✅ A2AClient 实例创建成功');\n\t\t\t}\n\t\t\t\n\t\t\t// 设置消息监听\n\t\t\tthis.a2aClient.onMessage((message) => {\n\t\t\t\tthis.handleAgentMessage(message);\n\t\t\t});\n\t\t\t\n\t\t\t// 设置状态监听\n\t\t\tthis.a2aClient.onStatusChange((statusInfo) => {\n\t\t\t\tthis.handleAgentStatusChange(statusInfo);\n\t\t\t});\n\t\t\t\n\t\t\t// 确保智能体有 serviceEndpoint\n\t\t\tconst agentWithEndpoint = {\n\t\t\t\t...agent,\n\t\t\t\tserviceEndpoint: agent.serviceEndpoint || agent.publishInfo?.serverUrl || agent.serverUrl\n\t\t\t};\n\t\t\t\n\t\t\tconsole.log('[ChatBox] 连接智能体，serviceEndpoint:', agentWithEndpoint.serviceEndpoint);\n\t\t\t\n\t\t\t// 连接智能体\n\t\t\ttry {\n\t\t\t\tawait this.a2aClient.connect(agentWithEndpoint);\n\t\t\t\t\n\t\t\t\t// 启动状态检查定时器\n\t\t\t\tthis.startAgentStatusMonitoring();\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatBox] 连接智能体失败:', error);\n\t\t\t\tthis.$message.error(`连接失败: ${error.message}`);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 处理智能体消息\n\t\thandleAgentMessage(message) {\n\t\t\tif (!this.currentAgentChat) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 确保 messages 数组存在\n\t\t\tif (!this.currentAgentChat.messages) {\n\t\t\t\tthis.currentAgentChat.messages = [];\n\t\t\t}\n\t\t\t\n\t\t\t// 流式消息使用消息ID作为标识符\n\t\t\tconst messageId = message.id;\n\t\t\t\n\t\t\t// 首先检查是否有占位消息需要替换（通过placeholderId或isLoading标志）\n\t\t\tconst placeholderIndex = this.currentAgentChat.messages.findIndex(\n\t\t\t\tm => (m.isLoading === true && !m.content) || m.placeholderId === message.placeholderId\n\t\t\t);\n\t\t\t\n\t\t\t// 检查是否已存在相同ID的消息（流式更新）\n\t\t\tconst existingIndex = this.currentAgentChat.messages.findIndex(\n\t\t\t\tm => m.tmpId === messageId\n\t\t\t);\n\t\t\t\n\t\t\tif (placeholderIndex !== -1 && existingIndex === -1 && message.streaming) {\n\t\t\t\t// 替换占位消息为实际的流式消息\n\t\t\t\tconsole.log('[ChatBox] 替换占位消息为流式消息');\n\t\t\t\tconst updatedMessage = {\n\t\t\t\t\t...this.currentAgentChat.messages[placeholderIndex],\n\t\t\t\t\ttmpId: messageId,\n\t\t\t\t\tcontent: message.content || '',\n\t\t\t\t\tstreaming: true,\n\t\t\t\t\tisLoading: !message.content, // 根据内容更新加载状态\n\t\t\t\t\tplaceholderId: undefined // 清除占位符ID\n\t\t\t\t};\n\t\t\t\tthis.$set(this.currentAgentChat.messages, placeholderIndex, updatedMessage);\n\t\t\t\t\n\t\t\t} else if (existingIndex !== -1) {\n\t\t\t\t// 更新已存在的流式消息\n\t\t\t\tconst updatedMessage = {\n\t\t\t\t\t...this.currentAgentChat.messages[existingIndex],\n\t\t\t\t\tcontent: message.content,\n\t\t\t\t\tstreaming: message.streaming,\n\t\t\t\t\tisLoading: !message.content // 只有当有内容时才清除加载状态\n\t\t\t\t};\n\t\t\t\t// 使用 Vue.set 更新数组中的元素\n\t\t\t\tthis.$set(this.currentAgentChat.messages, existingIndex, updatedMessage);\n\t\t\t\t\n\t\t\t\tif (!message.streaming) {\n\t\t\t\t\t// 流式结束，保存历史\n\t\t\t\t\tthis.saveAgentChatHistory();\n\t\t\t\t}\n\t\t\t} else if (message.streaming) {\n\t\t\t\t// 如果找不到占位消息，创建新的流式消息\n\t\t\t\tconsole.log('[ChatBox] 未找到占位消息，创建新流式消息');\n\t\t\t\tconst streamingMsg = {\n\t\t\t\t\tid: null,\n\t\t\t\t\ttmpId: messageId,\n\t\t\t\t\tcontent: message.content || '',\n\t\t\t\t\tsendId: this.currentAgentChat.agentId,\n\t\t\t\t\tsendNickName: this.currentAgentChat.agentName,\n\t\t\t\t\tsendTime: message.timestamp || Date.now(),\n\t\t\t\t\ttype: this.$enums.MESSAGE_TYPE.TEXT,\n\t\t\t\t\tselfSend: false,\n\t\t\t\t\tstreaming: true,\n\t\t\t\t\tisLoading: !message.content, // 如果没有内容，标记为加载中\n\t\t\t\t\tagentId: this.currentAgentChat.agentId // 添加agentId以标识为智能体消息\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tconsole.log('[ChatBox] 创建流式消息，isLoading:', streamingMsg.isLoading, 'content:', message.content);\n\t\t\t\t\n\t\t\t\t// 直接push到数组\n\t\t\t\tthis.currentAgentChat.messages.push(streamingMsg);\n\t\t\t\t\n\t\t\t} else {\n\t\t\t\t// 非流式消息，直接添加\n\t\t\t\tconst agentMsg = {\n\t\t\t\t\tid: message.id || null,\n\t\t\t\t\ttmpId: message.tmpId || messageId || `agent_${Date.now()}`,\n\t\t\t\t\tcontent: message.content,\n\t\t\t\t\tsendId: this.currentAgentChat.agentId,\n\t\t\t\t\tsendNickName: this.currentAgentChat.agentName,\n\t\t\t\t\tsendTime: message.timestamp || Date.now(),\n\t\t\t\t\ttype: this.$enums.MESSAGE_TYPE.TEXT,\n\t\t\t\t\tselfSend: false\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 直接push到数组\n\t\t\t\tthis.currentAgentChat.messages.push(agentMsg);\n\t\t\t\t\n\t\t\t\t// 保存到本地存储\n\t\t\t\tthis.saveAgentChatHistory();\n\t\t\t}\n\t\t\t\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.scrollToBottom();\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 处理智能体状态变化\n\t\thandleAgentStatusChange(statusInfo) {\n\t\t\tconsole.log('[ChatBox] 智能体状态变化:', statusInfo);\n\t\t\t\n\t\t\tif (!this.currentAgentChat) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 更新智能体连接状态\n\t\t\tswitch (statusInfo.status) {\n\t\t\t\tcase 'connected':\n\t\t\t\t\tthis.currentAgentChat.status = 'connected';\n\t\t\t\t\tconsole.log('[ChatBox] 智能体已连接');\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcase 'disconnected':\n\t\t\t\t\tthis.currentAgentChat.status = 'disconnected';\n\t\t\t\t\tconsole.log('[ChatBox] 智能体已断开连接');\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tcase 'error':\n\t\t\t\t\tthis.currentAgentChat.status = 'error';\n\t\t\t\t\tconsole.log('[ChatBox] 智能体连接错误:', statusInfo.detail);\n\t\t\t\t\tthis.$message.error(`智能体连接错误: ${statusInfo.detail}`);\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.log('[ChatBox] 未知状态:', statusInfo);\n\t\t\t}\n\t\t\t\n\t\t\t// 强制更新UI\n\t\t\tthis.$forceUpdate();\n\t\t},\n\t\t\n\t\t// 启动智能体状态监控\n\t\tstartAgentStatusMonitoring() {\n\t\t\t// 清除旧的定时器\n\t\t\tif (this.agentStatusTimer) {\n\t\t\t\tclearInterval(this.agentStatusTimer);\n\t\t\t}\n\t\t\t\n\t\t\t// 每5秒检查一次智能体状态\n\t\t\tthis.agentStatusTimer = setInterval(async () => {\n\t\t\t\tif (this.currentAgentChat && this.a2aClient) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\t// 检查A2A客户端连接状态\n\t\t\t\t\t\tconst isConnected = this.a2aClient.isConnected;\n\t\t\t\t\t\tconst currentStatus = this.currentAgentChat.status;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 如果状态不一致，更新状态\n\t\t\t\t\t\tif (isConnected && currentStatus !== 'connected') {\n\t\t\t\t\t\t\tthis.currentAgentChat.status = 'connected';\n\t\t\t\t\t\t\tconsole.log('[ChatBox] 状态监控：智能体已重新连接');\n\t\t\t\t\t\t\tthis.$forceUpdate();\n\t\t\t\t\t\t} else if (!isConnected && currentStatus === 'connected') {\n\t\t\t\t\t\t\tthis.currentAgentChat.status = 'disconnected';\n\t\t\t\t\t\t\tconsole.log('[ChatBox] 状态监控：智能体连接丢失');\n\t\t\t\t\t\t\tthis.$forceUpdate();\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.error('[ChatBox] 状态检查失败:', error);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 5000); // 5秒检查一次\n\t\t},\n\t\t\n\t\t// 停止智能体状态监控\n\t\tstopAgentStatusMonitoring() {\n\t\t\tif (this.agentStatusTimer) {\n\t\t\t\tclearInterval(this.agentStatusTimer);\n\t\t\t\tthis.agentStatusTimer = null;\n\t\t\t}\n\t\t},\n\t\t\n\t\tasync startAgentChat(payload) {\n\t\t\tconst { agent, member } = payload;\n\t\t\t\n\t\t\tconsole.log('[ChatBox] startAgentChat called with agent:', agent);\n\t\t\tconsole.log('[ChatBox] agent.serviceEndpoint:', agent.serviceEndpoint);\n\t\t\tconsole.log('[ChatBox] agent.publishInfo:', agent.publishInfo);\n\t\t\tconsole.log('[ChatBox] agent.serverUrl:', agent.serverUrl);\n\t\t\t\n\t\t\t// 使用包含类型的targetId规则，避免PRIVATE和GROUP的ID冲突\n\t\t\tconst targetId = `${this.chat.type}_${this.chat.targetId}_agent_${agent.id}`;\n\t\t\t\n\t\t\t// 先检查是否已存在\n\t\t\tlet agentChat = this.$store.state.chatStore.chats.find(c => \n\t\t\t\tc.type === 'AGENT' && \n\t\t\t\tc.targetId === targetId\n\t\t\t);\n\t\t\t\n\t\t\tif (!agentChat) {\n\t\t\t\t// 不存在则创建新的\n\t\t\t\tthis.$store.commit('ensureAgentChat', {\n\t\t\t\t\tparentChat: this.chat,\n\t\t\t\t\tagent: agent,\n\t\t\t\t\townerId: member ? member.id : this.mine.id\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 再次获取创建的会话\n\t\t\t\tagentChat = this.$store.state.chatStore.chats.find(c => \n\t\t\t\t\tc.type === 'AGENT' && \n\t\t\t\t\tc.targetId === targetId\n\t\t\t\t);\n\t\t\t}\n\t\t\t\n\t\t\t// 设置当前智能体会话（只保存必要信息）\n\t\t\tthis.currentAgentChat = {\n\t\t\t\ttargetId: targetId,\n\t\t\t\tagentId: agent.id,\n\t\t\t\tagentName: agent.name,\n\t\t\t\tparentChat: this.chat,\n\t\t\t\tmessages: [],\n\t\t\t\tstartTime: Date.now()\n\t\t\t};\n\t\t\t\n\t\t\t// 从localForage加载历史消息（直接使用targetId作为键）\n\t\t\ttry {\n\t\t\t\tconst storageKey = targetId;  // 存储键就是targetId\n\t\t\t\tconst savedData = await localForage.getItem(storageKey);\n\t\t\t\t\n\t\t\t\tif (savedData && savedData.messages) {\n\t\t\t\t\tthis.currentAgentChat.messages = savedData.messages;\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatBox] 加载历史消息失败:', error);\n\t\t\t}\n\t\t\t\n\t\t\t// 初始化A2A客户端\n\t\t\tawait this.initA2AClient(agent);\n\t\t\t\n\t\t\t// 关闭侧边栏\n\t\t\tthis.showAgentSide = false;\n\t\t\t\n\t\t\t// 滚动到底部\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.scrollToBottom();\n\t\t\t});\n\t\t},\n\t\t\n\t\teditAgent(agent) {\n\t\t\t// 调用roo-code编辑智能体命令\n\t\t\tthis.callRooCodeCommand('roo-cline.editAgent', { agentId: agent.id });\n\t\t},\n\t\t\n\t\t// 保存智能体会话历史\n\t\tasync saveAgentChatHistory() {\n\t\t\tif (!this.currentAgentChat) return;\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 直接使用targetId作为存储键\n\t\t\t\tconst storageKey = this.currentAgentChat.targetId || this.chat.targetId;\n\t\t\t\t\n\t\t\t\t// 只保存必要信息\n\t\t\t\tconst dataToSave = {\n\t\t\t\t\tagentId: this.currentAgentChat.agentId,\n\t\t\t\t\tagentName: this.currentAgentChat.agentName,\n\t\t\t\t\tparentId: this.currentAgentChat.parentChat?.targetId,\n\t\t\t\t\tparentType: this.currentAgentChat.parentChat?.type,\n\t\t\t\t\tparentName: this.currentAgentChat.parentChat?.showName,\n\t\t\t\t\tmessages: this.currentAgentChat.messages || [],\n\t\t\t\t\tstartTime: this.currentAgentChat.startTime\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tawait localForage.setItem(storageKey, dataToSave);\n\t\t\t\t\n\t\t\t\t// 更新用户的chatKeys，将智能体会话key加入列表\n\t\t\t\tconst userId = this.$store.state.userStore.userInfo.id;\n\t\t\t\tconst userChatKey = `chats-${userId}`;\n\t\t\t\t\n\t\t\t\tlet userChats = await localForage.getItem(userChatKey);\n\t\t\t\t\n\t\t\t\tif (userChats && userChats.chatKeys) {\n\t\t\t\t\t// 检查是否已经存在\n\t\t\t\t\tif (!userChats.chatKeys.includes(storageKey)) {\n\t\t\t\t\t\tuserChats.chatKeys.push(storageKey);\n\t\t\t\t\t\t// 保存更新后的chatKeys\n\t\t\t\t\t\tawait localForage.setItem(userChatKey, userChats);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// 如果没有chatKeys，初始化一个\n\t\t\t\t\tif (!userChats) {\n\t\t\t\t\t\tuserChats = { chatKeys: [], privateMsgMaxId: 0, groupMsgMaxId: 0 };\n\t\t\t\t\t}\n\t\t\t\t\tif (!userChats.chatKeys) {\n\t\t\t\t\t\tuserChats.chatKeys = [];\n\t\t\t\t\t}\n\t\t\t\t\tuserChats.chatKeys.push(storageKey);\n\t\t\t\t\tawait localForage.setItem(userChatKey, userChats);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatBox] 保存会话历史失败:', error);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 退出智能体会话（内部使用）\n\t\tasync exitAgentChat() {\n\t\t\t\n\t\t\tif (this.currentAgentChat) {\n\t\t\t\t// 保存消息历史（复用统一的保存方法）\n\t\t\t\tawait this.saveAgentChatHistory();\n\t\t\t\t\n\t\t\t\t// 停止状态监控\n\t\t\t\tthis.stopAgentStatusMonitoring();\n\t\t\t\t\n\t\t\t\t// 断开A2A连接\n\t\t\t\tif (this.a2aClient?.isConnected) {\n\t\t\t\t\tawait this.a2aClient.disconnect();\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 返回父级对话\n\t\t\tthis.$set(this, 'currentAgentChat', null);\n\t\t\tthis.$set(this, 'a2aClient', null);\n\t\t\t\n\t\t\t// 强制刷新消息显示\n\t\t\tthis.$forceUpdate();\n\t\t\t\n\t\t\t// 滚动到底部\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.scrollToBottom();\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 返回父级会话（用户点击）\n\t\tasync returnToParentChat() {\n\t\t\tif (!this.currentAgentChat) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 保存当前智能体会话\n\t\t\tawait this.saveAgentChatHistory();\n\t\t\t\n\t\t\t// 找到父级会话\n\t\t\tlet parentChat = this.currentAgentChat.parentChat;\n\t\t\t\n\t\t\t// 如果currentAgentChat中没有，尝试从store中查找\n\t\t\tif (!parentChat || !parentChat.messages) {\n\t\t\t\tconst parentId = this.currentAgentChat.parentChat?.targetId || this.chat.parentId;\n\t\t\t\tif (parentId) {\n\t\t\t\t\tparentChat = this.$store.getters.findChats().find(c => \n\t\t\t\t\t\tc.targetId === parentId\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (parentChat) {\n\t\t\t\t// 先清理智能体会话状态\n\t\t\t\tthis.currentAgentChat = null;\n\t\t\t\tthis.a2aClient = null;\n\t\t\t\t\n\t\t\t\t// 切换到父级会话\n\t\t\t\tthis.$store.commit('openChat', parentChat);\n\t\t\t\t\n\t\t\t\t// activeChat需要索引，找到父级会话的索引\n\t\t\t\tconst chats = this.$store.getters.findChats();\n\t\t\t\tconst parentIndex = chats.findIndex(c => c.targetId === parentChat.targetId);\n\t\t\t\tif (parentIndex !== -1) {\n\t\t\t\t\tthis.$store.commit('activeChat', parentIndex);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 强制刷新\n\t\t\t\tthis.$forceUpdate();\n\t\t\t} else {\n\t\t\t\tconsole.error('[ChatBox] 找不到父级会话');\n\t\t\t}\n\t\t},\n\t\t\n\t\tasync sendToAgent(fullList) {\n\t\t\tif (!this.currentAgentChat || fullList.length === 0) return;\n\t\t\t\n\t\t\t// 只处理文本消息\n\t\t\tconst textMessages = fullList.filter(msg => msg.type === 'text');\n\t\t\tif (textMessages.length === 0) {\n\t\t\t\tthis.$message.warning('智能体暂只支持文本消息');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconst content = textMessages.map(msg => msg.content).join('\\n');\n\t\t\t\n\t\t\t// 创建用户消息\n\t\t\tconst userMsg = {\n\t\t\t\tid: null,\n\t\t\t\ttmpId: `tmp_${Date.now()}`,\n\t\t\t\tcontent: content,\n\t\t\t\tsendId: this.mine.id,\n\t\t\t\tsendNickName: this.mine.nickName,\n\t\t\t\tsendTime: Date.now(),\n\t\t\t\ttype: this.$enums.MESSAGE_TYPE.TEXT,\n\t\t\t\tselfSend: true\n\t\t\t};\n\t\t\t\n\t\t\t// 确保messages数组存在\n\t\t\tif (!this.currentAgentChat.messages) {\n\t\t\t\tthis.currentAgentChat.messages = [];\n\t\t\t}\n\t\t\t\n\t\t\t// 直接push到数组\n\t\t\tthis.currentAgentChat.messages.push(userMsg);\n\t\t\t\n\t\t\t// 立即保存到存储\n\t\t\tthis.saveAgentChatHistory();\n\t\t\t\n\t\t\tthis.scrollToBottom();\n\t\t\t\n\t\t\t// 创建流式消息占位\n\t\t\tconst streamId = `stream_${Date.now()}`;\n\t\t\tthis.activeLLMStream = {\n\t\t\t\tstreamId: streamId,\n\t\t\t\ttitle: this.currentAgentChat.agentName,\n\t\t\t\tstartTime: Date.now()\n\t\t\t};\n\t\t\t\n\t\t\t// 立即创建一个加载中的占位消息，提升用户体验\n\t\t\tconst placeholderMsgId = `stream_${Date.now()}_${Math.random()}`;\n\t\t\tconst placeholderMsg = {\n\t\t\t\tid: null,\n\t\t\t\ttmpId: placeholderMsgId,\n\t\t\t\tcontent: '',  // 初始内容为空\n\t\t\t\tsendId: this.currentAgentChat.agentId || `agent_${this.currentAgentChat.agent.id}`,\n\t\t\t\tsendNickName: this.currentAgentChat.agentName || this.currentAgentChat.agent.name,\n\t\t\t\tsendTime: Date.now(),\n\t\t\t\ttype: this.$enums.MESSAGE_TYPE.TEXT,\n\t\t\t\tselfSend: false,\n\t\t\t\tstreaming: true,\n\t\t\t\tisLoading: true,  // 标记为加载中\n\t\t\t\tagentId: this.currentAgentChat.agentId || this.currentAgentChat.agent.id,\n\t\t\t\tplaceholderId: placeholderMsgId  // 添加占位符ID以便后续替换\n\t\t\t};\n\t\t\t\n\t\t\tconsole.log('[ChatBox] 创建占位消息:', placeholderMsg);\n\t\t\tthis.currentAgentChat.messages.push(placeholderMsg);\n\t\t\t\n\t\t\t// 滚动到底部以显示占位消息\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.scrollToBottom();\n\t\t\t});\n\t\t\t\n\t\t\t// 调用智能体API（支持流式）\n\t\t\ttry {\n\t\t\t\tif (this.a2aClient && this.a2aClient.isConnected) {\n\t\t\t\t\t// 传递占位符ID，以便流式消息可以替换它\n\t\t\t\t\tawait this.a2aClient.sendMessage(content, 'text', true, placeholderMsgId);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error('A2A客户端未连接');\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatBox] 发送消息失败:', error);\n\t\t\t\tthis.$message.error('发送失败: ' + error.message);\n\t\t\t\t// 清除流式消息状态\n\t\t\t\tthis.activeLLMStream = null;\n\t\t\t\t\n\t\t\t\t// 删除占位消息\n\t\t\t\tconst index = this.currentAgentChat.messages.findIndex(m => m.tmpId === placeholderMsgId);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.currentAgentChat.messages.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.scrollToBottom();\n\t\t\t});\n\t\t\t\n\t\t\t// 注释掉重复的调用\n\t\t\t/* try {\n\t\t\t\t// 调用智能体API\n\t\t\t\tconst response = await this.callRooCodeCommand('roo-cline.invokeAgent', {\n\t\t\t\t\tagentId: this.currentAgentChat.agent.id,\n\t\t\t\t\tmessage: content,  // 使用已定义的content变量\n\t\t\t\t\tcontext: {\n\t\t\t\t\t\tchatType: this.chat.type,\n\t\t\t\t\t\tchatId: this.chat.id,\n\t\t\t\t\t\tuserId: this.mine.id\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t// 添加智能体回复消息\n\t\t\t\tconst agentMessage = {\n\t\t\t\t\tid: Date.now() + 1,\n\t\t\t\t\tcontent: response.content || '智能体暂未回复',\n\t\t\t\t\tsendId: this.currentAgentChat.agent.id,\n\t\t\t\t\tsendNickName: this.currentAgentChat.agent.name,\n\t\t\t\t\tsendTime: Date.now(),\n\t\t\t\t\ttype: 'TEXT',\n\t\t\t\t\tselfSend: false\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.currentAgentChat.messages.push(agentMessage);\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t});\n\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('Agent invocation failed:', error);\n\t\t\t\tthis.$message.error('智能体调用失败: ' + error.message);\n\t\t\t\t\n\t\t\t\t// 添加错误消息\n\t\t\t\tconst errorMessage = {\n\t\t\t\t\tid: Date.now() + 1,\n\t\t\t\t\tcontent: '抱歉，智能体服务暂时不可用，请稍后重试。',\n\t\t\t\t\tsendId: this.currentAgentChat.agent.id,\n\t\t\t\t\tsendNickName: this.currentAgentChat.agent.name,\n\t\t\t\t\tsendTime: Date.now(),\n\t\t\t\t\ttype: 'TEXT',\n\t\t\t\t\tselfSend: false,\n\t\t\t\t\tisError: true\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tthis.currentAgentChat.messages.push(errorMessage);\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t});\n\t\t\t} */\n\t\t},\n\t\t\n\t\tasync callRooCodeCommand(command, params) {\n\t\t\t// 通过VSCode通信调用roo-code命令\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tconst messageId = Date.now() + Math.random();\n\t\t\t\t\n\t\t\t\tconst handler = (event) => {\n\t\t\t\t\tif (event.data.id === messageId) {\n\t\t\t\t\t\twindow.removeEventListener('message', handler);\n\t\t\t\t\t\tif (event.data.error) {\n\t\t\t\t\t\t\treject(new Error(event.data.error));\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(event.data.result || {});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\twindow.addEventListener('message', handler);\n\t\t\t\t\n\t\t\t\t// 设置超时\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\twindow.removeEventListener('message', handler);\n\t\t\t\t\treject(new Error('命令调用超时'));\n\t\t\t\t}, 30000); // 30秒超时\n\t\t\t\t\n\t\t\t\twindow.parent.postMessage({\n\t\t\t\t\ttype: 'vscode-command',\n\t\t\t\t\tcommand: command,\n\t\t\t\t\tparams: params,\n\t\t\t\t\tid: messageId\n\t\t\t\t}, '*');\n\t\t\t});\n\t\t},\n\t\t\n\t\t// 切换侧边栏显示\n\t\ttoggleSidePanel() {\n\t\t\t// 根据聊天类型决定显示内容\n\t\t\tif (this.chat.type === 'GROUP') {\n\t\t\t\t// 群聊：显示侧边栏，包含智能体和成员tab\n\t\t\t\tthis.showSide = !this.showSide;\n\t\t\t\tthis.showAgentSide = false;\n\t\t\t} else {\n\t\t\t\t// 私聊：只显示智能体列表\n\t\t\t\tthis.showAgentSide = !this.showAgentSide;\n\t\t\t\tthis.showSide = false;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 处理头像鼠标进入事件\n\t\thandleAvatarMouseEnter(agent, event) {\n\t\t\t\n\t\t\t// 如果头像还未完全展开，等待展开完成后再显示面板\n\t\t\tif (!this.avatarsFullyExpanded) {\n\t\t\t\t// 保存元素引用和位置信息（不保存event对象，因为它会失效）\n\t\t\t\tconst element = event.currentTarget;\n\t\t\t\tconst rect = element.getBoundingClientRect();\n\t\t\t\tthis.pendingHoverCard = { \n\t\t\t\t\tagent, \n\t\t\t\t\telement,\n\t\t\t\t\tposition: {\n\t\t\t\t\t\tx: rect.left + rect.width / 2,\n\t\t\t\t\t\ty: rect.bottom - 2  // 向上提升2px\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 设置一个检查定时器\n\t\t\t\tif (this.hoverCheckTimeout) {\n\t\t\t\t\tclearTimeout(this.hoverCheckTimeout);\n\t\t\t\t}\n\t\t\t\tthis.hoverCheckTimeout = setTimeout(() => {\n\t\t\t\t\t// 再次检查是否已经展开\n\t\t\t\t\tif (this.avatarsFullyExpanded && this.pendingHoverCard) {\n\t\t\t\t\t\tconst { agent, element, position } = this.pendingHoverCard;\n\t\t\t\t\t\t// 检查鼠标是否还在元素上\n\t\t\t\t\t\tif (element && element.matches(':hover')) {\n\t\t\t\t\t\t\t// 直接设置卡片，不再调用showAgentCard\n\t\t\t\t\t\t\tthis.clearHideTimeout();\n\t\t\t\t\t\t\tthis.hoveredAgentCard = {\n\t\t\t\t\t\t\t\tagent: agent,\n\t\t\t\t\t\t\t\tx: position.x,\n\t\t\t\t\t\t\t\ty: position.y\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.pendingHoverCard = null;\n\t\t\t\t\t}\n\t\t\t\t}, 400); // 等待展开动画完成\n\t\t\t} else {\n\t\t\t\t// 已经展开，直接显示\n\t\t\t\tthis.showAgentCard(agent, event);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 显示智能体卡片\n\t\tshowAgentCard(agent, event) {\n\t\t\t\n\t\t\t// 清除之前的隐藏定时器\n\t\t\tthis.clearHideTimeout();\n\t\t\t\n\t\t\t// 获取头像元素的位置\n\t\t\tconst rect = event.currentTarget.getBoundingClientRect();\n\t\t\t\n\t\t\tthis.hoveredAgentCard = {\n\t\t\t\tagent: agent,\n\t\t\t\tx: rect.left + rect.width / 2, // 头像中心X坐标\n\t\t\t\ty: rect.bottom - 2 // 头像底部Y坐标，向上提升2px\n\t\t\t};\n\t\t},\n\t\t\n\t\t// 隐藏智能体卡片（带延迟）\n\t\thideAgentCard() {\n\t\t\t// 清除待处理的hover\n\t\t\tthis.pendingHoverCard = null;\n\t\t\tif (this.hoverCheckTimeout) {\n\t\t\t\tclearTimeout(this.hoverCheckTimeout);\n\t\t\t\tthis.hoverCheckTimeout = null;\n\t\t\t}\n\t\t\t\n\t\t\t// 设置延迟隐藏，给用户时间移动到卡片上\n\t\t\tthis.hoverCardTimeout = setTimeout(() => {\n\t\t\t\tthis.hoveredAgentCard = null;\n\t\t\t\t\n\t\t\t\t// 卡片隐藏后，检查是否需要收缩头像\n\t\t\t\t// 给一个小延迟，确保用户已经离开\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t// 如果鼠标不在头像容器上，则收缩（注意：类名已更改）\n\t\t\t\t\tconst container = document.querySelector('.agent-avatars-container');\n\t\t\t\t\tconst animatedWrapper = document.querySelector('.agent-avatars-animated');\n\t\t\t\t\tconst fixedWrapper = document.querySelector('.agent-avatar-fixed');\n\t\t\t\t\t\n\t\t\t\t\t// 检查鼠标是否在任何头像相关元素上\n\t\t\t\t\tif (container && !container.matches(':hover') && \n\t\t\t\t\t\t(!animatedWrapper || !animatedWrapper.matches(':hover')) &&\n\t\t\t\t\t\t(!fixedWrapper || !fixedWrapper.matches(':hover'))) {\n\t\t\t\t\t\tthis.avatarsFullyExpanded = false;\n\t\t\t\t\t\tthis.avatarsExpanded = false;\n\t\t\t\t\t}\n\t\t\t\t}, 100);\n\t\t\t}, 200);\n\t\t},\n\t\t\n\t\t// 清除隐藏定时器\n\t\tclearHideTimeout() {\n\t\t\tif (this.hoverCardTimeout) {\n\t\t\t\tclearTimeout(this.hoverCardTimeout);\n\t\t\t\tthis.hoverCardTimeout = null;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 鼠标进入面板\n\t\tonPanelEnter() {\n\t\t\tthis.clearHideTimeout();\n\t\t\t// 保持头像展开\n\t\t\tif (this.avatarExpandTimeout) {\n\t\t\t\tclearTimeout(this.avatarExpandTimeout);\n\t\t\t\tthis.avatarExpandTimeout = null;\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 鼠标离开面板\n\t\tonPanelLeave() {\n\t\t\tthis.hideAgentCard();\n\t\t},\n\t\t\n\t\t// 快速启动智能体对话\n\t\tasync quickStartAgentChat(agent) {\n\t\t\t// 直接调用已有的startAgentChat方法\n\t\t\tawait this.startAgentChat({ agent: agent, chat: this.chat });\n\t\t},\n\t\t\n\t\t// 加载智能体会话历史\n\t\tasync loadAgentChatHistory() {\n\t\t\ttry {\n\t\t\t\t// 使用简化的targetId作为storage key\n\t\t\t\tconst storageKey = this.chat.targetId;\n\t\t\t\tconst savedChat = await localForage.getItem(storageKey);\n\t\t\t\t\n\t\t\t\t// 从targetId中提取智能体ID\n\t\t\t\t// 新格式：${chatType}_${parentTargetId}_agent_${agentId}\n\t\t\t\tlet agentId = null;\n\t\t\t\tlet agentInfo = null;\n\t\t\t\t\n\t\t\t\tif (this.chat.type === 'AGENT') {\n\t\t\t\t\t// 从targetId中提取agentId\n\t\t\t\t\tconst parts = this.chat.targetId.split('_agent_');\n\t\t\t\t\tif (parts.length === 2) {\n\t\t\t\t\t\tagentId = parts[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 如果保存的数据中有agentId，使用它\n\t\t\t\tif (!agentId && savedChat?.agentId) {\n\t\t\t\t\tagentId = savedChat.agentId;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (agentId) {\n\t\t\t\t\t// 始终从注册表中获取最新的智能体信息\n\t\t\t\t\tawait this.loadRecentAgents();\n\t\t\t\t\tconst foundAgent = this.recentAgents.find(a => a.id === agentId);\n\t\t\t\t\t\n\t\t\t\t\tif (foundAgent) {\n\t\t\t\t\t\tagentInfo = foundAgent;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 如果找不到，构造基本信息（降级处理）\n\t\t\t\t\t\tagentInfo = {\n\t\t\t\t\t\t\tid: agentId,\n\t\t\t\t\t\t\tname: this.chat.showName || '智能体',\n\t\t\t\t\t\t\tavatar: this.chat.headImage,\n\t\t\t\t\t\t\tisActive: true,\n\t\t\t\t\t\t\tserviceStatus: 'online'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 如果找到智能体信息，恢复会话状态\n\t\t\t\tif (agentInfo) {\n\t\t\t\t\t// 找到父级会话\n\t\t\t\t\tlet parentChat = null;\n\t\t\t\t\tif (this.chat.parentId) {\n\t\t\t\t\t\t// 从targetId中解析父级类型（如果存在）\n\t\t\t\t\t\tconst parentType = this.chat.parentType || savedChat?.parentType || 'PRIVATE';\n\t\t\t\t\t\tparentChat = this.$store.getters.findChats().find(c => \n\t\t\t\t\t\t\tc.targetId === this.chat.parentId && c.type === parentType\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 如果没找到父级会话，创建一个基本的\n\t\t\t\t\tif (!parentChat) {\n\t\t\t\t\t\tparentChat = {\n\t\t\t\t\t\t\ttargetId: this.chat.parentId || savedChat?.parentId,\n\t\t\t\t\t\t\tshowName: savedChat?.parentName || '会话',\n\t\t\t\t\t\t\ttype: this.chat.parentType || savedChat?.parentType || 'PRIVATE'\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 直接设置currentAgentChat，不调用startAgentChat（避免创建新会话）\n\t\t\t\t\tthis.currentAgentChat = {\n\t\t\t\t\t\ttargetId: this.chat.targetId,  // 使用简化的targetId\n\t\t\t\t\t\tagent: agentInfo,\n\t\t\t\t\t\tagentId: agentInfo.id,\n\t\t\t\t\t\tagentName: agentInfo.name || savedChat?.agentName,\n\t\t\t\t\t\tparentChat: parentChat,  // 使用找到的父级会话\n\t\t\t\t\t\tmessages: savedChat?.messages || [],\n\t\t\t\t\t\tstartTime: savedChat?.startTime || Date.now()\n\t\t\t\t\t};\n\t\t\t\t\t\n\t\t\t\t\t// 初始化A2A客户端\n\t\t\t\t\tif (!this.a2aClient) {\n\t\t\t\t\t\tawait this.initA2AClient(agentInfo);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 触发界面更新\n\t\t\t\t\tthis.$forceUpdate();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatBox] Failed to load agent chat history:', error);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 加载最近使用的智能体\n\t\tasync loadRecentAgents() {\n\t\t\ttry {\n\t\t\t\t// 如果没有chat对象，清空列表并返回\n\t\t\t\tif (!this.chat) {\n\t\t\t\t\tthis.recentAgents = [];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 先清空旧数据，避免显示残留\n\t\t\t\tthis.recentAgents = [];\n\t\t\t\t\n\t\t\t\t// 使用 Vue.nextTick 确保 DOM 更新\n\t\t\t\tawait this.$nextTick();\n\t\t\t\t\n\t\t\t\t// 根据聊天类型决定加载哪个用户的智能体\n\t\t\t\tlet targetUserId;\n\t\t\t\t\n\t\t\t\tif (this.chat.type === 'PRIVATE') {\n\t\t\t\t\t// 私聊：加载对方的智能体\n\t\t\t\t\ttargetUserId = this.chat.targetId;\n\t\t\t\t} else if (this.chat.type === 'GROUP') {\n\t\t\t\t\t// 群聊：加载当前用户的智能体\n\t\t\t\t\ttargetUserId = this.$store.state.userStore.userInfo.id;\n\t\t\t\t} else if (this.chat.type === 'AGENT') {\n\t\t\t\t\t// 智能体会话：加载当前用户的智能体（智能体属于创建者）\n\t\t\t\t\ttargetUserId = this.$store.state.userStore.userInfo.id;\n\t\t\t\t} else {\n\t\t\t\t\t// 其他类型：加载当前用户的智能体\n\t\t\t\t\ttargetUserId = this.$store.state.userStore.userInfo.id;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 获取终端信息\n\t\t\t\tconst terminal = this.$store.state.userStore?.userInfo?.terminal || 0;\n\t\t\t\tconst fullTargetId = `${targetUserId}_${terminal}`;\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t// 从后端获取智能体列表\n\t\t\t\tconst agents = await this.$http.get(`/api/roocode/redis/agents/${fullTargetId}`);\n\t\t\t\t\n\t\t\t\tconsole.log('[ChatBox] Loaded agents from Redis:', agents);\n\t\t\t\tconsole.log('[ChatBox] First agent detail:', agents?.[0]);\n\t\t\t\t\n\t\t\t\t// 筛选已发布的智能体，最多显示5个（与侧边栏保持一致）\n\t\t\t\t// 注意：不要求必须在线，因为智能体可能处于离线状态但仍可访问\n\t\t\t\tconst filteredAgents = (agents || [])\n\t\t\t\t\t.filter(agent => agent.isPublished !== false)  // 只过滤掉明确未发布的\n\t\t\t\t\t.slice(0, 5);  // 最多显示5个\n\t\t\t\t\n\t\t\t\t// 使用 Vue.set 确保响应性\n\t\t\t\tthis.$set(this, 'recentAgents', filteredAgents);\n\t\t\t\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error('[ChatBox] Failed to load recent agents:', error);\n\t\t\t\tthis.$set(this, 'recentAgents', []);\n\t\t\t}\n\t\t},\n\t\t\n\t\t// 展开头像\n\t\texpandAvatars() {\n\t\t\t// 清除收缩定时器\n\t\t\tif (this.avatarExpandTimeout) {\n\t\t\t\tclearTimeout(this.avatarExpandTimeout);\n\t\t\t\tthis.avatarExpandTimeout = null;\n\t\t\t}\n\t\t\t\n\t\t\t// 立即开始展开动画\n\t\t\tthis.avatarsExpanded = true;\n\t\t\t\n\t\t\t// 动画完成后（300ms）才允许显示hover面板\n\t\t\tif (this.avatarFullyExpandTimeout) {\n\t\t\t\tclearTimeout(this.avatarFullyExpandTimeout);\n\t\t\t}\n\t\t\tthis.avatarFullyExpandTimeout = setTimeout(() => {\n\t\t\t\tif (this.avatarsExpanded) {\n\t\t\t\t\tthis.avatarsFullyExpanded = true;\n\t\t\t\t}\n\t\t\t}, 350); // 稍微增加延迟确保动画完成\n\t\t},\n\t\t\n\t\t// 收缩头像\n\t\tcollapseAvatars() {\n\t\t\t// 如果hover面板正在显示，不要收缩\n\t\t\tif (this.hoveredAgentCard) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\t// 清除展开完成定时器\n\t\t\tif (this.avatarFullyExpandTimeout) {\n\t\t\t\tclearTimeout(this.avatarFullyExpandTimeout);\n\t\t\t\tthis.avatarFullyExpandTimeout = null;\n\t\t\t}\n\t\t\t\n\t\t\t// 立即禁止hover面板\n\t\t\tthis.avatarsFullyExpanded = false;\n\t\t\t\n\t\t\t// 延迟收缩，给用户时间移动到具体头像上\n\t\t\tthis.avatarExpandTimeout = setTimeout(() => {\n\t\t\t\t// 再次检查是否有面板显示\n\t\t\t\tif (!this.hoveredAgentCard) {\n\t\t\t\t\tthis.avatarsExpanded = false;\n\t\t\t\t}\n\t\t\t}, 300);\n\t\t}\n\t},\n\tcomputed: {\n\t\t// 根据当前状态决定显示哪些消息\n\t\tdisplayMessages() {\n\t\t\tif (this.currentAgentChat) {\n\t\t\t\t// 确保智能体会话有messages数组\n\t\t\t\tif (!this.currentAgentChat.messages) {\n\t\t\t\t\tthis.$set(this.currentAgentChat, 'messages', []);\n\t\t\t\t}\n\t\t\t\tconst messages = this.currentAgentChat.messages || [];\n\t\t\t\treturn messages;\n\t\t\t}\n\t\t\treturn this.allMessages;\n\t\t},\n\t\t\n\t\t// 显示的标题\n\t\tdisplayTitle() {\n\t\t\tif (this.currentAgentChat) {\n\t\t\t\treturn this.currentAgentChat.showName;\n\t\t\t}\n\t\t\treturn this.title;\n\t\t},\n\t\t\n\t\t// 父级会话名称\n\t\tparentChatName() {\n\t\t\tif (this.currentAgentChat && this.currentAgentChat.parentChat) {\n\t\t\t\treturn this.currentAgentChat.parentChat.showName;\n\t\t\t}\n\t\t\t// 从targetId中提取父级信息\n\t\t\tif (this.chat.type === 'AGENT' && this.chat.parentId) {\n\t\t\t\t// 尝试从会话列表中找到父级\n\t\t\t\tconst parentChat = this.$store.getters.findChats().find(c => \n\t\t\t\t\tc.targetId === this.chat.parentId\n\t\t\t\t);\n\t\t\t\tif (parentChat) {\n\t\t\t\t\treturn parentChat.showName;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn '返回';\n\t\t},\n\t\t\n\t\t// 是否在智能体对话模式\n\t\t// 合并正常消息和LLM流式消息 - 优化性能版本\n\t\tallMessages() {\n\t\t\t// 使用缓存避免频繁重新计算\n\t\t\tconst messages = this.chat.messages || [];\n\t\t\t\n\t\t\t// 如果没有活跃的流式消息，直接返回原数组\n\t\t\tif (!this.activeLLMStream) {\n\t\t\t\treturn messages;\n\t\t\t}\n\t\t\t\n\t\t\t// 创建流式消息对象\n\t\t\tconst llmMessage = {\n\t\t\t\ttmpId: this.activeLLMStream.streamId,\n\t\t\t\ttype: 'llm-stream',\n\t\t\t\tstreamId: this.activeLLMStream.streamId,\n\t\t\t\ttitle: this.activeLLMStream.title,\n\t\t\t\tsendTime: this.activeLLMStream.startTime,\n\t\t\t\tsendId: 0, // AI助手\n\t\t\t\tsendNickName: 'AI 助手',\n\t\t\t\tselfSend: false,\n\t\t\t\tisCompleted: this.activeLLMStream.isCompleted || false\n\t\t\t};\n\t\t\t\n\t\t\t// 浅拷贝数组并插入流式消息\n\t\t\tconst result = [...messages];\n\t\t\t\n\t\t\t// 找到正确的插入位置（按时间排序）\n\t\t\tlet insertIndex = result.length;\n\t\t\tfor (let i = result.length - 1; i >= 0; i--) {\n\t\t\t\tif (result[i].sendTime <= llmMessage.sendTime) {\n\t\t\t\t\tinsertIndex = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tresult.splice(insertIndex, 0, llmMessage);\n\t\t\treturn result;\n\t\t},\n\t\tmine() {\n\t\t\treturn this.$store.state.userStore.userInfo;\n\t\t},\n\t\tisFriend() {\n\t\t\treturn this.$store.getters.isFriend(this.userInfo.id);\n\t\t},\n\t\tfriend() {\n\t\t\treturn this.$store.getters.findFriend(this.userInfo.id)\n\t\t},\n\t\ttitle() {\n\t\t\tlet title = this.chat.showName;\n\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\tlet size = this.groupMembers.filter(m => !m.quit).length;\n\t\t\t\ttitle += `(${size})`;\n\t\t\t}\n\t\t\treturn title;\n\t\t},\n\t\tmessageAction() {\n\t\t\t// 终端会话使用专门的接口\n\t\t\tif (this.chat.isTerminalChat || this.chat.isTerminalInbox) {\n\t\t\t\treturn `/message/private/send`;\n\t\t\t}\n\t\t\treturn `/message/${this.chat.type.toLowerCase()}/send`;\n\t\t},\n\t\tunreadCount() {\n\t\t\treturn this.chat.unreadCount;\n\t\t},\n\t\tmessageSize() {\n\t\t\treturn this.allMessages.length;\n\t\t},\n\t\tisBanned() {\n\t\t\treturn (this.chat.type == \"PRIVATE\" && this.userInfo.isBanned) ||\n\t\t\t\t(this.chat.type == \"GROUP\" && this.group.isBanned)\n\t\t},\n\t\tmemberSize() {\n\t\t\treturn this.groupMembers.filter(m => !m.quit).length;\n\t\t},\n\t\tisGroup() {\n\t\t\treturn this.chat.type == 'GROUP';\n\t\t},\n\t\tisPrivate() {\n\t\t\treturn this.chat.type == 'PRIVATE';\n\t\t},\n\t\tagentCardStyle() {\n\t\t\tif (!this.hoveredAgentCard) return {};\n\t\t\t\n\t\t\t// 获取窗口尺寸\n\t\t\tconst windowWidth = document.documentElement.clientWidth || 800;\n\t\t\tconst windowHeight = document.documentElement.clientHeight || 600;\n\t\t\t\n\t\t\t// 卡片尺寸\n\t\t\tconst cardWidth = 320;\n\t\t\tconst cardHeight = 380; // 预估高度\n\t\t\t\n\t\t\t// 获取头像位置（相对于头像中心）\n\t\t\tconst avatarCenterX = this.hoveredAgentCard.x;\n\t\t\tconst avatarBottomY = this.hoveredAgentCard.y;\n\t\t\t\n\t\t\t// 计算卡片水平位置（让箭头对准头像中心）\n\t\t\tlet left = avatarCenterX - cardWidth / 2;\n\t\t\t\n\t\t\t// 确保卡片不超出屏幕边界\n\t\t\tif (left < 10) {\n\t\t\t\tleft = 10;\n\t\t\t} else if (left + cardWidth > windowWidth - 10) {\n\t\t\t\tleft = windowWidth - cardWidth - 10;\n\t\t\t}\n\t\t\t\n\t\t\t// 计算箭头偏移（相对于卡片）\n\t\t\tconst arrowOffset = avatarCenterX - left - cardWidth / 2;\n\t\t\t\n\t\t\treturn {\n\t\t\t\ttop: avatarBottomY + 6 + 'px', // 向上提升2px，从8px改为6px\n\t\t\t\tleft: left + 'px',\n\t\t\t\t'--arrow-offset': arrowOffset + 'px'\n\t\t\t};\n\t\t}\n\t},\n\tmounted() {\n\t\t// 组件已成功挂载\n\t\t\n\t\t// 🔧 修复：确保scroll事件正确绑定\n\t\tthis.$nextTick(() => {\n\t\t\tconst scrollBox = document.getElementById('chatScrollBox');\n\t\t\tif (scrollBox) {\n\t\t\t\t// 移除可能存在的旧事件监听器\n\t\t\t\tscrollBox.removeEventListener('scroll', this.onScroll);\n\t\t\t\t// 重新绑定事件监听器\n\t\t\t\tscrollBox.addEventListener('scroll', this.onScroll);\n\t\t\t}\n\t\t});\n\t\t\n\t\t// 注册LLM流式消息事件监听\n\t\tthis.registerLLMStreamHandlers();\n\t\t\n\t\t// 加载最近使用的智能体\n\t\tthis.loadRecentAgents();\n\t},\n\tbeforeDestroy() {\n\t\t// 清理事件监听器\n\t\tconst scrollBox = document.getElementById('chatScrollBox');\n\t\tif (scrollBox) {\n\t\t\tscrollBox.removeEventListener('scroll', this.onScroll);\n\t\t}\n\t\t\n\t\t// 停止智能体状态监控\n\t\tthis.stopAgentStatusMonitoring();\n\t\t\n\t\t// 断开A2A连接\n\t\tif (this.a2aClient?.isConnected) {\n\t\t\tthis.a2aClient.disconnect();\n\t\t}\n\t},\n\twatch: {\n\t\tchat: {\n\t\t\tasync handler(newChat, oldChat) {\n\t\t\t\t// added by qinkee.!oldChat为组件初始化加载，(newChat.type + newChat.targetId != oldChat.type + oldChat.targetId)为会话切换\n\t\t\t\tif (!oldChat || (newChat.type + newChat.targetId != oldChat.type + oldChat.targetId)) {\n\t\t\t\t\t// 清除之前会话的活跃LLM流\n\t\t\t\t\tif (this.activeLLMStream) {\n\t\t\t\t\t\tthis.activeLLMStream = null;\n\t\t\t\t\t\tthis.llmStreams.clear();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 如果从智能体会话切换出去，需要保存并清理\n\t\t\t\t\tif (this.currentAgentChat && newChat.type !== 'AGENT' && (!newChat.targetId || !newChat.targetId.toString().includes('agent_'))) {\n\t\t\t\t\t\t// 保存当前智能体会话\n\t\t\t\t\t\tawait this.exitAgentChat();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 重新加载智能体列表（根据新会话的目标用户）\n\t\t\t\t\t// 使用 nextTick 确保在 DOM 更新后执行\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.loadRecentAgents();\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// 🔧 根据会话类型处理不同逻辑\n\t\t\t\t\tif (this.chat.type == \"GROUP\") {\n\t\t\t\t\t\tthis.loadGroup(this.chat.targetId);\n\t\t\t\t\t} else if (this.chat.isTerminalChat || this.chat.isTerminalInbox) {\n\t\t\t\t\t\t// 🔧 终端收件箱会话的特殊处理\n\t\t\t\n\t\t\t\t\t\t// 终端会话不需要加载好友信息，使用当前用户信息作为userInfo\n\t\t\t\t\t\tthis.userInfo = this.mine;\n\t\t\t\t\t\t// 终端会话不需要验证好友关系，可以直接发送消息\n\t\t\t\t\t} else if (this.chat.type === \"AGENT\" || (this.chat.targetId && this.chat.targetId.toString().includes('agent_'))) {\n\t\t\t\t\t\t// 智能体会话的特殊处理（注意：chat.type可能是\"AGENT\"）\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t// 如果之前有智能体会话，先退出\n\t\t\t\t\t\tif (this.currentAgentChat) {\n\t\t\t\t\t\t\tawait this.exitAgentChat();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 设置默认的userInfo\n\t\t\t\t\t\tthis.userInfo = {\n\t\t\t\t\t\t\tid: this.chat.targetId,\n\t\t\t\t\t\t\tnickName: this.chat.showName || '智能体',\n\t\t\t\t\t\t\theadImageThumb: this.chat.headImage\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 尝试从localStorage加载智能体会话历史\n\t\t\t\t\t\tawait this.loadAgentChatHistory();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.loadFriend(this.chat.targetId);\n\t\t\t\t\t\t// 加载已读状态\n\t\t\t\t\t\tthis.loadReaded(this.chat.targetId)\n\t\t\t\t\t}\n\n\t\t\t\t\t// 滚到底部\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t\tthis.showSide = false;\n\t\t\t\t\t// 消息已读\n\t\t\t\t\tthis.readedMessage()\n\t\t\t\t\t// 初始状态只显示30条消息\n\t\t\t\t\tlet messages = this.chat.messages || [];\n\t\t\t\t\tlet size = messages.length;\n\t\t\t\t\tthis.showMinIdx = size > 30 ? size - 30 : 0;\n\t\t\t\t\t// 重置输入框\n\t\t\t\t\tthis.resetEditor();\n\t\t\t\t\t// 复位回执消息\n\t\t\t\t\tthis.isReceipt = false;\n\t\t\t\t\t// 更新placeholder\n\t\t\t\t\tthis.refreshPlaceHolder();\n\t\t\t\t}\n\t\t\t},\n\t\t\timmediate: true\n\t\t},\n\t\tmessageSize: {\n\t\t\thandler(newSize, oldSize) {\n\t\t\t\tif (newSize > oldSize) {\n\t\t\t\t\t// 拉至底部\n\t\t\t\t\tthis.scrollToBottom();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.chat-box {\n\tposition: relative;\n\twidth: 100%;\n\tbackground: #fff;\n\n\t// 重写header布局 - 使用简洁的flex布局\n\t.chat-header {\n\t\tdisplay: flex !important;\n\t\tjustify-content: space-between !important;\n\t\talign-items: center !important;\n\t\tpadding: 0 16px !important;\n\t\theight: 50px;\n\t\tborder-bottom: var(--im-border);\n\t\tfont-size: var(--im-font-size-larger);\n\t\t\n\t\t// 左侧标题区\n\t\t.chat-title {\n\t\t\tflex: 1;\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tgap: 8px;\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\twhite-space: nowrap;\n\t\t\t\n\t\t\t.parent-name {\n\t\t\t\tcolor: #606266;\n\t\t\t\tfont-weight: normal;\n\t\t\t\tpadding: 2px 6px;\n\t\t\t\tborder-radius: 4px;\n\t\t\t\t\n\t\t\t\t&.clickable {\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\ttransition: all 0.2s ease;\n\t\t\t\t\t\n\t\t\t\t\t&:hover {\n\t\t\t\t\t\tbackground-color: rgba(64, 158, 255, 0.1);\n\t\t\t\t\t\tcolor: #409eff;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t.layer-separator {\n\t\t\t\tcolor: #909399;\n\t\t\t\tfont-size: 18px;\n\t\t\t\tmargin: 0 4px;\n\t\t\t}\n\t\t\t\n\t\t\t.agent-name {\n\t\t\t\tcolor: #409eff;\n\t\t\t\tfont-weight: 500;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// 右侧操作区\n\t\t.header-right {\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tgap: 8px;  // 减小间距，从12px改为8px\n\t\t\tflex-shrink: 0;\n\t\t\t\n\t\t\t// 新的容器结构：分离动画容器和固定头像\n\t\t\t.agent-avatars-container {\n\t\t\t\tdisplay: flex;\n\t\t\t\talign-items: center;\n\t\t\t\tposition: relative;\n\t\t\t\theight: 32px;\n\t\t\t\ttransition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;\n\t\t\t\t\n\t\t\t\t// 侧边栏打开时滑动隐藏\n\t\t\t\t&.collapsed {\n\t\t\t\t\ttransform: translateX(100px); // 向右滑出\n\t\t\t\t\topacity: 0;\n\t\t\t\t\tpointer-events: none;\n\t\t\t\t\ttransition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 可动画的头像容器\n\t\t\t\t.agent-avatars-animated {\n\t\t\t\t\tposition: relative;\n\t\t\t\t\theight: 32px;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\ttransition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n\t\t\t\t\toverflow: visible;\n\t\t\t\t\t\n\t\t\t\t\t// 根据头像数量动态计算折叠宽度\n\t\t\t\t\t&:not(.expanded) {\n\t\t\t\t\t\t// 1个头像时宽度为0（只显示固定头像）\n\t\t\t\t\t\t&[style*=\"--avatar-count: 1\"] { width: 0; }\n\t\t\t\t\t\t// 2个头像时宽度为20px（1个部分可见）\n\t\t\t\t\t\t&[style*=\"--avatar-count: 2\"] { width: 20px; }\n\t\t\t\t\t\t// 3个头像时宽度为40px（2个部分可见）\n\t\t\t\t\t\t&[style*=\"--avatar-count: 3\"] { width: 40px; }\n\t\t\t\t\t\t// 4个头像时宽度为60px（3个部分可见）\n\t\t\t\t\t\t&[style*=\"--avatar-count: 4\"] { width: 60px; }\n\t\t\t\t\t\t// 5个头像时宽度为80px（4个部分可见）\n\t\t\t\t\t\t&[style*=\"--avatar-count: 5\"] { width: 80px; }\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 展开状态 - 根据头像数量动态计算（间距改为20px）\n\t\t\t\t\t&.expanded {\n\t\t\t\t\t\t// 1个头像展开宽度20px\n\t\t\t\t\t\t&[style*=\"--avatar-count: 1\"] { width: 20px; }\n\t\t\t\t\t\t// 2个头像展开宽度40px\n\t\t\t\t\t\t&[style*=\"--avatar-count: 2\"] { width: 40px; }\n\t\t\t\t\t\t// 3个头像展开宽度60px\n\t\t\t\t\t\t&[style*=\"--avatar-count: 3\"] { width: 60px; }\n\t\t\t\t\t\t// 4个头像展开宽度80px\n\t\t\t\t\t\t&[style*=\"--avatar-count: 4\"] { width: 80px; }\n\t\t\t\t\t\t// 5个头像展开宽度100px\n\t\t\t\t\t\t&[style*=\"--avatar-count: 5\"] { width: 100px; }\n\t\t\t\t\t\t\n\t\t\t\t\t\t.agent-avatar-mini {\n\t\t\t\t\t\t\tpointer-events: auto;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 展开位置：每个头像间隔20px\n\t\t\t\t\t\t\t&[style*=\"--avatar-index: 0\"] { left: 0 !important; }\n\t\t\t\t\t\t\t&[style*=\"--avatar-index: 1\"] { left: 20px !important; }\n\t\t\t\t\t\t\t&[style*=\"--avatar-index: 2\"] { left: 40px !important; }\n\t\t\t\t\t\t\t&[style*=\"--avatar-index: 3\"] { left: 60px !important; }\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 动画头像样式\n\t\t\t\t\t.agent-avatar-mini {\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\ttransition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.2s ease;\n\t\t\t\t\t\tpointer-events: none; // 默认不可点击\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 折叠位置：每个头像间隔20px\n\t\t\t\t\t\t&[style*=\"--avatar-index: 0\"] { \n\t\t\t\t\t\t\tleft: 0; \n\t\t\t\t\t\t\tz-index: 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t&[style*=\"--avatar-index: 1\"] { \n\t\t\t\t\t\t\tleft: 20px; \n\t\t\t\t\t\t\tz-index: 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t&[style*=\"--avatar-index: 2\"] { \n\t\t\t\t\t\t\tleft: 40px; \n\t\t\t\t\t\t\tz-index: 3;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t&[style*=\"--avatar-index: 3\"] { \n\t\t\t\t\t\t\tleft: 60px; \n\t\t\t\t\t\t\tz-index: 4;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\ttransform: scale(1.15);\n\t\t\t\t\t\t\tz-index: 10;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 固定的最右侧头像容器\n\t\t\t\t.agent-avatar-fixed {\n\t\t\t\t\tposition: relative;\n\t\t\t\t\twidth: 32px;\n\t\t\t\t\theight: 32px;\n\t\t\t\t\tmargin-left: 4px; // 减小与动画容器的间距\n\t\t\t\t\t\n\t\t\t\t\t.agent-avatar-mini {\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tz-index: 5;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\ttransition: transform 0.2s ease;\n\t\t\t\t\t\t\n\t\t\t\t\t\t&:hover {\n\t\t\t\t\t\t\ttransform: scale(1.15);\n\t\t\t\t\t\t\tz-index: 10;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 统一的头像样式\n\t\t\t.agent-avatar-mini {\n\t\t\t\twidth: 32px;\n\t\t\t\theight: 32px;\n\t\t\t\tborder-radius: 50%; // 纯圆形\n\t\t\t\toverflow: hidden;\n\t\t\t\tborder: 2px solid white; // 白色2px边框\n\t\t\t\tbox-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n\t\t\t\tbackground: white;\n\t\t\t\tflex-shrink: 0;\n\t\t\t\t\n\t\t\t\timg {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tobject-fit: cover; // 100%填充\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t.agent-avatar-text {\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\t\t\t\t\tcolor: white;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\tfont-size: 12px;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 更多按钮\n\t\t\t.header-btn {\n\t\t\t\tfont-size: 18px;\n\t\t\t\tcolor: #606266;\n\t\t\t\tcursor: pointer;\n\t\t\t\tpadding: 4px;\n\t\t\t\tborder-radius: 4px;\n\t\t\t\ttransition: all 0.2s ease;\n\t\t\t\t\n\t\t\t\t&:hover {\n\t\t\t\t\tbackground-color: rgba(0, 0, 0, 0.05);\n\t\t\t\t\tcolor: #409eff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.content-box {\n\t\theight: calc(100vh - 120px);\n\t\t/* 减去header和footer的高度 */\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n\t.im-chat-main {\n\t\tpadding: 0;\n\t\tbackground-color: #fff;\n\t\toverflow-y: scroll;\n\t\t/* 保持滚动条占位 */\n\t\theight: 100%;\n\t\tscrollbar-gutter: stable;\n\t\t/* 为滚动条保留稳定空间 */\n\n\t\t/* 完全隐藏滚动条但保持滚动功能 */\n\t\t&::-webkit-scrollbar {\n\t\t\twidth: 8px;\n\t\t\t/* 固定宽度，避免位置窜动 */\n\t\t\tbackground: transparent;\n\t\t}\n\n\t\t&::-webkit-scrollbar-track {\n\t\t\tbackground: transparent;\n\t\t}\n\n\t\t&::-webkit-scrollbar-thumb {\n\t\t\tbackground: transparent;\n\t\t}\n\n\t\t/* 悬停时显示滚动条 */\n\t\t&:hover {\n\t\t\t&::-webkit-scrollbar-thumb {\n\t\t\t\tbackground: #c1c1c1;\n\t\t\t\tborder-radius: 4px;\n\n\t\t\t\t&:hover {\n\t\t\t\t\tbackground: #a8a8a8;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/* Firefox浏览器 */\n\t\tscrollbar-width: thin;\n\t\tscrollbar-color: transparent transparent;\n\t\t/* 默认透明 */\n\n\t\t&:hover {\n\t\t\tscrollbar-color: #c1c1c1 transparent;\n\t\t\t/* 悬停时显示 */\n\t\t}\n\n\t\t.im-chat-box {\n\t\t\t>ul {\n\t\t\t\tpadding: 0 6px 0 20px;\n\n\t\t\t\tli {\n\t\t\t\t\tlist-style-type: none;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t.im-chat-footer {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding: 0;\n\n\t\t.chat-tool-bar {\n\t\t\tdisplay: flex;\n\t\t\tposition: relative;\n\t\t\twidth: 100%;\n\t\t\theight: 36px;\n\t\t\ttext-align: left;\n\t\t\tbox-sizing: border-box;\n\t\t\tborder-top: var(--im-border);\n\t\t\tpadding: 4px 2px 2px 8px;\n\n\t\t\t>div {\n\t\t\t\tfont-size: 22px;\n\t\t\t\tcursor: pointer;\n\t\t\t\tline-height: 30px;\n\t\t\t\twidth: 30px;\n\t\t\t\theight: 30px;\n\t\t\t\ttext-align: center;\n\t\t\t\tborder-radius: 2px;\n\t\t\t\tmargin-right: 8px;\n\t\t\t\tcolor: #999;\n\t\t\t\ttransition: 0.3s;\n\n\t\t\t\t&.chat-tool-active {\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\tcolor: var(--im-color-primary);\n\t\t\t\t\tbackground-color: #ddd;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t>div:hover {\n\t\t\t\tcolor: #333;\n\t\t\t}\n\t\t}\n\n\t\t.send-content-area {\n\t\t\tposition: relative;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\theight: 100%;\n\t\t\tbackground-color: white !important;\n\n\t\t\t.send-btn-area {\n\t\t\t\tpadding: 10px;\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: 4px;\n\t\t\t\tright: 6px;\n\t\t\t}\n\t\t}\n\t}\n\n\t.chat-group-side-box {\n\t\tborder-left: var(--im-border);\n\t\t//animation: rtl-drawer-in .3s 1ms;\n\t}\n\t\n\t// 统一侧边栏样式\n\t.chat-side-panel {\n\t\tborder-left: 2px solid #e4e7ed;\n\t\tbackground: #fafafa;\n\t\tanimation: rtl-drawer-in 0.3s ease;\n\t\tbox-shadow: -2px 0 8px rgba(0, 0, 0, 0.05);\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\t\n\t\t.side-tabs {\n\t\t\theight: 100%;\n\t\t\tdisplay: flex;\n\t\t\tflex-direction: column;\n\t\t\t\n\t\t\t.el-tabs__header {\n\t\t\t\tmargin: 0;\n\t\t\t\tborder-bottom: 1px solid #e4e7ed;\n\t\t\t}\n\t\t\t\n\t\t\t.el-tabs__content {\n\t\t\t\tflex: 1;\n\t\t\t\toverflow: hidden;\n\t\t\t\tpadding: 0;\n\t\t\t\t\n\t\t\t\t.el-tab-pane {\n\t\t\t\t\theight: 100%;\n\t\t\t\t\toverflow: auto;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\t// 保持原有样式兼容性\n\t.chat-agent-side-box {\n\t\tborder-left: 2px solid #e4e7ed;\n\t\tbackground: #fafafa;\n\t\tanimation: rtl-drawer-in 0.3s ease;\n\t\tbox-shadow: -2px 0 8px rgba(0, 0, 0, 0.05);\n\t}\n\t\n\t// 智能体悬停面板样式\n\t.agent-hover-panel {\n\t\tposition: fixed;\n\t\tz-index: 2000;\n\t\twidth: 320px;\n\t\tanimation: slideDown 0.2s ease-out;\n\t\t// 禁用文本选择\n\t\tuser-select: none;\n\t\t-webkit-user-select: none;\n\t\t-moz-user-select: none;\n\t\t-ms-user-select: none;\n\t\t// 确保指针事件正常\n\t\tpointer-events: auto;\n\t\t\n\t\t// 指向箭头 - 优化与面板的融合\n\t\t.panel-arrow {\n\t\t\tposition: absolute;\n\t\t\ttop: -5px;  // 缩小高度，从-6px改为-5px\n\t\t\tleft: 50%;\n\t\t\ttransform: translateX(calc(-50% + var(--arrow-offset, 0px)));\n\t\t\twidth: 10px;  // 缩小宽度，从12px改为10px\n\t\t\theight: 5px;  // 缩小高度，从6px改为5px\n\t\t\t\n\t\t\t&::before {\n\t\t\t\tcontent: '';\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 50%;\n\t\t\t\ttransform: translateX(-50%) rotate(45deg);\n\t\t\t\twidth: 8px;  // 缩小尺寸，从10px改为8px\n\t\t\t\theight: 8px;  // 缩小尺寸，从10px改为8px\n\t\t\t\t// 与面板保持一致的背景\n\t\t\t\tbackground: linear-gradient(135deg, \n\t\t\t\t\trgba(255, 255, 255, 0.95), \n\t\t\t\t\trgba(250, 251, 252, 0.98));\n\t\t\t\tborder-left: 1px solid rgba(228, 231, 237, 0.8);\n\t\t\t\tborder-top: 1px solid rgba(228, 231, 237, 0.8);\n\t\t\t\tbackdrop-filter: blur(10px);\n\t\t\t\t-webkit-backdrop-filter: blur(10px);\n\t\t\t}\n\t\t\t\n\t\t\t// 遮盖下边框线，实现完美融合\n\t\t\t&::after {\n\t\t\t\tcontent: '';\n\t\t\t\tposition: absolute;\n\t\t\t\tbottom: -1px;\n\t\t\t\tleft: 50%;\n\t\t\t\ttransform: translateX(-50%);\n\t\t\t\twidth: 9px;  // 相应缩小，从11px改为9px\n\t\t\t\theight: 2px;\n\t\t\t\t// 使用渐变背景遮盖\n\t\t\t\tbackground: linear-gradient(135deg, \n\t\t\t\t\trgba(255, 255, 255, 0.95), \n\t\t\t\t\trgba(250, 251, 252, 0.98));\n\t\t\t}\n\t\t}\n\t\t\n\t\t// 卡片主体样式 - 扁平化设计带磨砂效果\n\t\t.chat-agent-card {\n\t\t\tborder: 1px solid rgba(228, 231, 237, 0.8);\n\t\t\tborder-radius: 8px;\n\t\t\t// 移除阴影，保持扁平\n\t\t\tbox-shadow: none;\n\t\t\t// 添加渐变和磨砂效果\n\t\t\tbackground: linear-gradient(135deg, \n\t\t\t\trgba(255, 255, 255, 0.95) 0%, \n\t\t\t\trgba(250, 251, 252, 0.98) 50%,\n\t\t\t\trgba(248, 249, 251, 0.95) 100%);\n\t\t\tbackdrop-filter: blur(10px);\n\t\t\t-webkit-backdrop-filter: blur(10px);\n\t\t\tposition: relative;\n\t\t\t\n\t\t\t// 添加微妙的内发光效果\n\t\t\t&::before {\n\t\t\t\tcontent: '';\n\t\t\t\tposition: absolute;\n\t\t\t\tinset: 0;\n\t\t\t\tborder-radius: 8px;\n\t\t\t\tbackground: linear-gradient(135deg,\n\t\t\t\t\trgba(64, 158, 255, 0.03) 0%,\n\t\t\t\t\ttransparent 50%,\n\t\t\t\t\trgba(103, 194, 58, 0.02) 100%);\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t@keyframes slideDown {\n\t\tfrom {\n\t\t\topacity: 0;\n\t\t\ttransform: translateY(-10px);\n\t\t}\n\t\tto {\n\t\t\topacity: 1;\n\t\t\ttransform: translateY(0);\n\t\t}\n\t}\n\t\n\t@keyframes pulse {\n\t\t0%, 100% {\n\t\t\topacity: 1;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatBox.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatBox.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatBox.vue?vue&type=template&id=6dd2894f\"\nimport script from \"./ChatBox.vue?vue&type=script&lang=js\"\nexport * from \"./ChatBox.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatBox.vue?vue&type=style&index=0&id=6dd2894f&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatGroupSide.vue?vue&type=style&index=0&id=2e9f1bac&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/15.75820281.gif\";","module.exports = __webpack_public_path__ + \"img/54.2030cc4e.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TerminalSelector.vue?vue&type=style&index=0&id=1eb388d6&prod&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxGroup.vue?vue&type=style&index=0&id=6f13104a&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/26.03b7a469.gif\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-group-side\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.group.quit),expression:\"!group.quit\"}],staticClass:\"group-side-search\"},[_c('el-input',{attrs:{\"placeholder\":\"搜索群成员\",\"size\":\"small\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"prefix\"},slot:\"prefix\"})])],1),_c('div',{staticClass:\"group-side-scrollbar\"},[_c('el-scrollbar',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.group.quit),expression:\"!group.quit\"}],ref:\"scrollbar\",style:('height: ' + _vm.scrollHeight + 'px')},[_c('div',{staticClass:\"group-side-member-list\"},[_c('div',{staticClass:\"group-side-invite\"},[_c('div',{staticClass:\"invite-member-btn\",attrs:{\"title\":\"邀请好友进群聊\"},on:{\"click\":function($event){_vm.showAddGroupMember = true}}},[_c('i',{staticClass:\"el-icon-plus\"})]),_c('div',{staticClass:\"invite-member-text\"},[_vm._v(\"邀请\")]),_c('add-group-member',{attrs:{\"visible\":_vm.showAddGroupMember,\"groupId\":_vm.group.id,\"members\":_vm.groupMembers},on:{\"reload\":function($event){return _vm.$emit('reload')},\"close\":function($event){_vm.showAddGroupMember = false}}})],1),(_vm.isOwner)?_c('div',{staticClass:\"group-side-invite\"},[_c('div',{staticClass:\"invite-member-btn\",attrs:{\"title\":\"选择成员移出群聊\"},on:{\"click\":function($event){return _vm.onRemove()}}},[_c('i',{staticClass:\"el-icon-minus\"})]),_c('div',{staticClass:\"invite-member-text\"},[_vm._v(\"移除\")]),_c('group-member-selector',{ref:\"removeSelector\",attrs:{\"title\":\"选择成员进行移除\",\"groupId\":_vm.group.id},on:{\"complete\":_vm.onRemoveComplete}})],1):_vm._e(),_vm._l((_vm.showMembers),function(member,idx){return _c('div',{key:member.id},[(idx < _vm.showMaxIdx)?_c('group-member',{staticClass:\"group-side-member\",attrs:{\"member\":member,\"showDel\":false}}):_vm._e()],1)})],2)]),(!_vm.group.quit)?_c('el-divider',{attrs:{\"content-position\":\"center\"}}):_vm._e(),_c('el-form',{staticClass:\"group-side-form\",attrs:{\"labelPosition\":\"top\",\"model\":_vm.group,\"size\":\"small\"}},[_c('el-form-item',{attrs:{\"label\":\"群聊名称\"}},[_c('el-input',{attrs:{\"disabled\":\"\",\"maxlength\":\"20\"},model:{value:(_vm.group.name),callback:function ($$v) {_vm.$set(_vm.group, \"name\", $$v)},expression:\"group.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"群主\"}},[_c('el-input',{attrs:{\"value\":_vm.ownerName,\"disabled\":\"\"}})],1),_c('el-form-item',{attrs:{\"label\":\"群公告\"}},[_c('el-input',{attrs:{\"disabled\":\"\",\"type\":\"textarea\",\"maxlength\":\"1024\"},model:{value:(_vm.group.notice),callback:function ($$v) {_vm.$set(_vm.group, \"notice\", $$v)},expression:\"group.notice\"}})],1),_c('el-form-item',{attrs:{\"label\":\"备注\"}},[_c('el-input',{attrs:{\"disabled\":!_vm.editing,\"maxlength\":\"20\"},model:{value:(_vm.group.remarkGroupName),callback:function ($$v) {_vm.$set(_vm.group, \"remarkGroupName\", $$v)},expression:\"group.remarkGroupName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"我在本群的昵称\"}},[_c('el-input',{attrs:{\"disabled\":!_vm.editing,\"maxlength\":\"20\"},model:{value:(_vm.group.remarkNickName),callback:function ($$v) {_vm.$set(_vm.group, \"remarkNickName\", $$v)},expression:\"group.remarkNickName\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.group.quit),expression:\"!group.quit\"}],staticClass:\"btn-group\"},[(_vm.editing)?_c('el-button',{attrs:{\"type\":\"success\"},on:{\"click\":function($event){return _vm.onSaveGroup()}}},[_vm._v(\"保存\")]):_vm._e(),(!_vm.editing)?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.editing = !_vm.editing}}},[_vm._v(\"编辑\")]):_vm._e(),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isOwner),expression:\"!isOwner\"}],attrs:{\"type\":\"danger\"},on:{\"click\":function($event){return _vm.onQuit()}}},[_vm._v(\"退出群聊\")])],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"chat-group-side\">\n    <div v-show=\"!group.quit\" class=\"group-side-search\">\n      <el-input placeholder=\"搜索群成员\" v-model=\"searchText\" size=\"small\">\n        <i class=\"el-icon-search el-input__icon\" slot=\"prefix\"> </i>\n      </el-input>\n    </div>\n    <div class=\"group-side-scrollbar\">\n      <el-scrollbar v-show=\"!group.quit\" ref=\"scrollbar\" :style=\"'height: ' + scrollHeight + 'px'\">\n        <div class=\"group-side-member-list\">\n          <div class=\"group-side-invite\">\n            <div class=\"invite-member-btn\" title=\"邀请好友进群聊\" @click=\"showAddGroupMember = true\">\n              <i class=\"el-icon-plus\"></i>\n            </div>\n            <div class=\"invite-member-text\">邀请</div>\n            <add-group-member :visible=\"showAddGroupMember\" :groupId=\"group.id\" :members=\"groupMembers\"\n              @reload=\"$emit('reload')\" @close=\"showAddGroupMember = false\"></add-group-member>\n          </div>\n          <div v-if=\"isOwner\" class=\"group-side-invite\">\n            <div class=\"invite-member-btn\" title=\"选择成员移出群聊\" @click=\"onRemove()\">\n              <i class=\"el-icon-minus\"></i>\n            </div>\n            <div class=\"invite-member-text\">移除</div>\n            <group-member-selector ref=\"removeSelector\" title=\"选择成员进行移除\" :groupId=\"group.id\"\n              @complete=\"onRemoveComplete\"></group-member-selector>\n          </div>\n          <div v-for=\"(member, idx) in showMembers\" :key=\"member.id\">\n            <group-member v-if=\"idx < showMaxIdx\" class=\"group-side-member\" :member=\"member\"\n              :showDel=\"false\"></group-member>\n          </div>\n        </div>\n      </el-scrollbar>\n      <el-divider v-if=\"!group.quit\" content-position=\"center\"></el-divider>\n      <el-form labelPosition=\"top\" class=\"group-side-form\" :model=\"group\" size=\"small\">\n        <el-form-item label=\"群聊名称\">\n          <el-input v-model=\"group.name\" disabled maxlength=\"20\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"群主\">\n          <el-input :value=\"ownerName\" disabled></el-input>\n        </el-form-item>\n        <el-form-item label=\"群公告\">\n          <el-input v-model=\"group.notice\" disabled type=\"textarea\" maxlength=\"1024\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"备注\">\n          <el-input v-model=\"group.remarkGroupName\" :disabled=\"!editing\" maxlength=\"20\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"我在本群的昵称\">\n          <el-input v-model=\"group.remarkNickName\" :disabled=\"!editing\" maxlength=\"20\"></el-input>\n        </el-form-item>\n        <div v-show=\"!group.quit\" class=\"btn-group\">\n          <el-button v-if=\"editing\" type=\"success\" @click=\"onSaveGroup()\">保存</el-button>\n          <el-button v-if=\"!editing\" type=\"primary\" @click=\"editing = !editing\">编辑</el-button>\n          <el-button type=\"danger\" v-show=\"!isOwner\" @click=\"onQuit()\">退出群聊</el-button>\n        </div>\n      </el-form>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport AddGroupMember from '../group/AddGroupMember.vue';\nimport GroupMember from '../group/GroupMember.vue';\nimport GroupMemberSelector from '../group/GroupMemberSelector.vue';\n\nexport default {\n  name: \"chatGroupSide\",\n  components: {\n    AddGroupMember,\n    GroupMember,\n    GroupMemberSelector\n  },\n  data() {\n    return {\n      searchText: \"\",\n      editing: false,\n      showAddGroupMember: false,\n      showMaxIdx: 50\n    }\n  },\n  props: {\n    group: {\n      type: Object\n    },\n    groupMembers: {\n      type: Array\n    }\n  },\n  methods: {\n    onClose() {\n      this.$emit('close');\n    },\n    loadGroupMembers() {\n      this.$http({\n        url: `/group/members/${this.group.id}`,\n        method: \"get\"\n      }).then((members) => {\n        this.groupMembers = members;\n      })\n    },\n    onSaveGroup() {\n      let vo = this.group;\n      this.$http({\n        url: \"/group/modify\",\n        method: \"put\",\n        data: vo\n      }).then((group) => {\n        this.editing = !this.editing\n        this.$store.commit(\"updateGroup\", group);\n        this.$emit('reload');\n        this.$message.success(\"修改成功\");\n      })\n    },\n    onRemove() {\n      // 群主不显示\n      let hideIds = [this.group.ownerId];\n      this.$refs.removeSelector.open(50, [], [], hideIds);\n    },\n    onRemoveComplete(members) {\n      let userIds = members.map(m => m.userId);\n      let data = {\n        groupId: this.group.id,\n        userIds: userIds\n      }\n      this.$http({\n        url: \"/group/members/remove\",\n        method: 'delete',\n        data: data\n      }).then(() => {\n        this.$emit('reload');\n        this.$message.success(`您移除了${userIds.length}位成员`);\n      })\n    },\n    onQuit() {\n      this.$confirm('退出群聊后将不再接受群里的消息，确认退出吗？', '确认退出?', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        modal: false\n      }).then(() => {\n        this.$http({\n          url: `/group/quit/${this.group.id}`,\n          method: 'delete'\n        }).then(() => {\n          this.$store.commit(\"removeGroup\", this.group.id);\n          this.$store.commit(\"removeGroupChat\", this.group.id);\n        });\n      })\n    },\n    onScroll(e) {\n      const scrollbar = e.target;\n      // 滚到底部\n      if (scrollbar.scrollTop + scrollbar.clientHeight >= scrollbar.scrollHeight - 30) {\n        if (this.showMaxIdx < this.showMembers.length) {\n          this.showMaxIdx += 30;\n        }\n      }\n    }\n  },\n  computed: {\n    ownerName() {\n      let member = this.groupMembers.find((m) => m.userId == this.group.ownerId);\n      return member && member.showNickName;\n    },\n    isOwner() {\n      return this.group.ownerId == this.$store.state.userStore.userInfo.id;\n    },\n    showMembers() {\n      return this.groupMembers.filter((m) => !m.quit && m.showNickName.includes(this.searchText))\n    },\n    scrollHeight() {\n      return Math.min(400, 80 + this.showMembers.length / 5 * 80);\n    }\n  },\n  mounted() {\n    let scrollWrap = this.$refs.scrollbar.$el.querySelector('.el-scrollbar__wrap');\n    scrollWrap.addEventListener('scroll', this.onScroll);\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.chat-group-side {\n  position: relative;\n\n  .group-side-search {\n    padding: 10px;\n  }\n\n  .group-side-scrollbar {\n    overflow: auto;\n  }\n\n  .el-divider--horizontal {\n    margin: 0;\n  }\n\n  .el-form-item {\n    margin-bottom: 0px !important;\n  }\n\n  .group-side-member-list {\n    padding: 10px;\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    font-size: 14px;\n    text-align: center;\n\n    .group-side-member {\n      margin-left: 5px;\n    }\n\n    .group-side-invite {\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      width: 50px;\n      margin-left: 5px;\n\n      .invite-member-btn {\n        width: 38px;\n        height: 38px;\n        line-height: 38px;\n        border: var(--im-border);\n        font-size: 14px;\n        cursor: pointer;\n        box-sizing: border-box;\n\n        &:hover {\n          border: #aaaaaa solid 1px;\n        }\n      }\n\n      .invite-member-text {\n        font-size: 12px;\n        text-align: center;\n        width: 100%;\n        height: 30px;\n        line-height: 30px;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden\n      }\n    }\n  }\n\n  .group-side-form {\n    text-align: left;\n    padding: 10px;\n    height: 30%;\n\n    .el-form-item {\n      margin-bottom: 12px;\n\n      .el-form-item__label {\n        padding: 0;\n        line-height: 30px;\n      }\n\n      .el-textarea__inner {\n        min-height: 100px !important;\n      }\n    }\n\n    .el-input__inner,\n    .el-textarea__inner {\n      color: var(--im-text-color) !important;\n    }\n\n\n    .btn-group {\n      text-align: center;\n      margin-top: 12px;\n    }\n  }\n\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatGroupSide.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatGroupSide.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatGroupSide.vue?vue&type=template&id=2e9f1bac\"\nimport script from \"./ChatGroupSide.vue?vue&type=script&lang=js\"\nexport * from \"./ChatGroupSide.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatGroupSide.vue?vue&type=style&index=0&id=2e9f1bac&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/53.a59af82b.gif\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-scrollbar',{ref:\"scrollbar\"},_vm._l((_vm.items),function(item,idx){return _c('div',{key:idx},[( idx < _vm.showMaxIdx)?_vm._t(\"default\",null,{\"item\":item}):_vm._e()],2)}),0)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <el-scrollbar ref=\"scrollbar\">\n        <div v-for=\"(item, idx) in items\" :key=\"idx\">\n            <slot :item=\"item\" v-if=\" idx < showMaxIdx\">\n            </slot>\n        </div>\n    </el-scrollbar>\n</template>\n\n<script>\nexport default {\n    name: \"virtualScroller\",\n    data() {\n        return {\n            page: 1,\n            isInitEvent: false,\n            lockTip: false\n        }\n    },\n    props: {\n        items: {\n            type: Array\n        },\n        size: {\n            type: Number,\n            default: 30\n        }\n    },\n    methods: {\n        init() {\n            this.page = 1;\n            this.initEvent();\n        },\n        initEvent() {\n            if (!this.isInitEvent) {\n                let scrollWrap = this.$refs.scrollbar.$el.querySelector('.el-scrollbar__wrap');\n                scrollWrap.addEventListener('scroll', this.onScroll);\n                this.isInitEvent = true;\n            }\n        },\n        onScroll(e) {\n            const scrollbar = e.target;\n            // 滚到底部\n            if (scrollbar.scrollTop + scrollbar.clientHeight >= scrollbar.scrollHeight - 30) {\n                if(this.showMaxIdx >= this.items.length ){\n                    this.showTip();\n                }else{\n                    this.page++;\n                }\n            }\n        },\n        showTip(){\n            // 提示限制最多3秒显示一次\n            if(!this.lockTip){\n                this.$message.success(\"已到滚动到底部\")\n                this.lockTip = true;\n                setTimeout(()=>{\n                    this.lockTip = false;\n                },3000)\n            }\n        }\n    },\n    computed: {\n        showMaxIdx() {\n            return Math.min(this.page * this.size, this.items.length);\n        }\n    },\n    mounted(){\n        this.initEvent();\n    }\n}\n</script>\n\n<style scoped></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VirtualScroller.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VirtualScroller.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./VirtualScroller.vue?vue&type=template&id=821ed2d2&scoped=true\"\nimport script from \"./VirtualScroller.vue?vue&type=script&lang=js\"\nexport * from \"./VirtualScroller.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"821ed2d2\",\n  null\n  \n)\n\nexport default component.exports","/**\n * 最终优化版零宽字符编码器\n * 使用UTF-8字节编码，确保中文支持\n */\n\nclass ZeroWidthEncoderFinal {\n    // 使用4个零宽字符表示16个值（0-F）\n    static CHARS = [\n        '\\u200B', '\\u200C', '\\u200D', '\\u2060',  // 0-3\n        '\\u180E', '\\uFEFF', '\\u200E', '\\u200F',  // 4-7\n        '\\u202A', '\\u202B', '\\u202C', '\\u202D',  // 8-B\n        '\\u202E', '\\u2061', '\\u2062', '\\u2063'   // C-F\n    ]\n    \n    // 边界标记\n    static BOUNDARY = {\n        START: '\\u2066', // 开始\n        END: '\\u2067',   // 结束\n    }\n\n    /**\n     * 编码参数为零宽字符\n     */\n    static encode(params) {\n        try {\n            // 简化协议\n            let data = ''\n            \n            if (params.type === 'task') {\n                data = 'T'\n            } else if (params.type === 'agent') {\n                data = 'A'\n            }\n            \n            if (params.name) {\n                data += ':' + params.name\n            }\n            \n            if (params.id) {\n                data += '|' + params.id\n            } else if (params.modeId) {\n                data += '|' + params.modeId\n            }\n            \n            // 添加targetId和chatType\n            if (params.targetId) {\n                data += '#' + params.targetId\n            }\n            \n            if (params.chatType) {\n                data += '&' + params.chatType\n            }\n            \n            // 添加 senderTerminal（发送方终端）\n            if (params.senderTerminal !== undefined) {\n                data += '!' + params.senderTerminal\n            }\n            \n            // 转为UTF-8字节\n            const bytes = this.stringToBytes(data)\n            \n            // 每个字节用2个零宽字符表示（16进制）\n            let encoded = ''\n            for (const byte of bytes) {\n                const high = Math.floor(byte / 16)\n                const low = byte % 16\n                encoded += this.CHARS[high] + this.CHARS[low]\n            }\n            \n            return this.BOUNDARY.START + encoded + this.BOUNDARY.END\n        } catch (error) {\n            console.error('编码错误:', error)\n            return ''\n        }\n    }\n\n    /**\n     * 解码零宽字符为参数\n     */\n    static decode(text) {\n        try {\n            const startIdx = text.indexOf(this.BOUNDARY.START)\n            const endIdx = text.indexOf(this.BOUNDARY.END)\n            \n            if (startIdx === -1 || endIdx === -1) return null\n            \n            const encoded = text.substring(startIdx + 1, endIdx)\n            \n            // 每2个零宽字符解码为一个字节\n            const bytes = []\n            for (let i = 0; i < encoded.length; i += 2) {\n                if (i + 1 >= encoded.length) break\n                \n                const highIdx = this.CHARS.indexOf(encoded[i])\n                const lowIdx = this.CHARS.indexOf(encoded[i + 1])\n                \n                if (highIdx === -1 || lowIdx === -1) continue\n                \n                bytes.push(highIdx * 16 + lowIdx)\n            }\n            \n            // 字节转字符串\n            const data = this.bytesToString(bytes)\n            \n            // 解析协议 - 更新为支持新的分隔符\n            const result = {}\n            \n            // 先提取类型标识\n            const typeChar = data[0]\n            if (typeChar === 'T') {\n                result.type = 'task'\n            } else if (typeChar === 'A') {\n                result.type = 'agent'\n            }\n            \n            // 解析剩余部分\n            const remaining = data.substring(1)\n            \n            // 提取名称（:和|之间）\n            const nameMatch = remaining.match(/^:([^|#&]+)/)\n            if (nameMatch) {\n                result.name = nameMatch[1]\n            }\n            \n            // 提取ID（|和#之间）\n            const idMatch = remaining.match(/\\|([^#&]+)/)\n            if (idMatch) {\n                if (result.type === 'task') {\n                    result.id = idMatch[1]\n                } else if (result.type === 'agent') {\n                    result.modeId = idMatch[1]\n                }\n            }\n            \n            // 提取targetId（#和&之间）\n            const targetIdMatch = remaining.match(/#([^&]+)/)\n            if (targetIdMatch) {\n                result.targetId = targetIdMatch[1]\n            }\n            \n            // 提取chatType（&和!之间，或&后面所有）\n            const chatTypeMatch = remaining.match(/&([^!]+)/)\n            if (chatTypeMatch) {\n                result.chatType = chatTypeMatch[1]\n            }\n            \n            // 提取senderTerminal（!后面）\n            const senderTerminalMatch = remaining.match(/!(\\d+)/)\n            if (senderTerminalMatch) {\n                result.senderTerminal = parseInt(senderTerminalMatch[1])\n            }\n            \n            return result\n        } catch (error) {\n            console.error('解码错误:', error)\n            return null\n        }\n    }\n\n    /**\n     * 字符串转UTF-8字节数组\n     */\n    static stringToBytes(str) {\n        const bytes = []\n        for (let i = 0; i < str.length; i++) {\n            const code = str.charCodeAt(i)\n            \n            if (code < 0x80) {\n                // 1字节\n                bytes.push(code)\n            } else if (code < 0x800) {\n                // 2字节\n                bytes.push(0xC0 | (code >> 6))\n                bytes.push(0x80 | (code & 0x3F))\n            } else if (code < 0x10000) {\n                // 3字节\n                bytes.push(0xE0 | (code >> 12))\n                bytes.push(0x80 | ((code >> 6) & 0x3F))\n                bytes.push(0x80 | (code & 0x3F))\n            } else {\n                // 4字节\n                bytes.push(0xF0 | (code >> 18))\n                bytes.push(0x80 | ((code >> 12) & 0x3F))\n                bytes.push(0x80 | ((code >> 6) & 0x3F))\n                bytes.push(0x80 | (code & 0x3F))\n            }\n        }\n        return bytes\n    }\n\n    /**\n     * UTF-8字节数组转字符串\n     */\n    static bytesToString(bytes) {\n        let str = ''\n        let i = 0\n        \n        while (i < bytes.length) {\n            const byte1 = bytes[i]\n            \n            if ((byte1 & 0x80) === 0) {\n                // 1字节字符\n                str += String.fromCharCode(byte1)\n                i++\n            } else if ((byte1 & 0xE0) === 0xC0) {\n                // 2字节字符\n                if (i + 1 < bytes.length) {\n                    const byte2 = bytes[i + 1]\n                    const code = ((byte1 & 0x1F) << 6) | (byte2 & 0x3F)\n                    str += String.fromCharCode(code)\n                }\n                i += 2\n            } else if ((byte1 & 0xF0) === 0xE0) {\n                // 3字节字符\n                if (i + 2 < bytes.length) {\n                    const byte2 = bytes[i + 1]\n                    const byte3 = bytes[i + 2]\n                    const code = ((byte1 & 0x0F) << 12) | ((byte2 & 0x3F) << 6) | (byte3 & 0x3F)\n                    str += String.fromCharCode(code)\n                }\n                i += 3\n            } else if ((byte1 & 0xF8) === 0xF0) {\n                // 4字节字符\n                if (i + 3 < bytes.length) {\n                    const byte2 = bytes[i + 1]\n                    const byte3 = bytes[i + 2]\n                    const byte4 = bytes[i + 3]\n                    const code = ((byte1 & 0x07) << 18) | ((byte2 & 0x3F) << 12) | \n                                ((byte3 & 0x3F) << 6) | (byte4 & 0x3F)\n                    str += String.fromCharCode(code)\n                }\n                i += 4\n            } else {\n                i++\n            }\n        }\n        \n        return str\n    }\n\n    /**\n     * 清理文本中的零宽字符\n     */\n    static cleanText(text) {\n        const allZeroWidth = [\n            ...this.CHARS,\n            this.BOUNDARY.START,\n            this.BOUNDARY.END\n        ]\n        \n        let cleaned = text\n        allZeroWidth.forEach(char => {\n            cleaned = cleaned.replace(new RegExp(char, 'g'), '')\n        })\n        \n        return cleaned\n    }\n\n    /**\n     * 在文本中嵌入参数\n     */\n    static embedInText(displayText, params) {\n        const encoded = this.encode(params)\n        return displayText + encoded\n    }\n\n    /**\n     * 检测是否包含零宽编码\n     */\n    static hasZeroWidthParams(text) {\n        return text.includes(this.BOUNDARY.START) && text.includes(this.BOUNDARY.END)\n    }\n\n    /**\n     * 从文本中提取所有编码的参数\n     */\n    static extractAllFromText(text) {\n        console.log('[ZeroWidthEncoder] extractAllFromText 被调用');\n        console.log('[ZeroWidthEncoder] 输入文本:', text);\n        console.log('[ZeroWidthEncoder] 文本包含开始标记?', text.includes(this.BOUNDARY.START));\n        console.log('[ZeroWidthEncoder] 文本包含结束标记?', text.includes(this.BOUNDARY.END));\n        \n        const results = []\n        const regex = new RegExp(`${this.BOUNDARY.START}[^${this.BOUNDARY.END}]+${this.BOUNDARY.END}`, 'g')\n        \n        let match\n        while ((match = regex.exec(text)) !== null) {\n            console.log('[ZeroWidthEncoder] 找到匹配:', match[0]);\n            const params = this.decode(match[0])\n            console.log('[ZeroWidthEncoder] 解码结果:', params);\n            if (params) {\n                results.push({\n                    position: match.index,\n                    params\n                })\n            }\n        }\n        \n        console.log('[ZeroWidthEncoder] 最终结果:', results);\n        return results\n    }\n}\n\n/**\n * 最终版提及辅助工具\n */\nclass MentionHelperFinal {\n    static createTaskMention(taskName, taskId, targetId, chatType, senderTerminal) {\n        const displayText = `@任务[${taskName}]`\n        const params = {\n            type: 'task',\n            name: taskName\n        }\n        \n        if (taskId) {\n            params.id = taskId\n        }\n        \n        if (targetId) {\n            params.targetId = targetId\n        }\n        \n        if (chatType) {\n            params.chatType = chatType\n        }\n        \n        if (senderTerminal !== undefined) {\n            params.senderTerminal = senderTerminal\n        }\n        \n        return ZeroWidthEncoderFinal.embedInText(displayText, params)\n    }\n\n    static createAgentMention(agentName, modeId, targetId, chatType, senderTerminal) {\n        const displayText = `@智能体[${agentName}]`\n        const params = {\n            type: 'agent',\n            name: agentName,\n            modeId: modeId\n        }\n        \n        if (targetId) {\n            params.targetId = targetId\n        }\n        \n        if (chatType) {\n            params.chatType = chatType\n        }\n        \n        if (senderTerminal !== undefined) {\n            params.senderTerminal = senderTerminal\n        }\n        \n        return ZeroWidthEncoderFinal.embedInText(displayText, params)\n    }\n\n    static parseMention(text) {\n        const cleanText = ZeroWidthEncoderFinal.cleanText(text)\n        const params = ZeroWidthEncoderFinal.decode(text)\n        \n        return {\n            displayText: cleanText,\n            params: params\n        }\n    }\n\n    static hasZeroWidthParams(text) {\n        return ZeroWidthEncoderFinal.hasZeroWidthParams(text)\n    }\n}\n\n// 导出 - 保持原有类名以兼容现有代码\nexport { \n    ZeroWidthEncoderFinal as ZeroWidthEncoder, \n    MentionHelperFinal as MentionHelper \n}","module.exports = __webpack_public_path__ + \"img/35.7e9e390a.gif\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"streaming-renderer\"},[(_vm.isStreaming && !_vm.fullContent)?_c('div',{staticClass:\"loading-placeholder\"},[_c('loading-dots')],1):_c('unified-message-renderer',{ref:\"messageRenderer\",attrs:{\"message\":_vm.streamingMessage,\"streaming\":_vm.isStreaming,\"custom-config\":_vm.customConfig},on:{\"rendered\":_vm.onRendered},scopedSlots:_vm._u([{key:\"enhancements\",fn:function(){return [(_vm.isStreaming)?_c('div',{staticClass:\"streaming-indicator\"},[_c('span',{staticClass:\"streaming-dot\"}),_c('span',{staticClass:\"streaming-text\"},[_vm._v(\"正在输入...\")])]):_vm._e()]},proxy:true}])})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"streaming-renderer\">\n    <!-- 如果正在流式传输但还没有内容，显示加载动效 -->\n    <div v-if=\"isStreaming && !fullContent\" class=\"loading-placeholder\">\n      <loading-dots />\n    </div>\n    <!-- 否则显示正常的消息渲染器 -->\n    <unified-message-renderer\n      v-else\n      ref=\"messageRenderer\"\n      :message=\"streamingMessage\"\n      :streaming=\"isStreaming\"\n      :custom-config=\"customConfig\"\n      @rendered=\"onRendered\"\n    >\n      <template v-slot:enhancements>\n        <div v-if=\"isStreaming\" class=\"streaming-indicator\">\n          <span class=\"streaming-dot\"></span>\n          <span class=\"streaming-text\">正在输入...</span>\n        </div>\n      </template>\n    </unified-message-renderer>\n  </div>\n</template>\n\n<script>\nimport UnifiedMessageRenderer from './UnifiedMessageRenderer.vue';\nimport LoadingDots from '../common/LoadingDots.vue';\n\n/**\n * 流式渲染缓冲器\n * 优化流式内容的渲染性能\n */\nclass StreamingBuffer {\n  constructor(options = {}) {\n    this.buffer = '';\n    this.renderTimer = null;\n    this.lastRenderTime = 0;\n    \n    // 配置选项\n    this.chunkSize = options.chunkSize || 100;          // 每批次渲染的字符数\n    this.renderInterval = options.renderInterval || 50;  // 最小渲染间隔(ms)\n    this.maxBufferSize = options.maxBufferSize || 500;  // 最大缓冲区大小\n    this.autoFlushDelay = options.autoFlushDelay || 100; // 自动刷新延迟(ms)\n    \n    // 回调函数\n    this.onFlush = options.onFlush || (() => {});\n    this.onAppend = options.onAppend || (() => {});\n    \n    // 性能统计\n    this.stats = {\n      totalChunks: 0,\n      totalRenders: 0,\n      totalChars: 0\n    };\n  }\n  \n  /**\n   * 追加内容到缓冲区\n   */\n  append(chunk) {\n    if (!chunk) return;\n    \n    this.buffer += chunk;\n    this.stats.totalChunks++;\n    this.stats.totalChars += chunk.length;\n    \n    this.onAppend(chunk);\n    \n    // 智能批处理逻辑\n    const now = Date.now();\n    const timeSinceLastRender = now - this.lastRenderTime;\n    \n    if (\n      this.buffer.length >= this.maxBufferSize || // 缓冲区已满\n      (this.buffer.length >= this.chunkSize && timeSinceLastRender >= this.renderInterval) // 达到批次大小且间隔足够\n    ) {\n      this.flush();\n    } else {\n      // 设置自动刷新定时器\n      this.scheduleFlush(this.autoFlushDelay);\n    }\n  }\n  \n  /**\n   * 计划刷新缓冲区\n   */\n  scheduleFlush(delay) {\n    clearTimeout(this.renderTimer);\n    this.renderTimer = setTimeout(() => this.flush(), delay);\n  }\n  \n  /**\n   * 立即刷新缓冲区\n   */\n  flush() {\n    clearTimeout(this.renderTimer);\n    \n    if (this.buffer) {\n      const content = this.buffer;\n      this.buffer = '';\n      this.lastRenderTime = Date.now();\n      this.stats.totalRenders++;\n      this.onFlush(content);\n    }\n  }\n  \n  /**\n   * 强制完成并刷新所有内容\n   */\n  finish() {\n    this.flush();\n  }\n  \n  /**\n   * 重置缓冲区\n   */\n  reset() {\n    clearTimeout(this.renderTimer);\n    this.buffer = '';\n    this.lastRenderTime = 0;\n    this.stats = {\n      totalChunks: 0,\n      totalRenders: 0,\n      totalChars: 0\n    };\n  }\n  \n  /**\n   * 获取统计信息\n   */\n  getStats() {\n    return {\n      ...this.stats,\n      bufferSize: this.buffer.length,\n      avgChunkSize: this.stats.totalChunks > 0 ? \n        Math.round(this.stats.totalChars / this.stats.totalChunks) : 0,\n      renderEfficiency: this.stats.totalRenders > 0 ?\n        Math.round(this.stats.totalChunks / this.stats.totalRenders * 100) / 100 : 0\n    };\n  }\n}\n\nexport default {\n  name: 'StreamingRenderer',\n  \n  components: {\n    UnifiedMessageRenderer,\n    LoadingDots\n  },\n  \n  props: {\n    // 初始消息对象\n    initialMessage: {\n      type: Object,\n      default: () => ({})\n    },\n    \n    // 流式配置\n    streamingConfig: {\n      type: Object,\n      default: () => ({})\n    },\n    \n    // 自定义渲染配置\n    customConfig: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  \n  data() {\n    return {\n      // 流式消息对象\n      streamingMessage: {\n        ...this.initialMessage,\n        content: '',\n        streaming: true\n      },\n      \n      // 流式状态\n      isStreaming: false,\n      \n      // 完整内容\n      fullContent: '',\n      \n      // 流式缓冲器\n      streamingBuffer: null,\n      \n      // 性能监控\n      performanceMonitor: {\n        startTime: null,\n        endTime: null,\n        chunks: [],\n        renders: []\n      }\n    };\n  },\n  \n  created() {\n    this.initStreamingBuffer();\n  },\n  \n  methods: {\n    /**\n     * 初始化流式缓冲器\n     */\n    initStreamingBuffer() {\n      const config = {\n        chunkSize: 100,\n        renderInterval: 50,\n        maxBufferSize: 500,\n        autoFlushDelay: 100,\n        ...this.streamingConfig,\n        onFlush: this.handleFlush,\n        onAppend: this.handleAppend\n      };\n      \n      this.streamingBuffer = new StreamingBuffer(config);\n    },\n    \n    /**\n     * 开始流式传输\n     */\n    startStreaming(initialContent = '') {\n      this.isStreaming = true;\n      this.fullContent = initialContent;\n      this.streamingMessage = {\n        ...this.initialMessage,\n        content: initialContent,\n        streaming: true\n      };\n      \n      // 重置缓冲器\n      this.streamingBuffer.reset();\n      \n      // 记录开始时间\n      this.performanceMonitor.startTime = Date.now();\n      this.performanceMonitor.chunks = [];\n      this.performanceMonitor.renders = [];\n      \n      this.$emit('streaming-start');\n    },\n    \n    /**\n     * 追加流式内容\n     */\n    appendChunk(chunk) {\n      if (!this.isStreaming) {\n        console.warn('StreamingRenderer: 尝试在非流式状态下追加内容');\n        return;\n      }\n      \n      // 记录chunk信息\n      this.performanceMonitor.chunks.push({\n        size: chunk.length,\n        time: Date.now() - this.performanceMonitor.startTime\n      });\n      \n      // 使用缓冲器处理\n      this.streamingBuffer.append(chunk);\n    },\n    \n    /**\n     * 处理缓冲区刷新\n     */\n    handleFlush(content) {\n      this.fullContent += content;\n      \n      // 更新消息内容\n      this.streamingMessage = {\n        ...this.streamingMessage,\n        content: this.fullContent\n      };\n      \n      // 记录渲染信息\n      this.performanceMonitor.renders.push({\n        contentSize: this.fullContent.length,\n        time: Date.now() - this.performanceMonitor.startTime\n      });\n      \n      // 通知渲染器更新\n      if (this.$refs.messageRenderer) {\n        this.$refs.messageRenderer.setContent(this.fullContent);\n      }\n      \n      this.$emit('content-update', this.fullContent);\n    },\n    \n    /**\n     * 处理内容追加\n     */\n    handleAppend(chunk) {\n      // 可以在这里添加额外的处理逻辑\n      this.$emit('chunk-append', chunk);\n    },\n    \n    /**\n     * 完成流式传输\n     */\n    finishStreaming() {\n      if (!this.isStreaming) return;\n      \n      // 刷新所有缓冲内容\n      this.streamingBuffer.finish();\n      \n      // 更新状态\n      this.isStreaming = false;\n      this.streamingMessage = {\n        ...this.streamingMessage,\n        streaming: false\n      };\n      \n      // 通知渲染器完成\n      if (this.$refs.messageRenderer) {\n        this.$refs.messageRenderer.finishStreaming();\n      }\n      \n      // 记录结束时间\n      this.performanceMonitor.endTime = Date.now();\n      \n      // 发出完成事件\n      this.$emit('streaming-finish', {\n        content: this.fullContent,\n        stats: this.getPerformanceStats()\n      });\n    },\n    \n    /**\n     * 取消流式传输\n     */\n    cancelStreaming() {\n      if (!this.isStreaming) return;\n      \n      this.streamingBuffer.reset();\n      this.isStreaming = false;\n      \n      this.$emit('streaming-cancel');\n    },\n    \n    /**\n     * 设置完整内容（非流式）\n     */\n    setFullContent(content) {\n      this.fullContent = content;\n      this.streamingMessage = {\n        ...this.initialMessage,\n        content: content,\n        streaming: false\n      };\n      \n      if (this.$refs.messageRenderer) {\n        this.$refs.messageRenderer.setContent(content);\n      }\n    },\n    \n    /**\n     * 获取当前内容\n     */\n    getCurrentContent() {\n      return this.fullContent;\n    },\n    \n    /**\n     * 获取性能统计\n     */\n    getPerformanceStats() {\n      const duration = this.performanceMonitor.endTime - this.performanceMonitor.startTime;\n      const chunks = this.performanceMonitor.chunks;\n      const renders = this.performanceMonitor.renders;\n      \n      return {\n        duration: duration,\n        totalChunks: chunks.length,\n        totalRenders: renders.length,\n        totalChars: this.fullContent.length,\n        avgChunkSize: chunks.length > 0 ?\n          Math.round(chunks.reduce((sum, c) => sum + c.size, 0) / chunks.length) : 0,\n        avgRenderInterval: renders.length > 1 ?\n          Math.round(duration / (renders.length - 1)) : 0,\n        charsPerSecond: duration > 0 ?\n          Math.round(this.fullContent.length / (duration / 1000)) : 0,\n        bufferStats: this.streamingBuffer.getStats()\n      };\n    },\n    \n    /**\n     * 渲染完成回调\n     */\n    onRendered() {\n      this.$emit('rendered');\n    },\n    \n    /**\n     * 获取渲染后的HTML\n     */\n    getRenderedHTML() {\n      if (this.$refs.messageRenderer) {\n        return this.$refs.messageRenderer.getRenderedHTML();\n      }\n      return '';\n    }\n  },\n  \n  beforeDestroy() {\n    // 清理资源\n    if (this.streamingBuffer) {\n      this.streamingBuffer.reset();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.streaming-renderer {\n  position: relative;\n  \n  // 加载占位符\n  .loading-placeholder {\n    display: inline-block;\n    padding: 4px 0;\n  }\n  \n  // 流式指示器\n  .streaming-indicator {\n    display: inline-flex;\n    align-items: center;\n    margin-top: 8px;\n    color: #666;\n    font-size: 12px;\n    \n    .streaming-dot {\n      display: inline-block;\n      width: 8px;\n      height: 8px;\n      background: #0066cc;\n      border-radius: 50%;\n      margin-right: 6px;\n      animation: streaming-pulse 1.5s ease-in-out infinite;\n    }\n    \n    .streaming-text {\n      color: #999;\n    }\n  }\n  \n  @keyframes streaming-pulse {\n    0%, 100% {\n      opacity: 0.3;\n      transform: scale(0.8);\n    }\n    50% {\n      opacity: 1;\n      transform: scale(1.2);\n    }\n  }\n}\n\n// 暗色主题\n@media (prefers-color-scheme: dark) {\n  .streaming-renderer {\n    .streaming-indicator {\n      color: #aaa;\n      \n      .streaming-text {\n        color: #666;\n      }\n      \n      .streaming-dot {\n        background: #58a6ff;\n      }\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamingRenderer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamingRenderer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./StreamingRenderer.vue?vue&type=template&id=10119d82&scoped=true\"\nimport script from \"./StreamingRenderer.vue?vue&type=script&lang=js\"\nexport * from \"./StreamingRenderer.vue?vue&type=script&lang=js\"\nimport style0 from \"./StreamingRenderer.vue?vue&type=style&index=0&id=10119d82&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"10119d82\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatHistory.vue?vue&type=style&index=0&id=16d82de5&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/6.187a4467.gif\";","module.exports = __webpack_public_path__ + \"img/45.7bab77e0.gif\";","module.exports = __webpack_public_path__ + \"img/36.c4e8fcb2.gif\";","module.exports = __webpack_public_path__ + \"img/icp_logo.58f55c5c.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupMember.vue?vue&type=style&index=0&id=98e9470e&prod&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./UserInfo.vue?vue&type=style&index=0&id=34d33158&prod&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupMemberItem.vue?vue&type=style&index=0&id=ee848b34&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/37.418a25ff.gif\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorGroup.vue?vue&type=style&index=0&id=f6a231cc&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/31.4894333c.gif\";","module.exports = __webpack_public_path__ + \"img/33.deb9bb7e.gif\";","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Icp.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Icp.vue?vue&type=script&lang=js\"","module.exports = __webpack_public_path__ + \"img/55.469289a4.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAgentCard.vue?vue&type=style&index=0&id=2571a6b5&prod&lang=scss&scoped=true\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=42f9bf9e&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/14.8734eba5.gif\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxPlugin.vue?vue&type=style&index=0&id=6cc8846c&prod&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/46.e9ac968c.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAgentMember.vue?vue&type=style&index=0&id=e6fc3d06&prod&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/43.62177cf1.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatBox.vue?vue&type=style&index=0&id=6dd2894f&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/13.aaebd091.gif\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Home.vue?vue&type=style&index=0&id=e8d6c224&prod&scoped=true&lang=scss\"","module.exports = __webpack_public_path__ + \"img/11.b0d85036.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HeadImage.vue?vue&type=style&index=0&id=e3d94e8e&prod&scoped=true&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":\"邀请好友\",\"visible\":_vm.visible,\"width\":\"620px\",\"before-close\":_vm.onClose,\"modal\":false},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('div',{staticClass:\"agm-container\"},[_c('div',{staticClass:\"agm-l-box\"},[_c('div',{staticClass:\"search\"},[_c('el-input',{attrs:{\"placeholder\":\"搜索好友\",\"size\":\"small\"},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}},[_c('i',{staticClass:\"el-icon-search el-input__icon\",attrs:{\"slot\":\"suffix\"},slot:\"suffix\"})])],1),_c('el-scrollbar',{staticStyle:{\"height\":\"400px\"}},_vm._l((_vm.friends),function(friend){return _c('div',{key:friend.id},[_c('friend-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(friend.nickName.includes(_vm.searchText)),expression:\"friend.nickName.includes(searchText)\"}],attrs:{\"showDelete\":false,\"menu\":false,\"friend\":friend,\"active\":false},nativeOn:{\"click\":function($event){return _vm.onSwitchCheck(friend)}}},[_c('el-checkbox',{staticClass:\"agm-friend-checkbox\",attrs:{\"disabled\":friend.disabled,\"size\":\"medium\"},nativeOn:{\"click\":function($event){$event.stopPropagation();}},model:{value:(friend.isCheck),callback:function ($$v) {_vm.$set(friend, \"isCheck\", $$v)},expression:\"friend.isCheck\"}})],1)],1)}),0)],1),_c('div',{staticClass:\"agm-arrow el-icon-d-arrow-right\"}),_c('div',{staticClass:\"agm-r-box\"},[_c('div',{staticClass:\"agm-select-tip\"},[_vm._v(\" 已勾选\"+_vm._s(_vm.checkCount)+\"位好友\")]),_c('el-scrollbar',{staticStyle:{\"height\":\"400px\"}},_vm._l((_vm.friends),function(friend){return _c('div',{key:friend.id},[(friend.isCheck && !friend.disabled)?_c('friend-item',{attrs:{\"friend\":friend,\"active\":false,\"menu\":false},on:{\"del\":function($event){return _vm.onRemoveFriend(friend)}}}):_vm._e()],1)}),0)],1)]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.onClose()}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onOk()}}},[_vm._v(\"确 定\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-dialog title=\"邀请好友\" :visible.sync=\"visible\" width=\"620px\" :before-close=\"onClose\" :modal=\"false\">\n    <div class=\"agm-container\">\n      <div class=\"agm-l-box\">\n        <div class=\"search\">\n          <el-input placeholder=\"搜索好友\" v-model=\"searchText\" size=\"small\">\n            <i class=\"el-icon-search el-input__icon\" slot=\"suffix\"> </i>\n          </el-input>\n        </div>\n        <el-scrollbar style=\"height:400px;\">\n          <div v-for=\"friend in friends\" :key=\"friend.id\">\n            <friend-item v-show=\"friend.nickName.includes(searchText)\" :showDelete=\"false\"\n              @click.native=\"onSwitchCheck(friend)\" :menu=\"false\" :friend=\"friend\" :active=\"false\">\n              <el-checkbox :disabled=\"friend.disabled\" @click.native.stop=\"\" class=\"agm-friend-checkbox\"\n                v-model=\"friend.isCheck\" size=\"medium\"></el-checkbox>\n            </friend-item>\n          </div>\n        </el-scrollbar>\n      </div>\n      <div class=\"agm-arrow el-icon-d-arrow-right\"></div>\n      <div class=\"agm-r-box\">\n        <div class=\"agm-select-tip\"> 已勾选{{ checkCount }}位好友</div>\n        <el-scrollbar style=\"height:400px;\">\n          <div v-for=\"friend in friends\" :key=\"friend.id\">\n            <friend-item v-if=\"friend.isCheck && !friend.disabled\" :friend=\"friend\" :active=\"false\"\n              @del=\"onRemoveFriend(friend)\" :menu=\"false\">\n            </friend-item>\n          </div>\n        </el-scrollbar>\n      </div>\n    </div>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"onClose()\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"onOk()\">确 定</el-button>\n    </span>\n  </el-dialog>\n</template>\n\n<script>\nimport FriendItem from '../friend/FriendItem.vue';\n\nexport default {\n  name: \"addGroupMember\",\n  components: {\n    FriendItem\n  },\n  data() {\n    return {\n      searchText: \"\",\n      friends: []\n    }\n  },\n  methods: {\n    onClose() {\n      this.$emit(\"close\");\n    },\n    onOk() {\n      let inviteVO = {\n        groupId: this.groupId,\n        friendIds: []\n      }\n      this.friends.forEach((f) => {\n        if (f.isCheck && !f.disabled) {\n          inviteVO.friendIds.push(f.id);\n        }\n      })\n      if (inviteVO.friendIds.length > 0) {\n        this.$http({\n          url: \"/group/invite\",\n          method: 'post',\n          data: inviteVO\n        }).then(() => {\n          this.$message.success(\"邀请成功\");\n          this.$emit(\"reload\");\n          this.$emit(\"close\");\n        })\n      }\n    },\n    onRemoveFriend(friend) {\n      friend.isCheck = false;\n    },\n    onSwitchCheck(friend) {\n      if (!friend.disabled) {\n        friend.isCheck = !friend.isCheck\n      }\n    }\n  },\n  props: {\n    visible: {\n      type: Boolean\n    },\n    groupId: {\n      type: Number\n    },\n    members: {\n      type: Array\n    }\n  },\n  computed: {\n    checkCount() {\n      return this.friends.filter((f) => f.isCheck && !f.disabled).length;\n    }\n  },\n  watch: {\n    visible: function (newData, oldData) {\n      if (newData) {\n        this.friends = [];\n        this.$store.state.friendStore.friends.forEach((f) => {\n          if (f.deleted) {\n            return;\n          }\n          let friend = JSON.parse(JSON.stringify(f))\n          let m = this.members.filter((m) => !m.quit)\n            .find((m) => m.userId == f.id);\n          if (m) {\n            // 好友已经在群里\n            friend.disabled = true;\n            friend.isCheck = true\n          } else {\n            friend.disabled = false;\n            friend.isCheck = false;\n          }\n          this.friends.push(friend);\n        })\n      }\n    }\n  }\n\n}\n</script>\n\n<style lang=\"scss\">\n.agm-container {\n  display: flex;\n\n  .agm-l-box {\n    flex: 1;\n    overflow: hidden;\n    border: var(--im-border);\n\n    .search {\n      height: 40px;\n      display: flex;\n      align-items: center;\n\n      .el-input__inner {\n        border: unset;\n        border-bottom: var(--im-border);\n      }\n\n    }\n\n    .agm-friend-checkbox {\n      margin-right: 20px;\n    }\n  }\n\n  .agm-arrow {\n    display: flex;\n    align-items: center;\n    font-size: 18px;\n    padding: 10px;\n    font-weight: 600;\n    color: var(--im-color-primary);\n  }\n\n  .agm-r-box {\n    flex: 1;\n    border: var(--im-border);\n\n    .agm-select-tip {\n      text-align: left;\n      height: 40px;\n      line-height: 40px;\n      text-indent: 6px;\n      color: var(--im-text-color-light)\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddGroupMember.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AddGroupMember.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AddGroupMember.vue?vue&type=template&id=4a3a9c6e\"\nimport script from \"./AddGroupMember.vue?vue&type=script&lang=js\"\nexport * from \"./AddGroupMember.vue?vue&type=script&lang=js\"\nimport style0 from \"./AddGroupMember.vue?vue&type=style&index=0&id=4a3a9c6e&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/49.c881faa6.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatItem.vue?vue&type=style&index=0&id=41523d72&prod&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ShadanChat.vue?vue&type=style&index=0&id=afdf42f6&prod&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{staticClass:\"chat-record\",attrs:{\"title\":\"语音录制\",\"visible\":_vm.visible,\"width\":\"600px\",\"before-close\":_vm.onClose},on:{\"update:visible\":function($event){_vm.visible=$event}}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mode == 'RECORD'),expression:\"mode == 'RECORD'\"}]},[_c('div',{staticClass:\"tip\"},[_vm._v(_vm._s(_vm.stateTip))]),_c('div',[_vm._v(\"时长: \"+_vm._s(_vm.state == 'STOP' ? 0 : parseInt(_vm.rc.duration))+\"s\")])]),_c('audio',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.mode == 'PLAY'),expression:\"mode == 'PLAY'\"}],ref:\"audio\",attrs:{\"src\":_vm.url,\"controls\":\"\"},on:{\"ended\":function($event){return _vm.onStopAudio()}}}),_c('el-divider',{attrs:{\"content-position\":\"center\"}}),_c('el-row',{staticClass:\"btn-group\"},[_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == 'STOP'),expression:\"state == 'STOP'\"}],attrs:{\"round\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onStartRecord()}}},[_vm._v(\"开始录音\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == 'RUNNING'),expression:\"state == 'RUNNING'\"}],attrs:{\"round\":\"\",\"type\":\"warning\"},on:{\"click\":function($event){return _vm.onPauseRecord()}}},[_vm._v(\"暂停录音\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == 'PAUSE'),expression:\"state == 'PAUSE'\"}],attrs:{\"round\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onResumeRecord()}}},[_vm._v(\"继续录音\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == 'RUNNING' || _vm.state == 'PAUSE'),expression:\"state == 'RUNNING' || state == 'PAUSE'\"}],attrs:{\"round\":\"\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.onCompleteRecord()}}},[_vm._v(\" 结束录音\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == 'COMPLETE' && _vm.mode != 'PLAY'),expression:\"state == 'COMPLETE' && mode != 'PLAY'\"}],attrs:{\"round\":\"\",\"type\":\"success\"},on:{\"click\":function($event){return _vm.onPlayAudio()}}},[_vm._v(\"播放录音 \")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == 'COMPLETE' && _vm.mode == 'PLAY'),expression:\"state == 'COMPLETE' && mode == 'PLAY'\"}],attrs:{\"round\":\"\",\"type\":\"warning\"},on:{\"click\":function($event){return _vm.onStopAudio()}}},[_vm._v(\"停止播放 \")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == 'COMPLETE'),expression:\"state == 'COMPLETE'\"}],attrs:{\"round\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onRestartRecord()}}},[_vm._v(\"重新录音\")]),_c('el-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.state == 'COMPLETE'),expression:\"state == 'COMPLETE'\"}],attrs:{\"round\":\"\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onSendRecord()}}},[_vm._v(\"立即发送\")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-dialog class=\"chat-record\" title=\"语音录制\" :visible.sync=\"visible\" width=\"600px\" :before-close=\"onClose\">\n\t\t<div v-show=\"mode == 'RECORD'\">\n\t\t\t<div class=\"tip\">{{ stateTip }}</div>\n\t\t\t<div>时长: {{ state == 'STOP' ? 0 : parseInt(rc.duration) }}s</div>\n\t\t</div>\n\t\t<audio v-show=\"mode == 'PLAY'\" :src=\"url\" controls ref=\"audio\" @ended=\"onStopAudio()\"></audio>\n\t\t<el-divider content-position=\"center\"></el-divider>\n\t\t<el-row class=\"btn-group\">\n\t\t\t<el-button round type=\"primary\" v-show=\"state == 'STOP'\" @click=\"onStartRecord()\">开始录音</el-button>\n\t\t\t<el-button round type=\"warning\" v-show=\"state == 'RUNNING'\" @click=\"onPauseRecord()\">暂停录音</el-button>\n\t\t\t<el-button round type=\"primary\" v-show=\"state == 'PAUSE'\" @click=\"onResumeRecord()\">继续录音</el-button>\n\t\t\t<el-button round type=\"danger\" v-show=\"state == 'RUNNING' || state == 'PAUSE'\" @click=\"onCompleteRecord()\">\n\t\t\t\t结束录音</el-button>\n\t\t\t<el-button round type=\"success\" v-show=\"state == 'COMPLETE' && mode != 'PLAY'\" @click=\"onPlayAudio()\">播放录音\n\t\t\t</el-button>\n\t\t\t<el-button round type=\"warning\" v-show=\"state == 'COMPLETE' && mode == 'PLAY'\" @click=\"onStopAudio()\">停止播放\n\t\t\t</el-button>\n\t\t\t<el-button round type=\"primary\" v-show=\"state == 'COMPLETE'\" @click=\"onRestartRecord()\">重新录音</el-button>\n\t\t\t<el-button round type=\"primary\" v-show=\"state == 'COMPLETE'\" @click=\"onSendRecord()\">立即发送</el-button>\n\t\t</el-row>\n\t</el-dialog>\n</template>\n\n<script>\nimport Recorder from 'js-audio-recorder';\n\nexport default {\n\tname: 'chatRecord',\n\tprops: {\n\t\tvisible: {\n\t\t\ttype: Boolean\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\trc: new Recorder(),\n\t\t\taudio: new Audio(),\n\t\t\tstate: 'STOP', // STOP、RUNNING、PAUSE、COMPLETE\n\t\t\tstateTip: \"未开始\",\n\t\t\tmode: 'RECORD', // RECORD 、PLAY\n\t\t\tduration: 0,\n\t\t\turl: \"\"\n\t\t}\n\t},\n\tmethods: {\n\t\tonClose() {\n\t\t\t// 关闭前清除数据\n\t\t\tthis.rc.destroy();\n\t\t\tthis.rc = new Recorder();\n\t\t\tthis.audio.pause();\n\t\t\tthis.mode = 'RECORD';\n\t\t\tthis.state = 'STOP';\n\t\t\tthis.stateTip = '未开始';\n\t\t\tthis.$emit(\"close\");\n\t\t},\n\t\tonStartRecord() {\n\t\t\tthis.rc.start().then((stream) => {\n\t\t\t\tthis.state = 'RUNNING';\n\t\t\t\tthis.stateTip = \"正在录音...\";\n\t\t\t}).catch(error => {\n\t\t\t\tthis.$message.error(error);\n\t\t\t});\n\n\n\t\t},\n\t\tonPauseRecord() {\n\t\t\tthis.rc.pause();\n\t\t\tthis.state = 'PAUSE';\n\t\t\tthis.stateTip = \"已暂停录音\";\n\t\t},\n\t\tonResumeRecord() {\n\t\t\tthis.rc.resume();\n\t\t\tthis.state = 'RUNNING';\n\t\t\tthis.stateTip = \"正在录音...\";\n\t\t},\n\t\tonCompleteRecord() {\n\t\t\tthis.rc.pause();\n\t\t\tthis.state = 'COMPLETE';\n\t\t\tthis.stateTip = \"已结束录音\";\n\t\t},\n\t\tonPlayAudio() {\n\t\t\tlet wav = this.rc.getWAVBlob();\n\t\t\tlet url = URL.createObjectURL(wav);\n\t\t\tthis.$refs.audio.src = url;\n\t\t\tthis.$refs.audio.play();\n\t\t\tthis.mode = 'PLAY';\n\t\t},\n\t\tonStopAudio() {\n\t\t\tthis.$refs.audio.pause();\n\t\t\tthis.mode = 'RECORD';\n\t\t},\n\t\tonRestartRecord() {\n\t\t\tthis.rc.destroy();\n\t\t\tthis.rc = new Recorder()\n\t\t\tthis.rc.start();\n\t\t\tthis.state = 'RUNNING';\n\t\t\tthis.mode = 'RECORD';\n\t\t\tthis.stateTip = \"正在录音...\";\n\t\t},\n\t\tonSendRecord() {\n\t\t\tlet wav = this.rc.getWAVBlob();\n\t\t\tlet name = new Date().getDate() + '.wav';\n\t\t\tvar formData = new window.FormData()\n\t\t\tformData.append('file', wav, name);\n\t\t\tthis.$http({\n\t\t\t\turl: '/file/upload',\n\t\t\t\tdata: formData,\n\t\t\t\tmethod: 'post',\n\t\t\t\theaders: {\n\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t}\n\t\t\t}).then((url) => {\n\t\t\t\tlet data = {\n\t\t\t\t\tduration: parseInt(this.rc.duration),\n\t\t\t\t\turl: url\n\t\t\t\t}\n\t\t\t\tthis.$emit(\"send\", data);\n\t\t\t\tthis.onClose();\n\t\t\t})\n\t\t}\n\t}\n\n}\n</script>\n\n<style lang=\"scss\">\n.chat-record {\n\n\t.tip {\n\t\tfont-size: 18px;\n\t}\n\n\t.btn-group {\n\t\tmargin-bottom: 20px;\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRecord.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatRecord.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatRecord.vue?vue&type=template&id=4f16842b\"\nimport script from \"./ChatRecord.vue?vue&type=script&lang=js\"\nexport * from \"./ChatRecord.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatRecord.vue?vue&type=style&index=0&id=4f16842b&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/38.8f1726b9.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAtBox.vue?vue&type=style&index=0&id=3bf3de43&prod&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RooCodeAtPanel.vue?vue&type=style&index=0&id=b3c02e30&prod&scoped=true&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"markdownContainer\",staticClass:\"markdown-renderer\"},[_c('div',{staticClass:\"markdown-body\",domProps:{\"innerHTML\":_vm._s(_vm.renderedContent)}})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"markdown-renderer\" ref=\"markdownContainer\">\n    <div v-html=\"renderedContent\" class=\"markdown-body\"></div>\n  </div>\n</template>\n\n<script>\nimport MarkdownIt from 'markdown-it';\nimport hljs from 'highlight.js';\nimport 'highlight.js/styles/github.css';\nimport katex from 'katex';\nimport 'katex/dist/katex.min.css';\nimport mermaid from 'mermaid/dist/mermaid.min.js';\n\nexport default {\n  name: 'MarkdownRenderer',\n  \n  props: {\n    content: {\n      type: String,\n      default: ''\n    },\n    enableKatex: {\n      type: Boolean,\n      default: false\n    },\n    enableMermaid: {\n      type: Boolean,\n      default: true\n    },\n    enableHighlight: {\n      type: Boolean,\n      default: true\n    },\n    streaming: {\n      type: Boolean,\n      default: false\n    }\n  },\n  \n  data() {\n    return {\n      md: null,\n      renderedContent: '',\n      renderTimer: null,\n      renderBuffer: '',\n      mermaidInitialized: false\n    };\n  },\n  \n  computed: {\n    contentToRender() {\n      return this.streaming ? this.renderBuffer : this.content;\n    }\n  },\n  \n  watch: {\n    content: {\n      handler(newContent) {\n        if (!this.streaming && this.md) {\n          this.renderContent(newContent);\n        }\n      },\n      immediate: false\n    }\n  },\n  \n  created() {\n    this.initMarkdownIt();\n    if (this.enableMermaid) {\n      this.initMermaid();\n    }\n  },\n  \n  mounted() {\n    // 在挂载后渲染初始内容\n    if (!this.streaming && this.content) {\n      this.renderContent(this.content);\n    }\n  },\n  \n  methods: {\n    // 初始化 MarkdownIt\n    initMarkdownIt() {\n      this.md = new MarkdownIt({\n        html: true,\n        linkify: true,\n        typographer: true,\n        breaks: true,\n        highlight: (str, lang) => {\n          if (!this.enableHighlight) {\n            return '';\n          }\n          \n          if (lang && hljs.getLanguage(lang)) {\n            try {\n              const highlighted = hljs.highlight(str, { language: lang, ignoreIllegals: true }).value;\n              return `<pre class=\"hljs\"><code class=\"language-${lang}\">${highlighted}</code></pre>`;\n            } catch (err) {\n              console.error('Highlight error:', err);\n            }\n          }\n          \n          return `<pre class=\"hljs\"><code>${this.md.utils.escapeHtml(str)}</code></pre>`;\n        }\n      });\n      \n      // 配置插件\n      this.setupPlugins();\n    },\n    \n    // 设置插件\n    setupPlugins() {\n      // 添加表格支持\n      this.md.renderer.rules.table_open = () => '<table class=\"markdown-table\">\\n';\n      \n      // 添加任务列表支持\n      this.md.use(this.taskListPlugin);\n      \n      // 添加数学公式支持\n      if (this.enableKatex) {\n        this.md.use(this.katexPlugin);\n      }\n      \n      // 自定义链接渲染\n      const defaultLinkRender = this.md.renderer.rules.link_open || function(tokens, idx, options, env, self) {\n        return self.renderToken(tokens, idx, options);\n      };\n      \n      this.md.renderer.rules.link_open = (tokens, idx, options, env, self) => {\n        const aIndex = tokens[idx].attrIndex('target');\n        if (aIndex < 0) {\n          tokens[idx].attrPush(['target', '_blank']);\n        } else {\n          tokens[idx].attrs[aIndex][1] = '_blank';\n        }\n        tokens[idx].attrPush(['rel', 'noopener noreferrer']);\n        return defaultLinkRender(tokens, idx, options, env, self);\n      };\n      \n      // 代码块增强\n      const defaultFenceRender = this.md.renderer.rules.fence;\n      this.md.renderer.rules.fence = (tokens, idx, options, env, self) => {\n        const token = tokens[idx];\n        const lang = token.info.trim();\n        \n        // Mermaid 图表处理\n        if (lang === 'mermaid' && this.enableMermaid) {\n          const mermaidId = `mermaid-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n          return `<div class=\"mermaid-container\"><div id=\"${mermaidId}\" class=\"mermaid\">${this.md.utils.escapeHtml(token.content)}</div></div>`;\n        }\n        \n        // 普通代码块\n        const highlighted = defaultFenceRender(tokens, idx, options, env, self);\n        const langClass = lang ? `language-${lang}` : '';\n        \n        return `\n          <div class=\"code-block-wrapper\">\n            <div class=\"code-block-header\">\n              <span class=\"code-language\">${lang || 'plaintext'}</span>\n              <button class=\"copy-button\" onclick=\"this.dataset.copied='true'; navigator.clipboard.writeText(this.parentElement.nextElementSibling.querySelector('code').textContent); setTimeout(() => delete this.dataset.copied, 2000)\">\n                <span class=\"copy-text\">复制</span>\n                <span class=\"copied-text\">已复制</span>\n              </button>\n            </div>\n            <div class=\"code-block-content ${langClass}\">\n              ${highlighted}\n            </div>\n          </div>\n        `;\n      };\n    },\n    \n    // 任务列表插件\n    taskListPlugin(md) {\n      md.core.ruler.after('inline', 'task_list', state => {\n        const tokens = state.tokens;\n        for (let i = 0; i < tokens.length; i++) {\n          if (tokens[i].type !== 'inline') continue;\n          \n          const content = tokens[i].content;\n          const checkboxRegex = /^\\[([ x])\\]\\s/i;\n          \n          if (checkboxRegex.test(content)) {\n            const checked = content[1].toLowerCase() === 'x';\n            const checkbox = checked \n              ? '<input type=\"checkbox\" class=\"task-list-item-checkbox\" checked disabled>'\n              : '<input type=\"checkbox\" class=\"task-list-item-checkbox\" disabled>';\n            \n            tokens[i].content = content.replace(checkboxRegex, checkbox + ' ');\n            \n            // 添加任务列表类\n            if (tokens[i - 2] && tokens[i - 2].type === 'list_item_open') {\n              tokens[i - 2].attrPush(['class', 'task-list-item']);\n            }\n          }\n        }\n      });\n    },\n    \n    // KaTeX 插件\n    katexPlugin(md) {\n      // 行内公式 $ ... $\n      md.inline.ruler.after('escape', 'math_inline', (state, silent) => {\n        const src = state.src;\n        const pos = state.pos;\n        \n        if (src[pos] !== '$') return false;\n        \n        const end = src.indexOf('$', pos + 1);\n        if (end === -1) return false;\n        \n        if (!silent) {\n          const token = state.push('math_inline', 'math', 0);\n          token.content = src.slice(pos + 1, end);\n        }\n        \n        state.pos = end + 1;\n        return true;\n      });\n      \n      // 块级公式 $$ ... $$\n      md.block.ruler.after('fence', 'math_block', (state, startLine, endLine, silent) => {\n        const pos = state.bMarks[startLine] + state.tShift[startLine];\n        const max = state.eMarks[startLine];\n        const src = state.src;\n        \n        if (pos + 2 > max) return false;\n        if (src.slice(pos, pos + 2) !== '$$') return false;\n        \n        let nextLine = startLine + 1;\n        while (nextLine < endLine) {\n          const nextPos = state.bMarks[nextLine] + state.tShift[nextLine];\n          const nextMax = state.eMarks[nextLine];\n          \n          if (src.slice(nextPos, nextPos + 2) === '$$') {\n            if (!silent) {\n              const token = state.push('math_block', 'math', 0);\n              token.content = state.getLines(startLine + 1, nextLine, state.tShift[startLine], true);\n            }\n            state.line = nextLine + 1;\n            return true;\n          }\n          nextLine++;\n        }\n        \n        return false;\n      });\n      \n      // 渲染器\n      md.renderer.rules.math_inline = (tokens, idx) => {\n        try {\n          return katex.renderToString(tokens[idx].content, { throwOnError: false });\n        } catch (e) {\n          return `<span class=\"math-error\">${tokens[idx].content}</span>`;\n        }\n      };\n      \n      md.renderer.rules.math_block = (tokens, idx) => {\n        try {\n          return `<div class=\"math-block\">${katex.renderToString(tokens[idx].content, { \n            displayMode: true,\n            throwOnError: false \n          })}</div>`;\n        } catch (e) {\n          return `<div class=\"math-error\">${tokens[idx].content}</div>`;\n        }\n      };\n    },\n    \n    // 初始化 Mermaid\n    initMermaid() {\n      if (this.mermaidInitialized) return;\n      \n      try {\n        // 使用与成功的HTML页面相同的配置\n        mermaid.initialize({\n          startOnLoad: false,  // 手动控制渲染\n          theme: 'default',\n          flowchart: {\n            useMaxWidth: true,\n            htmlLabels: true,\n            curve: 'basis'\n          },\n          securityLevel: 'loose'  // 允许所有内容\n        });\n        \n        // 设置错误处理\n        mermaid.parseError = function(err, hash) {\n          console.warn('Mermaid parse error:', err);\n        };\n        \n        this.mermaidInitialized = true;\n      } catch (error) {\n        console.error('Mermaid init error:', error);\n      }\n    },\n    \n    // 渲染内容\n    renderContent(content) {\n      if (!content) {\n        this.renderedContent = '';\n        return;\n      }\n      \n      // 确保 MarkdownIt 已初始化\n      if (!this.md) {\n        console.warn('MarkdownIt not initialized, initializing now...');\n        this.initMarkdownIt();\n      }\n      \n      try {\n        this.renderedContent = this.md.render(content);\n        \n        // 渲染 Mermaid 图表\n        if (this.enableMermaid) {\n          this.$nextTick(() => {\n            this.renderMermaidCharts();\n          });\n        }\n        \n        this.$emit('rendered');\n      } catch (error) {\n        console.error('Markdown render error:', error);\n        this.renderedContent = `<pre>${this.escapeHtml(content)}</pre>`;\n      }\n    },\n    \n    // 渲染 Mermaid 图表\n    async renderMermaidCharts() {\n      if (!this.enableMermaid || !this.$refs.markdownContainer) return;\n      \n      const mermaidElements = this.$refs.markdownContainer.querySelectorAll('.mermaid');\n      if (mermaidElements.length === 0) return;\n      \n      // 确保 Mermaid 已初始化\n      if (!this.mermaidInitialized) {\n        this.initMermaid();\n      }\n      \n      // 使用 mermaid.init() 批量渲染所有图表\n      try {\n        // 重置处理状态，让 mermaid.init 处理所有元素\n        mermaidElements.forEach(el => {\n          if (!el.dataset.processed) {\n            // 确保元素有唯一ID\n            if (!el.id) {\n              el.id = `mermaid-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n            }\n          }\n        });\n        \n        // 批量初始化所有 mermaid 元素\n        mermaid.init(undefined, mermaidElements);\n        \n        // 标记为已处理\n        mermaidElements.forEach(el => {\n          el.dataset.processed = 'true';\n          el.classList.add('mermaid-rendered');\n        });\n      } catch (error) {\n        // 如果批量处理失败，尝试逐个处理\n        for (let i = 0; i < mermaidElements.length; i++) {\n          const element = mermaidElements[i];\n          if (element.dataset.processed === 'true') continue;\n          \n          try {\n            const graphDefinition = element.textContent.trim();\n            \n            if (!graphDefinition) {\n              continue;\n            }\n            \n            // 为元素设置唯一ID\n            const graphId = `mermaid-${Date.now()}-${i}`;\n            element.id = graphId;\n            \n            // 单独初始化这个元素\n            mermaid.init(undefined, element);\n            \n            element.dataset.processed = 'true';\n            element.classList.add('mermaid-rendered');\n          } catch (renderError) {\n            // 渲染失败，显示为代码块\n            element.innerHTML = `\n              <div class=\"mermaid-fallback\">\n                <div class=\"mermaid-notice\">\n                  <span class=\"notice-icon\">📊</span>\n                  <span class=\"notice-text\">Mermaid 图表</span>\n                </div>\n                <pre class=\"mermaid-source\">${this.escapeHtml(element.textContent)}</pre>\n              </div>\n            `;\n            element.dataset.processed = 'true';\n            element.classList.add('mermaid-fallback-mode');\n          }\n        }\n      }\n    },\n    \n    // 更新内容（流式渲染）\n    updateContent(content) {\n      this.renderBuffer = content;\n      \n      // 使用防抖优化渲染\n      clearTimeout(this.renderTimer);\n      this.renderTimer = setTimeout(() => {\n        this.renderContent(this.renderBuffer);\n      }, 50);\n    },\n    \n    // 完成流式渲染\n    finishStreaming() {\n      clearTimeout(this.renderTimer);\n      this.renderContent(this.renderBuffer);\n    },\n    \n    // 获取渲染后的HTML\n    getRenderedHTML() {\n      return this.renderedContent;\n    },\n    \n    // HTML转义\n    escapeHtml(text) {\n      const map = {\n        '&': '&amp;',\n        '<': '&lt;',\n        '>': '&gt;',\n        '\"': '&quot;',\n        \"'\": '&#039;'\n      };\n      return text.replace(/[&<>\"']/g, m => map[m]);\n    }\n  },\n  \n  beforeDestroy() {\n    clearTimeout(this.renderTimer);\n  }\n};\n</script>\n\n<style lang=\"scss\">\n.markdown-renderer {\n  .markdown-body {\n    // 复用 Roo-Code 的字体设置\n    font-family: var(--vscode-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif);\n    font-size: var(--vscode-font-size, 13px);\n    color: var(--vscode-editor-foreground, #333);\n    word-wrap: break-word;\n    \n    // 紧凑的行高设置\n    p, li, ol, ul {\n      line-height: 1.15;\n    }\n    \n    // 标题样式 - 更紧凑间距\n    h1, h2, h3, h4, h5, h6 {\n      margin-top: 0.5em;\n      margin-bottom: 0.25em;\n      font-weight: 600;\n      line-height: 1.15;\n    }\n    \n    // 首个元素无上边距\n    > :first-child {\n      margin-top: 0 !important;\n    }\n    \n    // 最后一个元素无下边距\n    > :last-child {\n      margin-bottom: 0 !important;\n    }\n    \n    h1 { font-size: 1.3em; border-bottom: 1px solid #e1e4e8; padding-bottom: 0.2em; }\n    h2 { font-size: 1.2em; border-bottom: 1px solid #e1e4e8; padding-bottom: 0.15em; }\n    h3 { font-size: 1.1em; }\n    h4 { font-size: 1em; }\n    h5 { font-size: 0.9em; }\n    h6 { font-size: 0.85em; color: #6a737d; }\n    \n    // 段落 - 紧凑间距\n    p { \n      white-space: pre-wrap;\n      margin: 0.25em 0;\n    }\n    \n    strong { font-weight: 600; }\n    \n    em { font-style: italic; }\n    \n    // 链接\n    a {\n      color: #0366d6;\n      text-decoration: none;\n      \n      &:hover {\n        text-decoration: underline;\n      }\n    }\n    \n    // 列表 - 紧凑间距\n    ul, ol {\n      padding-left: 2em;\n      margin-left: 0;\n      margin-top: 0.25em;\n      margin-bottom: 0.25em;\n    }\n    \n    ol {\n      list-style-type: decimal;\n    }\n    \n    ul {\n      list-style-type: disc;\n    }\n    \n    // 嵌套列表样式\n    ul ul {\n      list-style-type: circle;\n      margin-top: 0;\n      margin-bottom: 0;\n    }\n    \n    ul ul ul {\n      list-style-type: square;\n    }\n    \n    ol ol {\n      list-style-type: lower-alpha;\n      margin-top: 0;\n      margin-bottom: 0;\n    }\n    \n    ol ol ol {\n      list-style-type: lower-roman;\n    }\n    \n    li {\n      margin-top: 0.1em;\n      margin-bottom: 0.1em;\n      \n      &.task-list-item {\n        list-style: none;\n        margin-left: -1.5em;\n        \n        .task-list-item-checkbox {\n          margin-right: 0.5em;\n        }\n      }\n    }\n    \n    // 引用 - 紧凑\n    blockquote {\n      padding: 0.25em 0.75em;\n      color: #6a737d;\n      border-left: 0.25em solid #dfe2e5;\n      margin: 0.25em 0;\n      \n      > :first-child {\n        margin-top: 0;\n      }\n      \n      > :last-child {\n        margin-bottom: 0;\n      }\n    }\n    \n    // 表格 - 紧凑样式\n    .markdown-table {\n      border-collapse: collapse;\n      margin: 0.5em 0;\n      width: auto;\n      min-width: 50%;\n      max-width: 100%;\n      table-layout: fixed;\n      border: 1px solid #cecece;\n      \n      th, td {\n        border: 1px solid #cecece;\n        padding: 8px 12px;\n        text-align: left;\n        word-wrap: break-word;\n        overflow-wrap: break-word;\n      }\n      \n      th {\n        background-color: #f6f8fa;\n        font-weight: 600;\n      }\n      \n      tr:nth-child(even) {\n        background-color: rgba(0, 0, 0, 0.02);\n      }\n      \n      tr:hover {\n        background-color: rgba(0, 0, 0, 0.04);\n      }\n    }\n    \n    // 行内代码 - 复用 Roo-Code 的样式\n    code:not(pre code) {\n      font-family: var(--vscode-editor-font-family, 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace);\n      color: var(--vscode-textPreformat-foreground, #333) !important;\n      background-color: var(--vscode-textPreformat-background, rgba(27, 31, 35, 0.05)) !important;\n      padding: 0px 2px;\n      white-space: pre-line;\n      word-break: break-word;\n      overflow-wrap: anywhere;\n      border-radius: 3px;\n      font-size: 85%;\n    }\n    \n    // 代码块容器 - 紧凑布局\n    .code-block-wrapper {\n      margin: 8px 0;\n      background: #f6f8fa;\n      border-radius: 4px;\n      overflow: hidden;\n      \n      .code-block-header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 4px 12px;\n        background: #f0f2f5;\n        border-bottom: 1px solid #e1e4e8;\n        \n        .code-language {\n          font-size: 12px;\n          color: #586069;\n          font-weight: 500;\n        }\n        \n        .copy-button {\n          padding: 4px 8px;\n          font-size: 12px;\n          color: #586069;\n          background: white;\n          border: 1px solid #d1d5da;\n          border-radius: 3px;\n          cursor: pointer;\n          transition: all 0.2s;\n          \n          &:hover {\n            background: #f3f4f6;\n            border-color: #c6cbd1;\n          }\n          \n          .copy-text { display: inline; }\n          .copied-text { display: none; }\n          \n          &[data-copied=\"true\"] {\n            color: #28a745;\n            border-color: #28a745;\n            \n            .copy-text { display: none; }\n            .copied-text { display: inline; }\n          }\n        }\n      }\n      \n      .code-block-content {\n        pre {\n          margin: 0;\n          padding: 8px 12px;\n          overflow-x: auto;\n          background: #f6f8fa;\n          \n          code {\n            font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;\n            font-size: 13px;\n            line-height: 1.3;\n            background: transparent;\n            padding: 0;\n          }\n        }\n      }\n    }\n    \n    // 分隔线\n    hr {\n      height: 1px;\n      padding: 0;\n      margin: 0.5em 0;\n      background-color: #e1e4e8;\n      border: 0;\n    }\n    \n    // 图片\n    img {\n      max-width: 100%;\n      box-sizing: border-box;\n      margin: 0.5em 0;\n      display: block;\n    }\n    \n    // 数学公式 - 紧凑布局\n    .math-block {\n      display: block;\n      margin: 0.5em 0;\n      text-align: center;\n      padding: 0.5em;\n      overflow-x: auto;\n      overflow-y: hidden;\n      background-color: rgba(27, 31, 35, 0.05);\n      border-radius: 3px;\n    }\n    \n    .katex {\n      font-size: 1.1em;\n      color: var(--vscode-editor-foreground, #333);\n      font-family: KaTeX_Main, 'Times New Roman', serif;\n      line-height: 1.2;\n      white-space: normal;\n      text-indent: 0;\n    }\n    \n    .math-error {\n      color: #d73a49;\n      background: #ffeef0;\n      padding: 2px 4px;\n      border-radius: 3px;\n    }\n    \n    // Mermaid 图表\n    .mermaid-container {\n      margin: 1em 0;\n      text-align: center;\n      \n      .mermaid {\n        display: inline-block;\n        \n        svg {\n          max-width: 100%;\n          height: auto;\n        }\n        \n        &.mermaid-rendered {\n          text-align: center;\n        }\n      }\n      \n      // Mermaid 降级显示\n      .mermaid-fallback {\n        background: #f8f9fa;\n        border: 1px solid #dee2e6;\n        border-radius: 4px;\n        overflow: hidden;\n        text-align: left;\n        \n        .mermaid-notice {\n          display: flex;\n          align-items: center;\n          padding: 8px 12px;\n          background: #e9ecef;\n          border-bottom: 1px solid #dee2e6;\n          \n          .notice-icon {\n            margin-right: 8px;\n            font-size: 16px;\n          }\n          \n          .notice-text {\n            color: #495057;\n            font-size: 12px;\n            font-weight: 500;\n          }\n        }\n        \n        .mermaid-source {\n          margin: 0;\n          padding: 12px;\n          background: #fff;\n          color: #495057;\n          font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;\n          font-size: 12px;\n          line-height: 1.4;\n          overflow-x: auto;\n          white-space: pre;\n        }\n      }\n      \n      // 成功渲染的 Mermaid 图表\n      .mermaid-rendered {\n        text-align: center;\n        \n        svg {\n          max-width: 100%;\n          height: auto;\n          display: inline-block;\n        }\n      }\n      \n      // Mermaid 图表通用样式\n      .mermaid {\n        text-align: center;\n        margin: 1em 0;\n        \n        // 未处理时隐藏原始文本\n        &:not([data-processed=\"true\"]) {\n          display: none;\n        }\n        \n        // 已处理的图表\n        &[data-processed=\"true\"] {\n          display: block;\n        }\n      }\n    }\n  }\n}\n\n// 暗色主题支持\n@media (prefers-color-scheme: dark) {\n  .markdown-renderer .markdown-body {\n    color: #c9d1d9;\n    \n    h1, h2 {\n      border-bottom-color: #30363d;\n    }\n    \n    h6 {\n      color: #8b949e;\n    }\n    \n    a {\n      color: #58a6ff;\n    }\n    \n    blockquote {\n      color: #8b949e;\n      border-left-color: #30363d;\n    }\n    \n    .markdown-table {\n      th, td {\n        border-color: #30363d;\n      }\n      \n      th {\n        background-color: #161b22;\n      }\n      \n      tr:nth-child(2n) {\n        background-color: #0d1117;\n      }\n    }\n    \n    code:not(pre code) {\n      background-color: rgba(110, 118, 129, 0.4);\n    }\n    \n    .code-block-wrapper {\n      background: #161b22;\n      \n      .code-block-header {\n        background: #0d1117;\n        border-bottom-color: #30363d;\n        \n        .code-language {\n          color: #8b949e;\n        }\n        \n        .copy-button {\n          color: #8b949e;\n          background: #161b22;\n          border-color: #30363d;\n          \n          &:hover {\n            background: #1c2128;\n            border-color: #48545d;\n          }\n        }\n      }\n      \n      .code-block-content pre {\n        background: #161b22;\n      }\n    }\n    \n    hr {\n      background-color: #30363d;\n    }\n  }\n}\n</style>","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MarkdownRenderer.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MarkdownRenderer.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./MarkdownRenderer.vue?vue&type=template&id=22f8b0aa\"\nimport script from \"./MarkdownRenderer.vue?vue&type=script&lang=js\"\nexport * from \"./MarkdownRenderer.vue?vue&type=script&lang=js\"\nimport style0 from \"./MarkdownRenderer.vue?vue&type=style&index=0&id=22f8b0aa&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-group-member\",class:_vm.active ? 'active' : '',style:({ 'height': _vm.height + 'px' })},[_c('div',{staticClass:\"member-avatar\"},[_c('head-image',{attrs:{\"size\":_vm.headImageSize,\"name\":_vm.member.showNickName,\"url\":_vm.member.headImage}})],1),_c('div',{staticClass:\"member-name\",style:({ 'line-height': _vm.height + 'px' })},[_c('div',[_vm._v(_vm._s(_vm.member.showNickName))])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"chat-group-member\" :class=\"active ? 'active' : ''\" :style=\"{ 'height': height + 'px' }\">\n        <div class=\"member-avatar\">\n            <head-image :size=\"headImageSize\" :name=\"member.showNickName\" :url=\"member.headImage\"> </head-image>\n        </div>\n        <div class=\"member-name\" :style=\"{ 'line-height': height + 'px' }\">\n            <div>{{ member.showNickName }}</div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport HeadImage from \"../common/HeadImage.vue\";\nexport default {\n    name: \"groupMember\",\n    components: { HeadImage },\n    data() {\n        return {};\n    },\n    props: {\n        member: {\n            type: Object,\n            required: true\n        },\n        height: {\n            type: Number,\n            default: 50\n        },\n        active: {\n            type: Boolean,\n            default: false\n        }\n    },\n    computed: {\n        headImageSize() {\n            return Math.ceil(this.height * 0.75)\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\">\n.chat-group-member {\n    display: flex;\n    position: relative;\n    padding: 0 5px;\n    align-items: center;\n    white-space: nowrap;\n    box-sizing: border-box;\n\n    .member-name {\n        padding-left: 10px;\n        height: 100%;\n        text-align: left;\n        white-space: nowrap;\n        overflow: hidden;\n        font-size: var(--im-font-size);\n    }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatGroupMember.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatGroupMember.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatGroupMember.vue?vue&type=template&id=29290a86\"\nimport script from \"./ChatGroupMember.vue?vue&type=script&lang=js\"\nexport * from \"./ChatGroupMember.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatGroupMember.vue?vue&type=style&index=0&id=29290a86&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./MarkdownRenderer.vue?vue&type=style&index=0&id=22f8b0aa&prod&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatInput.vue?vue&type=style&index=0&id=4859927b&prod&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./InboxPluginSession.vue?vue&type=style&index=0&id=4eba4063&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/32.f35d7073.gif\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-dialog',{attrs:{\"title\":\"是否加入通话?\",\"visible\":_vm.isShow,\"width\":\"400px\"},on:{\"update:visible\":function($event){_vm.isShow=$event}}},[_c('div',{staticClass:\"rtc-group-join\"},[_c('div',{staticClass:\"host-info\"},[_c('head-image',{attrs:{\"name\":_vm.rtcInfo.host.nickName,\"url\":_vm.rtcInfo.host.headImage,\"size\":80}}),_c('div',{staticClass:\"host-text\"},[_vm._v(_vm._s('发起人:' + _vm.rtcInfo.host.nickName))])],1),_c('div',{staticClass:\"users-info\"},[_c('div',[_vm._v(_vm._s(_vm.rtcInfo.userInfos.length + '人正在通话中'))]),_c('div',{staticClass:\"user-list\"},_vm._l((_vm.rtcInfo.userInfos),function(user){return _c('div',{key:user.id,staticClass:\"user-item\"},[_c('head-image',{attrs:{\"url\":user.headImage,\"name\":user.nickName,\"size\":40}})],1)}),0)])]),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){return _vm.onCancel()}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.onOk()}}},[_vm._v(\"确 定\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<el-dialog title=\"是否加入通话?\" :visible.sync=\"isShow\" width=\"400px\">\n\t\t<div class=\"rtc-group-join\">\n\t\t\t<div class=\"host-info\">\n\t\t\t\t<head-image :name=\"rtcInfo.host.nickName\" :url=\"rtcInfo.host.headImage\" :size=\"80\"></head-image>\n\t\t\t\t<div class=\"host-text\">{{ '发起人:' + rtcInfo.host.nickName }}</div>\n\t\t\t</div>\n\t\t\t<div class=\"users-info\">\n\t\t\t\t<div>{{ rtcInfo.userInfos.length + '人正在通话中' }}</div>\n\t\t\t\t<div class=\"user-list\">\n\t\t\t\t\t<div class=\"user-item\" v-for=\"user in rtcInfo.userInfos\" :key=\"user.id\">\n\t\t\t\t\t\t<head-image :url=\"user.headImage\" :name=\"user.nickName\" :size=\"40\">\n\t\t\t\t\t\t</head-image>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<span slot=\"footer\" class=\"dialog-footer\">\n\t\t\t<el-button @click=\"onCancel()\">取 消</el-button>\n\t\t\t<el-button type=\"primary\" @click=\"onOk()\">确 定</el-button>\n\t\t</span>\n\t</el-dialog>\n</template>\n\n<script>\nimport HeadImage from '@/components/common/HeadImage'\n\nexport default {\n\tname: \"rtcGroupJoin\",\n\tcomponents: {\n\t\tHeadImage\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tisShow: false,\n\t\t\trtcInfo: {\n\t\t\t\thost: {},\n\t\t\t\tuserInfos: []\n\t\t\t}\n\t\t}\n\t},\n\tprops: {\n\t\tgroupId: {\n\t\t\ttype: Number\n\t\t}\n\t},\n\tmethods: {\n\t\topen(rtcInfo) {\n\t\t\tthis.rtcInfo = rtcInfo;\n\t\t\tthis.isShow = true;\n\t\t},\n\t\tonOk() {\n\t\t\tthis.isShow = false;\n\t\t\tlet userInfos = this.rtcInfo.userInfos;\n\t\t\tlet mine = this.$store.state.userStore.userInfo;\n\t\t\tif (!userInfos.find((user) => user.id == mine.id)) {\n\t\t\t\t// 加入自己的信息\n\t\t\t\tuserInfos.push({\n\t\t\t\t\tid: mine.id,\n\t\t\t\t\tnickName: mine.nickName,\n\t\t\t\t\theadImage: mine.headImageThumb,\n\t\t\t\t\tisCamera: false,\n\t\t\t\t\tisMicroPhone: true\n\t\t\t\t})\n\t\t\t}\n\t\t\tlet rtcInfo = {\n\t\t\t\tisHost: false,\n\t\t\t\tgroupId: this.groupId,\n\t\t\t\tinviterId: mine.id,\n\t\t\t\tuserInfos: userInfos\n\t\t\t}\n\t\t\t// 通过home.vue打开多人视频窗口\n\t\t\tthis.$eventBus.$emit(\"openGroupVideo\", rtcInfo);\n\n\t\t},\n\t\tonCancel() {\n\t\t\tthis.isShow = false;\n\t\t}\n\t}\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.rtc-group-join {\n\theight: 260px;\n\tpadding: 10px;\n\n\t.host-info {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tfont-size: 16px;\n\t\tpadding: 10px;\n\t\theight: 100px;\n\t\talign-items: center;\n\n\t\t.host-text {\n\t\t\tmargin-top: 5px;\n\t\t}\n\t}\n\n\t.users-info {\n\t\tfont-size: 16px;\n\t\tmargin-top: 20px;\n\n\t\t.user-list {\n\t\t\tdisplay: flex;\n\t\t\tpadding: 5px 5px;\n\t\t\theight: 90px;\n\t\t\tflex-wrap: wrap;\n\t\t\tjustify-content: center;\n\n\t\t\t.user-item {\n\t\t\t\tpadding: 2px;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcGroupJoin.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcGroupJoin.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RtcGroupJoin.vue?vue&type=template&id=74737c1c&scoped=true\"\nimport script from \"./RtcGroupJoin.vue?vue&type=script&lang=js\"\nexport * from \"./RtcGroupJoin.vue?vue&type=script&lang=js\"\nimport style0 from \"./RtcGroupJoin.vue?vue&type=style&index=0&id=74737c1c&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74737c1c\",\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"media/call.038ab63f.wav\";","module.exports = __webpack_public_path__ + \"img/10.d13dcac4.gif\";","module.exports = __webpack_public_path__ + \"img/3.7abec26c.gif\";","module.exports = __webpack_public_path__ + \"img/20.6428ddb3.gif\";","module.exports = __webpack_public_path__ + \"img/logo-128.427f5849.png\";","/**\n * 统一消息渲染组件导出\n */\n\n// 核心组件\nimport UnifiedMessageRenderer from './UnifiedMessageRenderer.vue';\nimport StreamingRenderer from './StreamingRenderer.vue';\nimport MessageTypeAdapter from './MessageTypeAdapter';\n\n// 渲染器组件\nimport MarkdownRenderer from './renderers/MarkdownRenderer.vue';\n\n// 测试组件（仅开发环境）\nlet MessageRendererDemo = null;\nif (process.env.NODE_ENV === 'development') {\n  MessageRendererDemo = require('./MessageRendererDemo.vue').default;\n}\n\n// 导出组件\nexport {\n  UnifiedMessageRenderer,\n  StreamingRenderer,\n  MessageTypeAdapter,\n  MarkdownRenderer,\n  MessageRendererDemo\n};\n\n// 默认导出\nexport default UnifiedMessageRenderer;\n\n/**\n * Vue 插件安装函数\n * 使用方式：\n * import MessageRenderer from '@/components/message';\n * Vue.use(MessageRenderer);\n */\nexport const install = function(Vue) {\n  // 注册全局组件\n  Vue.component('UnifiedMessageRenderer', UnifiedMessageRenderer);\n  Vue.component('StreamingRenderer', StreamingRenderer);\n  Vue.component('MarkdownRenderer', MarkdownRenderer);\n  \n  // 添加全局方法\n  Vue.prototype.$messageAdapter = MessageTypeAdapter;\n  \n  // 开发环境注册测试组件\n  if (process.env.NODE_ENV === 'development' && MessageRendererDemo) {\n    Vue.component('MessageRendererDemo', MessageRendererDemo);\n  }\n};\n\n// 自动安装（用于通过 script 标签引入）\nif (typeof window !== 'undefined' && window.Vue) {\n  window.Vue.use({ install });\n}","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatGroupMember.vue?vue&type=style&index=0&id=29290a86&prod&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Vscode.vue?vue&type=style&index=0&id=1eb5ba4a&prod&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LoadingDots.vue?vue&type=style&index=0&id=793015df&prod&lang=scss&scoped=true\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Emotion.vue?vue&type=style&index=0&id=8244047c&prod&scoped=true&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RtcPrivateVideo.vue?vue&type=style&index=0&id=b2efff24&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/29.1659f59b.gif\";","/**\n * 全局日志管理器\n * 统一管理所有组件的日志输出，支持不同级别的日志控制\n * \n * @class LogManager\n * @version 1.0.0\n */\nclass LogManager {\n  static instance = null;\n  \n  constructor() {\n    this.config = {\n      // 日志级别: 0=debug, 1=info, 2=warn, 3=error, 4=critical, 5=off\n      globalLevel: process.env.NODE_ENV === 'development' ? 1 : 3,\n      \n      // 组件级别配置（可以覆盖全局配置）\n      componentLevels: {\n        'ChatItem': 4,           // 只显示critical级别以上（基本不显示）\n        'InboxSession': 2,       // 只显示warn级别以上\n        'EditorChat': 1,         // 显示info级别以上\n        'VueReactBridge': 2,     // 只显示warn级别以上\n        'AIChatSimplified': 2,   // 只显示warn级别以上\n      },\n      \n      // 关键事件总是显示（即使组件日志级别很高）\n      criticalEvents: [\n        'AI会话同步完成',\n        'Bridge初始化完成',\n        '加载会话数据失败',\n        '达到最大重试次数',\n        '严重错误',\n        '致命错误',\n        'Bridge未初始化'\n      ]\n    };\n    \n    this.levels = {\n      debug: 0,\n      info: 1, \n      warn: 2,\n      error: 3,\n      critical: 4,\n      off: 5\n    };\n  }\n  \n  static getInstance() {\n    if (!LogManager.instance) {\n      LogManager.instance = new LogManager();\n    }\n    return LogManager.instance;\n  }\n  \n  /**\n   * 检查是否应该输出日志\n   */\n  shouldLog(component, level, message) {\n    const numLevel = typeof level === 'string' ? this.levels[level] : level;\n    \n    // 检查是否是关键事件\n    const isCritical = this.config.criticalEvents.some(event => \n      message.includes(event)\n    );\n    \n    if (isCritical) {\n      return true; // 关键事件总是显示\n    }\n    \n    // 获取组件级别（如果没有设置则使用全局级别）\n    const componentLevel = this.config.componentLevels[component] ?? this.config.globalLevel;\n    \n    return numLevel >= componentLevel;\n  }\n  \n  /**\n   * 输出debug级别日志\n   */\n  debug(component, ...args) {\n    if (this.shouldLog(component, 'debug', args.join(' '))) {\n      console.log(`[${component}:DEBUG]`, ...args);\n    }\n  }\n  \n  /**\n   * 输出info级别日志\n   */\n  info(component, ...args) {\n    if (this.shouldLog(component, 'info', args.join(' '))) {\n      console.log(`[${component}:INFO]`, ...args);\n    }\n  }\n  \n  /**\n   * 输出warn级别日志\n   */\n  warn(component, ...args) {\n    if (this.shouldLog(component, 'warn', args.join(' '))) {\n      console.warn(`[${component}:WARN]`, ...args);\n    }\n  }\n  \n  /**\n   * 输出error级别日志\n   */\n  error(component, ...args) {\n    if (this.shouldLog(component, 'error', args.join(' '))) {\n      console.error(`[${component}:ERROR]`, ...args);\n    }\n  }\n  \n  /**\n   * 输出critical级别日志（总是显示）\n   */\n  critical(component, ...args) {\n    console.error(`[${component}:CRITICAL]`, ...args);\n  }\n  \n  /**\n   * 设置组件日志级别\n   */\n  setComponentLevel(component, level) {\n    const numLevel = typeof level === 'string' ? this.levels[level] : level;\n    this.config.componentLevels[component] = numLevel;\n  }\n  \n  /**\n   * 设置全局日志级别\n   */\n  setGlobalLevel(level) {\n    const numLevel = typeof level === 'string' ? this.levels[level] : level;\n    this.config.globalLevel = numLevel;\n  }\n  \n  /**\n   * 获取当前配置\n   */\n  getConfig() {\n    return { ...this.config };\n  }\n}\n\n// 创建全局实例\nconst logManager = LogManager.getInstance();\n\n// 导出便捷方法\nexport const log = {\n  debug: (component, ...args) => logManager.debug(component, ...args),\n  info: (component, ...args) => logManager.info(component, ...args),\n  warn: (component, ...args) => logManager.warn(component, ...args),\n  error: (component, ...args) => logManager.error(component, ...args),\n  critical: (component, ...args) => logManager.critical(component, ...args),\n  \n  setLevel: (component, level) => logManager.setComponentLevel(component, level),\n  setGlobalLevel: (level) => logManager.setGlobalLevel(level),\n  getConfig: () => logManager.getConfig()\n};\n\nexport default logManager; ","module.exports = __webpack_public_path__ + \"img/51.5d136c53.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./StreamingRenderer.vue?vue&type=style&index=0&id=10119d82&prod&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/50.7614f726.gif\";","module.exports = __webpack_public_path__ + \"img/56.33767a85.gif\";","/**\n * VSCode环境适配器 - 高性能版本\n * 提供VSCode环境下的安全DOM操作方法\n * 确保Vue组件在VSCode和普通浏览器环境中都能正常工作\n */\n\nexport const VSCodeAdapter = {\n    // 性能优化：缓存检测结果\n    _isVSCodeEnv: null,\n    _vscodeUtils: null,\n    _safeHTMLUtils: null,\n    _initialized: false,\n    _scrollThrottle: new Map(), // 滚动节流缓存\n\n    /**\n     * 初始化适配器（只执行一次）\n     */\n    init() {\n        if (this._initialized) return;\n        \n        // 🔧 确保_scrollThrottle始终是Map对象\n        if (!this._scrollThrottle || !(this._scrollThrottle instanceof Map)) {\n            this._scrollThrottle = new Map();\n        }\n        \n        this._isVSCodeEnv = typeof window !== 'undefined' && \n                           (window.vscodeVueChatUtils !== undefined || \n                            window.vscodeServices !== undefined);\n        \n        if (this._isVSCodeEnv) {\n            this._vscodeUtils = window.vscodeVueChatUtils;\n            this._safeHTMLUtils = window.safeHTML || this._vscodeUtils;\n            \n            // 调试信息\n            console.log('[VSCodeAdapter] VSCode环境检测成功');\n            console.log('[VSCodeAdapter] vscodeVueChatUtils:', !!window.vscodeVueChatUtils);\n            console.log('[VSCodeAdapter] safeSetInnerHTML方法:', !!(this._vscodeUtils && this._vscodeUtils.safeSetInnerHTML));\n            console.log('[VSCodeAdapter] safeScrollToBottom方法:', !!(this._vscodeUtils && this._vscodeUtils.safeScrollToBottom));\n        } else {\n            console.log('[VSCodeAdapter] 普通浏览器环境');\n        }\n        \n        this._initialized = true;\n    },\n\n    /**\n     * 检测是否在VSCode环境中（缓存版本）\n     */\n    isVSCodeEnvironment() {\n        if (!this._initialized) this.init();\n        return this._isVSCodeEnv;\n    },\n\n    /**\n     * 获取VSCode安全工具（缓存版本）\n     */\n    getVSCodeUtils() {\n        if (!this._initialized) this.init();\n        return this._vscodeUtils;\n    },\n\n    /**\n     * 获取安全HTML操作工具（缓存版本）\n     */\n    getSafeHTMLUtils() {\n        if (!this._initialized) this.init();\n        return this._safeHTMLUtils;\n    },\n\n    /**\n     * 高性能的innerHTML设置\n     * @param {HTMLElement} element - 目标元素\n     * @param {string} html - HTML内容\n     */\n    setInnerHTML(element, html) {\n        if (!element) return;\n        if (typeof html !== 'string') html = String(html);\n\n        // 快速内容比较（避免hash计算）\n        const currentContent = element.dataset.lastContent;\n        if (currentContent === html && html !== '') {\n            return; // 内容未变化且不是清空操作，跳过更新\n        }\n\n        if (this.isVSCodeEnvironment()) {\n            const vscodeUtils = this.getVSCodeUtils();\n            \n            // 优先使用VSCode提供的安全方法\n            if (vscodeUtils && vscodeUtils.safeSetInnerHTML) {\n                try {\n                    vscodeUtils.safeSetInnerHTML(element, html);\n                } catch (error) {\n                    console.warn('[VSCodeAdapter] safeSetInnerHTML failed, falling back to innerHTML:', error);\n                    element.innerHTML = html;\n                }\n            } else {\n                // 如果没有VSCode安全方法，直接使用innerHTML（VSCode环境下应该是安全的）\n                element.innerHTML = html;\n            }\n        } else {\n            // 普通浏览器环境，直接使用innerHTML\n            element.innerHTML = html;\n        }\n\n        // 缓存内容用于下次比较\n        element.dataset.lastContent = html;\n    },\n\n    /**\n     * 高性能的滚动操作（带节流）\n     * @param {HTMLElement} element - 滚动容器元素\n     */\n    scrollToBottom(element) {\n        if (!element) return;\n\n        // 🔧 确保_scrollThrottle存在\n        if (!this._scrollThrottle || !(this._scrollThrottle instanceof Map)) {\n            this._scrollThrottle = new Map();\n        }\n\n        const elementId = element.id || 'default';\n        const now = Date.now();\n        const lastScroll = this._scrollThrottle.get(elementId);\n        \n        // 节流：100ms内只执行一次滚动\n        if (lastScroll && now - lastScroll < 100) {\n            return;\n        }\n        \n        this._scrollThrottle.set(elementId, now);\n\n        if (this.isVSCodeEnvironment()) {\n            const vscodeUtils = this.getVSCodeUtils();\n            \n            // 优先使用VSCode提供的安全滚动方法\n            if (vscodeUtils && vscodeUtils.safeScrollToBottom) {\n                try {\n                    vscodeUtils.safeScrollToBottom(element);\n                } catch (error) {\n                    console.warn('[VSCodeAdapter] safeScrollToBottom failed, falling back:', error);\n                    this.fallbackScrollToBottom(element);\n                }\n            } else {\n                this.fallbackScrollToBottom(element);\n            }\n        } else {\n            // 高性能滚动\n            this.performantScrollToBottom(element);\n        }\n    },\n\n    /**\n     * 高性能的滚动到底部实现\n     * @param {HTMLElement} element - 滚动容器\n     */\n    performantScrollToBottom(element) {\n        // 使用 RAF 确保DOM更新完成，但避免多次调用\n        const rafId = element.dataset.rafId;\n        if (rafId) {\n            cancelAnimationFrame(rafId);\n        }\n\n        const newRafId = requestAnimationFrame(() => {\n            try {\n                element.scrollTop = element.scrollHeight;\n                delete element.dataset.rafId;\n            } catch (error) {\n                // 静默处理错误，避免日志污染\n            }\n        });\n\n        element.dataset.rafId = newRafId;\n    },\n\n    /**\n     * 降级的滚动到底部方法（优化版本）\n     * @param {HTMLElement} element - 滚动容器\n     */\n    fallbackScrollToBottom(element) {\n        try {\n            if (typeof requestAnimationFrame === 'function') {\n                this.performantScrollToBottom(element);\n            } else {\n                element.scrollTop = element.scrollHeight;\n            }\n        } catch (error) {\n            // 静默处理错误\n        }\n    },\n\n    /**\n     * 批量设置innerHTML（高性能批处理）\n     * @param {Array} updates - 更新数组 [{element, html}, ...]\n     */\n    batchSetInnerHTML(updates) {\n        if (!Array.isArray(updates) || updates.length === 0) return;\n\n        // 批量处理，减少DOM重排\n        const fragment = document.createDocumentFragment();\n        \n        updates.forEach(({element, html}) => {\n            if (element && typeof html === 'string') {\n                this.setInnerHTML(element, html);\n            }\n        });\n    },\n\n    /**\n     * 清理适配器缓存（用于内存管理）\n     */\n    cleanup() {\n        // 🔧 安全地清理滚动节流缓存\n        if (this._scrollThrottle && typeof this._scrollThrottle.clear === 'function') {\n            this._scrollThrottle.clear();\n        } else {\n            // 如果_scrollThrottle不存在或不是Map，重新初始化\n            this._scrollThrottle = new Map();\n        }\n        \n        // 清理所有元素的RAF ID\n        document.querySelectorAll('[data-raf-id]').forEach(el => {\n            if (el.dataset.rafId) {\n                cancelAnimationFrame(el.dataset.rafId);\n                delete el.dataset.rafId;\n            }\n        });\n    },\n\n    /**\n     * 安全的事件监听（简化版本）\n     */\n    addEventListener(element, event, handler) {\n        if (!element || typeof handler !== 'function') return;\n        \n        try {\n            element.addEventListener(event, handler);\n        } catch (error) {\n            // 静默处理错误\n        }\n    },\n\n    /**\n     * 获取环境信息（调试用）\n     */\n    getEnvironmentInfo() {\n        if (!this._initialized) this.init();\n        \n        return {\n            isVSCode: this._isVSCodeEnv,\n            hasVSCodeUtils: !!this._vscodeUtils,\n            hasSafeHTML: !!this._safeHTMLUtils,\n            scrollThrottleSize: this._scrollThrottle.size\n        };\n    },\n\n    /**\n     * 性能监控（仅在开发模式下启用）\n     */\n    logPerformanceInfo() {\n        if (process.env.NODE_ENV === 'development') {\n            console.debug('[VSCodeAdapter] Performance Info:', this.getEnvironmentInfo());\n        }\n    }\n};\n\n// 默认导出\nexport default VSCodeAdapter; \n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GroupItem.vue?vue&type=style&index=0&id=502d6557&prod&lang=scss\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Icp.vue?vue&type=style&index=0&id=49bc27c3&prod&lang=scss\"","module.exports = __webpack_public_path__ + \"img/7.fb655c96.gif\";","module.exports = __webpack_public_path__ + \"img/0.23538cb7.gif\";","module.exports = __webpack_public_path__ + \"media/tip.7068643e.wav\";","module.exports = __webpack_public_path__ + \"img/1.41d8ebbe.gif\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PluginChat.vue?vue&type=style&index=0&id=bc1e3166&prod&lang=scss&scoped=true\"","module.exports = __webpack_public_path__ + \"img/23.071999b8.gif\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatAgentSide.vue?vue&type=style&index=0&id=791efdd4&prod&lang=scss\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"chat-input-area\"},[(_vm.isDragOver)?_c('div',{staticClass:\"drag-overlay\"},[_vm._m(0)]):_vm._e(),_c('div',{ref:\"content\",class:['edit-chat-container', _vm.isEmpty ? '' : 'not-empty'],attrs:{\"contenteditable\":\"true\"},on:{\"paste\":function($event){$event.preventDefault();return _vm.onPaste.apply(null, arguments)},\"keydown\":_vm.onKeydown,\"compositionstart\":function($event){_vm.compositionFlag = true},\"compositionend\":_vm.onCompositionEnd,\"input\":_vm.onEditorInput,\"mousedown\":_vm.onMousedown,\"blur\":_vm.onBlur}}),_c('chat-at-box',{ref:\"atBox\",attrs:{\"search-text\":_vm.atSearchText,\"ownerId\":_vm.ownerId,\"members\":_vm.groupMembers},on:{\"select\":_vm.onAtSelect}}),_c('roo-code-at-panel',{ref:\"rooCodePanel\",attrs:{\"userId\":_vm.ownerId,\"targetUserId\":_vm.targetUserId,\"groupMembers\":_vm.groupMembers,\"isGroup\":!!_vm.groupMembers && _vm.groupMembers.length > 0}})],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"drag-content\"},[_c('i',{staticClass:\"el-icon-upload2\"}),_c('p',[_vm._v(\"拖拽文件到此处自动发送\")]),_c('p',{staticClass:\"drag-tip\"},[_vm._v(\"支持图片、文档等文件类型\")])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.visible),expression:\"visible\"}],staticClass:\"roocode-at-panel\",style:(_vm.panelStyle)},[(!_vm.selectedCategory)?_c('div',{staticClass:\"panel-level-one\"},[_c('div',{staticClass:\"panel-header\"},[_vm._v(\"选择类型\")]),_c('div',{staticClass:\"panel-items\"},[(_vm.groupMembers && _vm.groupMembers.length > 0)?_c('div',{staticClass:\"panel-item\",class:{ active: _vm.activeIndex === 0 },on:{\"click\":function($event){return _vm.selectCategory('members')},\"mouseenter\":function($event){_vm.activeIndex = 0}}},[_c('i',{staticClass:\"el-icon-user\"}),_c('span',[_vm._v(\"群成员\")]),_c('i',{staticClass:\"el-icon-arrow-right\"})]):_vm._e(),_c('div',{staticClass:\"panel-item\",class:{ active: _vm.activeIndex === (_vm.groupMembers && _vm.groupMembers.length > 0 ? 1 : 0) },on:{\"click\":function($event){return _vm.selectCategory('tasks')},\"mouseenter\":function($event){_vm.activeIndex = (_vm.groupMembers && _vm.groupMembers.length > 0 ? 1 : 0)}}},[_c('i',{staticClass:\"el-icon-document\"}),_c('span',[_vm._v(\"任务\")]),_c('i',{staticClass:\"el-icon-arrow-right\"})]),_c('div',{staticClass:\"panel-item\",class:{ active: _vm.activeIndex === (_vm.groupMembers && _vm.groupMembers.length > 0 ? 2 : 1) },on:{\"click\":function($event){return _vm.selectCategory('agents')},\"mouseenter\":function($event){_vm.activeIndex = (_vm.groupMembers && _vm.groupMembers.length > 0 ? 2 : 1)}}},[_c('i',{staticClass:\"el-icon-cpu\"}),_c('span',[_vm._v(\"智能体\")]),_c('i',{staticClass:\"el-icon-arrow-right\"})])])]):_c('div',{staticClass:\"panel-level-two\"},[_c('div',{staticClass:\"panel-header\"},[_c('span',{staticClass:\"back-btn\",on:{\"click\":_vm.backToFirstLevel}},[_c('i',{staticClass:\"el-icon-arrow-left\"})]),_vm._v(\" \"+_vm._s(_vm.selectedCategory === 'members' ? '选择群成员' : _vm.selectedCategory === 'tasks' ? '选择任务' : '选择智能体')+\" \")]),(_vm.items.length > 5)?_c('div',{staticClass:\"panel-search\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.searchText),expression:\"searchText\"}],staticClass:\"search-input\",attrs:{\"placeholder\":\"搜索...\"},domProps:{\"value\":(_vm.searchText)},on:{\"input\":[function($event){if($event.target.composing)return;_vm.searchText=$event.target.value},_vm.filterItems]}})]):_vm._e(),_c('div',{staticClass:\"panel-items\"},[(_vm.loading)?_c('div',{staticClass:\"loading\"},[_c('i',{staticClass:\"el-icon-loading\"}),_vm._v(\" 加载中... \")]):(_vm.filteredItems.length === 0 && _vm.selectedCategory !== 'tasks')?_c('div',{staticClass:\"empty\"},[_vm._v(\" \"+_vm._s(_vm.selectedCategory === 'members' ? '暂无群成员' : '暂无智能体记录')+\" \")]):_vm._l((_vm.filteredItems),function(item,index){return _c('div',{key:item.id || item.slug || index,staticClass:\"panel-item\",class:{ \n            active: _vm.activeIndex === index,\n            selected: _vm.isItemSelected(item)\n          },on:{\"click\":function($event){return _vm.selectItem(item)},\"mouseenter\":function($event){_vm.activeIndex = index}}},[(item.icon)?_c('span',{staticClass:\"item-icon\"},[_vm._v(_vm._s(item.icon))]):_c('i',{class:item.iconClass || 'el-icon-document'}),_c('div',{staticClass:\"item-content\"},[_c('div',{staticClass:\"item-name\"},[_vm._v(_vm._s(item.name))]),(item.description)?_c('div',{staticClass:\"item-desc\"},[_vm._v(_vm._s(item.description))]):_vm._e()]),(item.modeType)?_c('span',{staticClass:\"item-type\"},[_vm._v(\" \"+_vm._s(item.modeType === 'system' ? '系统' : '自定义')+\" \")]):_vm._e(),(_vm.isItemSelected(item))?_c('i',{staticClass:\"el-icon-check selected-mark\"}):_vm._e()])})],2)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div v-show=\"visible\" class=\"roocode-at-panel\" :style=\"panelStyle\">\n    <!-- 一级面板 -->\n    <div v-if=\"!selectedCategory\" class=\"panel-level-one\">\n      <div class=\"panel-header\">选择类型</div>\n      <div class=\"panel-items\">\n        <div \n          v-if=\"groupMembers && groupMembers.length > 0\"\n          class=\"panel-item\"\n          :class=\"{ active: activeIndex === 0 }\"\n          @click=\"selectCategory('members')\"\n          @mouseenter=\"activeIndex = 0\"\n        >\n          <i class=\"el-icon-user\"></i>\n          <span>群成员</span>\n          <i class=\"el-icon-arrow-right\"></i>\n        </div>\n        <div \n          class=\"panel-item\"\n          :class=\"{ active: activeIndex === (groupMembers && groupMembers.length > 0 ? 1 : 0) }\"\n          @click=\"selectCategory('tasks')\"\n          @mouseenter=\"activeIndex = (groupMembers && groupMembers.length > 0 ? 1 : 0)\"\n        >\n          <i class=\"el-icon-document\"></i>\n          <span>任务</span>\n          <i class=\"el-icon-arrow-right\"></i>\n        </div>\n        <div \n          class=\"panel-item\"\n          :class=\"{ active: activeIndex === (groupMembers && groupMembers.length > 0 ? 2 : 1) }\"\n          @click=\"selectCategory('agents')\"\n          @mouseenter=\"activeIndex = (groupMembers && groupMembers.length > 0 ? 2 : 1)\"\n        >\n          <i class=\"el-icon-cpu\"></i>\n          <span>智能体</span>\n          <i class=\"el-icon-arrow-right\"></i>\n        </div>\n      </div>\n    </div>\n\n    <!-- 二级面板 -->\n    <div v-else class=\"panel-level-two\">\n      <div class=\"panel-header\">\n        <span @click=\"backToFirstLevel\" class=\"back-btn\">\n          <i class=\"el-icon-arrow-left\"></i>\n        </span>\n        {{ selectedCategory === 'members' ? '选择群成员' : \n           selectedCategory === 'tasks' ? '选择任务' : '选择智能体' }}\n      </div>\n      \n      <div class=\"panel-search\" v-if=\"items.length > 5\">\n        <input \n          v-model=\"searchText\" \n          placeholder=\"搜索...\" \n          class=\"search-input\"\n          @input=\"filterItems\"\n        />\n      </div>\n\n      <div class=\"panel-items\">\n        <div v-if=\"loading\" class=\"loading\">\n          <i class=\"el-icon-loading\"></i> 加载中...\n        </div>\n        \n        <div v-else-if=\"filteredItems.length === 0 && selectedCategory !== 'tasks'\" class=\"empty\">\n          {{ selectedCategory === 'members' ? '暂无群成员' : '暂无智能体记录' }}\n        </div>\n        \n        <template v-else>\n          <div \n            v-for=\"(item, index) in filteredItems\" \n            :key=\"item.id || item.slug || index\"\n            class=\"panel-item\"\n            :class=\"{ \n              active: activeIndex === index,\n              selected: isItemSelected(item)\n            }\"\n            @click=\"selectItem(item)\"\n            @mouseenter=\"activeIndex = index\"\n          >\n            <span v-if=\"item.icon\" class=\"item-icon\">{{ item.icon }}</span>\n            <i v-else :class=\"item.iconClass || 'el-icon-document'\"></i>\n            <div class=\"item-content\">\n              <div class=\"item-name\">{{ item.name }}</div>\n              <div v-if=\"item.description\" class=\"item-desc\">{{ item.description }}</div>\n            </div>\n            <span v-if=\"item.modeType\" class=\"item-type\">\n              {{ item.modeType === 'system' ? '系统' : '自定义' }}\n            </span>\n            <!-- 选中标记 -->\n            <i v-if=\"isItemSelected(item)\" class=\"el-icon-check selected-mark\"></i>\n          </div>\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { MentionHelper } from '@/utils/zeroWidthEncoder';\n\nexport default {\n  name: 'RooCodeAtPanel',\n  props: {\n    userId: {\n      type: Number,\n      required: true\n    },\n    targetUserId: {\n      type: [Number, String], // 支持Number和String两种类型（String用于\"userId_terminal\"格式）\n      default: null\n    },\n    groupMembers: {\n      type: Array,\n      default: () => []\n    },\n    isGroup: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      visible: false,\n      position: { x: 0, y: 0 },\n      selectedCategory: null,\n      items: [],\n      filteredItems: [],\n      searchText: '',\n      activeIndex: 0,\n      loading: false,\n      callback: null,\n      currentSelection: null, // 保存当前选中的项目信息\n      openTime: 0, // 记录面板打开时间，避免立即被关闭\n      openedFromIndicator: false, // 标记是否从@指示器打开\n      clickCheckInterval: null // 点击检查定时器\n    }\n  },\n  \n  computed: {\n    // 从 userStore 获取终端信息\n    currentUserTerminal() {\n      return this.$store.state.userStore?.userInfo?.terminal;\n    },\n    \n    userTerminalName() {\n      return this.$store.getters['userStore/terminalName'];\n    },\n    \n    // 获取发送终端（从 userStore）\n    currentSenderTerminal() {\n      const terminal = this.currentUserTerminal;\n      \n      if (terminal !== undefined && terminal !== null) {\n        console.log('[RooCodeAtPanel] 从 userStore 获取终端:', terminal, this.userTerminalName);\n        return terminal;\n      }\n      \n      // 降级：根据环境推断\n      if (window.vscodeServices) {\n        console.log('[RooCodeAtPanel] 降级推断：VS Code 环境，使用终端 2（我的电脑）');\n        return 2;\n      }\n      \n      console.log('[RooCodeAtPanel] 降级推断：Web 环境，使用终端 0（傻蛋网页端）');\n      return 0;\n    },\n    \n    // 从 Vuex store 获取当前激活的会话\n    activeChat() {\n      return this.$store.state.activeChat;\n    },\n    \n    // 获取当前会话的真实 targetId（包含终端信息）\n    currentTargetId() {\n      // 优先使用 activeChat 的 targetId，它包含完整的终端信息\n      if (this.activeChat && this.activeChat.targetId) {\n        console.log('[RooCodeAtPanel] 使用 activeChat.targetId:', this.activeChat.targetId);\n        return this.activeChat.targetId;\n      }\n      \n      // 降级到 props 的 targetUserId\n      console.log('[RooCodeAtPanel] 降级使用 props.targetUserId:', this.targetUserId);\n      return this.targetUserId;\n    },\n    \n    // 获取当前会话的类型（PRIVATE/GROUP）\n    currentChatType() {\n      // 优先使用 activeChat 的 type\n      if (this.activeChat && this.activeChat.type) {\n        console.log('[RooCodeAtPanel] 使用 activeChat.type:', this.activeChat.type);\n        return this.activeChat.type;\n      }\n      \n      // 降级到基于 props 的判断\n      const chatType = this.isGroup ? 'GROUP' : 'PRIVATE';\n      console.log('[RooCodeAtPanel] 降级使用 props 判断 chatType:', chatType);\n      return chatType;\n    },\n    \n    panelStyle() {\n      // 面板高度（根据是否显示搜索框动态调整）\n      const panelHeight = this.selectedCategory && this.filteredItems.length > 5 ? 400 : 350;\n      \n      // 根据是否需要显示在下方调整位置\n      if (this.position.isBelow) {\n        // 显示在输入框下方\n        return {\n          left: `${this.position.x}px`,\n          top: `${this.position.y + 20}px`,\n          maxHeight: `${Math.min(panelHeight, window.innerHeight - this.position.y - 50)}px`\n        }\n      } else {\n        // 默认显示在输入框上方\n        const availableHeight = this.position.y - 20;\n        return {\n          left: `${this.position.x}px`,\n          bottom: `${window.innerHeight - this.position.y + 5}px`,\n          maxHeight: `${Math.min(panelHeight, availableHeight)}px`\n        }\n      }\n    }\n  },\n  methods: {\n    open(position, callback, existingSelection = null, searchText = '') {\n      // 先移除任何现有的事件监听器\n      this.removeEventListeners();\n      \n      this.visible = true;\n      this.openTime = Date.now(); // 记录打开时间\n      this.openedFromIndicator = !!existingSelection; // 如果有现有选择，说明是从指示器打开的\n      \n      // 调整位置，确保面板不会超出屏幕左右边界\n      let adjustedX = position.x;\n      const panelWidth = 400; // 最大宽度\n      \n      // 如果面板会超出右边界，调整到左边\n      if (adjustedX + panelWidth > window.innerWidth) {\n        adjustedX = window.innerWidth - panelWidth - 10;\n      }\n      \n      // 如果面板会超出左边界，调整到右边\n      if (adjustedX < 10) {\n        adjustedX = 10;\n      }\n      \n      this.position = {\n        x: adjustedX,\n        y: position.y\n      };\n      \n      this.callback = callback;\n      \n      // 如果有现有选择，直接跳转到对应的二级面板\n      if (existingSelection) {\n        this.currentSelection = existingSelection;\n        this.selectedCategory = existingSelection.type;\n        this.searchText = '';\n        \n        // 加载对应分类的数据\n        if (existingSelection.type === 'members') {\n          this.loadMembers();\n        } else {\n          this.loadItems(existingSelection.type === 'tasks' ? 'tasks' : 'agents');\n        }\n        \n        // 等待数据加载后定位到选中项\n        this.$nextTick(() => {\n          this.locateSelectedItem();\n        });\n      } else if (searchText) {\n        // 根据搜索文本自动选择分类\n        const lowerSearch = searchText.toLowerCase();\n        if (lowerSearch.includes('任务') || lowerSearch.includes('task')) {\n          this.selectCategory('tasks');\n          this.currentSelection = null;\n        } else if (lowerSearch.includes('智能体') || lowerSearch.includes('agent') || lowerSearch.includes('ai')) {\n          this.selectCategory('agents');\n          this.currentSelection = null;\n        } else {\n          // 其他文本，显示一级面板\n          this.selectedCategory = null;\n          this.activeIndex = 0;\n          this.searchText = searchText;\n          this.currentSelection = null;\n        }\n      } else {\n        // 新的选择，重置状态\n        this.selectedCategory = null;\n        this.activeIndex = 0;\n        this.searchText = '';\n        this.currentSelection = null;\n      }\n      \n      // 添加事件监听器\n      this.addEventListeners();\n      \n      // 在下一个tick中检查面板位置，确保不会超出顶部\n      this.$nextTick(() => {\n        this.adjustPanelPosition();\n      });\n    },\n    \n    // 添加事件监听器的统一方法\n    addEventListeners() {\n      // 监听键盘事件\n      document.addEventListener('keydown', this.handleKeydown);\n      \n      if (this.openedFromIndicator) {\n        // 从指示器打开的面板，使用轮询方式检测外部点击\n        console.log('[DEBUG] Adding polling-based click detection for indicator-opened panel');\n        this.startClickPolling();\n      } else {\n        // 正常打开的面板，使用常规事件监听\n        this.$nextTick(() => {\n          if (this.visible) {\n            document.addEventListener('click', this.handleClickOutside, true);\n            console.log('[DEBUG] Click outside listener added (capture mode)');\n          }\n        });\n      }\n    },\n    \n    // 开始轮询检测点击\n    startClickPolling() {\n      // 清除现有的定时器\n      if (this.clickCheckInterval) {\n        clearInterval(this.clickCheckInterval);\n      }\n      \n      let lastClickTime = 0;\n      let ignoreClicksUntil = Date.now() + 300; // 忽略面板打开后300ms内的点击\n      \n      // 添加一个全局点击监听器来更新最后点击时间\n      const updateClickTime = (e) => {\n        const now = Date.now();\n        \n        // 忽略面板打开后的初始点击\n        if (now < ignoreClicksUntil) {\n          console.log('[DEBUG] Ignoring click during grace period');\n          return;\n        }\n        \n        // 忽略面板内的点击\n        if (this.$el && this.$el.contains(e.target)) {\n          console.log('[DEBUG] Ignoring click inside panel');\n          return;\n        }\n        \n        console.log('[DEBUG] Recording outside click for polling detection');\n        lastClickTime = now;\n      };\n      \n      document.addEventListener('mousedown', updateClickTime, true);\n      \n      // 定期检查是否有新的外部点击事件\n      this.clickCheckInterval = setInterval(() => {\n        if (!this.visible) {\n          clearInterval(this.clickCheckInterval);\n          document.removeEventListener('mousedown', updateClickTime, true);\n          return;\n        }\n        \n        // 检查是否有新的外部点击（最近100ms内）\n        if (lastClickTime > 0 && Date.now() - lastClickTime < 100) {\n          console.log('[DEBUG] Polling detected valid outside click, closing panel');\n          this.close();\n          clearInterval(this.clickCheckInterval);\n          document.removeEventListener('mousedown', updateClickTime, true);\n        }\n      }, 50);\n    },\n    \n    // 检查最近的点击是否在面板内\n    isClickInPanel() {\n      const activeElement = document.activeElement;\n      return this.$el && (this.$el.contains(activeElement) || this.$el === activeElement);\n    },\n    \n    // 移除事件监听器的统一方法\n    removeEventListeners() {\n      document.removeEventListener('keydown', this.handleKeydown);\n      document.removeEventListener('click', this.handleClickOutside, true); // 捕获模式\n      document.removeEventListener('click', this.handleClickOutside, false); // 冒泡模式\n      \n      // 清除轮询定时器\n      if (this.clickCheckInterval) {\n        clearInterval(this.clickCheckInterval);\n        this.clickCheckInterval = null;\n      }\n      \n      console.log('[DEBUG] Event listeners removed');\n    },\n    \n    // 定位到当前选中的项目\n    locateSelectedItem() {\n      if (!this.currentSelection || !this.filteredItems.length) return;\n      \n      // 查找当前选择的项目在列表中的索引\n      const index = this.filteredItems.findIndex(item => {\n        if (this.currentSelection.type === 'members') {\n          return item.userId === this.currentSelection.item.userId;\n        } else {\n          return item.id === this.currentSelection.item.id || \n                 item.slug === this.currentSelection.item.slug;\n        }\n      });\n      \n      if (index >= 0) {\n        this.activeIndex = index;\n        this.scrollToActiveItem();\n      }\n    },\n    \n    adjustPanelPosition() {\n      const panel = this.$el;\n      if (!panel) return;\n      \n      const rect = panel.getBoundingClientRect();\n      const panelHeight = rect.height;\n      \n      // 如果面板顶部超出屏幕，调整位置\n      if (rect.top < 10) {\n        // 显示在输入框下方\n        this.$set(this, 'position', {\n          ...this.position,\n          isBelow: true\n        });\n      }\n    },\n    \n    close() {\n      this.visible = false;\n      this.selectedCategory = null;\n      this.items = [];\n      this.filteredItems = [];\n      this.removeEventListeners();\n    },\n    \n    // 处理点击外部事件\n    handleClickOutside(e) {\n      console.log('[DEBUG] handleClickOutside triggered, target:', e.target);\n      \n      // 如果面板不可见，不处理\n      if (!this.visible) {\n        console.log('[DEBUG] handleClickOutside - panel not visible, ignoring');\n        return;\n      }\n      \n      // 如果点击的是面板本身或其子元素，不关闭\n      if (this.$el && this.$el.contains(e.target)) {\n        console.log('[DEBUG] handleClickOutside - clicked inside panel, ignoring');\n        return;\n      }\n      \n      // 如果点击的是触发打开面板的元素（如@指示器），不关闭\n      if (e.target.classList && (\n        e.target.classList.contains('roocode-mention') ||\n        e.target.classList.contains('chat-at-user')\n      )) {\n        console.log('[DEBUG] handleClickOutside - clicked on mention, ignoring');\n        return;\n      }\n      \n      // 检查是否点击了RooCode mention相关的元素（通过文本内容判断）\n      if (e.target.innerText && (\n        e.target.innerText.startsWith('@任务[') ||\n        e.target.innerText.startsWith('@智能体[')\n      )) {\n        console.log('[DEBUG] handleClickOutside - clicked on RooCode mention, ignoring');\n        return;\n      }\n      \n      // 如果点击的是输入框，也不关闭（用户可能在继续输入）\n      if (e.target.closest('.content')) {\n        console.log('[DEBUG] handleClickOutside - clicked in input area, ignoring');\n        return;\n      }\n      \n      console.log('[DEBUG] handleClickOutside - closing panel');\n      // 点击其他区域，关闭面板\n      this.close();\n    },\n    \n    handleKeydown(e) {\n      if (!this.visible) return;\n      \n      if (e.key === 'Escape') {\n        this.close();\n      } else if (e.key === 'ArrowUp') {\n        e.preventDefault();\n        this.moveUp();\n      } else if (e.key === 'ArrowDown') {\n        e.preventDefault();\n        this.moveDown();\n      } else if (e.key === 'Enter') {\n        e.preventDefault();\n        this.confirmSelection();\n      }\n    },\n    \n    moveUp() {\n      if (this.activeIndex > 0) {\n        this.activeIndex--;\n        this.scrollToActiveItem();\n      }\n    },\n    \n    moveDown() {\n      let maxIndex;\n      if (this.selectedCategory) {\n        maxIndex = this.filteredItems.length - 1;\n      } else {\n        // 一级面板的最大索引取决于是否有群成员\n        maxIndex = (this.groupMembers && this.groupMembers.length > 0) ? 2 : 1;\n      }\n      if (this.activeIndex < maxIndex) {\n        this.activeIndex++;\n        this.scrollToActiveItem();\n      }\n    },\n    \n    scrollToActiveItem() {\n      this.$nextTick(() => {\n        const container = this.$el.querySelector('.panel-items');\n        const activeItem = this.$el.querySelectorAll('.panel-item')[this.activeIndex];\n        \n        if (container && activeItem) {\n          const containerRect = container.getBoundingClientRect();\n          const itemRect = activeItem.getBoundingClientRect();\n          \n          // 如果项目在容器上方，滚动到顶部\n          if (itemRect.top < containerRect.top) {\n            container.scrollTop -= (containerRect.top - itemRect.top + 10);\n          }\n          // 如果项目在容器下方，滚动到底部\n          else if (itemRect.bottom > containerRect.bottom) {\n            container.scrollTop += (itemRect.bottom - containerRect.bottom + 10);\n          }\n        }\n      });\n    },\n    \n    confirmSelection() {\n      if (!this.selectedCategory) {\n        // 在一级面板\n        const hasMembers = this.groupMembers && this.groupMembers.length > 0;\n        if (hasMembers) {\n          // 有群成员时的选择\n          if (this.activeIndex === 0) {\n            this.selectCategory('members');\n          } else if (this.activeIndex === 1) {\n            this.selectCategory('tasks');\n          } else {\n            this.selectCategory('agents');\n          }\n        } else {\n          // 没有群成员时的选择\n          if (this.activeIndex === 0) {\n            this.selectCategory('tasks');\n          } else {\n            this.selectCategory('agents');\n          }\n        }\n      } else {\n        // 在二级面板\n        if (this.filteredItems[this.activeIndex]) {\n          this.selectItem(this.filteredItems[this.activeIndex]);\n        }\n      }\n    },\n    \n    selectCategory(category) {\n      console.log('[DEBUG] selectCategory called with:', category);\n      console.log('[DEBUG] Before set - selectedCategory:', this.selectedCategory);\n      this.selectedCategory = category;\n      console.log('[DEBUG] After set - selectedCategory:', this.selectedCategory);\n      this.activeIndex = 0;\n      this.items = [];\n      this.filteredItems = [];\n      \n      if (category === 'members') {\n        this.loadMembers();\n      } else if (category === 'tasks') {\n        console.log('[DEBUG] About to load tasks');\n        this.loadItems('tasks');\n      } else if (category === 'agents') {\n        console.log('[DEBUG] About to load agents');\n        this.loadItems('agents');\n      }\n      \n      // 强制触发Vue的响应式更新\n      this.$forceUpdate();\n      console.log('[DEBUG] Force update called');\n    },\n    \n    backToFirstLevel() {\n      this.selectedCategory = null;\n      this.activeIndex = 0;\n      this.items = [];\n      this.filteredItems = [];\n    },\n    \n    async loadItems(category) {\n      this.loading = true;\n      \n      try {\n        // 确定要获取数据的用户ID列表\n        let userIds = [];\n        if (this.isGroup && this.groupMembers) {\n          // 群聊：获取所有群成员的数据\n          userIds = this.groupMembers.map(m => m.userId);\n        } else if (this.targetUserId) {\n          // 单聊：获取聊天对象的数据\n          userIds = [this.targetUserId];\n        } else {\n          // 默认获取自己的数据\n          userIds = [this.userId];\n        }\n        \n\n        // 获取所有用户的数据并合并\n        let allItems = [];\n        for (const uid of userIds) {\n          try {\n            // 使用专门的 RooCode Redis 接口\n            const endpoint = category === 'tasks' \n              ? `/api/roocode/redis/tasks/${uid}`\n              : `/api/roocode/redis/agents/${uid}`;\n            \n            // httpRequest.js 的响应拦截器已经处理了 response.data.data，直接返回的就是 data\n            const items = await this.$http.get(endpoint);\n            \n            if (items && Array.isArray(items)) {\n              if (items.length > 0) {\n                // 为每个项目添加用户信息\n                const member = this.groupMembers?.find(m => m.userId === uid);\n                items.forEach(item => {\n                  item.userId = uid;\n                  item.userName = member?.showNickName || member?.nickName || `用户${uid}`;\n                });\n                allItems = allItems.concat(items);\n              }\n            }\n          } catch (err) {\n            // 静默处理单个用户数据获取失败\n          }\n        }\n        \n        if (category === 'tasks') {\n          console.log('[DEBUG] Processing tasks - allItems:', allItems);\n          // 添加固定的\"新建任务\"选项作为第一项\n          const newTaskItem = {\n            id: 'new-task',\n            name: '新建任务',\n            description: '创建一个新的任务',\n            iconClass: 'el-icon-plus',\n            isNewTask: true // 标记这是新建任务选项\n          };\n          \n          // 将任务数据转换为统一格式\n          const taskItems = allItems.map(item => ({\n            ...item,\n            name: item.task || item.name || '未命名任务', // 使用 task 字段作为显示名称\n            description: `模式: ${item.mode || 'unknown'} | 令牌: ${item.tokensIn || 0}/${item.tokensOut || 0}`,\n            iconClass: 'el-icon-document'\n          }));\n          \n          // 新建任务始终在第一位\n          this.items = [newTaskItem, ...taskItems];\n          console.log('[DEBUG] Processed tasks items:', this.items);\n        } else {\n          // 对于模式(agents)，处理数据格式\n          console.log('[DEBUG] Processing agents - allItems:', allItems);\n          \n          if (allItems.length > 0) {\n            // 确保每个mode都有name字段\n            const processedModes = allItems.map(mode => ({\n              ...mode,\n              name: mode.name || mode.slug || '未命名模式',\n              description: mode.description || mode.roleDefinition || '智能体模式',\n              icon: mode.icon || '🤖'\n            }));\n            \n            // 分离系统模式和用户模式，并去重\n            const systemModes = [];\n            const userModes = [];\n            const seenSlugs = new Set();\n            \n            processedModes.forEach(mode => {\n              // 避免重复的系统模式\n              if (mode.modeType === 'system') {\n                if (!seenSlugs.has(mode.slug)) {\n                  systemModes.push(mode);\n                  seenSlugs.add(mode.slug);\n                }\n              } else {\n                userModes.push(mode);\n              }\n            });\n            \n            this.items = [...systemModes, ...userModes];\n          } else {\n            this.items = [];\n          }\n          console.log('[DEBUG] Processed agents items:', this.items);\n        }\n        // 使用Vue.set确保响应式更新\n        this.$set(this, 'items', this.items);\n        this.filteredItems = [...this.items];\n        this.$set(this, 'filteredItems', this.filteredItems);\n      } catch (error) {\n        // 静默处理错误，不显示错误提示\n        this.items = [];\n        this.filteredItems = [];\n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    loadMembers() {\n      this.loading = false;\n      this.items = this.groupMembers.map(member => ({\n        userId: member.userId,\n        name: member.showNickName || member.nickName,\n        description: member.signature || '群成员',\n        iconClass: 'el-icon-user'\n      }));\n      this.filteredItems = [...this.items];\n    },\n    \n    filterItems() {\n      if (!this.searchText) {\n        this.filteredItems = [...this.items];\n      } else {\n        const search = this.searchText.toLowerCase();\n        this.filteredItems = this.items.filter(item => {\n          // 新建任务选项始终显示（仅在任务分类下）\n          if (this.selectedCategory === 'tasks' && item.isNewTask) {\n            return true;\n          }\n          return item.name.toLowerCase().includes(search) ||\n            (item.description && item.description.toLowerCase().includes(search));\n        });\n      }\n      this.activeIndex = 0;\n    },\n    \n    // 判断项目是否为当前选中的项目\n    isItemSelected(item) {\n      if (!this.currentSelection || !this.currentSelection.item) return false;\n      \n      const selectedItem = this.currentSelection.item;\n      if (this.selectedCategory === 'members') {\n        return item.userId === selectedItem.userId;\n      } else if (this.selectedCategory === 'tasks') {\n        return item.id === selectedItem.id;\n      } else {\n        return item.slug === selectedItem.slug || item.id === selectedItem.id;\n      }\n    },\n    \n    selectItem(item) {\n      if (this.callback) {\n        let displayText;\n        \n        if (this.selectedCategory === 'members') {\n          // 群成员，保持原有格式\n          displayText = `@${item.name}`;\n        } else if (this.selectedCategory === 'tasks') {\n          // 获取当前聊天的targetId和type（从activeChat获取）\n          let targetId = this.currentTargetId;\n          const chatType = this.currentChatType;\n          const senderTerminal = this.currentSenderTerminal; // 获取发送终端\n          \n          // 如果是群聊且没有targetId，使用群ID\n          if (!targetId && chatType === 'GROUP' && this.groupMembers?.[0]?.groupId) {\n            targetId = this.groupMembers[0].groupId;\n          }\n          \n          // 调试日志\n          console.log('[RooCodeAtPanel] 任务提及 - 完整参数:', {\n            propsTargetUserId: this.targetUserId,\n            activeChatTargetId: this.activeChat?.targetId,\n            activeChatType: this.activeChat?.type,\n            finalTargetId: targetId,\n            finalChatType: chatType,\n            senderTerminal: senderTerminal,\n            senderTerminalName: this.userTerminalName\n          });\n          \n          // 所有任务都使用MentionHelper创建，确保有零宽编码\n          if (item.isNewTask) {\n            // 新建任务也使用MentionHelper，但不传递taskId\n            displayText = MentionHelper.createTaskMention(\n              '新建任务',\n              null, // 不传递taskId\n              targetId,\n              chatType,\n              senderTerminal  // 传递发送终端\n            );\n          } else {\n            // 普通任务 - 传递任务ID\n            displayText = MentionHelper.createTaskMention(\n              item.name,\n              item.id,\n              targetId,\n              chatType,\n              senderTerminal  // 传递发送终端\n            );\n          }\n        } else {\n          // 智能体 - 获取当前聊天的targetId和type（从activeChat获取）\n          let targetId = this.currentTargetId;\n          const chatType = this.currentChatType;\n          const senderTerminal = this.currentSenderTerminal; // 获取发送终端\n          \n          // 如果是群聊且没有targetId，使用群ID\n          if (!targetId && chatType === 'GROUP' && this.groupMembers?.[0]?.groupId) {\n            targetId = this.groupMembers[0].groupId;\n          }\n          \n          // 调试日志\n          console.log('[RooCodeAtPanel] 智能体提及 - 完整参数:', {\n            propsTargetUserId: this.targetUserId,\n            activeChatTargetId: this.activeChat?.targetId,\n            activeChatType: this.activeChat?.type,\n            finalTargetId: targetId,\n            finalChatType: chatType,\n            senderTerminal: senderTerminal,\n            senderTerminalName: this.userTerminalName\n          });\n          \n          // 智能体 - 传递模式ID\n          displayText = MentionHelper.createAgentMention(\n            item.name,\n            item.slug || item.id,\n            targetId,\n            chatType,\n            senderTerminal  // 传递发送终端\n          );\n        }\n        \n        const result = {\n          type: this.selectedCategory,\n          item: item,\n          displayText: displayText\n        };\n        \n        // 保存当前选择\n        this.currentSelection = result;\n        \n        this.callback(result);\n      }\n      this.close();\n    },\n    \n    // 获取当前选择（供父组件调用）\n    getCurrentSelection() {\n      return this.currentSelection;\n    },\n    \n    // 清除当前选择\n    clearSelection() {\n      this.currentSelection = null;\n    }\n  },\n  \n  beforeDestroy() {\n    this.removeEventListeners();\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.roocode-at-panel {\n  position: fixed;\n  background: white;\n  border: 1px solid #e4e7ed;\n  border-radius: 4px;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);\n  z-index: 3000;\n  min-width: 280px;\n  max-width: 400px;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n\n  .panel-header {\n    padding: 12px 16px;\n    border-bottom: 1px solid #e4e7ed;\n    font-weight: 500;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n\n    .back-btn {\n      cursor: pointer;\n      color: #606266;\n      &:hover {\n        color: #409EFF;\n      }\n    }\n  }\n\n  .panel-search {\n    padding: 8px 16px;\n    border-bottom: 1px solid #e4e7ed;\n\n    .search-input {\n      width: 100%;\n      padding: 6px 10px;\n      border: 1px solid #dcdfe6;\n      border-radius: 4px;\n      font-size: 14px;\n      outline: none;\n\n      &:focus {\n        border-color: #409EFF;\n      }\n    }\n  }\n\n  .panel-items {\n    flex: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    padding: 8px 0;\n    max-height: 300px;\n    min-height: 100px;\n    \n    // 美化滚动条\n    &::-webkit-scrollbar {\n      width: 6px;\n    }\n    \n    &::-webkit-scrollbar-track {\n      background: #f1f1f1;\n      border-radius: 3px;\n    }\n    \n    &::-webkit-scrollbar-thumb {\n      background: #888;\n      border-radius: 3px;\n      \n      &:hover {\n        background: #555;\n      }\n    }\n\n    .panel-item {\n      padding: 10px 16px;\n      cursor: pointer;\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      gap: 10px;\n      transition: background-color 0.2s;\n      width: 100%;\n      box-sizing: border-box;\n      text-align: left;\n\n      &:hover, &.active {\n        background-color: #f5f7fa;\n      }\n\n      &.active {\n        background-color: #ecf5ff;\n      }\n      \n      &.selected {\n        background-color: #f0f9ff;\n      }\n      \n      .selected-mark {\n        color: #67c23a;\n        font-size: 16px;\n        margin-left: 8px;\n        flex-shrink: 0;\n      }\n\n      i {\n        font-size: 18px;\n        color: #909399;\n        flex-shrink: 0;\n      }\n\n      .item-icon {\n        font-size: 18px;\n        width: 20px;\n        text-align: center;\n        flex-shrink: 0;\n      }\n\n      .item-content {\n        flex: 1;\n        min-width: 0;\n        text-align: left;\n\n        .item-name {\n          font-size: 14px;\n          color: #303133;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          text-align: left;\n        }\n\n        .item-desc {\n          font-size: 12px;\n          color: #909399;\n          margin-top: 2px;\n          white-space: nowrap;\n          overflow: hidden;\n          text-overflow: ellipsis;\n          text-align: left;\n        }\n      }\n\n      .item-type {\n        font-size: 12px;\n        color: #909399;\n        padding: 2px 6px;\n        background: #f4f4f5;\n        border-radius: 2px;\n        margin-left: auto;\n        margin-right: 0;\n        flex-shrink: 0;\n      }\n\n      .el-icon-arrow-right {\n        margin-left: auto;\n        color: #c0c4cc;\n      }\n    }\n\n    .loading, .empty {\n      padding: 20px;\n      text-align: center;\n      color: #909399;\n      font-size: 14px;\n    }\n  }\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RooCodeAtPanel.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RooCodeAtPanel.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./RooCodeAtPanel.vue?vue&type=template&id=b3c02e30&scoped=true\"\nimport script from \"./RooCodeAtPanel.vue?vue&type=script&lang=js\"\nexport * from \"./RooCodeAtPanel.vue?vue&type=script&lang=js\"\nimport style0 from \"./RooCodeAtPanel.vue?vue&type=style&index=0&id=b3c02e30&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b3c02e30\",\n  null\n  \n)\n\nexport default component.exports","<template>\n\t<div class=\"chat-input-area\">\n\t\t<!-- 拖拽覆盖层 -->\n\t\t<div v-if=\"isDragOver\" class=\"drag-overlay\">\n\t\t\t<div class=\"drag-content\">\n\t\t\t\t<i class=\"el-icon-upload2\"></i>\n\t\t\t\t<p>拖拽文件到此处自动发送</p>\n\t\t\t\t<p class=\"drag-tip\">支持图片、文档等文件类型</p>\n\t\t\t</div>\n\t\t</div>\n\t\t\n\t\t<div :class=\"['edit-chat-container', isEmpty ? '' : 'not-empty']\" contenteditable=\"true\" @paste.prevent=\"onPaste\"\n\t\t\t@keydown=\"onKeydown\" @compositionstart=\"compositionFlag = true\" @compositionend=\"onCompositionEnd\"\n\t\t\t@input=\"onEditorInput\" @mousedown=\"onMousedown\" ref=\"content\" @blur=\"onBlur\">\n\t\t</div>\n\t\t<chat-at-box @select=\"onAtSelect\" :search-text=\"atSearchText\" ref=\"atBox\" :ownerId=\"ownerId\"\n\t\t\t:members=\"groupMembers\"></chat-at-box>\n\t\t<!-- RooCode @ 面板 -->\n\t\t<roo-code-at-panel \n\t\t\tref=\"rooCodePanel\" \n\t\t\t:userId=\"ownerId\"\n\t\t\t:targetUserId=\"targetUserId\"\n\t\t\t:groupMembers=\"groupMembers\"\n\t\t\t:isGroup=\"!!groupMembers && groupMembers.length > 0\"\n\t\t></roo-code-at-panel>\n\t</div>\n</template>\n\n<script>\nimport ChatAtBox from \"./ChatAtBox\";\nimport RooCodeAtPanel from \"./RooCodeAtPanel\";\nimport VSCodeAdapter from '../../api/vscode-adapter.js';\nimport Emotion from '../common/Emotion.vue';\n\n// 使用全局适配器实例\nconst globalAdapter = VSCodeAdapter;\n\nexport default {\n\tname: \"ChatInput\",\n\tcomponents: { ChatAtBox, RooCodeAtPanel, Emotion },\n\tprops: {\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t},\n\t\ttargetUserId: {\n\t\t\ttype: [Number, String], // 支持Number和String两种类型（String用于\"userId_terminal\"格式）\n\t\t\tdefault: null\n\t\t},\n\t\tgroupMembers: {\n\t\t\ttype: Array,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\timageList: [],\n\t\t\tfileList: [],\n\t\t\tcurrentId: 0,\n\t\t\tatSearchText: null,\n\t\t\tcompositionFlag: false,\n\t\t\tatIng: false,\n\t\t\trooCodeAtIng: false,  // RooCode @ 面板状态\n\t\t\tisEmpty: true,\n\t\t\tchangeStored: true,\n\t\t\tblurRange: null,\n\t\t\t// 无缝任务续问功能\n\t\t\ttaskContinuation: null, // 待填充的任务信息 {name, id}\n\t\t\tisContinuationActive: false, // 是否处于续问状态\n\t\t\tisDragOver: false,\n\t\t\tdragCounter: 0,\n\t\t\tglobalDragListeners: null,\n\t\t}\n\t},\n\tmounted() {\n\t\t// 初始化全局适配器\n\t\tglobalAdapter.init();\n\t\t\n\t\t// 添加全局拖拽事件监听器\n\t\t// 🔧 拖拽管理已迁移到父级EditorChat组件，这里不再设置全局监听器\n\t\t// this.addGlobalDragListeners();\n\t},\n\tbeforeDestroy() {\n\t\t// 🔧 拖拽管理已迁移到父级EditorChat，这里不再处理\n\t\t// this.removeGlobalDragListeners();\n\t},\n\tmethods: {\n\t\t/**\n\t\t * 高性能安全设置innerHTML\n\t\t */\n\t\tsafeSetInnerHTML(element, html) {\n\t\t\tif (!element) return;\n\t\t\t\n\t\t\t// 直接使用全局适配器，避免重复检查\n\t\t\tglobalAdapter.setInnerHTML(element, html);\n\t\t},\n\n\t\t/**\n\t\t * 高性能安全获取innerHTML\n\t\t */\n\t\tsafeGetInnerHTML(element) {\n\t\t\tif (!element) return '';\n\t\t\t\n\t\t\ttry {\n\t\t\t\treturn element.innerHTML || '';\n\t\t\t} catch (error) {\n\t\t\t\treturn element.textContent || '';\n\t\t\t}\n\t\t},\n\t\t\n\t\tonPaste(e) {\n\t\t\tthis.isEmpty = false;\n\t\t\tlet txt = e.clipboardData.getData('Text')\n\t\t\tlet range = window.getSelection().getRangeAt(0)\n\t\t\tif (range.startContainer !== range.endContainer || range.startOffset !== range.endOffset) {\n\t\t\t\trange.deleteContents();\n\t\t\t}\n\t\t\t// 粘贴图片和文件时，这里没有数据\n\t\t\tif (txt && typeof (txt) == 'string') {\n\t\t\t\tlet textNode = document.createTextNode(txt);\n\t\t\t\trange.insertNode(textNode)\n\t\t\t\trange.collapse();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet items = (e.clipboardData || window.clipboardData).items\n\t\t\tif (items.length) {\n\t\t\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\t\t\tif (items[i].type.indexOf('image') !== -1) {\n\t\t\t\t\t\tlet file = items[i].getAsFile();\n\t\t\t\t\t\tlet imagePush = {\n\t\t\t\t\t\t\tfileId: this.generateId(),\n\t\t\t\t\t\t\tfile: file,\n\t\t\t\t\t\t\turl: URL.createObjectURL(file)\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.imageList[imagePush.fileId] = (imagePush);\n\t\t\t\t\t\tlet line = this.newLine();\n\t\t\t\t\t\tlet imageElement = document.createElement('img');\n\t\t\t\t\t\timageElement.className = 'chat-image no-text';\n\t\t\t\t\t\timageElement.src = imagePush.url;\n\t\t\t\t\t\timageElement.dataset.imgId = imagePush.fileId;\n\t\t\t\t\t\tline.appendChild(imageElement);\n\t\t\t\t\t\tlet after = document.createTextNode('\\u00A0');\n\t\t\t\t\t\tline.appendChild(after);\n\t\t\t\t\t\tthis.selectElement(after, 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlet asFile = items[i].getAsFile();\n\t\t\t\t\t\tif (!asFile) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet filePush = { fileId: this.generateId(), file: asFile };\n\t\t\t\t\t\tthis.fileList[filePush.fileId] = (filePush)\n\t\t\t\t\t\tlet line = this.newLine();\n\t\t\t\t\t\tlet fileElement = this.createFile(filePush);\n\t\t\t\t\t\tline.appendChild(fileElement);\n\t\t\t\t\t\tlet after = document.createTextNode('\\u00A0');\n\t\t\t\t\t\tline.appendChild(after);\n\t\t\t\t\t\tthis.selectElement(after, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\trange.collapse();\n\t\t},\n\t\tselectElement(element, endOffset) {\n\t\t\tlet selection = window.getSelection();\n\t\t\t// 插入元素可能不是立即执行的，vue可能会在插入元素后再更新dom\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tlet t1 = document.createRange();\n\t\t\t\tt1.setStart(element, 0);\n\t\t\t\tt1.setEnd(element, endOffset || 0);\n\t\t\t\tif (element.firstChild) {\n\t\t\t\t\tt1.selectNodeContents(element.firstChild);\n\t\t\t\t}\n\t\t\t\tt1.collapse();\n\t\t\t\tselection.removeAllRanges();\n\t\t\t\tselection.addRange(t1);\n\t\t\t\t// 需要时自动聚焦\n\t\t\t\tif (element.focus) {\n\t\t\t\t\telement.focus();\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tonCompositionEnd(e) {\n\t\t\tthis.compositionFlag = false;\n\t\t\tthis.onEditorInput(e);\n\t\t},\n\t\tonKeydown(e) {\n\t\t\tif (e.keyCode === 13) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tif (this.atIng) {\n\t\t\t\t\tconsole.log('选中at的人')\n\t\t\t\t\tthis.$refs.atBox.select();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// Ctrl+Enter 或 Shift+Enter 换行\n\t\t\t\tif (e.ctrlKey || e.shiftKey) {\n\t\t\t\t\tlet line = this.newLine();\n\t\t\t\t\tlet after = document.createTextNode('\\u00A0');\n\t\t\t\t\tline.appendChild(after);\n\t\t\t\t\tthis.selectElement(line.childNodes[0], 0);\n\t\t\t\t} else {\n\t\t\t\t\t// 中文输入标记\n\t\t\t\t\tif (this.compositionFlag) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.submit();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// 删除键\n\t\t\tif (e.keyCode === 8) {\n\t\t\t\tconsole.log(\"delete\")\n\t\t\t\t// 等待dom更新\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tlet s = this.safeGetInnerHTML(this.$refs.content).trim();\n\t\t\t\t\t// 空dom时，需要刷新dom\n\t\t\t\t\tconsole.log(s);\n\t\t\t\t\tif (s === '' || s === '<br>' || s === '<div>&nbsp;</div>') {\n\t\t\t\t\t\t// 拼接随机长度的空格，以刷新dom\n\t\t\t\t\t\tthis.empty();\n\t\t\t\t\t\tthis.isEmpty = true;\n\t\t\t\t\t\tthis.selectElement(this.$refs.content);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.isEmpty = false;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\t// at框打开时，上下键移动特殊处理\n\t\t\tif (this.atIng) {\n\t\t\t\tif (e.keyCode === 38) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.$refs.atBox.moveUp();\n\t\t\t\t}\n\t\t\t\tif (e.keyCode === 40) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.$refs.atBox.moveDown();\n\t\t\t\t}\n\t\t\t}\n\n\t\t},\n\t\tonAtSelect(member) {\n\t\t\tthis.atIng = false;\n\t\t\t// 选中输入的 @xx 符\n\t\t\tlet blurRange = this.blurRange;\n\t\t\tlet endContainer = blurRange.endContainer\n\t\t\tlet startOffset = endContainer.data.indexOf(\"@\" + this.atSearchText);\n\t\t\tlet endOffset = startOffset + this.atSearchText.length + 1;\n\t\t\tblurRange.setStart(blurRange.endContainer, startOffset);\n\t\t\tblurRange.setEnd(blurRange.endContainer, endOffset);\n\t\t\tblurRange.deleteContents()\n\t\t\tblurRange.collapse();\n\t\t\tconsole.log(\"onAtSelect\")\n\t\t\tthis.focus();\n\t\t\t// 创建元素节点\n\t\t\tlet element = document.createElement('SPAN')\n\t\t\telement.className = \"chat-at-user\";\n\t\t\telement.dataset.id = member.userId;\n\t\t\telement.contentEditable = 'false'\n\t\t\telement.innerText = `@${member.showNickName}`\n\t\t\tblurRange.insertNode(element)\n\t\t\t// 光标移动到末尾\n\t\t\tblurRange.collapse()\n\n\t\t\t// 插入空格\n\t\t\tlet textNode = document.createTextNode('\\u00A0');\n\t\t\tblurRange.insertNode(textNode);\n\n\t\t\tblurRange.collapse()\n\t\t\tthis.atSearchText = \"\";\n\t\t\tthis.selectElement(textNode, 1);\n\t\t},\n\t\tonEditorInput(e) {\n\t\t\tthis.isEmpty = false;\n\t\t\tthis.changeStored = false;\n\t\t\t\n\t\t\t// 检测 @ 符号\n\t\t\tif (!this.compositionFlag) {\n\t\t\t\tlet selection = window.getSelection()\n\t\t\t\tlet range = selection.getRangeAt(0);\n\t\t\t\t// 截取@后面的名称作为过滤条件，并以空格结束\n\t\t\t\tlet endContainer = range.endContainer;\n\t\t\t\tlet endOffset = range.endOffset;\n\t\t\t\tlet textContent = endContainer.textContent;\n\t\t\t\tlet startIndex = -1;\n\t\t\t\tfor (let i = endOffset; i >= 0; i--) {\n\t\t\t\t\tif (textContent[i] === '@') {\n\t\t\t\t\t\tstartIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 没有at符号，则关闭弹窗\n\t\t\t\tif (startIndex === -1) {\n\t\t\t\t\tthis.$refs.atBox.close();\n\t\t\t\t\tthis.$refs.rooCodePanel.close();\n\t\t\t\t\tthis.rooCodeAtIng = false;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// 检查@符号前是否有内容（判断是否是输入开头）\n\t\t\t\tlet beforeAtText = textContent.substring(0, startIndex).trim();\n\t\t\t\tlet isAtStart = beforeAtText.length === 0;\n\t\t\t\t\n\t\t\t\tlet endIndex = endOffset;\n\t\t\t\tfor (let i = endOffset; i < textContent.length; i++) {\n\t\t\t\t\tif (textContent[i] === ' ') {\n\t\t\t\t\t\tendIndex = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.atSearchText = textContent.substring(startIndex + 1, endIndex).trim();\n\t\t\t\t\n\t\t\t\t// 显示RooCode面板（无论是否有搜索文本）\n\t\t\t\t// 面板会根据搜索文本自动过滤内容\n\t\t\t\tif (!this.rooCodeAtIng) {\n\t\t\t\t\tthis.showRooCodePanel(e);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonBlur(e) {\n\t\t\tthis.updateRange();\n\n\t\t},\n\t\tonMousedown() {\n\t\t\tif (this.atIng) {\n\t\t\t\tthis.$refs.atBox.close();\n\t\t\t\tthis.atIng = false;\n\t\t\t}\n\t\t\tif (this.rooCodeAtIng) {\n\t\t\t\tthis.$refs.rooCodePanel.close();\n\t\t\t\tthis.rooCodeAtIng = false;\n\t\t\t}\n\t\t},\n\t\t// RooCode面板相关方法\n\t\tshowRooCodePanel(e) {\n\t\t\tthis.rooCodeAtIng = true;\n\t\t\tlet selection = window.getSelection()\n\t\t\tlet range = selection.getRangeAt(0)\n\t\t\t\n\t\t\t// 获取光标位置，如果位置无效则使用输入框位置\n\t\t\tlet pos = range.getBoundingClientRect();\n\t\t\t\n\t\t\t// 检查位置是否有效（避免出现在左上角）\n\t\t\tif (!pos || pos.x <= 0 || pos.y <= 0 || pos.width === 0 || pos.height === 0) {\n\t\t\t\t// 使用输入容器的位置作为备选\n\t\t\t\tconst inputContainer = this.$refs.content;\n\t\t\t\tif (inputContainer) {\n\t\t\t\t\tconst containerRect = inputContainer.getBoundingClientRect();\n\t\t\t\t\tpos = {\n\t\t\t\t\t\tx: containerRect.left + 20,\n\t\t\t\t\t\ty: containerRect.top\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tpos = { x: 100, y: 100 };\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.$refs.rooCodePanel.open({\n\t\t\t\tx: pos.x,\n\t\t\t\ty: pos.y\n\t\t\t}, this.onRooCodeSelect.bind(this), null, this.atSearchText);\n\t\t\t// 记录光标所在位置\n\t\t\tthis.updateRange();\n\t\t},\n\t\t// 点击@指示器时重新打开面板\n\t\tonRooCodeMentionClick(result, element) {\n\t\t\tconst rect = element.getBoundingClientRect();\n\t\t\tconst position = {\n\t\t\t\tx: rect.left,\n\t\t\t\ty: rect.top\n\t\t\t};\n\t\t\t\n\t\t\tthis.$refs.rooCodePanel.open(position, (newResult) => {\n\t\t\t\tif (newResult && result && newResult.item && result.item) {\n\t\t\t\t\tconst newId = newResult.item.id || newResult.item.slug || newResult.item.userId;\n\t\t\t\t\tconst oldId = result.item.id || result.item.slug || result.item.userId;\n\t\t\t\t\t\n\t\t\t\t\tif (newId !== oldId) {\n\t\t\t\t\t\tthis.replaceRooCodeMention(element, newResult);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, result);\n\t\t},\n\t\t// 替换@指示器\n\t\treplaceRooCodeMention(oldElement, newResult) {\n\t\t\t// 创建新元素\n\t\t\tlet newElement = document.createElement('SPAN');\n\t\t\tnewElement.className = \"roocode-mention\";\n\t\t\tnewElement.dataset.type = newResult.type;\n\t\t\tnewElement.dataset.itemId = newResult.item.id || newResult.item.slug || newResult.item.userId;\n\t\t\tnewElement.dataset.itemData = JSON.stringify(newResult);\n\t\t\tnewElement.contentEditable = 'false';\n\t\t\tnewElement.innerText = newResult.displayText;\n\t\t\tnewElement.style.cursor = 'pointer';\n\t\t\t\n\t\t\t// 添加点击事件\n\t\t\tnewElement.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.onRooCodeMentionClick(newResult, newElement);\n\t\t\t});\n\t\t\t\n\t\t\t// 替换元素\n\t\t\toldElement.parentNode.replaceChild(newElement, oldElement);\n\t\t\t\n\t\t\t// 更新光标位置\n\t\t\tconst range = document.createRange();\n\t\t\tconst selection = window.getSelection();\n\t\t\trange.setStartAfter(newElement);\n\t\t\trange.collapse(true);\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(range);\n\t\t},\n\t\tonRooCodeSelect(result) {\n\t\t\tthis.rooCodeAtIng = false;\n\t\t\t// 选中输入的 @ 符\n\t\t\tlet blurRange = this.blurRange;\n\t\t\tlet endContainer = blurRange.endContainer;\n\t\t\t\n\t\t\t// 检查endContainer.data是否存在，避免undefined错误\n\t\t\tif (endContainer && endContainer.data && typeof endContainer.data === 'string') {\n\t\t\t\tlet startOffset = endContainer.data.indexOf(\"@\");\n\t\t\t\tif (startOffset >= 0) {\n\t\t\t\t\tlet endOffset = startOffset + 1;\n\t\t\t\t\tblurRange.setStart(blurRange.endContainer, startOffset);\n\t\t\t\t\tblurRange.setEnd(blurRange.endContainer, endOffset);\n\t\t\t\t\tblurRange.deleteContents();\n\t\t\t\t\tblurRange.collapse();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// 如果无法找到@符号，尝试删除选区内容\n\t\t\t\ttry {\n\t\t\t\t\tblurRange.deleteContents();\n\t\t\t\t\tblurRange.collapse();\n\t\t\t\t} catch (e) {\n\t\t\t\t\t// 静默处理DOM操作异常\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis.focus();\n\t\t\t\n\t\t\t// 根据类型创建不同的元素\n\t\t\tlet element;\n\t\t\tif (result.type === 'members') {\n\t\t\t\t// 群成员使用原有的at样式\n\t\t\t\telement = document.createElement('SPAN')\n\t\t\t\telement.className = \"chat-at-user\";\n\t\t\t\telement.dataset.id = result.item.userId;\n\t\t\t\telement.contentEditable = 'false'\n\t\t\t\telement.innerText = result.displayText;\n\t\t\t} else {\n\t\t\t\t// 任务和智能体使用新样式，支持点击交互\n\t\t\t\telement = document.createElement('SPAN')\n\t\t\t\telement.className = \"roocode-mention\";\n\t\t\t\telement.dataset.type = result.type;\n\t\t\t\telement.dataset.itemId = result.item.id || result.item.slug || result.item.userId;\n\t\t\t\telement.dataset.itemData = JSON.stringify(result); // 保存完整的结果数据\n\t\t\t\telement.contentEditable = 'false'\n\t\t\t\telement.innerText = result.displayText;\n\t\t\t\telement.style.cursor = 'pointer'; // 添加手型光标\n\t\t\t\t\n\t\t\t\t// 添加点击事件\n\t\t\t\telement.addEventListener('click', (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.onRooCodeMentionClick(result, element);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tblurRange.insertNode(element)\n\t\t\t// 光标移动到末尾\n\t\t\tblurRange.collapse()\n\n\t\t\t// 插入空格\n\t\t\tlet textNode = document.createTextNode('\\u00A0');\n\t\t\tblurRange.insertNode(textNode);\n\n\t\t\tblurRange.collapse()\n\t\t\tthis.selectElement(textNode, 1);\n\t\t},\n\t\tinsertEmoji(emojiText) {\n\t\t\tlet emojiElement = document.createElement('img');\n\t\t\temojiElement.className = 'emoji-normal no-text';\n\t\t\temojiElement.dataset.emojiCode = emojiText;\n\t\t\temojiElement.src = this.$emo.textToUrl(emojiText);\n\n\t\t\tlet blurRange = this.blurRange;\n\t\t\tif (!blurRange) {\n\t\t\t\tthis.focus();\n\t\t\t\tthis.updateRange();\n\t\t\t\tblurRange = this.blurRange;\n\t\t\t}\n\t\t\tif (blurRange.startContainer !== blurRange.endContainer || blurRange.startOffset !== blurRange.endOffset) {\n\t\t\t\tblurRange.deleteContents();\n\t\t\t}\n\t\t\tblurRange.insertNode(emojiElement);\n\t\t\tblurRange.collapse()\n\n\t\t\tlet textNode = document.createTextNode('\\u00A0');\n\t\t\tblurRange.insertNode(textNode)\n\t\t\tblurRange.collapse()\n\n\t\t\tthis.selectElement(textNode);\n\t\t\tthis.updateRange();\n\t\t\tthis.isEmpty = false;\n\t\t},\n\t\tgenerateId() {\n\t\t\treturn this.currentId++;\n\t\t},\n\t\tcreateFile(filePush) {\n\t\t\tlet file = filePush.file;\n\t\t\tlet fileId = filePush.fileId;\n\t\t\tlet container = document.createElement('div');\n\t\t\tcontainer.className = 'chat-file-container no-text';\n\t\t\tcontainer.contentEditable = 'false';\n\t\t\tcontainer.dataset.fileId = fileId;\n\n\t\t\tlet left = document.createElement('div');\n\t\t\tleft.className = 'file-position-left';\n\t\t\tcontainer.appendChild(left);\n\n\t\t\tlet icon = document.createElement('div');\n\t\t\ticon.className = 'el-icon-document';\n\t\t\tleft.appendChild(icon);\n\n\t\t\tlet right = document.createElement('div');\n\t\t\tright.className = 'file-position-right';\n\t\t\tcontainer.appendChild(right);\n\n\t\t\tlet fileName = document.createElement('div');\n\t\t\tfileName.className = 'file-name';\n\t\t\tfileName.innerText = file.name;\n\n\t\t\tlet fileSize = document.createElement('div');\n\t\t\tfileSize.className = 'file-size';\n\t\t\tfileSize.innerText = this.sizeConvert(file.size);\n\n\t\t\tright.appendChild(fileName);\n\t\t\tright.appendChild(fileSize);\n\n\t\t\treturn container;\n\t\t},\n\t\tsizeConvert(len) {\n\t\t\tif (len < 1024) {\n\t\t\t\treturn len + 'B';\n\t\t\t} else if (len < 1024 * 1024) {\n\t\t\t\treturn (len / 1024).toFixed(2) + 'KB';\n\t\t\t} else if (len < 1024 * 1024 * 1024) {\n\t\t\t\treturn (len / 1024 / 1024).toFixed(2) + 'MB';\n\t\t\t} else {\n\t\t\t\treturn (len / 1024 / 1024 / 1024).toFixed(2) + 'GB';\n\t\t\t}\n\t\t},\n\t\tupdateRange() {\n\t\t\tlet selection = window.getSelection();\n\t\t\tthis.blurRange = selection.getRangeAt(0);\n\t\t},\n\t\tnewLine() {\n\t\t\tlet selection = window.getSelection();\n\t\t\tlet range = selection.getRangeAt(0);\n\t\t\tlet divElement = document.createElement('div');\n\t\t\tlet endContainer = range.endContainer;\n\t\t\tlet parentElement = endContainer.parentElement;\n\t\t\tif (parentElement.parentElement === this.$refs.content) {\n\t\t\t\tthis.safeSetInnerHTML(divElement, endContainer.textContent.substring(range.endOffset).trim());\n\t\t\t\tendContainer.textContent = endContainer.textContent.substring(0, range.endOffset);\n\t\t\t\t// 插入到当前div（当前行）后面\n\t\t\t\tparentElement.insertAdjacentElement('afterend', divElement);\n\t\t\t} else {\n\t\t\t\tthis.safeSetInnerHTML(divElement, '');\n\t\t\t\tthis.$refs.content.append(divElement);\n\t\t\t}\n\t\t\treturn divElement;\n\t\t},\n\t\tclear() {\n\t\t\tthis.empty();\n\t\t\tthis.imageList = [];\n\t\t\tthis.fileList = [];\n\t\t},\n\t\tempty() {\n\t\t\tthis.safeSetInnerHTML(this.$refs.content, \"\");\n\t\t\t// 修复：清空后直接创建新的div，不依赖当前选区\n\t\t\tlet divElement = document.createElement('div');\n\t\t\tthis.safeSetInnerHTML(divElement, '');\n\t\t\tthis.$refs.content.append(divElement);\n\t\t\t\n\t\t\tlet after = document.createTextNode('\\u00A0');\n\t\t\tdivElement.appendChild(after);\n\t\t\tthis.$nextTick(() => this.selectElement(after));\n\t\t},\n\t\tshowAtBox(e) {\n\t\t\tthis.atIng = true;\n\t\t\t// show之后会自动更新当前搜索的text\n\t\t\t// this.atSearchText = \"\";\n\t\t\tlet selection = window.getSelection()\n\t\t\tlet range = selection.getRangeAt(0)\n\t\t\t// 光标所在坐标\n\t\t\tlet pos = range.getBoundingClientRect();\n\t\t\tthis.$refs.atBox.open({\n\t\t\t\tx: pos.x,\n\t\t\t\ty: pos.y\n\t\t\t})\n\t\t\t// 记录光标所在位置\n\t\t\tthis.updateRange();\n\t\t},\n\t\thtml2Escape(strHtml) {\n\t\t\treturn strHtml.replace(/[<>&\"]/g, function (c) {\n\t\t\t\treturn {\n\t\t\t\t\t'<': '&lt;',\n\t\t\t\t\t'>': '&gt;',\n\t\t\t\t\t'&': '&amp;',\n\t\t\t\t\t'\"': '&quot;'\n\t\t\t\t}[c];\n\t\t\t});\n\t\t},\n\t\tsubmit() {\n\t\t\tconsole.log('[ChatInput] 📤 开始提交消息...');\n\t\t\t\n\t\t\tlet nodes = this.$refs.content.childNodes;\n\t\t\tlet fullList = [];\n\t\t\tlet tempText = '';\n\t\t\tlet atUserIds = [];\n\t\t\t\n\t\t\tlet each = (nodes) => {\n\t\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\t\tlet node = nodes[i];\n\t\t\t\t\tif (!node) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (node.nodeType === 3) {\n\t\t\t\t\t\ttempText += this.html2Escape(node.textContent);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tlet nodeName = node.nodeName.toLowerCase();\n\t\t\t\t\tif (nodeName === 'script') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tlet text = tempText.trim();\n\t\t\t\t\tif (nodeName === 'img') {\n\t\t\t\t\t\tlet imgId = node.dataset.imgId;\n\t\t\t\t\t\tif (imgId) {\n\t\t\t\t\t\t\tif (text) {\n\t\t\t\t\t\t\t\tfullList.push({\n\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\tcontent: text,\n\t\t\t\t\t\t\t\t\tatUserIds: [...atUserIds] // 复制数组避免引用问题\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\ttempText = '';\n\t\t\t\t\t\t\t\tatUserIds = []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfullList.push({\n\t\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\t\tcontent: this.imageList[imgId]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tlet emojiCode = node.dataset.emojiCode;\n\t\t\t\t\t\t\ttempText += emojiCode;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (nodeName === 'div') {\n\t\t\t\t\t\tlet fileId = node.dataset.fileId\n\t\t\t\t\t\t// 文件\n\t\t\t\t\t\tif (fileId) {\n\t\t\t\t\t\t\tif (text) {\n\t\t\t\t\t\t\t\tfullList.push({\n\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\tcontent: text,\n\t\t\t\t\t\t\t\t\tatUserIds: [...atUserIds] // 复制数组避免引用问题\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\ttempText = '';\n\t\t\t\t\t\t\t\tatUserIds = []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfullList.push({\n\t\t\t\t\t\t\t\ttype: 'file',\n\t\t\t\t\t\t\t\tcontent: this.fileList[fileId]\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttempText += '\\n';\n\t\t\t\t\t\t\teach(node.childNodes);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (nodeName === 'span') {\n\t\t\t\t\t\tif (node.classList && node.classList.contains('chat-at-user')) {\n\t\t\t\t\t\t\t// 处理@群成员 - 只输出纯文本\n\t\t\t\t\t\t\ttempText += node.innerText || node.textContent;\n\t\t\t\t\t\t\tif (node.dataset.id) {\n\t\t\t\t\t\t\t\tatUserIds.push(node.dataset.id)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (node.classList && node.classList.contains('roocode-mention')) {\n\t\t\t\t\t\t\t// 处理@任务和@智能体 - 需要包含零宽编码\n\t\t\t\t\t\t\t// 尝试从保存的数据中获取包含零宽编码的原始displayText\n\t\t\t\t\t\t\tif (node.dataset.itemData) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tconst itemData = JSON.parse(node.dataset.itemData);\n\t\t\t\t\t\t\t\t\tif (itemData.displayText) {\n\t\t\t\t\t\t\t\t\t\t// 使用包含零宽编码的原始displayText\n\t\t\t\t\t\t\t\t\t\ttempText += itemData.displayText;\n\t\t\t\t\t\t\t\t\t\tconsole.log('[ChatInput] 使用包含零宽编码的displayText:', {\n\t\t\t\t\t\t\t\t\t\t\tvisible: node.innerText,\n\t\t\t\t\t\t\t\t\t\t\tfullLength: itemData.displayText.length\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// 降级处理\n\t\t\t\t\t\t\t\t\t\ttempText += node.innerText || node.textContent;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\t\tconsole.error('[ChatInput] 解析itemData失败:', e);\n\t\t\t\t\t\t\t\t\ttempText += node.innerText || node.textContent;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t// 没有保存的数据，使用可见文本（可能丢失零宽编码）\n\t\t\t\t\t\t\t\ttempText += node.innerText || node.textContent;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if(node.outerHTML) {\n\t\t\t\t\t\t\ttempText += node.outerHTML;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\teach(nodes);\n\t\t\t\n\t\t\tlet text = tempText.trim();\n\t\t\tif (text !== '') {\n\t\t\t\tfullList.push({\n\t\t\t\t\ttype: 'text',\n\t\t\t\t\tcontent: text,\n\t\t\t\t\tatUserIds: [...atUserIds] // 复制数组避免引用问题\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log('[ChatInput] 📦 构建的消息列表:', {\n\t\t\t\tcount: fullList.length,\n\t\t\t\titems: fullList.map(item => ({\n\t\t\t\t\ttype: item.type,\n\t\t\t\t\tcontentLength: typeof item.content === 'string' ? item.content.length : 'object',\n\t\t\t\t\thasAtUsers: item.atUserIds && item.atUserIds.length > 0\n\t\t\t\t}))\n\t\t\t});\n\t\t\t\n\t\t\t// 🔧 确保有内容才发送\n\t\t\tif (fullList.length === 0) {\n\t\t\t\tconsole.warn('[ChatInput] ⚠️ 没有内容可以发送');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconsole.log(`[ChatInput] ✅ [${new Date().toISOString()}] 触发submit事件`);\n\t\t\tthis.$emit('submit', fullList);\n\t\t\t\n\t\t\t// 🔧 发送后清空输入框和任务续问状态\n\t\t\tconsole.log(`[ChatInput] 🧹 [${new Date().toISOString()}] 清空输入框和任务续问状态`);\n\t\t\tthis.empty();\n\t\t\tthis.isEmpty = true;\n\t\t\t\n\t\t\t// 清除任务续问状态\n\t\t\tthis.taskContinuation = null;\n\t\t\tthis.isContinuationActive = false;\n\t\t},\n\t\tfocus() {\n\t\t\tthis.$refs.content.focus();\n\t\t},\n\t\t// 🔧 拖拽事件处理已迁移到父级EditorChat组件统一管理\n\t\t// ChatInput专注于业务逻辑，不再直接处理DOM拖拽事件\n\t\thandleDroppedFiles(files) {\n\t\t\tif (!files || files.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconst processedFiles = [];\n\t\t\t\n\t\t\t// 处理每个文件\n\t\t\tfor (let i = 0; i < files.length; i++) {\n\t\t\t\tconst file = files[i];\n\t\t\t\t\n\t\t\t\t// 检查文件大小限制（例如：500MB）\n\t\t\t\tconst maxSize = 500 * 1024 * 1024; // 500MB\n\t\t\t\tif (file.size > maxSize) {\n\t\t\t\t\tthis.$message.error(`文件 \"${file.name}\" 超过100MB大小限制`);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tconsole.log('处理文件:', file.name, '类型:', file.type, '大小:', this.sizeConvert(file.size));\n\t\t\t\t\n\t\t\t\t// 判断文件类型并处理\n\t\t\t\tif (this.isImageFile(file)) {\n\t\t\t\t\t// 图片文件处理\n\t\t\t\t\tconst imagePush = {\n\t\t\t\t\t\tfileId: this.generateId(),\n\t\t\t\t\t\tfile: file,\n\t\t\t\t\t\turl: URL.createObjectURL(file)\n\t\t\t\t\t};\n\t\t\t\t\tthis.imageList[imagePush.fileId] = imagePush;\n\t\t\t\t\tprocessedFiles.push({\n\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\tcontent: imagePush\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// 普通文件处理\n\t\t\t\t\tconst filePush = {\n\t\t\t\t\t\tfileId: this.generateId(),\n\t\t\t\t\t\tfile: file\n\t\t\t\t\t};\n\t\t\t\t\tthis.fileList[filePush.fileId] = filePush;\n\t\t\t\t\tprocessedFiles.push({\n\t\t\t\t\t\ttype: 'file',\n\t\t\t\t\t\tcontent: filePush\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// 自动发送拖拽的文件\n\t\t\tif (processedFiles.length > 0) {\n\t\t\t\tconsole.log('自动发送拖拽文件:', processedFiles);\n\t\t\t\t\n\t\t\t\t// 触发提交事件\n\t\t\t\tthis.$emit('submit', processedFiles);\n\t\t\t\t\n\t\t\t\t// 显示成功提示\n\t\t\t\tconst fileCount = processedFiles.length;\n\t\t\t\tconst imageCount = processedFiles.filter(f => f.type === 'image').length;\n\t\t\t\tconst documentCount = processedFiles.filter(f => f.type === 'file').length;\n\t\t\t\t\n\t\t\t\tlet message = `已发送${fileCount}个文件`;\n\t\t\t\tif (imageCount > 0 && documentCount > 0) {\n\t\t\t\t\tmessage = `已发送${imageCount}张图片和${documentCount}个文档`;\n\t\t\t\t} else if (imageCount > 0) {\n\t\t\t\t\tmessage = `已发送${imageCount}张图片`;\n\t\t\t\t} else if (documentCount > 0) {\n\t\t\t\t\tmessage = `已发送${documentCount}个文档`;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.$message.success(message);\n\t\t\t\t\n\t\t\t\t// 清空输入区域（可选）\n\t\t\t\t// this.clear();\n\t\t\t} else {\n\t\t\t\tthis.$message.warning('没有有效的文件可以发送');\n\t\t\t}\n\t\t},\n\t\tisImageFile(file) {\n\t\t\tconst imageTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/bmp', 'image/webp'];\n\t\t\treturn imageTypes.includes(file.type) || /\\.(jpg|jpeg|png|gif|bmp|webp)$/i.test(file.name);\n\t\t},\n\t\t\n\t\t// 无缝任务续问功能\n\t\tsetTaskContinuation(taskInfo) {\n\t\t\tconsole.log(`[ChatInput] 🎯 [${new Date().toISOString()}] 设置任务续问:`, taskInfo);\n\t\t\tthis.taskContinuation = taskInfo;\n\t\t\tthis.isContinuationActive = true;\n\t\t\t\n\t\t\t// 自动填充任务提及\n\t\t\tthis.fillTaskMention(taskInfo);\n\t\t},\n\t\t\n\t\tfillTaskMention(taskInfo) {\n\t\t\tconst editor = this.$refs.content;\n\t\t\tif (!editor) return;\n\t\t\t\n\t\t\t// 清空编辑器\n\t\t\tthis.empty();\n\t\t\t\n\t\t\t// taskInfo.name 是任务名（可能带零宽编码）\n\t\t\t// 需要清理旧的零宽编码，然后生成新的包含taskId的零宽编码\n\t\t\tconst { MentionHelper, ZeroWidthEncoder } = require('@/utils/zeroWidthEncoder.js');\n\t\t\t\n\t\t\t// 清理任务名中的旧零宽编码\n\t\t\tconst cleanTaskName = ZeroWidthEncoder.cleanText(taskInfo.name);\n\t\t\t\n\t\t\t// 获取路由信息\n\t\t\tconst senderTerminal = this.$store.getters.getCurrentTerminal ? this.$store.getters.getCurrentTerminal() : 0;\n\t\t\tconst activeChat = this.$store.state.activeChat;\n\t\t\tlet targetId = activeChat ? activeChat.targetId : null;\n\t\t\tif (!targetId && activeChat && activeChat.isTerminalChat) {\n\t\t\t\tconst currentUserId = this.$store.state.userStore.userInfo?.id;\n\t\t\t\tconst targetTerminal = activeChat.senderTerminal;\n\t\t\t\tif (currentUserId && targetTerminal !== undefined) {\n\t\t\t\t\ttargetId = `${currentUserId}_${targetTerminal}`;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst chatType = activeChat ? activeChat.type : 'PRIVATE';\n\t\t\t\n\t\t\t// 生成新的带taskId的零宽编码\n\t\t\tconst displayText = MentionHelper.createTaskMention(\n\t\t\t\tcleanTaskName,\n\t\t\t\ttaskInfo.id,  // 这是关键！包含taskId\n\t\t\t\ttargetId,\n\t\t\t\tchatType,\n\t\t\t\tsenderTerminal\n\t\t\t);\n\t\t\t\n\t\t\tconsole.log('[ChatInput] fillTaskMention 生成新的零宽编码:', {\n\t\t\t\tcleanTaskName: cleanTaskName,\n\t\t\t\ttaskId: taskInfo.id,\n\t\t\t\ttargetId: targetId,\n\t\t\t\tchatType: chatType,\n\t\t\t\tsenderTerminal: senderTerminal,\n\t\t\t\tdisplayTextLength: displayText.length,\n\t\t\t\thasZeroWidth: displayText.length > displayText.replace(/[\\u200B-\\u200D\\u2060-\\u2069\\u180E\\uFEFF]/g, '').length\n\t\t\t});\n\t\t\t\n\t\t\t// 构建result对象（复用现有格式）\n\t\t\tconst result = {\n\t\t\t\ttype: 'task',\n\t\t\t\titem: {\n\t\t\t\t\tid: taskInfo.id,\n\t\t\t\t\tname: taskInfo.name\n\t\t\t\t},\n\t\t\t\tdisplayText: displayText\n\t\t\t};\n\t\t\t\n\t\t\t// 创建正确的roocode-mention元素（复用现有逻辑）\n\t\t\tconst element = document.createElement('SPAN');\n\t\t\telement.className = \"roocode-mention\";\n\t\t\telement.dataset.type = result.type;\n\t\t\telement.dataset.itemId = result.item.id;\n\t\t\telement.dataset.itemData = JSON.stringify(result);\n\t\t\telement.contentEditable = 'false';\n\t\t\telement.innerText = displayText;\n\t\t\telement.style.cursor = 'pointer';\n\t\t\t\n\t\t\t// 添加点击事件\n\t\t\telement.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.onRooCodeMentionClick(result, element);\n\t\t\t});\n\t\t\t\n\t\t\t// 将元素插入到编辑器\n\t\t\tconst div = editor.querySelector('div') || editor;\n\t\t\tdiv.appendChild(element);\n\t\t\t\n\t\t\t// 添加空格以便用户继续输入\n\t\t\tconst spaceNode = document.createTextNode(' ');\n\t\t\tdiv.appendChild(spaceNode);\n\t\t\t\n\t\t\t// 设置placeholder样式和焦点\n\t\t\teditor.setAttribute('data-placeholder', '继续提问...');\n\t\t\t\n\t\t\t// 等待DOM更新后设置焦点和光标到末尾\n\t\t\tthis.$nextTick(() => {\n\t\t\t\teditor.focus();\n\t\t\t\t// 将光标设置到空格之后\n\t\t\t\tconst range = document.createRange();\n\t\t\t\tconst selection = window.getSelection();\n\t\t\t\trange.setStartAfter(spaceNode);\n\t\t\t\trange.collapse(true);\n\t\t\t\tselection.removeAllRanges();\n\t\t\t\tselection.addRange(range);\n\t\t\t});\n\t\t\t\n\t\t\t// 更新状态\n\t\t\tthis.isEmpty = false;\n\t\t\tthis.onEditorInput();\n\t\t\t\n\t\t\tconsole.log('[ChatInput] 任务续问已设置完成（使用正确的DOM元素）');\n\t\t},\n\t\t\n\t\tsetCursorToEnd(element) {\n\t\t\tconst range = document.createRange();\n\t\t\tconst selection = window.getSelection();\n\t\t\trange.selectNodeContents(element);\n\t\t\trange.collapse(false);\n\t\t\tselection.removeAllRanges();\n\t\t\tselection.addRange(range);\n\t\t},\n\t\t\n\t\t// 🔧 拖拽监听器管理已迁移到父级EditorChat组件\n\t\t// 这里保留文件处理业务逻辑，供父级调用\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.chat-input-area {\n\twidth: 100%;\n\theight: 100%;\n\tposition: relative;\n\n\t.edit-chat-container {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\toutline: none;\n\t\tpadding: 5px;\n\t\tline-height: 26px;\n\t\tfont-size: var(--im-font-size);\n\t\ttext-align: left;\n\t\toverflow-y: auto;\n\t\t\n\t\t// 任务续问状态下的placeholder样式\n\t\t&[data-placeholder=\"继续提问...\"]:after {\n\t\t\tcontent: attr(data-placeholder);\n\t\t\tcolor: #999;\n\t\t\tfont-style: italic;\n\t\t\tpointer-events: none;\n\t\t\tposition: absolute;\n\t\t\ttop: 28px;\n\t\t\tleft: 5px;\n\t\t\tz-index: 1;\n\t\t}\n\n\t\t// 单独一行时，无法在前面输入的bug\n\t\t>div:before {\n\t\t\tcontent: \"\\00a0\";\n\t\t\tfont-size: 14px;\n\t\t\tposition: absolute;\n\t\t\ttop: 0;\n\t\t\tleft: 0;\n\t\t}\n\n\t\t.chat-image {\n\t\t\tdisplay: block;\n\t\t\tmax-width: 200px;\n\t\t\tmax-height: 100px;\n\t\t\tborder: 1px solid #e6e6e6;\n\t\t\tcursor: pointer;\n\t\t}\n\n\t\t.chat-file-container {\n\t\t\tmax-width: 65%;\n\t\t\tpadding: 10px;\n\t\t\tborder: 2px solid #587ff0;\n\t\t\tdisplay: flex;\n\t\t\tbackground: #eeeC;\n\t\t\tborder-radius: 10px;\n\n\t\t\t.file-position-left {\n\t\t\t\tdisplay: flex;\n\t\t\t\twidth: 80px;\n\t\t\t\tjustify-content: center;\n\t\t\t\talign-items: center;\n\n\t\t\t\t.el-icon-document {\n\t\t\t\t\tfont-size: 40px;\n\t\t\t\t\ttext-align: center;\n\t\t\t\t\tcolor: #d42e07;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.file-position-right {\n\t\t\t\tflex: 1;\n\n\t\t\t\t.file-name {\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\tcolor: #66b1ff;\n\t\t\t\t}\n\n\t\t\t\t.file-size {\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tfont-weight: 600;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t.chat-at-user {\n\t\t\tcolor: #00f;\n\t\t\tborder-radius: 3px;\n\t\t}\n\n\t\t.roocode-mention {\n\t\t\tdisplay: inline-block;\n\t\t\tpadding: 2px 6px;\n\t\t\tmargin: 0 2px;\n\t\t\tbackground: transparent;\n\t\t\tcolor: #409eff;\n\t\t\tborder: 1px solid #d0d0d0;\n\t\t\tborder-radius: 3px;\n\t\t\tfont-size: 14px;\n\t\t\tcursor: pointer;\n\t\t\tuser-select: none;\n\t\t\ttransition: all 0.2s ease;\n\t\t\t\n\t\t\t&:hover {\n\t\t\t\tborder-color: #409eff;\n\t\t\t\tbackground: #f0f7ff;\n\t\t\t}\n\t\t\t\n\t\t\t&:active {\n\t\t\t\tbackground: #e6f2ff;\n\t\t\t}\n\t\t}\n\t}\n\n\t.edit-chat-container>div:nth-of-type(1):after {\n\t\tcontent: '请输入消息（按Ctrl+Enter或Shift+Enter键换行）';\n\t\tcolor: gray;\n\t}\n\n\t.edit-chat-container.not-empty>div:nth-of-type(1):after {\n\t\tcontent: none;\n\t}\n\n\t.drag-overlay {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tz-index: 999;\n\n\t\t.drag-content {\n\t\t\tbackground-color: white;\n\t\t\tpadding: 20px;\n\t\t\tborder-radius: 10px;\n\t\t\ttext-align: center;\n\t\t\tbox-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n\n\t\t\ti {\n\t\t\t\tfont-size: 40px;\n\t\t\t\tcolor: #587ff0;\n\t\t\t\tmargin-bottom: 10px;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\tp {\n\t\t\t\tmargin: 5px 0;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tcolor: #333;\n\t\t\t}\n\n\t\t\t.drag-tip {\n\t\t\t\tfont-size: 14px;\n\t\t\t\tcolor: #666;\n\t\t\t\tmargin-top: 8px;\n\t\t\t}\n\t\t}\n\t}\n\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatInput.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChatInput.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./ChatInput.vue?vue&type=template&id=4859927b\"\nimport script from \"./ChatInput.vue?vue&type=script&lang=js\"\nexport * from \"./ChatInput.vue?vue&type=script&lang=js\"\nimport style0 from \"./ChatInput.vue?vue&type=style&index=0&id=4859927b&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/18.c47c412d.gif\";","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"friend-item\",class:_vm.active ? 'active' : '',on:{\"contextmenu\":function($event){$event.preventDefault();return _vm.showRightMenu($event)},\"dblclick\":_vm.onDoubleClick}},[_c('div',{staticClass:\"friend-avatar\"},[_c('head-image',{attrs:{\"size\":42,\"name\":_vm.friend.nickName,\"url\":_vm.friend.headImage,\"online\":_vm.friend.online}})],1),_c('div',{staticClass:\"friend-info\"},[_c('div',{staticClass:\"friend-name\"},[_vm._v(_vm._s(_vm.friend.nickName))]),_c('div',{staticClass:\"friend-online\"},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.friend.onlineWeb),expression:\"friend.onlineWeb\"}],staticClass:\"el-icon-monitor online\",attrs:{\"title\":\"电脑设备在线\"}},[_c('span',{staticClass:\"online-icon\"})]),_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.friend.onlineApp),expression:\"friend.onlineApp\"}],staticClass:\"el-icon-mobile-phone online\",attrs:{\"title\":\"移动设备在线\"}},[_c('span',{staticClass:\"online-icon\"})])])]),_c('right-menu',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.menu && _vm.rightMenu.show),expression:\"menu && rightMenu.show\"}],attrs:{\"pos\":_vm.rightMenu.pos,\"items\":_vm.rightMenu.items},on:{\"close\":function($event){_vm.rightMenu.show = false},\"select\":_vm.onSelectMenu}}),_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n\t<div class=\"friend-item\" :class=\"active ? 'active' : ''\" @contextmenu.prevent=\"showRightMenu($event)\" @dblclick=\"onDoubleClick\">\n\t\t<div class=\"friend-avatar\">\n\t\t\t<head-image :size=\"42\" :name=\"friend.nickName\" :url=\"friend.headImage\" :online=\"friend.online\">\n\t\t\t</head-image>\n\t\t</div>\n\t\t<div class=\"friend-info\">\n\t\t\t<div class=\"friend-name\">{{ friend.nickName }}</div>\n\t\t\t<div class=\"friend-online\">\n\t\t\t\t<i class=\"el-icon-monitor online\" v-show=\"friend.onlineWeb\" title=\"电脑设备在线\">\n\t\t\t\t\t<span class=\"online-icon\"></span>\n\t\t\t\t</i>\n\t\t\t\t<i class=\"el-icon-mobile-phone online\" v-show=\"friend.onlineApp\" title=\"移动设备在线\">\n\t\t\t\t\t<span class=\"online-icon\"></span>\n\t\t\t\t</i>\n\t\t\t</div>\n\t\t</div>\n\t\t<right-menu v-show=\"menu && rightMenu.show\" :pos=\"rightMenu.pos\" :items=\"rightMenu.items\"\n\t\t\t@close=\"rightMenu.show = false\" @select=\"onSelectMenu\"></right-menu>\n\t\t<slot></slot>\n\t</div>\n</template>\n\n<script>\nimport HeadImage from '../common/HeadImage.vue';\nimport RightMenu from \"../common/RightMenu.vue\";\n\nexport default {\n\tname: \"frinedItem\",\n\tcomponents: {\n\t\tHeadImage,\n\t\tRightMenu\n\t},\n\tdata() {\n\t\treturn {\n\t\t\trightMenu: {\n\t\t\t\tshow: false,\n\t\t\t\tpos: {\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0\n\t\t\t\t},\n\t\t\t\titems: [{\n\t\t\t\t\tkey: 'CHAT',\n\t\t\t\t\tname: '发送消息',\n\t\t\t\t\ticon: 'el-icon-chat-dot-round'\n\t\t\t\t}, {\n\t\t\t\t\tkey: 'DELETE',\n\t\t\t\t\tname: '删除好友',\n\t\t\t\t\ticon: 'el-icon-delete'\n\t\t\t\t}]\n\t\t\t}\n\t\t}\n\t},\n\tmethods: {\n\t\tshowRightMenu(e) {\n\t\t\tthis.rightMenu.pos = {\n\t\t\t\tx: e.x,\n\t\t\t\ty: e.y\n\t\t\t};\n\t\t\tthis.rightMenu.show = \"true\";\n\t\t},\n\t\tonSelectMenu(item) {\n\t\t\tthis.$emit(item.key.toLowerCase(), this.friend);\n\t\t},\n\t\tonDoubleClick() {\n\t\t\tthis.$emit('chat', this.friend);\n\t\t}\n\t},\n\tprops: {\n\t\tactive: {\n\t\t\ttype: Boolean\n\t\t},\n\t\tfriend: {\n\t\t\ttype: Object\n\t\t},\n\t\tmenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t}\n\n}\n</script>\n\n<style scope lang=\"scss\">\n.friend-item {\n\theight: 50px;\n\tdisplay: flex;\n\tposition: relative;\n\tpadding: 5px 10px;\n\talign-items: center;\n\twhite-space: nowrap;\n\tcursor: pointer;\n\n\t&:hover {\n\t\tbackground-color: var(--im-background-active);\n\t}\n\n\t&.active {\n\t\tbackground-color: var(--im-background-active-dark);\n\t}\n\n\t.friend-avatar {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t}\n\n\t.friend-info {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tpadding-left: 10px;\n\t\ttext-align: left;\n\n\t\t.friend-name {\n\t\t\tfont-size: var(--im-font-size);\n\t\t\twhite-space: nowrap;\n\t\t\toverflow: hidden;\n\t\t}\n\n\t\t.friend-online {\n\t\t\t.online {\n\t\t\t\tfont-weight: bold;\n\t\t\t\tpadding-right: 2px;\n\t\t\t\tfont-size: 16px;\n\t\t\t\tposition: relative;\n\t\t\t}\n\n\t\t\t.online-icon {\n\t\t\t\tposition: absolute;\n\t\t\t\tright: 0;\n\t\t\t\tbottom: 0;\n\t\t\t\twidth: 6px;\n\t\t\t\theight: 6px;\n\t\t\t\tbackground: limegreen;\n\t\t\t\tborder-radius: 50%;\n\t\t\t\tborder: 1px solid white;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendItem.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??ref--13-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./FriendItem.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./FriendItem.vue?vue&type=template&id=1a2afe26\"\nimport script from \"./FriendItem.vue?vue&type=script&lang=js\"\nexport * from \"./FriendItem.vue?vue&type=script&lang=js\"\nimport style0 from \"./FriendItem.vue?vue&type=style&index=0&id=1a2afe26&prod&scope=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}